define("modules/clean/react/client/components/field_error",["require","exports","tslib","classnames","create-react-class","react","prop-types","react-addons-pure-render-mixin"],(function(e,t,n,o,r,i,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importDefault(r),i=n.__importDefault(i),s=n.__importStar(s),a=n.__importStar(a);var c=s.string,_=s.object,p=s.bool,u=s.oneOfType,l=s.array,d=r.default({displayName:"FieldError",mixins:[a],propTypes:{error:u([c,l]),children:_.isRequired,className:c,id:c,clearOnChange:p},getDefaultProps:function(){return{error:null,clearOnChange:!0}},getInitialState:function(){return{currentError:this.props.error}},componentWillReceiveProps:function(e){return this.setState({currentError:e.error})},_onContentChange:function(){if(this.props.clearOnChange)return this.setState({currentError:null})},render:function(){var e,t=o.default(((e={"validated-field":!0,"validated-field--error":null!=this.state.currentError})[this.props.className]=null!=this.props.className,e)),n=o.default({"validated-field__message":!0,"validated-field__message--error":null!=this.state.currentError});return i.default.createElement("div",{className:t,onChange:this._onContentChange},this.props.children,i.default.createElement("p",{className:n,id:this.props.id},this.state.currentError))}});t.default=d})),define("modules/clean/react/client/services",["require","exports","modules/clean/ajax","modules/clean/flux/dispatcher"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r;(function(e){e.WEB_ONLINE="CLIENT_REQUEST:WEB_ONLINE",e.WEB_OFFLINE="CLIENT_REQUEST:WEB_OFFLINE"})(r=t.ClientRequestActionTypes||(t.ClientRequestActionTypes={}));var i=0;t.request=function(e){return new Promise((function(t,s){e.success=function(e){t(e)},e.error=function(e){navigator.onLine||(o.Dispatcher.dispatch({type:r.WEB_OFFLINE}),i||(i=setInterval((function(){navigator.onLine&&(clearInterval(i),i=0,o.Dispatcher.dispatch({type:r.WEB_ONLINE}))}),500))),s(e)},n.WebRequest(e)}))}})),define("modules/clean/react/client/setup_wizard/actions",["require","exports","tslib","modules/clean/bolt","modules/clean/flux/dispatcher","modules/clean/form_util/name_parser","modules/clean/react/client/setup_wizard/constants","modules/clean/react/client/setup_wizard/content","modules/clean/react/client/setup_wizard/roles","modules/clean/react/client/setup_wizard/server","modules/clean/react/client/setup_wizard/services","modules/clean/react/client/setup_wizard/setup_validators","modules/clean/react/client/setup_wizard/store","modules/clean/server_side_client_view_bridge","modules/core/exception","modules/core/i18n","modules/core/notify","modules/core/uri","modules/clean/profile_services/profile_services_constants"],(function(e,t,n,o,r,i,s,a,c,_,p,u,l,d,h,E,S,T,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),i=n.__importDefault(i),c=n.__importStar(c),_=n.__importStar(_),u=n.__importStar(u),l=n.__importDefault(l),d=n.__importStar(d),f=n.__importStar(f);var y=E._("There was a problem completing this request."),m=new((function(){function e(){var e=this;this.showAudioCaptchaInstructions=function(){var e=document.getElementsByClassName("audio-captcha-instructions");e.length>0&&(e[0].style.display="block")},this.tryNeedsCaptcha=function(t,n){l.default.captchaReady()&&("login"===t?_.tryNeedsLoginCaptcha(n).then((function(t){var n=String(t),o=JSON.parse(n);o.needs_captcha&&(e.showAudioCaptchaInstructions(),window.grecaptcha.render("recaptcha_v2_challenge",{sitekey:o.recaptcha_v2_public_key}),e.reportEvent("signin_signin_captcha_shown"))})).catch((function(t){e.reportEvent("signin_signin_captcha_error")})):"signup"===t&&_.tryNeedsSignupCaptcha(n).then((function(t){var n=String(t),o=JSON.parse(n);if(o.needs_captcha){var r=document.getElementById("dropbox-logo");null!=r&&(r.style.marginBottom="25px"),e.showAudioCaptchaInstructions(),window.grecaptcha.render("recaptcha_v2_challenge",{sitekey:o.recaptcha_v2_public_key}),e.reportEvent("signup_signup_captcha_shown")}})).catch((function(t){e.reportEvent("signup_signup_captcha_error")})))},this.getCaptchaResponse=function(){var e=document.getElementsByName("g-recaptcha-response");return e.length>0?e[e.length-1].value:void 0},this.resetCaptcha=function(){if(document.getElementsByName("g-recaptcha-response").length>0){var e=document.getElementsByName("g-recaptcha-response")[0].id.substring(21);return e.length>0?window.grecaptcha.reset(parseInt(e,10)):window.grecaptcha.reset(0),!0}return!1},this.tryDeviceLimitPreauth=function(){e.reportEvent("signin_preauth_clicked");var t=l.default.deviceLimitNonce();null!=t&&(_.tryDeviceLimitPreauth(t,l.default.hostNonce(),l.default.clientInfo(),l.default.tag()).then((function(t){e.authSuccess(t,"signin_preauth"),l.default.currentScreenType()!==s.SetupScreenTypes.DEVICE_LIMIT_LANDING&&e.changeScreen(s.SetupScreenTypes.SIGN_IN)})).catch((function(t){e.authError(t,"signin_preauth"),e.changeScreen(s.SetupScreenTypes.SIGN_IN)})),e.setIsTopmost(!0))},this.trySignIn=function(t,n){void 0===n&&(n=!1);var o,r=n?"signin_signin_verify":"signin_signin";e.reportEvent(r+"_clicked"),o=n?u.validateVerifyForm(t):u.validateSignInForm(l.default.emailTrimmed(),t),e.handleValidationResult(o).then((function(){_.trySignIn(l.default.emailTrimmed(),t,l.default.hostNonce(),l.default.clientInfo(),l.default.tag(),e.getCaptchaResponse(),l.default.providerCheckpointToken(),l.default.provider()).then((function(t){e.authSuccess(t,r)})).catch((function(t){e.resetCaptcha()||e.tryNeedsCaptcha("login",l.default.emailTrimmed()),e.authError(t,r)}))})).catch((function(){e.logFieldErrors(o.errors,r)}))},this.authSuccess=function(t,n,o,r){void 0===o&&(o=0);var i=JSON.parse(String(t));e.authSuccessJson(i,n,o,r)},this.on_success=function(t){switch(t.status){case"OK":p.SetupWizardHostNonceFetcher.stop(),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DROPBOX_PATH,data:t.path}),t.has_secondary&&r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_HAS_SECONDARY,data:t.has_secondary}),t.multi_disabled&&r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_MULTI_DISABLED,data:t.multi_disabled}),t.current_role&&r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_ROLE,data:t.current_role}),t.team&&r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_TEAM,data:t.team}),t.content_starts_online_only&&r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_CONTENT_STARTS_ONLINE_ONLY,data:t.content_starts_online_only}),t.infinite_exposed&&r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_INFINITE_EXPOSED,data:t.infinite_exposed}),t.will_install_kext&&r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_WILL_INSTALL_KEXT,data:t.will_install_kext}),t.is_unconsented&&r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_IS_UNCONSENTED,data:t.is_unconsented}),t.file_provider_enabled&&r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_FILE_PROVIDER_ENABLED,data:t.file_provider_enabled}),t.onboarding_type&&t.onboarding_variant&&r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_ONBOARDING_INFO,data:{onboardingType:t.onboarding_type,onboardingVariant:t.onboarding_variant}}),null!=t.free_space&&null!=t.sync_space_used&&null!=t.total_space&&e.setDiskUsage(t);var n=!0;return t.file_provider_enabled?n=!1:t.post_link_setup_flags&&null!=t.post_link_setup_flags.show_move_dropbox&&(n=t.post_link_setup_flags.show_move_dropbox),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_SHOW_MOVE_DROPBOX,data:n}),e.pushPostLinkScreen(s.SetupScreenTypes.DONE),t.old_name&&t.new_name&&(e.setFolderRename(t),e.pushPostLinkScreen(s.SetupScreenTypes.RENAME)),t.infinite_exposed&&(t.current_role===c.WORK?(e.setDefaultRootPolicy(s.INFINITE_ROOT_POLICY_CHOICE.ADMIN_DEFAULT),e.setAdminDefaultRootPolicy(t.content_starts_online_only?s.INFINITE_ROOT_POLICY.ON_DEMAND:s.INFINITE_ROOT_POLICY.LOCAL)):e.setDefaultRootPolicy(s.INFINITE_ROOT_POLICY_CHOICE.ON_DEMAND),e.pushPostLinkScreen(s.SetupScreenTypes.INFINITE_SETTING)),t.post_link_setup_flags&&t.post_link_setup_flags.require_scale_mitigation?e.pushPostLinkScreen(s.SetupScreenTypes.SCALE_MITIGATION):l.default.isLowDiskSpace()&&!t.infinite_exposed?e.pushPostLinkScreen(s.SetupScreenTypes.LOW_DISK):l.default.isLargeDropbox()&&!t.infinite_exposed&&e.pushPostLinkScreen(s.SetupScreenTypes.LARGE_DROPBOX),e.popPostLinkScreen(),!0;case"PENDING":return!1;default:return S.Notify.error(y),!0}},this.trySignUp=function(t,n){var o=l.default.isGoogleSignUp()?"signup_google_signup":"signup_signup";if(l.default.isPrimary()){e.reportEvent(o+"_clicked");var r=u.validateSignUpForm(l.default.name(),l.default.emailTrimmed(),t,n);e.handleValidationResult(r).then((function(){var r=i.default.splitFullName(l.default.name()),s=r[0],a=r[1];_.trySignUp(s,a,l.default.emailTrimmed(),t,n,l.default.hostNonce(),l.default.clientInfo(),l.default.tag(),l.default.googleSignUpData(),e.getCaptchaResponse()).then((function(t){e.authSuccess(t,o),e.setIsNewAccount(!0)})).catch((function(t){e.resetCaptcha()||e.tryNeedsCaptcha("signup",l.default.emailTrimmed()),e.authError(t,o)}))})).catch((function(){e.logFieldErrors(r.errors,o)})),e.setIsTopmost(!0)}}}return e.prototype.reportEvent=function(e,t){void 0===t&&(t={}),d.SetupWizardReportEvent(e,n.__assign({show_carousel:!!l.default.showCarousel()},t))},e.prototype.ensureClientConnection=function(){r.Dispatcher.dispatch({type:s.SetupActionTypes.ENSURE_CLIENT_CONNECTION})},e.prototype.setDisabledState=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DISABLED_STATE,data:e})},e.prototype.setHostNonce=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_HOST_NONCE,data:e})},e.prototype.setScriptNonce=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_SCRIPT_NONCE,data:e})},e.prototype.setCaptchaReady=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_CAPTCHA_READY,data:e})},e.prototype.setGoogleSignUpData=function(e,t){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_GOOGLE_SIGN_UP_DATA,data:{isGoogleSignUp:!0,emailSig:e,refreshToken:t}})},e.prototype.clearGoogleSignUpData=function(){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_GOOGLE_SIGN_UP_DATA,data:{isGoogleSignUp:!1,emailSig:null,refreshToken:null}})},e.prototype.setIsPrimary=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_IS_PRIMARY,data:e})},e.prototype.setIsNewAccount=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_IS_NEW_ACCOUNT,data:e})},e.prototype.setDealCode=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DEAL_CODE,data:e})},e.prototype.setEmail=function(e){!l.default.isPrimary()&&l.default.emailTrimmed()||r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_EMAIL,data:e})},e.prototype.setName=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_NAME,data:e})},e.prototype.setTeam=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_TEAM,data:e})},e.prototype.setRole=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_ROLE,data:e})},e.prototype.setFolderRename=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_FOLDER_RENAME,data:e})},e.prototype.setDiskUsage=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DISK_USAGE,data:e})},e.prototype.pushPostLinkScreen=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.PUSH_POST_LINK_SCREEN,data:{screenType:e}})},e.prototype.popPostLinkScreen=function(){r.Dispatcher.dispatch({type:s.SetupActionTypes.POP_POST_LINK_SCREEN}),this.setIsTopmost(!0)},e.prototype.changeScreen=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.CHANGE_SCREEN,data:{screenType:e}}),e!==s.SetupScreenTypes.SSO_CODE&&this.setIsTopmost(!0)},e.prototype.setDefaultRootPolicy=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DEFAULT_ROOT_POLICY,data:e})},e.prototype.setAdminDefaultRootPolicy=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_ADMIN_DEFAULT_ROOT_POLICY,data:e})},e.prototype.removeFieldError=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.REMOVE_FIELD_ERROR,data:e}),this.setIsTopmost(!0)},e.prototype.setShowSSO=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_SSO_STATE,data:e})},e.prototype.clearProviderCheckpointToken=function(){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_PROVIDER_CHECKPOINT_TOKEN,data:null})},e.prototype.clearProvider=function(){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_PROVIDER,data:null})},e.prototype.openDropboxFolder=function(){l.default.hasSecondary()?this.reportEvent("done_panel_multiaccount_skip"):this.reportEvent("done_panel_folder_opened"),r.Dispatcher.dispatch({type:s.SetupActionTypes.OPEN_DB_FOLDER})},e.prototype.linkSecondary=function(){this.reportEvent("done_panel_multiaccount_signin_clicked"),r.Dispatcher.dispatch({type:s.SetupActionTypes.LINK_SECONDARY})},e.prototype.resendTwoFactor=function(){_.resendTwoFactor(l.default.checkpointToken()),this.reportEvent("two_factor_auth_send_new_clicked"),S.Notify.success(a.Content.two_factor_resend_sent),this.setIsTopmost(!0)},e.prototype.launchTerms=function(){this.reportEvent("signup_open_terms"),this.setIsTopmost(!1);d.IsBridgeFunctionSupported("openUncredentialedBrowserWithDropboxURL").then((function(e){if(e)return d.OpenUncredentialedBrowserWithDropboxURL("/terms");var t=new T.URI({scheme:"https",authority:"www.dropbox.com",path:"/terms"});d.OpenUncredentialedBrowser(String(t))}))},e.prototype.forgotPassword=function(){this.reportEvent("signin_forgot_password"),this.setIsTopmost(!1);d.IsBridgeFunctionSupported("openUncredentialedBrowserWithDropboxURL").then((function(e){if(e){var t=new T.URI({path:"/forgot",query:{email:l.default.emailTrimmed()}});d.OpenUncredentialedBrowserWithDropboxURL(String(t))}else{t=new T.URI({scheme:"https",authority:"www.dropbox.com",path:"/forgot",query:{email:l.default.emailTrimmed()}});d.OpenUncredentialedBrowser(String(t))}}))},e.prototype.openLostPhoneHelp=function(){this.reportEvent("two_factor_auth_lost_phone_clicked"),this.changeScreen(s.SetupScreenTypes.TWO_FACTOR_RECOVERY)},e.prototype.openMoreHelpTFARecovery=function(){this.setIsTopmost(!1);var e="/c/help/two_step";this.reportEvent("tfa_recovery_need_more_help_clicked"),d.IsBridgeFunctionSupported("openUncredentialedBrowserWithDropboxURL").then((function(t){if(t)d.OpenUncredentialedBrowserWithDropboxURL(e);else{var n=new T.URI({scheme:"https",authority:"www.dropbox.com",path:e});d.OpenUncredentialedBrowser(String(n))}}))},e.prototype.sendPushNotification=function(){var e=this;this.reportEvent("tfa_recovery_send_push_clicked"),_.trySendPushNotification(l.default.checkpointToken()).then((function(t){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_TFA_RECOVERY_TOKEN,data:t.token}),e.reportEvent("tfa_recovery_send_push_success")})).catch((function(t){e.changeScreen(s.SetupScreenTypes.SIGN_IN),void 0===t.message?(S.Notify.error(E._("Unknown error when sending push notification")),e.reportEvent("tfa_recovery_send_push_failed")):S.Notify.error(t.message)}))},e.prototype.handleApprovedPushLoginRequest=function(e){var t=this;return this.reportEvent("tfa_recovery_push_auth_clicked"),new Promise((function(n,o){_.try2faSignIn(l.default.checkpointToken(),e,l.default.hostNonce(),l.default.clientInfo(),l.default.tag()).then((function(e){t.authSuccess(e,"tfa_recovery_push_auth"),n()})).catch((function(e){t.authError(e,"tfa_recovery_push_auth"),o(e?e.message:E._("Error trying to sign in with push notification."))}))}))},e.prototype.submitTFABackupCode=function(e){var t=this,n="tfa_recovery_backup_code_auth";this.reportEvent(n+"_clicked");var o=u.validateTFABackupCodeForm(e);this.handleValidationResult(o).then((function(){_.try2faSignIn(l.default.checkpointToken(),e,l.default.hostNonce(),l.default.clientInfo(),l.default.tag(),!0).then((function(e){t.authSuccess(e,n)})).catch((function(e){t.authError(e,n)}))})).catch((function(){t.logFieldErrors(o.errors,n)}))},e.prototype.submitTFABackupPhoneCode=function(e){var t=this,n="tfa_recovery_backup_phone_auth";this.reportEvent(n+"_clicked");var o=u.validateTFABackupPhoneForm(e);this.handleValidationResult(o).then((function(){_.try2faSignIn(l.default.checkpointToken(),e,l.default.hostNonce(),l.default.clientInfo(),l.default.tag(),!1,!0).then((function(e){t.authSuccess(e,n)})).catch((function(e){t.authError(e,n)}))})).catch((function(){t.logFieldErrors(o.errors,n)}))},e.prototype.tryTextBackup=function(){var e=this;this.reportEvent("tfa_recovery_text_backup_clicked"),_.tryTextBackup(l.default.checkpointToken()).then((function(){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_BACKUP_TEXT_SENT,data:!0}),S.Notify.success(E._("We sent a code to your phone.")),e.reportEvent("tfa_recovery_text_backup_success")})).catch((function(t){void 0===t.message?(S.Notify.error(E._("Unknown error when sending text message")),e.reportEvent("tfa_recovery_text_backup_failed")):("checkpoint_token_invalid"===t.error[".tag"]&&e.changeScreen(s.SetupScreenTypes.SIGN_IN),S.Notify.error(t.message))}))},e.prototype.tryResendBackup=function(){var e=this;this.reportEvent("tfa_recovery_resend_backup_clicked"),_.tryResendBackup(l.default.checkpointToken()).then((function(){S.Notify.success(a.Content.two_factor_resend_sent),e.reportEvent("tfa_recovery_resend_backup_success")})).catch((function(t){void 0===t.message?(S.Notify.error(E._("Unknown error when sending text message")),e.reportEvent("tfa_recovery_resend_backup_failed")):("checkpoint_token_invalid"===t.error[".tag"]&&e.changeScreen(s.SetupScreenTypes.SIGN_IN),S.Notify.error(t.message))}))},e.prototype.trySSO=function(){this.reportEvent("sso_launch_browser"),this.setIsTopmost(!1);d.IsBridgeFunctionSupported("openUncredentialedBrowserWithDropboxURL").then((function(e){if(e){var t=new T.URI({path:"/sso",query:{from_client:"True",login_email:l.default.emailTrimmed()}});d.OpenUncredentialedBrowserWithDropboxURL(String(t))}else{t=new T.URI({scheme:"https",authority:"www.dropbox.com",path:"/sso",query:{from_client:"True",login_email:l.default.emailTrimmed()}});d.OpenUncredentialedBrowser(String(t))}}))},e.prototype.handleValidationResult=function(e){return new Promise((function(t,n){if(!e.valid)return r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_FIELD_ERRORS,data:e.errors}),n(e.errors);r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DISABLED_STATE,data:!0}),r.Dispatcher.dispatch({type:s.SetupActionTypes.CLEAR_GENERIC_ERROR}),t()}))},e.prototype.submitSSOCode=function(e){var t=this;this.reportEvent("sso_auth_clicked");var n=u.validateSSOCodeForm(e);this.handleValidationResult(n).then((function(){_.trySSOSignIn(l.default.emailTrimmed(),e,l.default.hostNonce(),l.default.clientInfo(),l.default.tag()).then((function(e){t.authSuccess(e,"sso_auth")})).catch((function(e){t.authError(e,"sso_auth")}))})).catch((function(){t.logFieldErrors(n.errors,"sso_auth")})),this.setIsTopmost(!0)},e.prototype.submitTwoFactor=function(e){var t=this;this.reportEvent("two_factor_auth_clicked");var n=u.validateTwoFactorForm(e);this.handleValidationResult(n).then((function(){_.try2faSignIn(l.default.checkpointToken(),e,l.default.hostNonce(),l.default.clientInfo(),l.default.tag()).then((function(e){t.authSuccess(e,"two_factor_auth")})).catch((function(e){t.authError(e,"two_factor_auth")}))})).catch((function(){t.logFieldErrors(n.errors,"two_factor_auth")})),this.setIsTopmost(!0)},e.prototype.openProviderAuth=function(e){var t=this,n=e===f.default.APPLE?"signin_apple_signin":"signin_google_signin";this.reportEvent(n+"_clicked"),this.setIsTopmost(!1),r.Dispatcher.dispatch({type:s.SetupActionTypes.CLEAR_FIELD_ERRORS}),_.getGoogleAuthBoltToken(l.default.hostNonce()).then((function(n){t.subscribeToBolt(n),t.openProviderAuthWindow(e)}))},e.prototype.signOut=function(){r.Dispatcher.dispatch({type:s.SetupActionTypes.CHANGE_SCREEN,data:{screenType:s.SetupScreenTypes.LOADING}}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SIGN_OUT})},e.prototype.onBoltUpdate=function(e){var t=this,n=e[0].payloads[e[0].payloads.length-1].payload,o=n.service_type===f.ServiceResponseType.APPLE?"signin_apple_signin":"signin_google_signin";this.reportEvent(o+"_complete",{status:n.status,reason:n.err_msg});var i=n.service_type===f.ServiceResponseType.APPLE?s.FieldValidationKeys.LOGIN_APPLE:s.FieldValidationKeys.LOGIN_GOOGLE,c={};if(!n.email||this.checkSecondaryEmailFromProvider(n.email||"",i,o))if("ERROR"===n.status||"UNVERIFIED_EMAIL"===n.status)c[i]=a.getProviderAuthErrorString(n.err_msg||"",l.default.emailTrimmed(),n.email||"",n.service_type),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_FIELD_ERRORS,data:c});else if("UNVERIFIED"===n.status||"REQUIRES_PASSWORD"===n.status)this.setEmail(n.email||""),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_PROVIDER_CHECKPOINT_TOKEN,data:n.checkpoint_token}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_PROVIDER,data:n.service_type}),this.reportEvent(o+"_verify_load"),this.changeScreen(s.SetupScreenTypes.VERIFY);else if("REGISTER"===n.status){this.setName(n.name||""),this.setEmail(n.email||""),this.setGoogleSignUpData(n.email_sig||"",n.refresh_token||"");var _=n.service_type===f.ServiceResponseType.APPLE?"signup_apple_signup":"signup_google_signup";this.reportEvent(_+"_load"),this.changeScreen(s.SetupScreenTypes.SIGN_UP)}else"BADNONCE"===n.status?(c[i]=a.Content.error_try_again,r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_FIELD_ERRORS,data:c}),this.setDisabledState(!0),p.SetupWizardHostNonceFetcher.fetchNewNonce((function(e){t.setDisabledState(!1)}))):"DEVICE_LIMIT_EXCEEDED"===n.status?n.device_limit_nonce&&(this.setDeviceLimitNonce(n.device_limit_nonce),this.tryDeviceLimitPreauth()):(this.setDisabledState(!0),this.authSuccessJson(n,o));d.ForegroundServerView(),this.setIsTopmost(!0),p.SetupBoltClient.unsubscribe()},e.prototype.checkSecondaryEmailFromProvider=function(e,t,n){if(l.default.isPrimary())return!0;if(e===l.default.emailTrimmed())return!0;var o={};return o[t]=a.Content.multiaccount_provider_error.format({email:l.default.emailTrimmed()}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_FIELD_ERRORS,data:o}),this.reportEvent(n+"_pairing_failure"),!1},e.prototype.onBoltRefresh=function(){p.SetupBoltClient.unsubscribe()},e.prototype.subscribeToBolt=function(e){var t=this,n=new o.SignedChannelState(e.app_id,l.default.hostNonce(),e.revision,e.token);p.SetupBoltClient.subscribe([n],(function(e){t.onBoltUpdate(e)}),(function(){t.onBoltRefresh()}))},e.prototype.openProviderAuthWindow=function(e){var t;t=l.default.isPrimary()?{host_nonce:l.default.hostNonce(),service:e||""}:{host_nonce:l.default.hostNonce(),login_hint:l.default.emailTrimmed(),service:e||""};var n=new T.URI({scheme:"https",authority:"www.dropbox.com",path:"/profile_services/open_identity_provider_window",query:t});d.OpenUncredentialedBrowser(String(n))},e.prototype.bridgeFuncPromise=function(e){return new Promise((function(t,n){e((function(e){return e.error?(r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DISABLED_STATE,data:!1}),S.Notify.error(y),n(e.error)):t(e)}))}))},e.prototype.pollUntil=function(e,t){var n=this,o=setInterval((function(){n.bridgeFuncPromise(e).then((function(e){t(e.result)&&clearInterval(o)})).catch((function(){clearInterval(o)}))}),2e3)},e.prototype.executeThenPoll=function(e,t,n){var o=this;this.bridgeFuncPromise(e).then((function(){o.pollUntil(t,n)}))},e.prototype.authSuccessJson=function(e,t,n,o){var i=this;switch(void 0===n&&(n=0),"BADNONCE"!==e.status&&_.clearLastRequest(),e.status){case"BADNONCE":n>=s.ALLOWED_REQUEST_RETRIES?(this.reportEvent(t+"_failure",{reason:"too many retries"}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DISABLED_STATE,data:!1}),_.clearLastRequest(),S.Notify.error(y),o&&o(new Error("BADNONCE: too many retries"))):(this.reportEvent(t+"_failure",{reason:"bad nonce"}),p.SetupWizardHostNonceFetcher.fetchNewNonce((function(e){_.retryLastRequest(e).then((function(e){i.authSuccess(e,t,n+=1,o)})).catch((function(e){i.authError(e,t),_.clearLastRequest(),o&&o(new Error("BADNONCE: failed retry"))}))})));break;case"SSO":this.reportEvent(t+"_success_sso_required"),e.email&&this.setEmail(e.email),this.trySSO(),this.changeScreen(s.SetupScreenTypes.SSO_CODE),o&&o(new Error("SSO"));break;case"TWOFACTOR":this.reportEvent(t+"_success_2fa_required"),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DIGITS,data:e.last_two_digits}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_IS_EMAIL_2FA,data:e.is_email_2fa}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_CHECKPOINT_TOKEN,data:e.checkpoint_token}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_CURRENT_RECOVERY_METHOD,data:e.preferred_method}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_LINKED_DEVICES,data:e.linked_devices}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_RECOVERY_OPTIONS,data:e.recovery_options}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_BACKUP_PHONE_LAST_TWO_DIGITS,data:e.backup_last_two_digits}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_CURRENT_USER,data:{user:e.current_user}}),r.Dispatcher.dispatch({type:s.SetupActionTypes.CHANGE_SCREEN,data:{screenType:s.SetupScreenTypes.TWO_FACTOR}}),o&&o(new Error("TWOFACTOR"));break;case"DEVICE_LIMIT_EXCEEDED":this.reportEvent(t+"_failure",{reason:e.message}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DISABLED_STATE,data:!1}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_CURRENT_USER,data:{user:e.current_user}}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_CURRENT_HOST,data:{id:e.current_host}}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DEVICE_LIMIT_NONCE,data:{deviceLimitNonce:e.device_limit_nonce}}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_SKU_CONTENT,data:{skuContent:e.sku_content}}),r.Dispatcher.dispatch({type:s.SetupActionTypes.CHANGE_SCREEN,data:{screenType:s.SetupScreenTypes.DEVICE_LIMIT_LANDING}}),o&&o(new Error("DEVICE_LIMIT_EXCEEDED"));break;case"ERROR":this.reportEvent(t+"_failure",{reason:e.message}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DISABLED_STATE,data:!1}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_GENERIC_ERROR,data:e.message}),o&&o(new Error("ERROR: "+e.message));break;case"OK":this.reportEvent(t+"_success"),l.default.currentScreenType()===s.SetupScreenTypes.DEVICE_LIMIT_COMPLETE&&(this.changeScreen(s.SetupScreenTypes.SIGN_IN),this.setDisabledState(!0)),this.setIsTopmost(!1),d.SetupWizardLoginFinishedASync(e).then((function(e){return o&&o(null,e),i.on_success(e)})).catch((function(e){o&&o(e)})).finally((function(){i.setIsTopmost(!0)}));break;default:h.reportStack("Unknown status from link -  "+e.status,{tags:["setup_wizard"]}),this.setDisabledState(!1),S.Notify.error(y),o&&o(new Error("Unknown status from link -  "+e.status))}},e.prototype.setDeviceLimitNonce=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DEVICE_LIMIT_NONCE,data:{deviceLimitNonce:e}})},e.prototype.enterPreauthedFlow=function(){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_PREAUTHED,data:!0}),this.pollUntil(d.SetupWizardPollForLink,this.on_success)},e.prototype.attemptDangerousErrorExtraction=function(e){if(!e.responseText)return{wasFieldError:!1,reason:String(e)};var t=e.responseText;if(0!==t.indexOf("err:"))return{wasFieldError:!1,reason:t};t=t.substr(4);var n={};try{n=JSON.parse(t)}catch(e){return"string"!=typeof t&&(t=y),{wasFieldError:!1,reason:t}}var o={},r=!1;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.message_text?(o[i]=s.message_text,r=!0):s.message_html&&(o[i]=s.message_html,r=!0)}return r?{wasFieldError:!0,fieldErrors:o}:{}},e.prototype.authError=function(e,t){var n=this.attemptDangerousErrorExtraction(e);n.wasFieldError&&n.fieldErrors?(r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_FIELD_ERRORS,data:n.fieldErrors}),this.logFieldErrors(n.fieldErrors,t)):(S.Notify.error(y),this.reportEvent(t+"_failure",{reason:n.reason||y})),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DISABLED_STATE,data:!1}),_.clearLastRequest()},e.prototype.logFieldErrors=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];this.reportEvent(t+"_invalid_"+n,{reason:o})}},e.prototype.openSelSyncPrefs=function(e){var t=this;this.setIsTopmost(!1),this.reportEvent("done_panel_settings_sel_sync_opened");d.SetupWizardOpenSelSyncPrefsASync().then((function(n){return(!n||"PENDING"!==n.status)&&(e&&e(),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DISABLED_STATE,data:!1}),t.setIsTopmost(!0),!0)}))},e.prototype.openChangeLocation=function(){var e=this;this.setIsTopmost(!1),this.reportEvent("done_panel_settings_change_location_opened");d.SetupWizardOpenLocationPrefsAsync2().then((function(t){(function(t){(!t||"PENDING"!==t.status)&&(t&&"OK"===t.status&&r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DROPBOX_PATH,data:t.path}),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DISABLED_STATE,data:!1}),e.setIsTopmost(!0))})(t)}))},e.prototype.getClientInfoAndTag=function(){d.IsBridgeFunctionSupported("SetupWizard.GetClientInfoAndTag").then((function(e){e&&d.SetupWizardGetClientInfoAndTag((function(e){if(e.result.client_info&&r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_CLIENT_INFO,data:e.result.client_info}),e.result.tag)return r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_TAG,data:e.result.tag})}))}))},e.prototype.getPlatform=function(){var e=d.GetPlatform();if(e)return r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_PLATFORM,data:e})},e.prototype.getShouldShowInfiniteHardDowngradeMsg=function(e){d.IsBridgeFunctionSupported("SetupWizard.GetAndResetShowInfiniteHardDowngradeMsg").then((function(t){t&&d.SetupWizardGetAndResetShowInfiniteHardDowngradeMsg(e,(function(e){e.error||null==e.result.should_show||r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_SHOW_INFINITE_HARD_DOWNGRADE_MSG,data:e.result.should_show})}))}))},e.prototype.maybeFetchDropboxPath=function(){l.default.dropboxPath()||d.IsBridgeFunctionSupported("SetupWizard.GetDropboxPath").then((function(e){e&&d.SetupWizardGetDropboxPath((function(e){!e.error&&e.result.path&&r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_DROPBOX_PATH,data:e.result.path})}))})).catch((function(){}))},e.prototype.setContentStartsOnlineOnly=function(e){d.IsBridgeFunctionSupported("SetupWizard.SetContentStartsOnlineOnly").then((function(t){t&&d.SetupWizardSetContentStartsOnlineOnly(e,(function(t){if(!t.error)return r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_CONTENT_STARTS_ONLINE_ONLY,data:e})}))})).catch((function(){}))},e.prototype.pasteFromClipboard=function(){d.IsBridgeFunctionSupported("getClipboardText").then((function(e){e&&d.GetClipboardText((function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_CLIPBOARD_TEXT,data:e.result.text})}))})),this.reportEvent("sso_code_paste"),this.setIsTopmost(!0)},e.prototype.setIsTopmost=function(e){r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_IS_TOPMOST,data:e})},e.prototype.maybeLogUserJourneyEvent=function(e){l.default.onboardingType()===s.OnboardingTypes.USER_JOURNEY_SIGNUP&&this.reportEvent(e,{exp_variant:l.default.onboardingVariant()})},e.prototype.setShowCarousel=function(e){void 0===e&&(e=!1),r.Dispatcher.dispatch({type:s.SetupActionTypes.SET_SHOW_CAROUSEL,data:e})},e})());t.default=m})),define("modules/clean/react/client/setup_wizard/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e[e.ENSURE_CLIENT_CONNECTION=0]="ENSURE_CLIENT_CONNECTION",e[e.CHANGE_SCREEN=1]="CHANGE_SCREEN",e[e.POP_POST_LINK_SCREEN=2]="POP_POST_LINK_SCREEN",e[e.PUSH_POST_LINK_SCREEN=3]="PUSH_POST_LINK_SCREEN",e[e.SET_DISABLED_STATE=4]="SET_DISABLED_STATE",e[e.SET_HOST_NONCE=5]="SET_HOST_NONCE",e[e.SET_SCRIPT_NONCE=6]="SET_SCRIPT_NONCE",e[e.SET_CAPTCHA_READY=7]="SET_CAPTCHA_READY",e[e.SET_CLIENT_INFO=8]="SET_CLIENT_INFO",e[e.SET_CURRENT_HOST=9]="SET_CURRENT_HOST",e[e.SET_CURRENT_USER=10]="SET_CURRENT_USER",e[e.SET_DEVICE_LIMIT_NONCE=11]="SET_DEVICE_LIMIT_NONCE",e[e.SET_TAG=12]="SET_TAG",e[e.SET_GOOGLE_SIGN_UP_DATA=13]="SET_GOOGLE_SIGN_UP_DATA",e[e.SET_IS_PRIMARY=14]="SET_IS_PRIMARY",e[e.SET_HAS_SECONDARY=15]="SET_HAS_SECONDARY",e[e.SET_MULTI_DISABLED=16]="SET_MULTI_DISABLED",e[e.SET_IS_NEW_ACCOUNT=17]="SET_IS_NEW_ACCOUNT",e[e.SET_ROLE=18]="SET_ROLE",e[e.SET_TEAM=19]="SET_TEAM",e[e.SET_CONTENT_STARTS_ONLINE_ONLY=20]="SET_CONTENT_STARTS_ONLINE_ONLY",e[e.SET_INFINITE_EXPOSED=21]="SET_INFINITE_EXPOSED",e[e.SET_WILL_INSTALL_KEXT=22]="SET_WILL_INSTALL_KEXT",e[e.SET_IS_UNCONSENTED=23]="SET_IS_UNCONSENTED",e[e.SET_FILE_PROVIDER_ENABLED=24]="SET_FILE_PROVIDER_ENABLED",e[e.SET_DEAL_CODE=25]="SET_DEAL_CODE",e[e.SET_DROPBOX_PATH=26]="SET_DROPBOX_PATH",e[e.SET_EMAIL=27]="SET_EMAIL",e[e.SET_NAME=28]="SET_NAME",e[e.SET_DIGITS=29]="SET_DIGITS",e[e.SET_IS_EMAIL_2FA=30]="SET_IS_EMAIL_2FA",e[e.SET_CHECKPOINT_TOKEN=31]="SET_CHECKPOINT_TOKEN",e[e.SET_PROVIDER_CHECKPOINT_TOKEN=32]="SET_PROVIDER_CHECKPOINT_TOKEN",e[e.SET_PROVIDER=33]="SET_PROVIDER",e[e.SET_CLIPBOARD_TEXT=34]="SET_CLIPBOARD_TEXT",e[e.SET_FIELD_ERRORS=35]="SET_FIELD_ERRORS",e[e.SET_FOLDER_RENAME=36]="SET_FOLDER_RENAME",e[e.SET_DISK_USAGE=37]="SET_DISK_USAGE",e[e.SET_ONBOARDING_INFO=38]="SET_ONBOARDING_INFO",e[e.SET_POST_LINK_FLAGS=39]="SET_POST_LINK_FLAGS",e[e.REMOVE_FIELD_ERROR=40]="REMOVE_FIELD_ERROR",e[e.CLEAR_FIELD_ERRORS=41]="CLEAR_FIELD_ERRORS",e[e.SET_GENERIC_ERROR=42]="SET_GENERIC_ERROR",e[e.CLEAR_GENERIC_ERROR=43]="CLEAR_GENERIC_ERROR",e[e.SET_SSO_STATE=44]="SET_SSO_STATE",e[e.SET_IS_TOPMOST=45]="SET_IS_TOPMOST",e[e.OPEN_DB_FOLDER=46]="OPEN_DB_FOLDER",e[e.LINK_SECONDARY=47]="LINK_SECONDARY",e[e.SET_PREAUTHED=48]="SET_PREAUTHED",e[e.SET_DEFAULT_ROOT_POLICY=49]="SET_DEFAULT_ROOT_POLICY",e[e.SET_ADMIN_DEFAULT_ROOT_POLICY=50]="SET_ADMIN_DEFAULT_ROOT_POLICY",e[e.SET_SHOW_INFINITE_HARD_DOWNGRADE_MSG=51]="SET_SHOW_INFINITE_HARD_DOWNGRADE_MSG",e[e.SIGN_OUT=52]="SIGN_OUT",e[e.SET_SKU_CONTENT=53]="SET_SKU_CONTENT",e[e.SET_CURRENT_RECOVERY_METHOD=54]="SET_CURRENT_RECOVERY_METHOD",e[e.SET_RECOVERY_OPTIONS=55]="SET_RECOVERY_OPTIONS",e[e.SET_LINKED_DEVICES=56]="SET_LINKED_DEVICES",e[e.SET_BACKUP_PHONE_LAST_TWO_DIGITS=57]="SET_BACKUP_PHONE_LAST_TWO_DIGITS",e[e.SET_SHOW_MOVE_DROPBOX=58]="SET_SHOW_MOVE_DROPBOX",e[e.SET_TFA_RECOVERY_TOKEN=59]="SET_TFA_RECOVERY_TOKEN",e[e.SET_TFA_BACKUP_CODE_INPUT_VALUE=60]="SET_TFA_BACKUP_CODE_INPUT_VALUE",e[e.SET_BACKUP_TEXT_SENT=61]="SET_BACKUP_TEXT_SENT",e[e.SET_BACKUP_PHONE_CODE_INPUT_VALUE=62]="SET_BACKUP_PHONE_CODE_INPUT_VALUE",e[e.SET_ACTIVE_BACKUP_BUTTON=63]="SET_ACTIVE_BACKUP_BUTTON",e[e.SET_SHOW_CAROUSEL=64]="SET_SHOW_CAROUSEL",e[e.SET_PLATFORM=65]="SET_PLATFORM"})(t.SetupActionTypes||(t.SetupActionTypes={})),(function(e){e.LOCAL="LOCAL",e.ON_DEMAND="ON_DEMAND"})(t.INFINITE_ROOT_POLICY||(t.INFINITE_ROOT_POLICY={})),(function(e){e.ADMIN_DEFAULT="ADMIN_DEFAULT",e.LOCAL="LOCAL",e.ON_DEMAND="ON_DEMAND"})(t.INFINITE_ROOT_POLICY_CHOICE||(t.INFINITE_ROOT_POLICY_CHOICE={})),t.SetupScreenTypes={SIGN_IN:"SIGN_IN",SIGN_UP:"SIGN_UP",SSO_CODE:"SSO_CODE",TWO_FACTOR:"TWO_FACTOR",TWO_FACTOR_RECOVERY:"TWO_FACTOR_RECOVERY",RENAME:"RENAME",VERIFY:"VERIFY",LOW_DISK:"LOW_DISK",LARGE_DROPBOX:"LARGE_DROPBOX",DONE:"DONE",ADVANCED_SETTINGS:"ADVANCED_SETTINGS",INFINITE_SETTING:"INFINITE_SETTING",WAITING_FOR_PREAUTH_DICT:"WAITING_FOR_PREAUTH_DICT",SCALE_MITIGATION:"SCALE_MITIGATION",DEVICE_LIMIT_LANDING:"DEVICE_LIMIT_LANDING",DEVICE_LIMIT_MANAGE:"DEVICE_LIMIT_MANAGE",DEVICE_LIMIT_COMPLETE:"DEVICE_LIMIT_COMPLETE",LOADING:"LOADING"},t.FieldValidationKeys={LOGIN_EMAIL:"login_email",LOGIN_PASSWORD:"login_password",LOGIN_GOOGLE:"login_google",LOGIN_APPLE:"login_apple",REGISTER_EMAIL:"register_email",REGISTER_PASSWORD:"register_password",REGISTER_NAME:"register_name",REGISTER_TERMS:"register_terms",TWO_FACTOR_CODE:"twofactor_code",TWO_FACTOR_BACKUP_CODE:"twofactor_backup_code",TWO_FACTOR_BACKUP_PHONE:"twofactor_backup_phone",SSO_CODE:"sso_link_code",VERIFY_PASSWORD:"verify_password",RECAPTCHA_RESPONSE:"recaptcha_response"},t.SSOStates={OFF:"OFF",OPTIONAL:"OPTIONAL",REQUIRED:"REQUIRED"},t.OnboardingTypes={DESKTOP_UJ_ONBOARDING_V1:"DESKTOP_UJ_ONBOARDING_V1",ONBOARDING_SERVER_VIEW:"ONBOARDING_SERVER_VIEW",USER_JOURNEY_SIGNUP:"USER_JOURNEY_SIGNUP"},t.ALLOWED_REQUEST_RETRIES=2,t.SCALE_MITIGATION_THRESHOLD=5e5,t.DEFAULT_SETUP_WIZARD_WIDTH=310,t.DEFAULT_SETUP_WIZARD_HEIGHT=525,t.SETUP_WIZARD_CAROUSEL_WIDTH=800,t.SETUP_WIZARD_CAROUSEL_HEIGHT=520,t.DEVICE_LIMIT_VIEW_WIDTH=960,t.DEVICE_LIMIT_VIEW_HEIGHT=650,(function(e){e.BACKUP_PHONE_SUBMIT="two_factor_backup_phone_submit",e.RECOVERY_CODE_SUBMIT="two_factor_backup"})(t.ActiveButtons||(t.ActiveButtons={})),t.SCROLL_TO_CAPTCHA_DELAY=250})),define("modules/clean/react/client/setup_wizard/content",["require","exports","tslib","react","modules/clean/react/client/setup_wizard/constants","modules/clean/react/client/setup_wizard/roles","modules/core/i18n","modules/constants/trademark","modules/clean/profile_services/profile_services_constants","modules/clean/server_side_client_view_bridge","modules/clean/react_format"],(function(e,t,n,o,r,i,s,a,c,_,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),i=n.__importStar(i),_=n.__importStar(_);var u,l=s.i18n_default_project("client-web-setup-wizard")._;function d(e,t){return e===i.PERSONAL?i.String(e):null!=t?t:""}function h(e){var t,n;e===u.emailsDoNotMatch?(t="signin_apple_signin_emails_do_not_match",n="/help/accounts-billing/settings-sign-in/sign-in-with-apple?_tk=sia_nomatch_help_dt"):e===u.alreadyAuthorisedButNoMatchingAccount?(t="signin_apple_signin_not_authorized",n="/help/accounts-billing/settings-sign-in/sign-in-with-apple?_tk=sia_authorized_help_dt"):(t="signin_apple_signin_help_generic_clicked",n="/help/accounts-billing/settings-sign-in/sign-in-with-apple?_tk=sia_generic_help_dt"),_.SetupWizardReportEvent(t),_.OpenUncredentialedBrowserWithDropboxURL(n)}function E(){_.SetupWizardReportEvent("signin_apple_signin_error_clicked"),_.OpenUncredentialedBrowserWithDropboxURL("/individual/plans-comparison?_tk=sia_nomatch_plan_dt")}function S(e,n,r){switch(e){case u.incorrectEmail:return t.Content.multiaccount_provider_error.format({email:n});case u.emailsDoNotMatch:return p.reactFormat(l("We couldn’t find a Dropbox account matching the email %(responseemail)s.             <linkaccount> Sign up for a new account </linkaccount>             or <linkhelpcenter> get help signing in </linkhelpcenter>             to an existing account"),{responseemail:r,linkaccount:o.default.createElement("button",{className:"button-as-link",onClick:E}),linkhelpcenter:o.default.createElement("button",{className:"button-as-link",onClick:h.bind(e)})});case u.deviceLimitExceeded:return l("You’ve reached the limit of computers allowed by your company. Ask your admin for help.");case u.appleLoginNotAllowedForTeam||u.userAlreadyInvitedToTeam:return l("%(trademark_business)s users can’t sign in with Apple. Please sign in with your email and password.").format({trademark_business:a.TRADEMARK_BUSINESS});case u.alreadyAuthorisedButNoMatchingAccount:default:return p.reactFormat(l("Sign in failed. If you’d like to sign in with Apple again,       <link>see how in our help center</link>.       You could also sign in with your Dropbox account email and password."),{link:o.default.createElement("button",{className:"button-as-link",onClick:h.bind(e)})})}}function T(e,n,o){return"access_denied"===e?l("Please accept Google’s request in order to sign in."):"emails_do_not_match"===e?l("We couldn’t find a Dropbox account matching that email."):"incorrect_email"===e?t.Content.multiaccount_provider_error.format({email:n}):"google_login_not_allowed"===e?l("Your admin has disabled Google sign in. Use your email and password to sign in."):"device_limit_exceeded"===e?l("You’ve reached the limit of computers allowed by your company. Ask your admin for help."):"tos_required"===e?l("You’ll need to sign in on your computer before you can use this device."):"email_not_verified"===e?l("Before you can sign in, you’ll need to verify your account with Google %(email)s").format({email:o}):l("Unable to sign in with Google.")}t.Content={toc_header:l("Show me how to..."),email_placeholder:l("Email"),password_placeholder:l("Password"),name_placeholder:l("Full name"),sign_in_title_carousel:l("Sign in"),or_sign_in:l("Sign in"),or_sign_in_carousel:l("or <link>Sign in</link>"),or_sign_up:l("Sign up"),or_sign_up_carousel:l("or <link>Sign up</link>"),sign_in_button:l("Sign in"),sign_up_button:l("Sign up"),terms:l("I agree to the <link>terms and conditions</link>"),need_help:l("Forgot password?"),log_in_with_google_button:l("Sign in with Google"),log_in_with_apple_button:l("Sign in with Apple"),or:l("or"),google_signup_message:l("We couldn’t find a Dropbox account for <b>%(email)s</b>. Would you like to create one?"),multiaccount_sign_in_body:l("Sign in to your %(label)s Dropbox",{comment:'(label) can be any of "Personal", team name (ex: "My Best Team"), or "other"'}),secondary_label_placeholder:l("other",{comment:'(label) will be inserted into the string "Sign in to your %(label)s Dropbox"'}),email_taken:l("This e-mail is already taken. <login>Sign in</login> or <forgot>reset your password</forgot>"),sso_continue_button:l("Get your link code"),sso_code_title:l("Single sign-on"),sso_code_body:l("Enter your link code below",{comment:"asks user to type or paste a code that was provided into the field below"}),sso_code_paste_button:l("Paste"),sso_code_submit_button:l("Submit"),sso_code_placeholder:l("Link code"),sso_opt_credentials:l("or <link>Log in with Dropbox credentials</link>",{comment:"full text: Log in with single sign on or Log in with Dropbox credentials"}),sso_opt_out_carousel:l("or Log in with Dropbox credentials",{comment:"full text: Log in with single sign on or Log in with Dropbox credentials"}),sso_enabled:l("Single sign-on enabled"),two_factor_title:l("Enter your security code"),two_factor_email_body:l("To link your computer, you need to enter a security code. We sent a code to your email address at %(email)s."),two_factor_phone_body:l("To link your computer, you need to enter a security code. We sent the code to your phone number ending in %(digits)s."),two_factor_authenticator_body:l("To link your computer, you need to enter a security code. Enter the security code generated by your mobile authenticator app."),two_factor_placeholder:l("6-digit code"),two_factor_submit_button:l("Submit code"),two_factor_resend_button:l("Send new code"),two_factor_resend_sent:l("We sent you a code. It may take a few minutes to arrive."),two_factor_lost_phone:l("Having trouble getting a code?"),two_factor_other_options:l("Other options:",{comment:"below this will be links to other two-factor authentication recovery options"}),two_factor_push_recovery:l("Sign in with a notification"),two_factor_push_recovery_btn:l("Send me a notification"),two_factor_push_recovery_link_name:l("Send a notification to my devices",{comment:"this recovery method sends a notification to all devices the user's Dropbox account is connected to"}),two_factor_backup_recovery:l("Sign in with a backup phone"),two_factor_backup_recovery_btn:l("Text my backup phone"),two_factor_backup_recovery_desc:l("If you lose your phone, we can text a code to your backup phone                    number ending in <b>**%(phone_last_two)s</b>."),two_factor_backup_recovery_enter_code:l("Enter Dropbox 2-step verification code"),two_factor_backup_recovery_link_name:l("Text my backup phone"),two_factor_backup_recovery_resend_button:l("Resend",{comment:"This will send a new text message"}),two_factor_backup_recovery_resend_code:l("Resend code",{comment:"This will send a new text message"}),two_factor_backup_recovery_sent_code:l("We sent a code to your phone number ending in <b>**%(phone_last_two)s</b>."),two_factor_code_recovery:l("Sign in with a backup code"),two_factor_code_recovery_desc:l("If you’re locked out of your account,    you can sign in by entering one of your emergency backup codes."),two_factor_code_recovery_link_name:l("Enter emergency backup code"),two_factor_code_recovery_placeholder:l("8-digit code"),two_factor_recovery_need_more_help:l("I need more help",{comment:"this will take the user to a help page about two-factor recovery when the existing methods are not      enough for them"}),verify_title:l("Verify your account"),verify_message:l("An account with the email address <b>%(email)s</b> already exists, but is not verified. Enter your existing Dropbox password to sign in."),kext_congratulations:l("You’re almost finished"),kext_will_install:l("Just a couple more steps to set up Smart Sync, and you’ll be ready to use Dropbox."),kext_continue:l("Continue"),unconsented_done_header:l("You’re almost finished"),unconsented_done_body:l("Dropbox was successfully installed, but won’t be able to store files until you grant permission."),unconsented_done_button:l("Continue"),congratulations:l("Congratulations!"),congratulations_carousel:l("Well done!%(br)sDropbox installed"),success_text:l("Dropbox was successfully installed."),success_text_carousel:l("Now that you have Dropbox, get to know what it has to offer."),onboarding_for_teams_success_text:l("Dropbox was successfully installed."),open_user_journey_signup:l("Continue"),open_onboarding_server_view:l("Next"),open_onboarding_for_teams_server_view:l("Get started"),multiaccount_congratulations:l("Congratulations!"),multiaccount_congratulations_carousel:l("Well done!%(br)sDropbox installed"),multiaccount_success_text_legacy:l("Your %(primary_label)s Dropbox was successfully installed. Now you can add your %(secondary_label)s Dropbox.",{comment:'both primary_label and secondary_label are either "Personal" or the name of a team (ex: "My Best Team")'}),multiaccount_success_text_personal:l("Your personal Dropbox was successfully installed. Now you can add your %(secondary_label)s Dropbox.",{comment:'secondary_label is the name of a team (ex: "My Best Team")'}),multiaccount_success_text_work:l("Your %(primary_label)s Dropbox was successfully installed. Now you can add your personal Dropbox.",{comment:'primary_label is the name of a team (ex: "My Best Team")'}),multiaccount_link_button_legacy:l("Now add your %(secondary_role_label)s Dropbox",{comment:'secondary_role_label is one of "Work"/"Personal"'}),multiaccount_link_button_personal:l("Now add your personal Dropbox"),multiaccount_link_button_work:l("Now add your team Dropbox"),multiaccount_disabled_text:l("Linking both of your accounts on this computer has been disabled by your %(team_label)s administrator",{comment:'team_label is the name of this user\'s team (ex: "My Best Team")'}),multiaccount_skip:l("Skip this"),multiaccount_settings_done:l("Done"),multiaccount_provider_error:l("Please log in with your paired account, %(email)s"),advanced_settings:l("Advanced settings"),dropbox_location_title:l("Dropbox Location"),dropbox_location_description:l("Select a location for your Dropbox folder"),dropbox_location_other:l("Other..."),selective_sync_title:l("Selective Sync"),selective_sync_description:l("Select folders to sync to your computer"),selective_sync_button:l("Change settings..."),infinite_title:l("Smart Sync"),infinite_description:l("All content starts online-only"),infinite_hard_optout_msg:l("The Dropbox system extension has been turned off. Please sign in again."),no_settings_description:l("No options available"),large_dropbox_description:l("Would you like to sync everything in your %(label)s Dropbox (%(need_gigs)s GB) to this computer?",{comment:'label is either "Personal" or the name of a team (ex: "My Best Team")'}),disk_space_description:l("Your %(label)s Dropbox (%(need_gigs)s GB) is too large to fit on this computer (%(free_gigs)s GB available)",{comment:'label is either "Personal" or the name of a team (ex: "My Best Team")'}),choose_folders_button:l("Choose folders to sync"),or_divider:l("or"),sync_everything_button:l("Sync everything"),rename:l("We need to rename your Dropbox folder"),rename_description:l("“%(old_name)s” will become “%(new_name)s”. Your shortcuts and favorites should continue to work.",{comment:"both old_name and new_name are names of folders"}),rename_button:l("Rename"),error:l("An error has occurred"),error_try_again:l("An error has occured. Please try again."),error_start_over:l("Start over"),back_button:l("Back",{comment:"Navigate to the previous page"}),mountain_title:l("Sync your existing files?"),mountain_subtitle:l("We can sync your Desktop & Documents to Dropbox so that you can access them from other devices."),mountain_sync_button:l("Sync Desktop and Documents"),mountain_skip_link:l("Skip"),audio_captcha:l("Note: When using the audio CAPTCHA, please use the Download button instead of the Play button."),infinite_learn_more:l("Learn more"),infinite_setting_title:l("How should your files sync?"),infinite_setting_title_preauthed:l("How should your files sync?"),infinite_setting_title_carousel:l("How do you want files stored?"),continue_button:l("Continue"),infinite_setting_description:l("With Smart Sync, online-only files save hard drive space and are ready when you need them.\n      Local files are downloaded to your hard drive and always available."),infinite_setting_description_carousel:l("With Smart Sync, online-only files save hard drive space, and you can browse them from your desktop. Local files are downloaded and available offline."),infinite_admin_setting:l("Let my admin manage this setting"),infinite_setting_local:l("Local"),infinite_setting_on_demand:l("Online-only"),infinite_setting_on_demand_recommended:l("Online-only (recommended)"),infinite_setting_on_demand_carousel:l("Online only (recommended)"),infinite_setting_large_dropbox:l("You have a large Dropbox. We recommend choosing online-only."),infinite_setting_low_disk:l("Not enough hard drive space. Choose online-only."),infinite_scale_msg:l("Your Dropbox account has over %(max_files)s files. Syncing that many files at once will take a long time. We recommend you sync only the folders you need right now.",{comment:"max_files is a number that is always a positive multiple of 1,000 (e.g. 500,000)."}),infinite_scale_carousel_header:l("Your Dropbox account has over %(max_files)s files.",{comment:"max_files is a number that is always a positive multiple of 1,000 (e.g. 500,000)."}),infinite_scale_carousel_body:l("Syncing that many files at once will take a long time.    We recommend you sync only the folders you need right now."),infinite_setting_next_carousel:l("Next"),infinite_setting_help_carousel:l("How Smart Sync works")},t.renderAccountLabel=d,t.renderMultiaccountString=function(e,n,o){var r=i.Flip(n);return t.Content[e].format({primary_label:d(n,o),secondary_label:d(r,o),secondary_role_label:i.String(r),team_label:o})},(function(e){e.incorrectEmail="incorrect_email",e.deviceLimitExceeded="device_limit_exceeded",e.appleLoginNotAllowedForTeam="apple_login_not_allowed_for_teams",e.userAlreadyInvitedToTeam="user_already_invited_to_team",e.alreadyAuthorisedButNoMatchingAccount="no_email_in_response",e.emailsDoNotMatch="emails_do_not_match"})(u=t.ErrorMessageType||(t.ErrorMessageType={})),t.getAppleAuthErrorString=S,t.getProviderAuthErrorString=function(e,t,n,o){return o===c.ServiceResponseType.APPLE?S(e,t,n):T(e,t,n)},t.getGoogleAuthErrorString=T,t.getDoneBodyText=function(e,n){return void 0===n&&(n=!1),e===r.OnboardingTypes.DESKTOP_UJ_ONBOARDING_V1?t.Content.onboarding_for_teams_success_text:n?t.Content.success_text_carousel:t.Content.success_text},t.getDoneButtonText=function(e){return e===r.OnboardingTypes.USER_JOURNEY_SIGNUP?t.Content.open_user_journey_signup:e===r.OnboardingTypes.DESKTOP_UJ_ONBOARDING_V1?t.Content.open_onboarding_for_teams_server_view:t.Content.open_onboarding_server_view},t.getScaleMitigationText=function(){return t.Content.infinite_scale_msg.format({max_files:r.SCALE_MITIGATION_THRESHOLD.toLocaleString()})},t.getScaleMitigationCarouselHeaderText=function(){return t.Content.infinite_scale_carousel_header.format({max_files:r.SCALE_MITIGATION_THRESHOLD.toLocaleString()})}})),define("modules/clean/react/client/setup_wizard/roles",["require","exports","tslib","modules/core/i18n"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(o=n.__importStar(o)).i18n_default_project("client-web-setup-wizard")._;t.PERSONAL=1,t.WORK=2,t.STRINGS={1:r("personal",{comment:'Used as a label for which Dropbox, ex: "Now link your (personal/work) Dropbox"'}),2:r("work",{comment:'Used as a label for which Dropbox, ex: "Now link your (personal/work) Dropbox"'})},t.Flip=function(e){switch(e){case t.PERSONAL:return t.WORK;case t.WORK:return t.PERSONAL;default:return-1}},t.String=function(e){return t.STRINGS[e]}})),define("modules/clean/react/client/setup_wizard/server",["require","exports","modules/clean/react/client/services","modules/clean/api_v2/noauth_client","modules/clean/profile_services/profile_services_constants"],(function(e,t,n,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=null;function s(e,t){return i={url:e,data:t},n.request({url:e,data:t})}t.tryDeviceLimitPreauth=function(e,t,n,o){return s("/ajax_client_sw_preauth",{preauth_nonce:e,host_nonce:t,client_info:n,tag:o})},t.trySignIn=function(e,t,n,o,i,a,c,_){var p={login_email:e,login_password:t,host_nonce:n,client_info:o,tag:i};return void 0!==a&&(p.recaptcha_v2_response=a),void 0!==c&&(_===r.ServiceResponseType.APPLE?p.apple_checkpoint_token=c:p.google_checkpoint_token=c),s("/ajax_client_link",p)},t.trySignUp=function(e,t,n,o,r,i,a,c,_,p){var u={register_fname:e,register_lname:t,register_email:n,register_password:o,register_terms:r,host_nonce:i,client_info:a,tag:c};return void 0!==p&&(u.recaptcha_v2_response=p),_.isGoogleSignUp&&(u.email_sig=_.emailSig,u.refresh_token=_.refreshToken),s("/ajax_client_register",u)},t.try2faSignIn=function(e,t,n,o,r,i,a){void 0===i&&(i=!1),void 0===a&&(a=!1);var c={checkpoint_token:e,twofactor_code:t,host_nonce:n,client_info:o,tag:r};return i&&(c.is_backup_code=!0),a&&(c.is_backup_sms_code=!0),s("/ajax_client_login_2fa",c)},t.trySendPushNotification=function(e){return(new o.NoAuthApiV2Client).ns("two_factor_auth").rpc("two_factor/recovery/send_push",{checkpoint_token:e},{})},t.tryTextBackup=function(e){return(new o.NoAuthApiV2Client).ns("two_factor_auth").rpc("two_factor/recovery/text_backup",{checkpoint_token:e},{})},t.tryResendBackup=function(e){return(new o.NoAuthApiV2Client).ns("two_factor_auth").rpc("two_factor/recovery/resend_backup",{checkpoint_token:e},{})},t.trySSOSignIn=function(e,t,n,o,r){return s("/ajax_client_login_sso",{sso_email:e,sso_link_code:t,host_nonce:n,client_info:o,tag:r})},t.resendTwoFactor=function(e){return n.request({url:"/client_resend_twofactor",data:{checkpoint_token:e}})},t.tryNeedsLoginCaptcha=function(e){return n.request({url:"/ajax_client_needs_login_captcha",data:{email:e}})},t.tryNeedsSignupCaptcha=function(e){return n.request({url:"/ajax_client_needs_signup_captcha",data:{email:e}})},t.getGoogleAuthBoltToken=function(e){return n.request({url:"/profile_services/get_google_auth_bolt_token",dataType:"json",data:{host_nonce:e}})},t.requestAndSave=s,t.retryLastRequest=function(e){return null!=i?(null!=i.data&&(i.data.host_nonce=e),s(i.url,i.data)):new Promise((function(e,t){return t("no previous request")}))},t.clearLastRequest=function(){i=null}})),define("modules/clean/react/client/setup_wizard/services",["require","exports","tslib","modules/clean/bolt","modules/clean/flux/dispatcher","modules/clean/react/client/setup_wizard/constants","modules/clean/server_side_client_view_bridge","modules/core/exception"],(function(e,t,n,o,r,i,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),s=n.__importStar(s);var c=(function(){function e(){}return e.start=function(){var t=this;null==e._interval_id&&s.IsBridgeFunctionSupported("SetupWizard.FetchNewNonce").then((function(e){e&&(t.fetchNewNonce(),t._interval_id=setInterval((function(){t.fetchNewNonce()}),t.REFRESH_INTERVAL))})).catch((function(e){a.reportStack("Error in response from ClientBridge.IsBridgeFunctionSupported - "+e,{tags:["setup_wizard"]})}))},e.stop=function(){null!=this._interval_id&&(clearInterval(this._interval_id),this._interval_id=null)},e.fetchNewNonce=function(e){s.SetupWizardFetchNewNonce().then((function(t){r.Dispatcher.dispatch({type:i.SetupActionTypes.SET_HOST_NONCE,data:t}),void 0!==e&&e(t)})).catch((function(e){a.reportStack("Error in response from ClientBridge.SetupWizardFetchNewNonce - "+e,{tags:["setup_wizard"]})}))},e.REFRESH_INTERVAL=36e5,e._interval_id=null,e})();t.SetupWizardHostNonceFetcher=c;var _=(function(){function e(){}return e.subscribe=function(e,t,n){null==this.client&&(this.client=new o.ThunderClient(e,t,n),this.client.start())},e.unsubscribe=function(){null!=this.client&&this.client.unsubscribe(),this.client=null},e.client=null,e})();t.SetupBoltClient=_})),define("modules/clean/react/client/setup_wizard/setup_validators",["require","exports","tslib","modules/clean/react/client/setup_wizard/constants","modules/clean/validators/email_validator","modules/clean/validators/input_validator","modules/clean/validators/password_validator","modules/core/i18n"],(function(e,t,n,o,r,i,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importDefault(r),i=n.__importDefault(i),s=n.__importDefault(s);var c=a.i18n_default_project("client-web-setup-wizard")._;function _(e){var t=i.default.groupValidationResults(e),n={valid:t.valid,errors:{}};for(var o in t.validation_result)if(t.validation_result.hasOwnProperty(o)){for(var r=t.validation_result[o],s=null,a=0,c=r.result.length;a<c;a++){var _=r.result[a];if(!_.valid){s=_.message;break}}null!=s&&(n.errors[o]=s)}return n}t.validateSignInForm=function(e,t){var n={};return n[o.FieldValidationKeys.LOGIN_EMAIL]=r.default.validate(e),n[o.FieldValidationKeys.LOGIN_PASSWORD]=s.default.validate(t),_(n)},t.TOS_MESSAGE=c("Please agree to the terms of service"),t.EMPTY_NAME_MESSAGE=c("Please enter your name");var p=i.default.composeValidators([[t.TOS_MESSAGE,i.default.trueValidator()]]),u=i.default.composeValidators([[t.EMPTY_NAME_MESSAGE,i.default.notEmptyValidator()]]);t.validateSignUpForm=function(e,t,n,i){var a={};return a[o.FieldValidationKeys.REGISTER_NAME]=u(e),a[o.FieldValidationKeys.REGISTER_EMAIL]=r.default.validate(t),a[o.FieldValidationKeys.REGISTER_PASSWORD]=s.default.validate(n),a[o.FieldValidationKeys.REGISTER_TERMS]=p(i),_(a)},t.WRONG_NUM_CHARS_MESSAGE=c("Invalid two factor code"),t.EXPECTED_2FA_CODE_LEN=6;var l=i.default.composeValidators([[t.WRONG_NUM_CHARS_MESSAGE,i.default.minLengthValidator(t.EXPECTED_2FA_CODE_LEN)],[t.WRONG_NUM_CHARS_MESSAGE,i.default.maxLengthValidator(t.EXPECTED_2FA_CODE_LEN)]]);t.validateTwoFactorForm=function(e){var t={};return t[o.FieldValidationKeys.TWO_FACTOR_CODE]=l(e),_(t)},t.validateTFABackupPhoneForm=function(e){var t={};return t[o.FieldValidationKeys.TWO_FACTOR_BACKUP_PHONE]=l(e),_(t)},t.WRONG_NUM_CHARS_MESSAGE_BACKUP=c("Invalid backup code"),t.EXPECTED_2FA_RECOVERY_CODE_LEN=8;var d=i.default.composeValidators([[t.WRONG_NUM_CHARS_MESSAGE_BACKUP,i.default.minLengthValidator(t.EXPECTED_2FA_RECOVERY_CODE_LEN)],[t.WRONG_NUM_CHARS_MESSAGE_BACKUP,i.default.maxLengthValidator(t.EXPECTED_2FA_RECOVERY_CODE_LEN)]]);t.validateTFABackupCodeForm=function(e){var t={};return t[o.FieldValidationKeys.TWO_FACTOR_BACKUP_CODE]=d(e),_(t)},t.INVALID_CODE_MESSAGE=c("This link code is invalid. Please try again.");var h=i.default.composeValidators([[t.INVALID_CODE_MESSAGE,i.default.notEmptyValidator()]]);t.validateSSOCodeForm=function(e){var t={};return t[o.FieldValidationKeys.SSO_CODE]=h(e),_(t)},t.validateVerifyForm=function(e){var t={};return t[o.FieldValidationKeys.VERIFY_PASSWORD]=s.default.validate(e),_(t)}})),define("modules/clean/react/client/setup_wizard/setup_wizard",["require","exports","tslib","react","modules/clean/react/css","modules/constants/login_and_register","modules/clean/react/device_limit/types","modules/clean/react/client/setup_wizard/actions","modules/clean/react/client/setup_wizard/constants","modules/clean/react/client/setup_wizard/services","modules/clean/react/client/setup_wizard/store","modules/clean/react/client/setup_wizard/shared_components","modules/clean/react/client/setup_wizard/screens/done","modules/clean/react/client/setup_wizard/screens/infinite_setting","modules/clean/react/client/setup_wizard/screens/large_dropbox","modules/clean/react/client/setup_wizard/screens/low_disk","modules/clean/react/client/setup_wizard/screens/rename","modules/clean/react/client/setup_wizard/screens/scale","modules/clean/react/client/setup_wizard/screens/settings","modules/clean/react/client/setup_wizard/screens/sign_in","modules/clean/react/client/setup_wizard/screens/sign_up","modules/clean/react/client/setup_wizard/screens/sso_code","modules/clean/react/client/setup_wizard/screens/two_factor","modules/clean/react/client/setup_wizard/screens/two_factor_recovery_controller","modules/clean/react/client/setup_wizard/screens/verify","modules/clean/react/client/setup_wizard/screens/device_limit","modules/clean/react/client/setup_wizard/screens/loading","modules/clean/react/client/setup_wizard/setup_wizard_carousel_view"],(function(e,t,n,o,r,i,s,a,c,_,p,u,l,d,h,E,S,T,f,y,m,g,I,N,O,A,D,R){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),i=n.__importStar(i),a=n.__importDefault(a),p=n.__importDefault(p);var v=(function(e){function t(t){var n=e.call(this,t)||this;return n.displayName="SetupWizardController",n.state={currentScreenType:n.getInitialScreenType()},n}return n.__extends(t,e),t.prototype.getStateFromStores=function(){return{currentScreenType:p.default.currentScreenType(),currentRecoveryMethod:p.default.currentRecoveryMethod()}},t.prototype.getInitialScreenType=function(){return this.props.preauthed?c.SetupScreenTypes.WAITING_FOR_PREAUTH_DICT:this.props.device_limit_sw_nonce?c.SetupScreenTypes.LOADING:this.props.first_panel?this.props.first_panel:c.SetupScreenTypes.SIGN_IN},t.prototype.componentWillMount=function(){a.default.setShowCarousel(this.props.show_carousel),a.default.setIsPrimary(this.props.primary),a.default.setEmail(this.props.email),a.default.changeScreen(this.state.currentScreenType),a.default.setTeam(this.props.team),a.default.setRole(this.props.role),a.default.setScriptNonce(this.props.script_nonce),a.default.setCaptchaReady(!1)},t.prototype.componentDidMount=function(){e.prototype.componentDidMount.call(this);var t={google_login_desktop_variant:i.GOOGLE_LOGIN_DESKTOP,apple_login_desktop_variant:i.APPLE_LOGIN_DESKTOP,first_panel:this.state.currentScreenType};a.default.reportEvent("setup_view_loaded",t),a.default.setHostNonce(this.props.host_nonce),a.default.ensureClientConnection(),_.SetupWizardHostNonceFetcher.start(),a.default.getClientInfoAndTag(),a.default.getPlatform(),this.state.currentScreenType===c.SetupScreenTypes.DONE&&a.default.maybeFetchDropboxPath(),a.default.setIsTopmost(!0),this.state.currentScreenType===c.SetupScreenTypes.WAITING_FOR_PREAUTH_DICT&&a.default.enterPreauthedFlow(),this.props.device_limit_sw_nonce&&(a.default.setDeviceLimitNonce(this.props.device_limit_sw_nonce),a.default.tryDeviceLimitPreauth()),this.state.currentScreenType===c.SetupScreenTypes.SIGN_IN&&a.default.getShouldShowInfiniteHardDowngradeMsg(this.props.primary)},t.prototype.componentWillUnmount=function(){e.prototype.componentWillUnmount.call(this),_.SetupWizardHostNonceFetcher.stop()},t.prototype.render=function(){return this.props.show_carousel?o.default.createElement(R.SetupWizardCarousel,{screenType:this.state.currentScreenType,recoveryMethod:this.state.currentRecoveryMethod}):o.default.createElement(C,{screenType:this.state.currentScreenType})},t})(u.SetupStoreComponent);t.SetupWizardController=v;var C=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getWrapperClassName=function(){switch(this.props.screenType){case c.SetupScreenTypes.DEVICE_LIMIT_LANDING:case c.SetupScreenTypes.DEVICE_LIMIT_MANAGE:case c.SetupScreenTypes.DEVICE_LIMIT_COMPLETE:case c.SetupScreenTypes.LOADING:return"setup-wizard--clean";default:return"setup-wizard"}},t.prototype.renderScreen=function(){switch(this.props.screenType){case c.SetupScreenTypes.SIGN_IN:return o.default.createElement(y.SignInView,{key:"sign_in"});case c.SetupScreenTypes.SIGN_UP:return o.default.createElement(m.SignUpView,{key:"sign_up"});case c.SetupScreenTypes.SSO_CODE:return o.default.createElement(g.SingleSignOnCodeView,{key:"sso_code"});case c.SetupScreenTypes.TWO_FACTOR:return o.default.createElement(I.TwoFactorView,{key:"two_factor"});case c.SetupScreenTypes.TWO_FACTOR_RECOVERY:return o.default.createElement(N.TwoFactorRecoveryController,{key:"two_factor_recovery"});case c.SetupScreenTypes.VERIFY:return o.default.createElement(O.VerifyView,{key:"verify"});case c.SetupScreenTypes.DONE:return o.default.createElement(l.DoneView,{key:"done"});case c.SetupScreenTypes.ADVANCED_SETTINGS:return o.default.createElement(f.AdvancedSettingsView,{key:"settings"});case c.SetupScreenTypes.RENAME:return o.default.createElement(S.RenameView,{key:"rename"});case c.SetupScreenTypes.LARGE_DROPBOX:return o.default.createElement(h.LargeDropboxView,{key:"large_dropbox"});case c.SetupScreenTypes.LOW_DISK:return o.default.createElement(E.LowDiskView,{key:"low_disk"});case c.SetupScreenTypes.INFINITE_SETTING:return o.default.createElement(d.InfiniteSettingView,{key:"infinite"});case c.SetupScreenTypes.WAITING_FOR_PREAUTH_DICT:return"";case c.SetupScreenTypes.SCALE_MITIGATION:return o.default.createElement(T.ScaleMitigationView,{key:"scale"});case c.SetupScreenTypes.DEVICE_LIMIT_LANDING:return o.default.createElement(A.DeviceLimitView,{key:"device_limit",step:s.DeviceLimitStep.LANDING});case c.SetupScreenTypes.DEVICE_LIMIT_MANAGE:return o.default.createElement(A.DeviceLimitView,{key:"device_limit",step:s.DeviceLimitStep.MANAGE});case c.SetupScreenTypes.DEVICE_LIMIT_COMPLETE:return o.default.createElement(A.DeviceLimitView,{key:"device_limit",step:s.DeviceLimitStep.COMPLETE});case c.SetupScreenTypes.LOADING:return o.default.createElement(D.LoadingView,{key:"loading"})}return!1},t.prototype.render=function(){return o.default.createElement("div",{className:this.getWrapperClassName()},this.renderScreen())},t})(o.default.PureComponent);t.SetupWizardView=C;var w=r.requireCssWithComponent(v,["/static/css/legacy_packages/components-vflmkI4mw.css","/static/css/components/button-vflQ0agva.css","/static/css/third_party_auth-vfleTp-5K.css","/static/css/client/setup/setup_wizard-vflRUl-Ci.css"]);t.default=w})),define("modules/clean/react/client/setup_wizard/space_util",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isLargeDropbox=function(e){return e>10737418240},t.isLowDiskSpace=function(e,t,n){return e-t<Math.min(.1*n,524288e3)}})),define("modules/clean/react/client/setup_wizard/store",["require","exports","tslib","modules/core/browser","modules/clean/flux/base_store","modules/clean/react/client/setup_wizard/constants","modules/clean/react/client/setup_wizard/space_util","modules/clean/server_side_client_view_bridge","modules/clean/react/client/view_management"],(function(e,t,n,o,r,i,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),s=n.__importStar(s),a=n.__importStar(a);var _=(function(e){function t(){var t=e.call(this)||this;return t._init(),t}return n.__extends(t,e),t.prototype._init=function(){this._currentScreenType=i.SetupScreenTypes.SIGN_IN,this._currentScreenWidth=i.DEFAULT_SETUP_WIZARD_WIDTH,this._currentScreenHeight=i.DEFAULT_SETUP_WIZARD_HEIGHT,this._contentStartsOnlineOnly=!1,this._infiniteExposed=!1,this._willInstallKext=!1,this._isUnconsented=!1,this._fileProviderEnabled=!1,this._isPrimary=!0,this._hasSecondary=!1,this._fieldErrors={},this._provider=void 0,this._providerCheckpointToken=void 0,this._ssoState=i.SSOStates.OFF,this._isTopmost=!1,this._googleSignupData={isGoogleSignUp:!1,emailSig:void 0,refreshToken:void 0},this._isNewAccount=!1,this._disabledState=!1,this._diskUsageIsSet=!1,this._preauthed=!1,this._postLinkScreens=[],this._defaultRootPolicy=i.INFINITE_ROOT_POLICY_CHOICE.LOCAL,this._adminDefaultRootPolicy=null,this._showInfiniteHardDowngradeMsg=!1,this._currentHost=null,this._currentUser=null,this._deviceLimitNonce=null,this._skuContent=null,this._showMoveDropbox=!0,this._linkedDevices=[],this._tfaRecoveryToken=void 0,this._recoveryOptions=["code"],this._currentRecoveryMethod="code",this._backupPhoneLastTwoDigits="",this._tfaBackupCodeInputValue="",this._backupTextSent=!1,this._backupPhoneCodeInputValue="",this._activeBackupButton="",this._showCarousel=!1,this._platform=void 0},t.prototype._ensureClientConnection=function(){a.init()},t.prototype._setDisabledState=function(e){this._disabledState=e,this.emit_change()},t.prototype._setHostNonce=function(e){this._hostNonce=e,this.emit_change()},t.prototype._setScriptNonce=function(e){this._scriptNonce=e},t.prototype._setCaptchaReady=function(e){this._captchaReady=e},t.prototype._setClientInfo=function(e){this._clientInfo=e},t.prototype._setTag=function(e){this._tag=e},t.prototype._setDealCode=function(e){this._dealCode=e},t.prototype._setGoogleSignUpData=function(e){this._googleSignupData=e},t.prototype._setIsPrimary=function(e){return this._isPrimary=e},t.prototype._setHasSecondary=function(e){this._hasSecondary=e},t.prototype._setMultiDisabled=function(e){this._multiDisabled=e},t.prototype._setIsNewAccount=function(e){this._isNewAccount=e},t.prototype._setRole=function(e){this._role=e},t.prototype._setTeam=function(e){this._team=e},t.prototype._setContentStartsOnlineOnly=function(e){this._contentStartsOnlineOnly=e,this.emit_change()},t.prototype._setInfiniteExposed=function(e){this._infiniteExposed=e},t.prototype._setWillInstallKext=function(e){this._willInstallKext=e},t.prototype._setIsUnconsented=function(e){this._isUnconsented=e},t.prototype._setFileProviderEnabled=function(e){this._fileProviderEnabled=e},t.prototype._setEmail=function(e){this._email=e},t.prototype._setName=function(e){this._name=e},t.prototype._setDropboxPath=function(e){this._dropboxPath=e,this.emit_change()},t.prototype._setCurrentError=function(e){this._currentError=e},t.prototype._setFieldErrors=function(e){this._fieldErrors=e,this.emit_change()},t.prototype._setGenericError=function(e){this._genericError=e,this.emit_change()},t.prototype._clearFieldErrors=function(){this._fieldErrors={},this.emit_change()},t.prototype._removeFieldError=function(e){delete this._fieldErrors[e],this._fieldErrors=n.__assign({},this._fieldErrors),this.emit_change()},t.prototype._clearGenericError=function(){this._setGenericError(void 0)},t.prototype._setSsoState=function(e){this._ssoState=e,this.emit_change()},t.prototype._setDigits=function(e){this._digits=e,this.emit_change()},t.prototype._setIsEmail2FA=function(e){this._isEmail2FA=e,this.emit_change()},t.prototype._setCheckpointToken=function(e){this._checkpointToken=e},t.prototype._setFolderRename=function(e){this._oldName=e.old_name,this._newName=e.new_name},t.prototype._setDiskUsage=function(e){this._freeSpace=e.free_space,this._syncSpaceUsed=e.sync_space_used,this._totalSpace=e.total_space,this._diskUsageIsSet=!0},t.prototype._pushPostLinkScreen=function(e){this._postLinkScreens.push(e)},t.prototype._popPostLinkScreen=function(){var e=this._postLinkScreens.pop();e&&this._changeCurrentScreen(e)},t.prototype._setProviderCheckpointToken=function(e){return this._providerCheckpointToken=e},t.prototype._setProvider=function(e){return this._provider=e},t.prototype._setClipboardText=function(e){this._clipboardText=e,this.emit_change()},t.prototype._setShowMoveDropbox=function(e){this._showMoveDropbox=e},t.prototype._setOnboardingInfo=function(e){this._onboardingType=e.onboardingType,this._onboardingVariant=e.onboardingVariant},t.prototype._setIsTopmost=function(e){var t=new Set([i.SetupScreenTypes.ADVANCED_SETTINGS,i.SetupScreenTypes.LARGE_DROPBOX,i.SetupScreenTypes.LOW_DISK,i.SetupScreenTypes.SCALE_MITIGATION]),n=e;"win"===this._platform&&t.has(this._currentScreenType)&&(n=!1),this._isTopmost!==n&&(a.IsBridgeFunctionSupported("setIsTopmostViewLevel").then((function(e){if(e)return a.SetIsTopmostViewLevel(n)})),this._isTopmost=n)},t.prototype._changeCurrentScreen=function(e){this._currentScreenType=e;var t=this._showCarousel?i.SETUP_WIZARD_CAROUSEL_WIDTH:i.DEFAULT_SETUP_WIZARD_WIDTH,n=this._showCarousel?i.SETUP_WIZARD_CAROUSEL_HEIGHT:i.DEFAULT_SETUP_WIZARD_HEIGHT;e!==i.SetupScreenTypes.DEVICE_LIMIT_LANDING&&e!==i.SetupScreenTypes.DEVICE_LIMIT_MANAGE&&e!==i.SetupScreenTypes.DEVICE_LIMIT_COMPLETE||(t=i.DEVICE_LIMIT_VIEW_WIDTH,n=i.DEVICE_LIMIT_VIEW_HEIGHT),this._currentScreenWidth===t&&this._currentScreenHeight===n||(this._currentScreenWidth=t,this._currentScreenHeight=n,c.resizeView({width:this._currentScreenWidth,height:this._currentScreenHeight})),this._disabledState=!1,this._clearGenericError(),this.emit_change()},t.prototype._openDBFolder=function(){a.SetupWizardFinished(!1)},t.prototype._linkSecondary=function(){a.SetupWizardFinished(!0)},t.prototype._setPreauthed=function(e){this._preauthed=e},t.prototype._setDefaultRootPolicy=function(e){this._defaultRootPolicy=e},t.prototype._setAdminDefaultRootPolicy=function(e){this._adminDefaultRootPolicy=e},t.prototype._setShowInfiniteHardDowngradeMsg=function(e){this._showInfiniteHardDowngradeMsg=e,this.emit_change()},t.prototype._setCurrentHost=function(e){this._currentHost=e,this.emit_change()},t.prototype._setCurrentUser=function(e){this._currentUser=e,this.emit_change()},t.prototype._setDeviceLimitNonce=function(e){this._deviceLimitNonce=e,this.emit_change()},t.prototype._setSkuContent=function(e){this._skuContent=e,this.emit_change()},t.prototype._setCurrentRecoveryMethod=function(e){this._currentRecoveryMethod=e,this.emit_change()},t.prototype._setRecoveryOptions=function(e){this._recoveryOptions=e,this.emit_change()},t.prototype._setLinkedDevices=function(e){this._linkedDevices=[];for(var t=0,n=e;t<n.length;t++){var o=n[t];this._linkedDevices.push({name:o.name,icon:o.icon,lastActive:o.last_active})}this.emit_change()},t.prototype._setBackupPhoneLastTwoDigits=function(e){this._backupPhoneLastTwoDigits=e,this.emit_change()},t.prototype._setTfaRecoveryToken=function(e){this._tfaRecoveryToken=e,this.emit_change()},t.prototype._setTfaBackupCodeInputValue=function(e){this._tfaBackupCodeInputValue=e,this.emit_change()},t.prototype._setBackupTextSent=function(e){this._backupTextSent=e,this.emit_change()},t.prototype._setBackupPhoneCodeInputValue=function(e){this._backupPhoneCodeInputValue=e,this.emit_change()},t.prototype._setActiveBackupButton=function(e){this._activeBackupButton=e,this.emit_change()},t.prototype._signOut=function(){o.redirect(o.get_uri().setPath("/client/setup_wizard/sign_out").toString())},t.prototype._initializeCarousel=function(e){e&&(this._showCarousel=!0,this._currentScreenHeight=i.SETUP_WIZARD_CAROUSEL_HEIGHT,this._currentScreenWidth=i.SETUP_WIZARD_CAROUSEL_WIDTH),this.emit_change()},t.prototype._setPlatform=function(e){this._platform=e,this.emit_change()},t.prototype.defaultRootPolicy=function(){return this._defaultRootPolicy},t.prototype.adminDefaultRootPolicy=function(){return this._adminDefaultRootPolicy},t.prototype.effectiveDefaultRootPolicy=function(){switch(this._defaultRootPolicy){case i.INFINITE_ROOT_POLICY_CHOICE.ADMIN_DEFAULT:return this._adminDefaultRootPolicy;case i.INFINITE_ROOT_POLICY_CHOICE.LOCAL:return i.INFINITE_ROOT_POLICY.LOCAL;case i.INFINITE_ROOT_POLICY_CHOICE.ON_DEMAND:return i.INFINITE_ROOT_POLICY.ON_DEMAND}},t.prototype.currentScreenType=function(){return this._currentScreenType},t.prototype.disabledState=function(){return this._disabledState},t.prototype.hostNonce=function(){return this._hostNonce},t.prototype.scriptNonce=function(){return this._scriptNonce},t.prototype.captchaReady=function(){return this._captchaReady},t.prototype.clientInfo=function(){return this._clientInfo},t.prototype.tag=function(){return this._tag},t.prototype.googleSignUpData=function(){return this._googleSignupData},t.prototype.isGoogleSignUp=function(){return this._googleSignupData.isGoogleSignUp},t.prototype.isNewAccount=function(){return this._isNewAccount},t.prototype.isPrimary=function(){return this._isPrimary},t.prototype.hasSecondary=function(){return this._hasSecondary},t.prototype.multiDisabled=function(){return this._multiDisabled},t.prototype.role=function(){return this._role},t.prototype.team=function(){return this._team},t.prototype.contentStartsOnlineOnly=function(){return this._contentStartsOnlineOnly},t.prototype.infiniteExposed=function(){return this._infiniteExposed},t.prototype.willInstallKext=function(){return this._willInstallKext},t.prototype.isUnconsented=function(){return this._isUnconsented},t.prototype.fileProviderEnabled=function(){return this._fileProviderEnabled},t.prototype.dealCode=function(){return this._dealCode},t.prototype.emailTrimmed=function(){return null==this._email?this._email:this._email.replace(/\s+$/g,"")},t.prototype.name=function(){return this._name},t.prototype.dropboxPath=function(){return this._dropboxPath},t.prototype.currentError=function(){return this._currentError},t.prototype.fieldErrors=function(){return this._fieldErrors},t.prototype.genericError=function(){return this._genericError},t.prototype.digits=function(){return this._digits},t.prototype.isEmail2FA=function(){return this._isEmail2FA},t.prototype.checkpointToken=function(){return this._checkpointToken},t.prototype.oldName=function(){return this._oldName},t.prototype.newName=function(){return this._newName},t.prototype.ssoState=function(){return this._ssoState},t.prototype.providerCheckpointToken=function(){return this._providerCheckpointToken},t.prototype.provider=function(){return this._provider},t.prototype.clipboardText=function(){return this._clipboardText},t.prototype.onboardingType=function(){return this._onboardingType},t.prototype.onboardingVariant=function(){return this._onboardingVariant},t.prototype.freeSpace=function(){return this._freeSpace},t.prototype.syncSpaceUsed=function(){return this._syncSpaceUsed},t.prototype.totalSpace=function(){return this._totalSpace},t.prototype.isLowDiskSpace=function(){return!!this._diskUsageIsSet&&s.isLowDiskSpace(this._freeSpace,this._syncSpaceUsed,this._totalSpace)},t.prototype.isLargeDropbox=function(){return!!this._diskUsageIsSet&&s.isLargeDropbox(this._syncSpaceUsed)},t.prototype.preauthed=function(){return this._preauthed},t.prototype.showInfiniteHardDowngradeMsg=function(){return this._showInfiniteHardDowngradeMsg},t.prototype.currentHost=function(){return this._currentHost},t.prototype.currentUser=function(){return this._currentUser},t.prototype.deviceLimitNonce=function(){return this._deviceLimitNonce},t.prototype.skuContent=function(){return this._skuContent},t.prototype.currentRecoveryMethod=function(){return this._currentRecoveryMethod},t.prototype.getRecoveryOptions=function(){return this._recoveryOptions},t.prototype.getLinkedDevices=function(){return this._linkedDevices},t.prototype.getBackupPhoneLastTwoDigits=function(){return this._backupPhoneLastTwoDigits},t.prototype.showMoveDropbox=function(){return this._showMoveDropbox},t.prototype.tfaRecoveryToken=function(){return this._tfaRecoveryToken},t.prototype.tfaBackupCodeInputValue=function(){return this._tfaBackupCodeInputValue},t.prototype.backupTextSent=function(){return this._backupTextSent},t.prototype.backupPhoneCodeInputValue=function(){return this._backupPhoneCodeInputValue},t.prototype.activeBackupButton=function(){return this._activeBackupButton},t.prototype.currentScreenWidth=function(){return this._currentScreenWidth},t.prototype.currentScreenHeight=function(){return this._currentScreenHeight},t.prototype.showCarousel=function(){return this._showCarousel},t.prototype.platform=function(){return this._platform},t.prototype._new_payload=function(e){var t=e.action;switch(t.type){case i.SetupActionTypes.ENSURE_CLIENT_CONNECTION:return this._ensureClientConnection();case i.SetupActionTypes.POP_POST_LINK_SCREEN:return this._popPostLinkScreen();case i.SetupActionTypes.PUSH_POST_LINK_SCREEN:return this._pushPostLinkScreen(t.data.screenType);case i.SetupActionTypes.SET_DISABLED_STATE:return this._setDisabledState(t.data);case i.SetupActionTypes.SET_HOST_NONCE:return this._setHostNonce(t.data);case i.SetupActionTypes.SET_SCRIPT_NONCE:return this._setScriptNonce(t.data);case i.SetupActionTypes.SET_CLIENT_INFO:return this._setClientInfo(t.data);case i.SetupActionTypes.SET_TAG:return this._setTag(t.data);case i.SetupActionTypes.SET_GOOGLE_SIGN_UP_DATA:return this._setGoogleSignUpData(t.data);case i.SetupActionTypes.SET_IS_PRIMARY:return this._setIsPrimary(t.data);case i.SetupActionTypes.SET_HAS_SECONDARY:return this._setHasSecondary(t.data);case i.SetupActionTypes.SET_MULTI_DISABLED:return this._setMultiDisabled(t.data);case i.SetupActionTypes.SET_IS_NEW_ACCOUNT:return this._setIsNewAccount(t.data);case i.SetupActionTypes.SET_ROLE:return this._setRole(t.data);case i.SetupActionTypes.SET_TEAM:return this._setTeam(t.data);case i.SetupActionTypes.SET_CONTENT_STARTS_ONLINE_ONLY:return this._setContentStartsOnlineOnly(t.data);case i.SetupActionTypes.SET_INFINITE_EXPOSED:return this._setInfiniteExposed(t.data);case i.SetupActionTypes.SET_WILL_INSTALL_KEXT:return this._setWillInstallKext(t.data);case i.SetupActionTypes.SET_IS_UNCONSENTED:return this._setIsUnconsented(t.data);case i.SetupActionTypes.SET_FILE_PROVIDER_ENABLED:return this._setFileProviderEnabled(t.data);case i.SetupActionTypes.SET_DEAL_CODE:return this._setDealCode(t.data);case i.SetupActionTypes.SET_EMAIL:return this._setEmail(t.data);case i.SetupActionTypes.SET_NAME:return this._setName(t.data);case i.SetupActionTypes.SET_DROPBOX_PATH:return this._setDropboxPath(t.data);case i.SetupActionTypes.SET_DIGITS:return this._setDigits(t.data);case i.SetupActionTypes.SET_IS_EMAIL_2FA:return this._setIsEmail2FA(t.data);case i.SetupActionTypes.SET_CHECKPOINT_TOKEN:return this._setCheckpointToken(t.data);case i.SetupActionTypes.SET_PROVIDER_CHECKPOINT_TOKEN:return this._setProviderCheckpointToken(t.data);case i.SetupActionTypes.SET_PROVIDER:return this._setProvider(t.data);case i.SetupActionTypes.SET_CLIPBOARD_TEXT:return this._setClipboardText(t.data);case i.SetupActionTypes.SET_FOLDER_RENAME:return this._setFolderRename(t.data);case i.SetupActionTypes.SET_DISK_USAGE:return this._setDiskUsage(t.data);case i.SetupActionTypes.SET_ONBOARDING_INFO:return this._setOnboardingInfo(t.data);case i.SetupActionTypes.CHANGE_SCREEN:if(this._changeCurrentScreen(t.data.screenType),t.data.error)return this._setCurrentError(t.data.error);break;case i.SetupActionTypes.SET_FIELD_ERRORS:return this._setFieldErrors(t.data);case i.SetupActionTypes.REMOVE_FIELD_ERROR:return this._removeFieldError(t.data);case i.SetupActionTypes.CLEAR_FIELD_ERRORS:return this._clearFieldErrors();case i.SetupActionTypes.SET_GENERIC_ERROR:return this._setGenericError(t.data);case i.SetupActionTypes.CLEAR_GENERIC_ERROR:return this._clearGenericError();case i.SetupActionTypes.SET_SSO_STATE:return this._setSsoState(t.data);case i.SetupActionTypes.SET_IS_TOPMOST:return this._setIsTopmost(t.data);case i.SetupActionTypes.OPEN_DB_FOLDER:return this._openDBFolder();case i.SetupActionTypes.LINK_SECONDARY:return this._linkSecondary();case i.SetupActionTypes.SET_CAPTCHA_READY:return this._setCaptchaReady(t.data);case i.SetupActionTypes.SET_PREAUTHED:return this._setPreauthed(t.data);case i.SetupActionTypes.SET_DEFAULT_ROOT_POLICY:return this._setDefaultRootPolicy(t.data);case i.SetupActionTypes.SET_ADMIN_DEFAULT_ROOT_POLICY:return this._setAdminDefaultRootPolicy(t.data);case i.SetupActionTypes.SET_SHOW_INFINITE_HARD_DOWNGRADE_MSG:return this._setShowInfiniteHardDowngradeMsg(t.data);case i.SetupActionTypes.SET_CURRENT_HOST:return this._setCurrentHost(t.data.id);case i.SetupActionTypes.SET_CURRENT_USER:return this._setCurrentUser(t.data.user);case i.SetupActionTypes.SET_DEVICE_LIMIT_NONCE:return this._setDeviceLimitNonce(t.data.deviceLimitNonce);case i.SetupActionTypes.SIGN_OUT:return this._signOut();case i.SetupActionTypes.SET_SKU_CONTENT:return this._setSkuContent(t.data.skuContent);case i.SetupActionTypes.SET_CURRENT_RECOVERY_METHOD:return this._setCurrentRecoveryMethod(t.data);case i.SetupActionTypes.SET_RECOVERY_OPTIONS:return this._setRecoveryOptions(t.data);case i.SetupActionTypes.SET_LINKED_DEVICES:return this._setLinkedDevices(t.data);case i.SetupActionTypes.SET_SHOW_MOVE_DROPBOX:return this._setShowMoveDropbox(t.data);case i.SetupActionTypes.SET_BACKUP_PHONE_LAST_TWO_DIGITS:return this._setBackupPhoneLastTwoDigits(t.data);case i.SetupActionTypes.SET_TFA_RECOVERY_TOKEN:return this._setTfaRecoveryToken(t.data);case i.SetupActionTypes.SET_TFA_BACKUP_CODE_INPUT_VALUE:return this._setTfaBackupCodeInputValue(t.data);case i.SetupActionTypes.SET_BACKUP_TEXT_SENT:return this._setBackupTextSent(t.data);case i.SetupActionTypes.SET_BACKUP_PHONE_CODE_INPUT_VALUE:return this._setBackupPhoneCodeInputValue(t.data);case i.SetupActionTypes.SET_ACTIVE_BACKUP_BUTTON:return this._setActiveBackupButton(t.data);case i.SetupActionTypes.SET_SHOW_CAROUSEL:return this._initializeCarousel(t.data);case i.SetupActionTypes.SET_PLATFORM:return this._setPlatform(t.data)}},t})(r.Store);t.SetupStore=_;var p=new _;t.default=p})),define("modules/clean/react/dropbox_header",["require","exports","tslib","react","prop-types","modules/clean/react/css","modules/clean/react/image","modules/clean/static_urls","modules/core/i18n"],(function(e,t,n,o,r,i,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importStar(r);var _=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e,t;e=a.static_url("/static/images/logo_catalog/dropbox_logo_glyph_2015_m1-vfleInWIl.svg"),t=a.static_url("/static/images/logo_catalog/dropbox_logo_text_2015_m1-vflV-vZRB.svg");var n=o.default.createElement(s.Image,{className:"dropbox-logo--glyph",src:e,srcHiRes:e}),r=o.default.createElement(s.Image,{className:"dropbox-logo--type",src:t,srcHiRes:t}),i=o.default.createElement("span",null,n,r);return"glyph"===this.props.variant?i=n:"text"===this.props.variant&&(i=r),o.default.createElement("h1",{id:"dropbox-logo",className:"dropbox-logo dropbox-logo--"+this.props.variant+" "+this.props.className,"aria-label":this.props.ariaLabel},i)},t.displayName="DropboxLogo",t.propTypes={children:r.object,className:r.string,ariaLabel:r.string,experiments:r.object,variant:r.oneOf(["logo","glyph","text"]).isRequired},t.defaultProps={className:"",experiments:{},variant:"logo",ariaLabel:c._("Dropbox")},t})(o.default.Component);t.DropboxLogo=_;var p=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return o.default.createElement("header",{className:"dropbox-mast-head "+this.props.className},this.props.children?this.props.children:o.default.createElement("nav",{className:"dropbox-mast-head__nav o-grid"},o.default.createElement("div",{className:"o-grid__col o-grid__col--4-of-12 u-font-left"},o.default.createElement("a",{href:"/downloading",className:"c-btn c-btn--tertiary"},"Download the App")),o.default.createElement("div",{className:"o-grid__col o-grid__col--4-of-12 u-font-center"},o.default.createElement(_,{className:"dropbox-mast-head-logo",variant:"logo"})),o.default.createElement("div",{className:"o-grid__col o-grid__col--4-of-12 u-font-right"},o.default.createElement("a",{href:"login",className:"c-btn c-btn--tertiary"},"Sign In"))))},t.displayName="_DropboxHeader",t.propTypes={children:r.object,className:r.string,experiments:r.object},t.defaultProps={className:"",experiments:{}},t})(o.default.Component),u=i.requireCssWithComponent(p,["/static/css/react/components/header-vflcSUEcy.css"]);t.DropboxHeader=u})),define("modules/clean/validators/email_validator",["require","exports","tslib","modules/clean/validators/input_validator","modules/core/i18n"],(function(e,t,n,o,r){"use strict";var i,s;Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),s=void 0,(i=(function(){function e(){}return e.initClass=function(){this.EMPTY_MSG=r._("Please enter an email address"),this.WRONG_NUM_ATS_MSG=r._("An email address must contain a single @"),this.BAD_USERNAME_MSG=r._("The username portion of the email address is invalid (the portion before the @)"),this.BAD_DOMAIN_MSG=r._("The domain portion of the email address is invalid (the portion after the @)"),this.USERNAME_PATTERN=new RegExp("^[\\w!#$%&'*+\\-\\/=?^`{|}~.]+@.*$","i"),this.DOMAIN_PATTERN=new RegExp("^.*@([a-z0-9][a-z0-9\\-]*\\.)+([a-z]{2,15}|xn--[a-z0-9\\-])$","i"),s=function(e){var t=null!=e?e.split("@"):void 0;return 2===(null!=t?t.length:void 0)},this.validate=o.default.composeValidators([[""+this.EMPTY_MSG,o.default.notEmptyValidator()],[""+this.WRONG_NUM_ATS_MSG,s],[""+this.BAD_USERNAME_MSG,o.default.regexValidator(this.USERNAME_PATTERN)],[""+this.BAD_DOMAIN_MSG,o.default.regexValidator(this.DOMAIN_PATTERN)]])},e})()).initClass(),i=i,t.default=i})),define("modules/clean/validators/input_validator",["require","exports"],(function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),n=(function(){function e(){}return e.groupValidationResults=function(e){var t={},n=!0;for(var o in e){for(var r=e[o],i=!0,s=0,a=Array.from(r);s<a.length;s++){var c=a[s];i=i&&c.valid}t[""+o]={valid:i,result:r},n=n&&i}return{valid:n,validation_result:t}},e.composeValidators=function(e){return function(t){for(var n=[],o=0,r=Array.from(e);o<r.length;o++){var i=r[o],s=Array.from(i),a=s[0],c=s[1];n.push({valid:c(t),message:a})}return n}},e.regexValidator=function(e){return function(t){return!(null==t||!t.match(e))}},e.minLengthValidator=function(e){return function(t){return(null!=t?t.length:void 0)>=e}},e.maxLengthValidator=function(e){return function(t){return(null!=t?t.length:void 0)<=e}},e.notEmptyValidator=function(){return function(e){return(null!=e?e.length:void 0)>0}},e.trueValidator=function(){return function(e){return!!e}},e})(),t.default=n})),define("modules/clean/validators/password_validator",["require","exports","tslib","modules/clean/validators/input_validator","modules/core/i18n"],(function(e,t,n,o,r){"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),(i=(function(){function e(){}return e.initClass=function(){this.EMPTY_MSG=r._("Please enter a password"),this.TOO_SHORT_MSG=r._("Passwords must be 6 characters or more"),this.MIN_LENGTH=6,this.validate=o.default.composeValidators([[""+this.EMPTY_MSG,o.default.notEmptyValidator()],[""+this.TOO_SHORT_MSG,o.default.minLengthValidator(this.MIN_LENGTH)]])},e})()).initClass(),i=i,t.default=i}));
//# sourceMappingURL=pkg-legacy-bc.min.js-vflwwWYzK.map