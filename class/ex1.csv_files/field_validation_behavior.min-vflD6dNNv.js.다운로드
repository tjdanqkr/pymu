define(["require","exports","tslib","rondo-forms/v1/types","rondo/v1/index","rondo-saga/v1","rondo-forms/v1/utils"],(function(e,t,a,i,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FieldValidationBehavior=function(e){var t=e.validator,l=e.allowNonValid,s=e.validAction,d=e.validateAction,u=e.parseValue,c=void 0===u?function(e){return e}:u,v=e.fieldValue;return(function(){function e(){this.initialState=function(){return{validInfo:i.ValidInfoValid}},this.actionValid=n.createOrUseIn(this,s).handle((function(e,t){return{validInfo:t.validInfo}})),this.actionValidate=n.createOrUseIn(this,d),this.valid=n.createSelector((function(e){return e.validInfo.valid}),(function(e){return e})),this.validMessage=n.createSelector((function(e){var t=e.validInfo;return t.message?t.message:void 0})),this.validInfo=n.createSelector((function(e){return e.validInfo}))}return e.prototype.fieldChangeSaga=function(e,i,n,s){var d,u,f,p,h,g,y,V;return void 0===s&&(s=l),a.__generator(this,(function(a){switch(a.label){case 0:if(n)return[2];if(d={type:"valid",valid:!0},u=void 0!==e?e:v(),!t)return[3,6];if(f=t(c(u)),!o.isPromise(f))return[3,5];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,f];case 2:return p=a.sent(),V=p.type,y=p.valid,g=p.message,d={message:g,valid:y,type:V||o.validStringType(y)},[3,4];case 3:return a.sent(),d={valid:!1,type:"error"},[3,4];case 4:return[3,6];case 5:g=(h=f).message,y=h.valid,V=h.type,d={message:g,valid:y,type:V||o.validStringType(!!y)},a.label=6;case 6:return d.valid||s?[4,r.put(this.actionValid)({fieldValue:u,validInfo:d})]:[2];case 7:return a.sent(),[2]}}))},e.prototype.run=function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,this.fieldChangeSaga(v(),void 0,!1,!0)];case 1:return e.sent(),[2]}}))},e.displayName="FieldValidationBehavior",a.__decorate([r.decorators.takeEvery(["actionValidate"])],e.prototype,"fieldChangeSaga",null),a.__decorate([n.saga],e.prototype,"run",null),e})()}}));
//# sourceMappingURL=field_validation_behavior.min.js-vfl5ns4Ei.map