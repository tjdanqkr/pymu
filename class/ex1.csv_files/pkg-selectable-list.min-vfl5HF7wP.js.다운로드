define("modules/clean/avatar/list",["require","exports","tslib","classnames","react","react-dom-factories","prop-types","modules/clean/avatar/overflow_count_pill","modules/clean/avatar/size","modules/clean/react/css"],(function(e,t,o,i,r,n,l,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),r=o.__importDefault(r),n=o.__importStar(n),l=o.__importStar(l),a=o.__importDefault(a);var d=r.default.createElement,u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._defaultRenderOverflowCount=function(e){var o=e.overflowCount;return d(a.default,{count:o,dimension:t.props.avatarDimension,key:"overflow_pill:"+o,onClick:t.props.onOverflowCountClick})},t.getClassName=function(){return i.default(["horizontal-avatar-list",t.props.className,t.props.animation?["animation","is-animated"]:null])},t}return o.__extends(t,e),t.prototype.render=function(){var e=this.props.avatars,t=this.props.maxVisible,o=0;if(this.props.undisplayableCount&&(o+=this.props.undisplayableCount),(this.props.undisplayableCount||e.length>t)&&(t--,o+=e.length-t,e=e.slice(0,t)),o){var r=null!=this.props.overflowCountRenderer?this.props.overflowCountRenderer:this._defaultRenderOverflowCount;e.push(r({overflowCount:o,avatarArgs:{avatarDimension:this.props.avatarDimension,onAvatarClick:this.props.onOverflowCountClick,titleButtonDirection:"south"}}))}return n.div({className:i.default({"c-facepile":!0})},[n.div({className:this.getClassName(),key:"facepile"},e)])},t.displayName="HorizontalAvatarList",t.propTypes={avatars:l.array.isRequired,avatarDimension:l.oneOf(s.VALID_AVATAR_DIMENSIONS).isRequired,maxVisible:l.number.isRequired,undisplayableCount:l.number.isRequired,onOverflowCountClick:l.func,overflowCountRenderer:l.func,animation:l.bool,className:l.string},t.defaultProps={className:""},t})(r.default.Component);t.default=c.requireCssWithComponent(u,["/static/css/avatar_list-vfljDYEVn.css"])})),define("modules/clean/react/path_filter_button",["require","exports","tslib","react","spectrum/dropdown_button","modules/clean/react/title_bubble","modules/clean/em_string","modules/clean/filepath"],(function(e,t,o,i,r,n,l,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),a=o.__importStar(a),t.PathFilterButton=function(e){var t=e.path,o=e.defaultText,s=e.dropdownClasses,c=e.disabled,d=e.onClick,u=t&&!a.paths_are_equal(t,"/")?l.Emstring.em_snippet(a.filename(t),10,.6):null,p=i.default.createElement(r.DropdownButton,{className:s,disabled:c,onClick:d},u||o);return u?i.default.createElement(n.TitleBubble,{content:t,position:n.TitleBubble.POSITIONS.BOTTOM},p):p}})),define("modules/clean/react/selectable_list",["require","exports","tslib","immutable","keymaster","react","external/lodash","react-dom","modules/core/browser_detection"],(function(e,t,o,i,r,n,l,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importStar(i),r=o.__importDefault(r),n=o.__importDefault(n),l=o.__importStar(l),a=o.__importStar(a),s=o.__importStar(s),t.SELECTABLE_LIST_KEY_SCOPE="SelectableList",t.SELECTABLE_TILE_GRID_KEY_SCOPE="SelectableTileGrid";var c,d,u,p="";function f(e,t,o,i,r,n){switch(e){case d.PREV:return Math.max(0,t-1);case d.NEXT:return Math.min(o-1,t+1);case d.PREV_ROW:case d.NEXT_ROW:return(function(e,t,o,i,r,n){if(void 0===n&&(n=!1),t<0||t>=o)return 0;r&&0!==r.length||(r=[0]);var a=l.sortedIndex(r,t),s=r[a]===t?a:a-1,c=r[s],u=(t-c)%i;switch(e){case d.NEXT_ROW:var p=r.length;if(s===p-1&&t+i>=o){var f=(o-c)%i;if((t-c)%i<f||0===f)return n?o-1:t}var m=s+1,h=m<r.length?r[m]:o;if(t+i-(i-((h-c)%i||i))<h){var _=h-1;return Math.min(t+i,_)}var g=m+1<p?r[m+1]-1:o-1;return Math.min(h+u,g);case d.PREV_ROW:if(0===s&&t-i<0)return n?0:t;if(t-i>=c)return t-i;var E=r[s-1],S=c-1,v=c-E,y=E+v-(v%i||i);return Math.min(y+u,S)}})(e,t,o,i,r,n)}}function m(e,t,o,i,r,n,l,a,s){switch(e){case d.PREV:case d.PREV_ROW:if(0===t)return l;for(var c=f(e,t,a.length,o,s,!0),u=Math.min(t,i)-c,p=t-Math.max(c,i),m=n;m>n-p;m--){var h=l.indexOf(a[m]);l.splice(h,1)}for(m=r-1;m>=r-u;m--)l.push(a[m]);break;case d.NEXT:case d.NEXT_ROW:if(t===a.length)return l;var _=f(e,t,a.length,o,s,!0);for(p=Math.min(_,i)-r,u=_-Math.max(t,i),m=r;m<r+p;m++){h=l.indexOf(a[m]);l.splice(h,1)}for(m=n+1;m<=n+u;m++)l.push(a[m])}return l}(function(e){e.KEYBOARD="keyboard"})(c=t.SelectableListActionSource||(t.SelectableListActionSource={})),(function(e){e[e.PREV=0]="PREV",e[e.NEXT=1]="NEXT",e[e.PREV_ROW=2]="PREV_ROW",e[e.NEXT_ROW=3]="NEXT_ROW"})(d=t.SelectDirection||(t.SelectDirection={})),(function(e){e.DEFAULT="DEFAULT",e.EXTEND="EXTEND",e.ONLY="ONLY"})(u=t.SelectOptions||(t.SelectOptions={})),t.findNeighboringItem=f,t.findSelectionRange=m;var h=(function(e){function l(t){var o=e.call(this,t)||this;return o.isFocused=!1,o.handleSelectPrevious=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.selectNeighboringItem(d.PREV,c.KEYBOARD))},o.handleSelectPreviousRow=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.selectNeighboringItem(d.PREV_ROW,c.KEYBOARD))},o.handleExtendSelectionToPrevious=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.extendSelectionRange(d.PREV,c.KEYBOARD))},o.handleExtendSelectionToPreviousRow=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.extendSelectionRange(d.PREV_ROW,c.KEYBOARD))},o.handleSelectNext=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.selectNeighboringItem(d.NEXT,c.KEYBOARD))},o.handleSelectNextRow=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.selectNeighboringItem(d.NEXT_ROW,c.KEYBOARD))},o.handleExtendSelectionToNext=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.extendSelectionRange(d.NEXT,c.KEYBOARD))},o.handleExtendSelectionToNextRow=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.extendSelectionRange(d.NEXT_ROW,c.KEYBOARD))},o.handleKeyboardDeselectAll=function(e){var t=o.props.selection;e&&!o.isGlobalEvent(e)||!t.selected.size||o.handleDeselectAll(c.KEYBOARD)},o.handleDeselectAll=function(e){if(o.updateSelection([],e,!0),a.findDOMNode(o).contains(document.activeElement)){var t=document.activeElement;t.blur&&t.blur()}o.props.onDeselectAll&&o.props.onDeselectAll()},o.handleKeyboardSelectAll=function(e){var t=o.props,i=t.itemIds,r=t.selection;e&&!o.isGlobalEvent(e)||r.selected.size===i.length||o.handleSelectAll(c.KEYBOARD)},o.handleSelectAll=function(e){o.updateSelection(o.props.itemIds,e,!0)},o.handleDeselect=function(e,t,i){if(t)return o.extendOrShrinkSelectionByFile(e,i);o.updateSelectionById(e,"delete",i)},o.handleSelect=function(e,t,i){if(void 0===t&&(t=u.DEFAULT),t===u.EXTEND)return o.extendOrShrinkSelectionByFile(e);t===u.ONLY?o.updateSelection([e],i,!0):o.updateSelectionById(e,"add",i)},o.handleFocusFile=function(e){o.setState({focusedFileId:e})},o.isSelectableListEvent=function(){return o.isFocused},o.handleFocus=function(){o.isFocused=!0},o.handleBlur=function(){o.isFocused=!1},o.state={selection:t.selection,keyScope:t.keyScope},o}return o.__extends(l,e),l.prototype.componentWillReceiveProps=function(e){this.props.keyScope!==e.keyScope&&(this.setState({keyScope:e.keyScope}),this.isFocused=!1)},l.prototype.componentDidMount=function(){this.setupKeyboardShortcuts(),this.setFocusedIdFromSelection(this.props.selection)},l.prototype.componentDidUpdate=function(e,t){e.selection&&this.props.selection&&e.selection.anchor!==this.props.selection.anchor&&this.setFocusedIdFromSelection(this.props.selection),this.state.keyScope!==t.keyScope&&this.setupKeyboardShortcuts()},l.prototype.componentWillUnmount=function(){this.cleanupKeyboardShortcuts()},l.prototype.setupKeyboardShortcuts=function(){var e=this,o=this.state.keyScope;(p=r.default.getScope())!==o&&r.default.setScope(o);var i=r.default.filter||function(e){var t=e.target||e.srcElement;if(!(t instanceof Element))return!0;var o=t.tagName;return!("INPUT"===o||"SELECT"===o||"TEXTAREA"===o)};r.default.filter=function(t){var o=t.target||t.srcElement,r=o.tagName;return(!e.isSelectableListEvent()||"BUTTON"!==r)&&(o instanceof HTMLInputElement&&"checkbox"===o.type||i.call(e,t))},o===t.SELECTABLE_LIST_KEY_SCOPE?(r.default("up",o,this.handleSelectPrevious),r.default("shift+up",o,this.handleExtendSelectionToPrevious),r.default("down",o,this.handleSelectNext),r.default("shift+down",o,this.handleExtendSelectionToNext)):o===t.SELECTABLE_TILE_GRID_KEY_SCOPE&&(r.default("left",o,this.handleSelectPrevious),r.default("shift+left",o,this.handleExtendSelectionToPrevious),r.default("right",o,this.handleSelectNext),r.default("shift+right",o,this.handleExtendSelectionToNext),r.default("up",o,this.handleSelectPreviousRow),r.default("shift+up",o,this.handleExtendSelectionToPreviousRow),r.default("down",o,this.handleSelectNextRow),r.default("shift+down",o,this.handleExtendSelectionToNextRow)),r.default("escape",o,this.handleKeyboardDeselectAll),s.mac?r.default("command+a",o,this.handleKeyboardSelectAll):r.default("ctrl+a",o,this.handleKeyboardSelectAll)},l.prototype.cleanupKeyboardShortcuts=function(){r.default.clearScope(this.state.keyScope),p&&r.default.setScope(p),r.default.resetFilter()},l.prototype.setFocusedIdFromSelection=function(e){e.anchor&&0!==e.selected.size&&this.setState({focusedFileId:e.anchor})},l.prototype.updateSelection=function(e,t,o){void 0===o&&(o=!1);var r=this.props.selection,n=o?e.length?e[0]:this.props.itemIds[0]:r.anchor,l=r.merge({selected:i.OrderedSet(e),anchor:n});this.props.onSelectionChange(l,t)},l.prototype.selectNeighboringItem=function(e,t){var o=this.props,i=o.itemIds,r=o.selection,n=o.tilesPerRow,l=o.sectionStartIndices,a=i.indexOf(r.selected.last()),s=i[f(e,a,i.length,n,l)];this.setState({focusedFileId:s}),this.updateSelection([s],t,!0)},l.prototype.extendSelectionRange=function(e,t){var o=this.props,i=o.itemIds,r=o.selection,n=o.tilesPerRow,l=o.sectionStartIndices,a=r.anchor||i[0];if(a){var s=i.indexOf(r.selected.last()),c=r.selected.toArray(),d=i.indexOf(a),u=this.getRangeOfSelectedBlock(a);c=m(e,s,n,d,u.startIndex,u.endIndex,c,i,l),this.setState({focusedFileId:c[c.length-1]}),this.updateSelection(c,t)}},l.prototype.getRangeOfSelectedBlock=function(e){for(var t=this.props,o=t.itemIds,i=t.selection,r=o.indexOf(e),n=0,l=0;n=r,!(--r<0)&&i.selected.has(o[r]););for(r=n;;){var a=o[r];if(!a||!i.selected.has(a))break;l=r,r++}return{startIndex:n,endIndex:l}},l.prototype.extendOrShrinkSelectionByFile=function(e,t){var o=this.props,i=o.itemIds,r=o.selection,n=r.anchor||i[0];if(n){var l=i.indexOf(n),a=i.indexOf(e),s=this.getRangeOfSelectedBlock(n),c=s.startIndex,d=s.endIndex,u=[],p=[];i.forEach((function(e,t){c<=t&&t<=d&&u.push(e),(a<=t&&t<=l||l<=t&&t<=a)&&p.push(e)})),a<l&&p.reverse();var f=r.update("selected",(function(e){return e.subtract(u).union(p)}));this.setState({focusedFileId:e}),this.props.onSelectionChange(f,t)}},l.prototype.updateSelectionById=function(e,t,o){var i=this.props.selection,r="add"===t?e:i.anchor,n=i.selected[t](e),l=i.merge({selected:n,anchor:r||null});this.props.onSelectionChange(l,o)},l.prototype.isGlobalEvent=function(e){var t=e.target instanceof HTMLInputElement,o=e.target instanceof HTMLElement,i=t&&"checkbox"===e.target.type,r=o&&(e.target.classList.contains("mc-popover-selectable-item")||e.target.classList.contains("mc-popover-content-item")||e.target.classList.contains("mc-popover-trigger"));return!document.activeElement||document.activeElement===document.body||e.target instanceof Element&&(a.findDOMNode(this).contains(e.target)&&(!t||i)&&!r)},l.prototype.render=function(){var e=this.props.children,t=this.state.focusedFileId;if(!e)return null;var o=e;return"function"==typeof e&&(o=e({focusedFileId:t,handleDeselect:this.handleDeselect,handleDeselectAll:this.handleDeselectAll,handleFocusFile:this.handleFocusFile,handleSelect:this.handleSelect,handleSelectAll:this.handleSelectAll,isSelectableListEvent:this.isSelectableListEvent})),n.default.createElement("div",{onBlur:this.handleBlur,onFocus:this.handleFocus},o)},l})(n.default.PureComponent);t.SelectableList=h})),define("modules/clean/avatar/shared_link_avatar",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/avatar/size","modules/clean/avatar/style","modules/clean/css","modules/clean/static_urls","modules/core/i18n"],(function(e,t,o,i,r,n,l,a,s,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),r=o.__importStar(r),n=o.__importStar(n),s=o.__importStar(s);var u=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.componentDidMount=function(){return s.require_css("/static/css/scooter/scooter-scoped-vflYtdnTb.css")},t.prototype.render=function(){var e=r.img({src:c.static_url("/static/images/avatar/shared-link-icon-vflHCU_m6.svg"),alt:this.props.alt||d._("Shared link"),width:12,className:"u-mar-horizontal-xs"}),t=["c-avatar--meta"];null!=this.props.optionalClass&&t.push(this.props.optionalClass),null!=this.props.onClick&&t.push("u-unbutton");var o=a.getClassName(this.props.dimension,t);return null!=this.props.onClick?r.button({className:o,onClick:this.props.onClick},e):r.div({className:o,onClick:this.props.onClick},e)},t.displayName="SharedLinkAvatar",t.propTypes={alt:n.string,dimension:n.oneOf(l.VALID_AVATAR_DIMENSIONS).isRequired,onClick:n.func,optionalClass:n.string},t})(i.default.Component);t.default=u})),define("modules/clean/react/tree_view",["require","exports","tslib","classnames","immutable","react","react-dom","external/lodash","modules/clean/react/icon/folder_icon","spectrum/icon_content","jquery","modules/clean/ajax","modules/clean/em_string","modules/clean/filepath","modules/clean/keycode","modules/clean/react/css","modules/clean/react/sprite","modules/core/i18n","modules/core/notify"],(function(e,t,o,i,r,n,l,a,s,c,d,u,p,f,m,h,_,g,E){"use strict";var S;Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),r=o.__importStar(r),n=o.__importDefault(n),l=o.__importStar(l),a=o.__importStar(a),d=o.__importDefault(d),u=o.__importStar(u),t.MAX_LABEL_LENGTH=20,t.INDENT_SIZE_PX=15,(function(e){e[e.None=0]="None",e[e.TreeItem=1]="TreeItem",e[e.HeaderItem=2]="HeaderItem",e[e.StaticHeader=3]="StaticHeader"})(S=t.RootStyle||(t.RootStyle={}));var v=function(e){this.key=e.key,this.label=e.label?e.label:"",this.icon=e.icon?e.icon:"",this.disabled=!!e.disabled,this.canExpand=!!e.canExpand,this.forceExpanded=!!e.forceExpanded};t.TreeItem=v;var y=(function(){function e(e){var t=r.Map();this.rootItem=e.rootItem,this.items=e.items,this.childItemsByParentKey=e.childItemsByParentKey||t,this.parentItemByChildKey=e.parentItemByChildKey||r.Map()}return e.createWithRootItem=function(t){return new e({rootItem:t,items:r.Map([[t.key,t]])})},e.prototype.getParentItem=function(e){if(e){var t=this.parentItemByChildKey.get(e.key);return t?this.items.get(t):null}},e.prototype.getChildItems=function(e){return this.childItemsByParentKey.get(e.key)||null},e.prototype.isParent=function(e){return this.childItemsByParentKey.has(e.key)},e.prototype.setChildItems=function(t,o){o=r.List(o);var i=r.Map(o.map((function(e){return[e.key,e]}))),n=r.Map(this.items).merge(i),l=r.Map(this.childItemsByParentKey).set(t.key,o),a=r.Map(this.parentItemByChildKey);return o.forEach((function(e){return a=a.set(e.key,t.key)})),new e({rootItem:this.rootItem,items:n,childItemsByParentKey:l,parentItemByChildKey:a})},e})();t.Tree=y;var b=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){return n.default.createElement("ul",{className:"tree-view__group",role:"group"},this.props.children)},t})(n.default.Component),T=(function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){if(e.preventDefault(),e.stopPropagation(),!t.props.item.disabled){var o=l.findDOMNode(t.refs.expandButton);o&&o.contains(e.target)||t.props.onClick&&t.props.onClick(t.props.item)}},t.handleExpandClick=function(e){e.preventDefault(),t.props.onExpandButtonClick&&t.props.onExpandButtonClick(t.props.item,!t.props.isExpanded)},t}return o.__extends(r,e),r.prototype.renderExpandButton=function(){return n.default.createElement("div",{className:"tree-view__expand-button",onClick:this.handleExpandClick,ref:"expandButton",role:"button"},n.default.createElement(_.Sprite,{group:"web",name:this.props.isExpanded?"bullet_minus":"bullet_plus",alt:this.props.isExpanded?g._("Collapse"):g._("Expand")}))},r.prototype.renderIcon=function(){var e=this.props.item,t=e.icon,o=e.disabled;return n.default.createElement("div",{className:"tree-view__icon-wrapper"},n.default.createElement(c.IconContent,{className:"tree-view__item-icon",name:s.convertLegacyFolderIconToSpectrum(t,"small"),disabled:o,height:19,width:19}))},r.prototype.render=function(){var e=!this.props.canExpand,o=i.default({"tree-view__item":!0,"tree-view__item--leaf":e}),r=this.props.canExpand&&!this.props.showAsHeader;return n.default.createElement("li",{key:this.props.item.key,id:this.props.id,className:o,onClick:this.handleClick,role:"treeitem","aria-disabled":this.props.item.disabled,"aria-label":this.props.item.label,"aria-level":this.props.level+1,"aria-selected":!!this.props.isSelected||void 0,"aria-expanded":r?this.props.isExpanded:void 0},n.default.createElement("span",{className:i.default({"tree-view__item-row":!0,"tree-view__item-row--disabled":this.props.item.disabled}),style:{paddingLeft:this.props.showAsHeader?0:this.props.level*t.INDENT_SIZE_PX}},this.props.showAsHeader||e?void 0:this.renderExpandButton(),this.props.item.icon?this.renderIcon():void 0,this.props.item.label?n.default.createElement("span",{className:"tree-view__item-label"},p.Emstring.em_snippet(this.props.item.label,t.MAX_LABEL_LENGTH)):void 0),this.props.children)},r.defaultProps={isSelected:!1,isExpanded:!1,canExpand:!1,level:0,onClick:a.noop,onExpandButtonClick:a.noop,showAsHeader:!1},r})(n.default.Component);t.TreeItemView=T;var I,w=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.renderIcon=function(){return this.props.item.icon?n.default.createElement(_.Sprite,{className:"tree-view__header-icon",group:"web",name:this.props.item.icon,alt:""}):null},t.prototype.render=function(){return n.default.createElement("div",{className:"tree-view__item-row"},this.renderIcon(),n.default.createElement("h3",{className:"tree-view__header",id:this.props.id},this.props.item.label))},t})(n.default.Component),L=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={selectedItemKey:null,expandedItemKeys:r.Set([t.props.tree.rootItem.key]),showFocused:!1},t.selectItem=function(e){t.setState({selectedItemKey:null!=e&&e.key?e.key:null}),t.props.onItemSelected(e)},t.handleExpandButtonClick=function(e,o){t.setState({expandedItemKeys:t.setItemExpanded(e.key,o)}),t.props.onItemExpanded(e,o)},t.handleKeyDown=function(e){switch(e.which){case m.KeyCode.UP:t.advanceSelection(!0)&&e.preventDefault();break;case m.KeyCode.DOWN:t.advanceSelection(!1)&&e.preventDefault();break;case m.KeyCode.RIGHT:if(null!=t.state.selectedItemKey){var o=t.props.tree.items.get(t.state.selectedItemKey);t.canItemExpand(o)&&(t.handleExpandButtonClick(o,!0),e.preventDefault())}break;case m.KeyCode.LEFT:if(t.state.selectedItemKey){o=t.props.tree.items.get(t.state.selectedItemKey);t.canItemExpand(o)&&(t.handleExpandButtonClick(o,!1),e.preventDefault())}}},t.handleOnFocus=function(){return t.setState({showFocused:!0})},t.handleOnBlur=function(){return t.setState({showFocused:!1})},t}return o.__extends(t,e),t.prototype.componentDidMount=function(){d.default(l.findDOMNode(this)).on({keydown:this.handleKeyDown})},t.prototype.componentWillReceiveProps=function(e){e.resetSelectedItem&&e.resetSelectedItem!==this.props.resetSelectedItem&&this.setState({selectedItemKey:null})},t.prototype.componentWillUnmount=function(){d.default(l.findDOMNode(this)).off("keydown")},t.prototype.componentDidUpdate=function(e,t){if(this.state.selectedItemKey&&this.state.selectedItemKey!==t.selectedItemKey){var o=d.default(l.findDOMNode(this)),i=o.find('[aria-selected="true"]').eq(0);i.length&&this.scrollElementIntoViewIfNeeded(i,o)}},t.prototype.scrollElementIntoViewIfNeeded=function(e,t){var o=t.scrollTop(),i=o+e.position().top;if(i-o<0)t.scrollTop(i);else{var r=t.innerHeight(),n=o+r,l=e.innerHeight();i+l>n&&t.scrollTop(i-r+l)}},t.prototype.hasSelectableRootItem=function(){var e=this.props.rootStyle;return e===S.TreeItem||e===S.HeaderItem},t.prototype.getHTMLIdPrefix=function(){return this.HTMLIdPrefix||(this.HTMLIdPrefix="tree-view-"+Math.floor(16777215*Math.random()).toString(16))},t.prototype.getLastLeafOf=function(e){var t=this.props.tree.getChildItems(e);return this.state.expandedItemKeys.contains(e.key)&&null!=t&&t.size>0?this.getLastLeafOf(t.last()):e},t.prototype.getPrevItem=function(e){if(!e)return null;var t=this.props.tree.getParentItem(e);if(!t)return null;var o=this.props.tree.getChildItems(t),i=o.indexOf(e);return i>0?this.getLastLeafOf(o.get(i-1)):0===i?t===this.props.tree.rootItem&&!this.hasSelectableRootItem()?null:t:null},t.prototype.getNextItem=function(e,t){if(void 0===t&&(t=!0),!e)return null;var o=this.state.expandedItemKeys.contains(e.key)&&this.props.tree.isParent(e);if(t&&o)return this.props.tree.getChildItems(e).first();var i=this.props.tree.getParentItem(e);if(!i)return null;var r=this.props.tree.getChildItems(i),n=r.size-1,l=r.indexOf(e);return l===n?this.getNextItem(i,!1):0<=l&&l<n&&r.get(l+1)||null},t.prototype.advanceSelection=function(e){if(void 0===e&&(e=!1),!this.state.selectedItemKey){var t=void 0;if(this.hasSelectableRootItem())t=this.props.tree.rootItem;else{var o=this.props.tree.getChildItems(this.props.tree.rootItem);t=o?o.first():null}return this.selectItem(t),!0}var i=this.props.tree.items.get(this.state.selectedItemKey),r=e?this.getPrevItem(i):this.getNextItem(i);return!!r&&(this.selectItem(r),!0)},t.prototype.getValidHTMLIdForItem=function(e){return(""+this.getHTMLIdPrefix()+e.key).replace(/\s+/g,"_")},t.prototype.setItemExpanded=function(e,t){return t?this.state.expandedItemKeys.add(e):this.state.expandedItemKeys.delete(e)},t.prototype.canItemExpand=function(e){return e&&(e.canExpand||this.props.tree.isParent(e))},t.prototype.renderSingleItem=function(e,t,i,r){void 0===r&&(r={});var l=o.__assign({id:this.getValidHTMLIdForItem(e),key:e.key,item:e,isSelected:this.state.selectedItemKey===e.key,isExpanded:this.state.expandedItemKeys.contains(e.key)||e.forceExpanded,canExpand:this.canItemExpand(e)&&!e.forceExpanded,level:t,onClick:this.selectItem,onExpandButtonClick:this.handleExpandButtonClick},r),a=this.props.treeItemView;return n.default.createElement(a,o.__assign({},l),i)},t.prototype.renderItemAndDescendants=function(e,t){var o,i=this.state.expandedItemKeys.contains(e.key)||e.forceExpanded;return this.props.tree.isParent(e)&&i&&(o=this.renderChildrenOfItemAsGroup(e,t+1)),this.renderSingleItem(e,t,o)},t.prototype.renderChildrenOfItemAsGroup=function(e,t){var o=this;if(!e||!this.props.tree.isParent(e))return null;var i=this.props.tree.getChildItems(e).map((function(e){return o.renderItemAndDescendants(e,t)}));return n.default.createElement(b,null,i.toJS())},t.prototype.render=function(){var e,t,o,r=this.props.tree.rootItem;if(this.props.rootStyle===S.TreeItem)t=n.default.createElement(b,null,this.renderItemAndDescendants(r,0));else if(this.props.rootStyle===S.HeaderItem)e=this.getValidHTMLIdForItem(r),t=n.default.createElement(b,null,this.renderSingleItem(r,0,null,{showAsHeader:!0,id:e}),this.renderChildrenOfItemAsGroup(r,0));else if(this.props.rootStyle===S.StaticHeader)e=this.getValidHTMLIdForItem(r),t=n.default.createElement(b,null,n.default.createElement(w,{item:r,id:e}),this.renderChildrenOfItemAsGroup(r,0));else{if(this.props.rootStyle!==S.None)throw new Error("Unknown root style: "+this.props.rootStyle);t=this.renderChildrenOfItemAsGroup(this.props.tree.rootItem,0)}if(this.state.selectedItemKey){var l=this.props.tree.items.get(this.state.selectedItemKey);o=this.getValidHTMLIdForItem(l)}return n.default.createElement("div",{role:"tree",tabIndex:0,onFocus:this.handleOnFocus,onBlur:this.handleOnBlur,className:i.default("tree-view","ax-focusable",{"is-focused":this.state.showFocused}),"aria-labelledby":e||void 0,"aria-activedescendant":o},t,this.props.children)},t.defaultProps={rootStyle:S.None,onItemSelected:function(e){},onItemExpanded:function(e,t){},treeItemView:T},t})(n.default.Component);t.TreeView=h.requireCssWithComponent(L,["/static/css/react/tree_view-vflzUVIoT.css","/static/css/accessibility-vfliGZNRm.css"]),(function(e){e.BRIEFCASE="s_briefcase",e.HOUSE="s_house",e.DROPBOX="dropbox"})(I=t.RootIcon||(t.RootIcon={}));var F=(function(e){function t(t,o){var i=e.call(this,t)||this;return i.folderNsId=o,i}return o.__extends(t,e),t})(v);t.FolderTreeItem=F;var C=function(e){return new F({key:e.path,label:f.filename(e.path),canExpand:e.has_subdirs,icon:e.icon,disabled:e.read_only},e.contained_ns)},R=(function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._pendingAjaxRequest=null,t.state={showLoadingScreen:!1,tree:y.createWithRootItem(new v({key:"/",icon:t.props.rootIcon,label:t.props.treeRootName}))},t.asyncFetchSubFoldersForItem=function(e){var o=e===t.state.tree.rootItem;o&&t.setState({showLoadingScreen:!0}),t._pendingAjaxRequest&&t._pendingAjaxRequest.abort(),t._pendingAjaxRequest=t.props.mkAjaxRequest(e.key),Promise.resolve(t._pendingAjaxRequest).then((function(o){var i=t.parseFolderList(o),r=t.state.tree.setChildItems(e,i);t.setState({tree:r})})).catch(t.props.handleError).then((function(){if(null!=t._pendingAjaxRequest){t._pendingAjaxRequest=null,o&&(t.props.isLoadingAdditionalData||t.setState({showLoadingScreen:!1}));var e=l.findDOMNode(t.refs.treeView);e&&e.focus()}}))},t.handleItemSelected=function(e){e instanceof F?t.props.onFolderSelected(e.key,e.folderNsId):t.props.onFolderSelected(e.key)},t.handleExpandButtonClick=function(e,o){o&&!t.state.tree.isParent(e)&&t.asyncFetchSubFoldersForItem(e)},t.renderLoadingMessage=function(){return n.default.createElement("span",{className:"tree-view__loading-label"},g._("Loading your folders…"))},t}return o.__extends(i,e),i.prototype.componentDidMount=function(){this.asyncFetchSubFoldersForItem(this.state.tree.rootItem)},i.prototype.componentWillReceiveProps=function(e){e.isLoadingAdditionalData||e.isLoadingAdditionalData===this.props.isLoadingAdditionalData||this.setState({showLoadingScreen:!1})},i.prototype.componentWillUnmount=function(){this._pendingAjaxRequest&&(this._pendingAjaxRequest.abort(),this._pendingAjaxRequest=null)},i.prototype.parseFolderList=function(e){return e.map(C)},i.prototype.render=function(){var e=this.props.isRootSelectable?S.HeaderItem:S.StaticHeader;return n.default.createElement(t.TreeView,{ref:"treeView",tree:this.state.tree,rootStyle:e,onItemSelected:this.handleItemSelected,onItemExpanded:this.handleExpandButtonClick,resetSelectedItem:this.props.resetSelectedItem},this.state.showLoadingScreen?this.renderLoadingMessage():void 0)},i.defaultProps={onFolderSelected:function(e,t){},handleError:function(e){E.Notify.error(g._("An error occurred while trying to load your folder."))}},i})(n.default.Component),D=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t})(R);t.FolderTreeView=D;var N=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.parseFolderList=function(e){var t=this,o=-1,i=e.map((function(e,i){var r=e.path;return t.props.pinnedFolder&&r===t.props.pinnedFolder&&(o=i),C(e)}));if(-1!==o){var r=i[o];i.splice(o,1),i.unshift(r)}return i},t})(R);t.PinnedFolderTreeView=N,t.AdminFolderTreeView=function(e){var t=e.mkAjaxRequest||function(t){return(function(e,t,o){var i={ns_id:o,ns_path:t,hide_tmfs:!0};return u.WebRequestOref({url:"/browse_util/tree_view_team_folder_contents",type:"POST",subject_user:e,data:i,dataType:"json"})})(e.userId,t,e.rootNSID)};return n.default.createElement(D,o.__assign({},e,{rootIcon:I.DROPBOX,mkAjaxRequest:t}))},t.UserFolderTreeView=function(e){var t=e.mkAjaxRequest||function(t){return(function(e,t){var o={folder:t};return u.WebRequestOref({url:"/browse_util/tree_view_folders",type:"POST",subject_user:e,data:o,dataType:"json"})})(e.user.id,t)},i=e.forceRootSelectable||"edit"===e.user.user_root_permissions,r=e.is_paired?e.user.is_team?I.BRIEFCASE:I.HOUSE:I.DROPBOX,l=o.__assign(o.__assign({},e),{mkAjaxRequest:t,isRootSelectable:i,rootIcon:r});if(e.user.is_cdm_member){var a=e.user.cdm_tmf_path;return n.default.createElement(N,o.__assign({},l,{pinnedFolder:a}))}return n.default.createElement(D,o.__assign({},l))}})),define("modules/clean/react/files_view/beta_tag",["require","exports","tslib","react","modules/core/i18n"],(function(e,t,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),t.BetaTag=function(){return i.default.createElement("span",null,i.default.createElement("span",{className:"file-label-beta-tag"},r._("Beta",{comment:"A small label next to a product featuire name indicating that the feature is released as a beta"})))}})),define("modules/clean/react/files_view/constants",["require","exports","modules/clean/react/files_view/types","modules/core/i18n"],(function(e,t,o,i){"use strict";var r,n,l,a;Object.defineProperty(t,"__esModule",{value:!0});var s=i._("Name",{comment:"Column header that indicates filename.",project:"filename"});t.DEFAULT_COLUMN_HEADER_HEIGHT=40,t.DEFAULT_ROW_HEIGHT=72,t.DEFAULT_ROW_HEIGHT_DENSE=60,t.ROW_TITLE_HEIGHT=24,t.ROW_SUBTITLE_HEIGHT=16,t.ROW_VERTICAL_PADDING=16,t.ROW_SNIPPET_VERTICAL_MARGIN=8,t.SNIPPET_HEIGHT_PER_ROW=16,t.SNIPPET_HORIZONTAL_PADDING=16,t.MEDIA_CELL_ICON_WIDTH=64,t.DEFAULT_ROW_HEIGHT_WITH_SNIPPETS=t.ROW_VERTICAL_PADDING+t.ROW_TITLE_HEIGHT+t.ROW_SUBTITLE_HEIGHT+t.ROW_SNIPPET_VERTICAL_MARGIN+3*t.SNIPPET_HEIGHT_PER_ROW,t.COMPACT_COLUMN_HEADER_HEIGHT=48,t.PINNED_TEAM_FOLDER_SECONDARY_HEADER_PADDING_TOP=12,t.CHECKBOX_CELL_FLEX="0 0 36px",t.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH=65,t.LIST_VIEW_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.FILE_NAME_CELL_WITH_SNIPPETS_FLEX_BASIS={3:50,2:65,1:100},t.LIST_VIEW_SEARCH_MODE_WITH_SNIPPETS_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_WITH_SNIPPETS_FLEX_BASIS[3]+"%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_WITH_SNIPPETS_FLEX_BASIS[2]+"%","0 0 35%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_WITH_SNIPPETS_FLEX_BASIS[1]+"%"]},t.GRID_VIEW_COLUMN_FLEX=[t.CHECKBOX_CELL_FLEX,"1 1"],t.LIST_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:s,popoverTriggerLabel:s,isLocked:!0},{sortField:o.SortField.MODIFIED,label:i._("Modified"),popoverTriggerLabel:i._("Modified")},{sortField:o.SortField.SHARED_WITH,label:i._("Members"),popoverTriggerLabel:i._("Members"),isSortOrderOptionDisabled:!0},{sortField:o.SortField.CATEGORY,label:i._("Type"),popoverTriggerLabel:i._("Type")},{sortField:o.SortField.EXTENSION,label:i._("Extension"),popoverTriggerLabel:i._("Extension")},{sortField:o.SortField.SIZE,label:i._("Size"),popoverTriggerLabel:i._("Size")}],t.GRID_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:s,popoverTriggerLabel:s},{sortField:o.SortField.MODIFIED,label:i._("Modified"),popoverTriggerLabel:i._("Modified")},{sortField:o.SortField.CATEGORY,label:i._("Type"),popoverTriggerLabel:i._("Type")},{sortField:o.SortField.EXTENSION,label:i._("Extension"),popoverTriggerLabel:i._("Extension")},{sortField:o.SortField.SIZE,label:i._("Size"),popoverTriggerLabel:i._("Size")}],t.SEARCH_LIST_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:s,popoverTriggerLabel:s,isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:i._("Modified"),popoverTriggerLabel:i._("Modified"),isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.SIZE,label:i._("Size"),popoverTriggerLabel:i._("Size"),isLocked:!0,isSortDisabled:!0}],t.SEARCH_LIST_VIEW_SORT_ENABLED_COLUMNS=[{sortField:o.SortField.FILENAME,label:s,popoverTriggerLabel:s,isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.RELEVANCE,label:i._("Relevance"),popoverTriggerLabel:i._("Relevance"),isLocked:!1,isSortDisabled:!1},{sortField:o.SortField.SIZE,label:i._("Size"),popoverTriggerLabel:i._("Size"),isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:i._("Last modified"),popoverTriggerLabel:i._("Last modified"),isLocked:!1,isSortDisabled:!1}],t.SEARCH_GRID_VIEW_SORT_ENABLED_COLUMNS=[{sortField:o.SortField.RELEVANCE,label:i._("Relevance"),popoverTriggerLabel:i._("Relevance"),isLocked:!1,isSortDisabled:!1},{sortField:o.SortField.MODIFIED,label:i._("Last modified"),popoverTriggerLabel:i._("Last modified"),isLocked:!1,isSortDisabled:!1}],t.SEARCH_LIST_VIEW_COLUMNS_DELETED=[{sortField:o.SortField.FILENAME,label:s,popoverTriggerLabel:s,isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:i._("Deleted"),popoverTriggerLabel:i._("Deleted"),isLocked:!0,isSortDisabled:!0}],t.FilesViewTileGridConstants={NUM_THRESHOLD_ROWS:10,SCROLL_DELTA_THRESHOLD:1},t.AllNewFolderCreationStates=[o.NewFolderCreationState.CREATE_FOLDER_INACTIVE,o.NewFolderCreationState.PENDING_INPUT,o.NewFolderCreationState.SAVING_INPUT],t.AllRenameStates=[o.RenameState.PENDING_INPUT,o.RenameState.SAVING_INPUT],t.AllViewTypes=[o.ViewType.Grid,o.ViewType.LargeGrid,o.ViewType.List],t.ViewTypeLabels=((r={})[o.ViewType.Grid]=i._("Small"),r[o.ViewType.List]=i._("List"),r[o.ViewType.LargeGrid]=i._("Large"),r),t.AllDropTargetHighlightModes=[o.DropTargetHighlightMode.NONE,o.DropTargetHighlightMode.ALL_FOLDERS,o.DropTargetHighlightMode.NONSELECTED_FOLDERS,o.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS,o.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS],t.AllSortFields=[o.SortField.FILENAME,o.SortField.MODIFIED,o.SortField.CATEGORY,o.SortField.EXTENSION,o.SortField.SIZE,o.SortField.SHARED_WITH,o.SortField.SYNC_SETTING,o.SortField.FILE_COUNTS],t.SortIsFilename=[o.SortField.FILENAME,o.SortField.CATEGORY,o.SortField.EXTENSION,o.SortField.SHARED_WITH,o.SortField.SYNC_SETTING],t.AllLoadingStates=[o.LoadingState.LOADED,o.LoadingState.LOADING_FIRST_PAGE,o.LoadingState.LOADING_REMAINING_PAGES,o.LoadingState.LOAD_ERROR],t.AllSortDirections=[o.SortDirection.ASCENDING,o.SortDirection.DESCENDING],t.ViewTypeThumbnailSizes=((n={})[o.ViewType.Grid]=256,n[o.ViewType.LargeGrid]=512,n[o.ViewType.List]=32,n),t.ViewTypeGridSizes=((l={})[o.ViewType.Grid]=160,l[o.ViewType.LargeGrid]=480,l[o.ViewType.List]=0,l),t.CulledListConstants={ITEM_ROW_HEIGHT_PX:46,MAESTRO_ITEM_ROW_HEIGHT_PX:57,SEARCH_ROW_HEIGHT_PX:53,MAESTRO_SEARCH_ROW_HEIGHT_PX:66,DEFAULT_HEADER_HEIGHT_PX:142,ITEM_BUFFER_SIZE:5},t.OverflowMenuConstants={MENU_ITEM_HEIGHT_PX:32,MENU_MARGIN_PX:8,MENU_POPOVER_ITEM_GROUP_SEPARATOR_HEIGHT_PX:17},t.VIEW_TYPE_COOKIE_NAME="browse_view_type",t.COLUMNS_STORAGE_KEY="browse_columns",t.VIEW_TYPE_STORAGE_KEY="files_view_types",t.VIEW_TYPE_GLOBAL_SCOPE="*",t.VIEW_TYPE_SCOPE_IMAGE_SEARCH=":search/image",t.IMAGE_THUMBNAIL_EXTENSIONS=["jpg","jpeg","png","tiff","tif","gif","bmp","webp","wbmp","psd","svg","svgz","ai","eps","otf","ttf","3gp","3gpp","3gpp2","asf","avi","dv","flv","m2t","m4v","mkv","mov","mp4","mpeg","mpg","mts","mxf","oggtheora","ogv","rm","ts","vob","webm","wmv","indd"],t.defaultViewTypes=((a={})[t.VIEW_TYPE_GLOBAL_SCOPE]=o.ViewType.List,a[t.VIEW_TYPE_SCOPE_IMAGE_SEARCH]=o.ViewType.LargeGrid,a)})),define("modules/clean/react/files_view/drag_and_drop",["require","exports","modules/clean/react/browse/models","modules/clean/react/no-jquery"],(function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=new i.ScopedEventHandlers(document);t.setupExternalDragHandler=function(e,t,o,n,l,a,s){r.add(e,"dragenter",(function(e){(t()||o())&&!i.closestElement(e.target,l)&&a()&&(s(null),n())}))},t.cleanupExternalDragHandler=function(e){r.remove(e,"dragenter")},t.onFileDragEnterItem=function(e,t,i,r,n,l,a,s){if(t||i)if(e.is_dir&&!(r&&i)){if(n)return;var c=l.isCurrentPathWriteable()&&!o.File.isReadOnlySharedFolder(e);a(e),s({path:e.fq_path,hasPermissionToUploadToFolder:c})}else a(null),s()}})),define("modules/clean/react/files_view/file_jump",["require","exports","tslib","modules/clean/keycode","modules/clean/react/no-jquery","modules/core/dom"],(function(e,t,o,i,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o.__importStar(n);var l=["/","\\",":","?","*","<",">","|"],a=null;t.handleKeyPress=function(e,t,o,s){var c=null!=e.which?e.which:e.keyCode,d=String.fromCharCode(c);c<i.KeyCode.SPACE||l.includes(d)||!r.closestElement(document.activeElement,".brws-checkbox-cell")&&n.focus_in_input()||e.metaKey||e.altKey||e.altGraphKey||e.ctrlKey||c===i.KeyCode.SPACE&&!t()||(c===i.KeyCode.SPACE&&t()&&e.preventDefault(),o(d),null!=a&&clearTimeout(a),a=setTimeout((function(){s()}),1e3))}})),define("modules/clean/react/files_view/file_list_empty_folder_table",["require","exports","tslib","immutable","external/lodash","react","spectrum/media_table","spectrum/table","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/types"],(function(e,t,o,i,r,n,l,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importStar(i),r=o.__importStar(r),n=o.__importDefault(n);var d=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.props.onTTI&&this.props.onTTI(),this.setupKeyboardShortcuts()},t.prototype.componentWillUnmount=function(){this.cleanupKeyboardShortcuts()},t.prototype.setupKeyboardShortcuts=function(){var e=this;s.setupFilesViewKeyboardShortcuts({viewType:c.ViewType.List,getIsGlobalEvent:s.generateGetIsGlobalEvent(this),getIsItemEvent:function(){return!1},getSelectedFiles:function(){return i.OrderedMap()},isCurrentPathWriteable:function(){return!1},selectAllAction:r.noop,deselectAllAction:r.noop,onCopyToClipboard:r.noop,onDelete:r.noop,onFocusSearchBar:this.props.onFocusSearchBar,onNavigateToFileOrFolder:r.noop,onNavigateToParentFolder:this.props.onNavigateToParentFolder,onPasteFromClipboard:this.props.onPasteFromClipboard,onShowRename:r.noop,scope:"EmptyFolderTable",onShowHelpMenu:function(){return e.props.onOpenKeyboardShortcutModal()}})},t.prototype.cleanupKeyboardShortcuts=function(){s.resetFilesViewKeyboardShortcuts("EmptyFolderTable")},t.prototype._renderTitle=function(){return n.default.createElement("h3",{className:"u-font-strong empty-folder-table-title"},this.props.title)},t.prototype._renderSubtitle=function(){var e=this.props,t=e.subtitle,o=e.subtitleLink,i=e.subtitleOnClick;return t&&o?n.default.createElement("a",{className:"empty-folder-table-subtitle empty-folder-table-link",href:o,onClick:i},t):t?n.default.createElement("span",{className:"empty-folder-table-subtitle"},t):void 0},t.prototype.render=function(){for(var e=[],t=0;t<this.props.numRowsAbove;t++)e.push(n.default.createElement(l.MediaRow,{key:-t-1}));var o=[],i=Math.max(this.props.totalRows-this.props.numRowsAbove-1,0);for(t=0;t<i;t++)o.push(n.default.createElement(l.MediaRow,{key:t+1}));return n.default.createElement(a.Table,{role:"main","aria-atomic":"true","aria-live":"polite",className:"empty-folder-table"},n.default.createElement(a.TableHead,null),n.default.createElement(a.TableBody,null,e,n.default.createElement(l.MediaRow,{key:0},n.default.createElement(l.MediaCell,{className:"empty-folder-table-cell",title:this._renderTitle(),subtitle:this._renderSubtitle()})),o))},t.defaultProps={numRowsAbove:2,totalRows:14,onFocusSearchBar:r.noop,onPasteFromClipboard:r.noop,onNavigateToParentFolder:r.noop,onOpenKeyboardShortcutModal:r.noop},t})(n.default.PureComponent);t.EmptyFolderTable=d})),define("modules/clean/react/files_view/file_list_utils",["require","exports","modules/clean/filetypes","modules/clean/react/files_view/types","modules/clean/react/browse/models","modules/clean/sharing/browse_exports"],(function(e,t,o,i,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldFileBeHighlightedDropTarget=function(e){var t=e.file,n=e.isSelected,l=e.dropTargetHighlightMode;if(l===i.DropTargetHighlightMode.NONE)return!1;if(!t.is_dir)return!1;if(r.File.isReadOnlySharedFolder(t))return!1;if(t.isDeleted)return!1;switch(l){case i.DropTargetHighlightMode.ALL_FOLDERS:return!0;case i.DropTargetHighlightMode.NONSELECTED_FOLDERS:return!n;case i.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS:return!n&&t.type!==o.FileTypes.SHARED_FOLDER;case i.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS:return!n&&![o.FileTypes.SHARED_FOLDER,o.FileTypes.TEAM_SHARED_FOLDER].includes(t.type)}return!1},t.isSharingDisabledForFile=function(e){var t=e.context,i=e.file;return e.user,i.isDeleted||i.is_dir&&n.shouldUsePublicFolderSharing(t.config,i.fq_path)||r.File.isTeamMemberFolder(i)||!r.File.canViewFileMembers(i,t)||t.isInsideVaultFolder||i.type===o.FileTypes.VAULT_FOLDER||i.type===o.FileTypes.SANDBOX},t.isExtensionsMenuDisabledForContext=function(e){return e.context.isInsideVaultFolder}})),define("modules/clean/react/files_view/keyboard_shortcuts",["require","exports","tslib","keymaster","react-dom","modules/clean/react/browse/action_logger","modules/clean/react/files_view/file_jump","modules/clean/react/files_view/types","modules/clean/react/no-jquery","modules/clean/undo","modules/core/browser_detection","modules/core/i18n","modules/core/notify"],(function(e,t,o,i,r,n,l,a,s,c,d,u,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),r=o.__importStar(r),l=o.__importStar(l),c=o.__importStar(c),d=o.__importStar(d),t.FILES_VIEW_SHORTCUTS=[{key:u._("/",{comment:"Keyboard symbol for the forward slash"}),desc:u._("Search")},{windowsKey:u._("Ctrl + a",{comment:"Windows keyboard name for the control key plus a key (capitalized Ctrl)"}),macKey:u._("⌘ + a",{comment:"Mac keyboard name for the command key plus a key (⌘ symbol)"}),desc:u._("Select all files")},{windowsKey:u._("Esc",{comment:"Windows keyboard name for the esc key (capitalized)"}),macKey:u._("esc",{comment:"Mac keyboard name for the esc key (all lowercase)"}),desc:u._("Deselect all files")},{windowsKey:u._("Ctrl + c",{comment:"Windows keyboard name for the control key plus c key (capitalized Ctrl)"}),macKey:u._("⌘ + c",{comment:"Mac keyboard name for the command key plus c key (⌘ symbol)"}),desc:u._("Copy selected file(s)")},{windowsKey:u._("Ctrl + v",{comment:"Windows keyboard name for the control key plus v key (capitalized Ctrl)"}),macKey:u._("⌘ + v",{comment:"Mac keyboard name for the command key plus v key (⌘ symbol)"}),desc:u._("Paste selected file(s) into the current folder")},{key:u._("F2",{comment:"Keyboard name for the F2 key"}),desc:u._("Rename selected file")},{windowsKey:u._("Delete",{comment:"Windows keyboard name for the delete key (capitalized)"}),macKey:u._("delete",{comment:"Mac keyboard name for the delete key (all lowercase)"}),desc:u._("Delete selected file(s)")},{windowsKey:u._("Ctrl + z",{comment:"Windows keyboard name for the control key plus z key (capitalized Ctrl)"}),macKey:u._("⌘ + z",{comment:"Mac keyboard name for the command key plus z key (⌘ symbol)"}),desc:u._("Undo recent move/copy/rename/delete")},{key:u._("?",{comment:"Keyboard symbol for the question mark"}),desc:u._("Show keyboard shortcuts")}],t.FILES_VIEW_LIST_SHORTCUTS=o.__spreadArrays([{key:u._("↑",{comment:"Keyboard symbol for the up arrow key"}),desc:u._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:u._("↓",{comment:"Keyboard symbol for the down arrow key"}),desc:u._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:u._("←",{comment:"Keyboard symbol for the left arrow key"}),desc:u._("Go up a folder")},{key:u._("→",{comment:"Keyboard symbol for the right arrow key"}),desc:u._("Open folder")}],t.FILES_VIEW_SHORTCUTS),t.FILES_VIEW_TILE_GRID_SHORTCUTS=o.__spreadArrays([{key:u._("↑",{comment:"Keyboard symbol for the up arrow key"}),desc:u._("Select file in previous row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:u._("↓",{comment:"Keyboard symbol for the down arrow key"}),desc:u._("Select file in next row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:u._("←",{comment:"Keyboard symbol for the left arrow key"}),desc:u._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:u._("→",{comment:"Keyboard symbol for the right arrow key"}),desc:u._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})}],t.FILES_VIEW_SHORTCUTS);var f="",m=new s.ScopedEventHandlers(document);function h(e,t){return function(o){e(o)&&(o.preventDefault(),"function"==typeof t&&t(o))}}function _(e){var t=e.user,o=e.viewType,i=e.getSelectedFiles,r=e.isCurrentPathWriteable,l=e.onShowHelpMenu,a=e.onDelete,s=e.onShowRename,d=e.onFocusSearchBar,f=e.onNavigateToFileOrFolder,m=e.onNavigateToParentFolder,h=e.selectAllAction,_=e.onCopyToClipboard,g=e.onPasteFromClipboard,E=e.deselectAllAction,S=function(){var e=i(),t=e.some((function(e){return e.read_only}));if(1===e.size)if(r()&&!t){var o=e.first();o.isDeleted?p.Notify.error(u._("Deleted files can’t be renamed.")):s(o)}else p.Notify.warning(u._("You don’t have permission to rename files in this folder."))},v=function(){var e=i();e.size&&a(e.toArray())},y=function(){c.performUndo()},b=function(){var e=i();1===e.size&&f(e.first())},T=function(){var e=i(),t=e.first();1===e.size&&t.is_dir&&f(t)},I=function(e,i){n.logKeyboardShortcutUsage({user_id:t?t.id:null,view_type:o,keyboard_shortcut_type:e}),i()};return{renameFile:function(){I("rename",S)},focusSearchBar:function(){I("search",d)},showHelpMenu:function(){I("help",l)},selectAll:function(){I("select-all",h)},copyToClipboard:function(){I("copy",_)},deleteFiles:function(){I("delete",v)},pasteFromClipboard:function(){I("paste",g)},undoAction:function(){I("undo",y)},deselectFiles:function(){I("deselect",E)},navigateToFileOrFolder:function(){I("navigate-file-folder",b)},navigateToFolder:function(){I("navigate-folder",T)},navigateToParent:function(){I("navigate-parent",m)}}}t.generateGetIsGlobalEvent=function(e){return function(t){return!document.activeElement||document.activeElement===document.body||t.target instanceof Element&&r.findDOMNode(e).contains(t.target)}},t.resetFilesViewKeyboardShortcuts=function(e){var t;t=e,i.default.clearScope(t),i.default.setScope(f),m.remove(e,"keydown"),m.remove(e,"keyup")},t.getActionsAndAttachLogging=_,t.setupFilesViewKeyboardShortcuts=function(e){var t=e.scope,o=e.getIsItemEvent,r=e.getIsGlobalEvent;(f=i.default.getScope())!==t&&i.default.setScope(t);var n=_(e);i.default("f2",t,h(o,n.renameFile)),i.default("/",t,h(r,n.focusSearchBar)),i.default("shift+/",t,h(r,n.showHelpMenu)),i.default("escape",t,h(r,n.deselectFiles)),d.mac?(i.default("command+a",t,h(r,n.selectAll)),i.default("command+c",t,h(o,n.copyToClipboard)),i.default("backspace",t,h(o,n.deleteFiles)),i.default("command+v",t,h(r,n.pasteFromClipboard)),i.default("command+z",t,h(r,n.undoAction))):(i.default("ctrl+a",t,h(r,n.selectAll)),i.default("ctrl+c",t,h(o,n.copyToClipboard)),i.default("delete",t,h(o,n.deleteFiles)),i.default("ctrl+v",t,h(r,n.pasteFromClipboard)),i.default("ctrl+z",t,h(r,n.undoAction))),e.viewType===a.ViewType.List&&(i.default("right",t,h(o,n.navigateToFolder)),i.default("left",t,h(r,n.navigateToParent)))},t.setupFileJumpKeyboardShortcuts=function(e){var t=e.scope,o=e.getIsFileJumping,r=e.onAddFileJumpKeyCode,n=e.onResetFileJump;m.add(t,"keypress",(function(e){i.default.getScope()===t&&l.handleKeyPress(e,o,r,n)}))},t.resetFileJumpKeyboardShortcuts=function(e){m.remove(e,"keypress")}})),define("modules/clean/react/files_view/name_input",["require","exports","tslib","classnames","react","modules/clean/keycode","modules/clean/react/files_view/types"],(function(e,t,o,i,r,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),r=o.__importDefault(r);var a=function(){},s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputRef=r.default.createRef(),t.handleDragStart=function(e){e.stopPropagation()},t.handleSubmit=function(e){e.preventDefault(),t.submitIfChanged(l.NameInputActionSource.SUBMIT)},t.handleKeyDown=function(e){e.keyCode===n.KeyCode.ESC?(e.preventDefault(),t.props.onCancel({source:l.NameInputActionSource.ESC})):e.keyCode===n.KeyCode.ENTER&&t.handleSubmit(e)},t.handleBlur=function(e){t.submitIfChanged(l.NameInputActionSource.BLUR)},t.handleClick=function(e){e.preventDefault(),t.props.onClick(e)},t}return o.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.inputRef.current&&this.inputRef.current.focus(),window.requestAnimationFrame((function(){if(e.inputRef.current){var t=e.inputRef.current.value,o=e.props.isDir?t.length:t.lastIndexOf(".");o<0&&(o=t.length),e.inputRef.current.setSelectionRange(0,o)}}))},t.prototype.submitIfChanged=function(e){if(this.inputRef.current){var t=this.inputRef.current.value.trim();t===this.props.defaultValue?this.props.onCancel({source:e}):this.props.onSubmit(t)}},t.prototype.render=function(){return r.default.createElement("form",{className:"u-pad-right-xs",onSubmit:this.handleSubmit},r.default.createElement("input",{ref:this.inputRef,defaultValue:this.props.defaultValue,className:i.default("c-input",this.props.className),onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onDragStart:this.handleDragStart,"aria-label":this.props.label,onClick:this.handleClick}))},t.defaultProps={className:"",onCancel:a,onClick:a,onSubmit:a,idDir:null},t})(r.default.PureComponent);t.NameInput=s})),define("modules/clean/react/files_view/overflow_menu",["require","exports","tslib","react","spectrum/overflow_button","spectrum/popover","modules/clean/react/async/loadable","modules/clean/react/files_view/overflow_menu_item_section","modules/clean/react/portal_popover","modules/core/browser_detection","modules/core/i18n"],(function(e,t,o,i,r,n,l,a,s,c,d){"use strict";var u;Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),t.AsyncFilesViewMobileOverflowMenu=l.Loadable({loader:function(){return new Promise((function(t,o){e(["modules/clean/react/files_view/mobile_overflow_menu"],t,o)})).then(o.__importStar).then((function(e){return e.FilesViewMobileOverflowMenu}))}}),(function(e){e[e.Normal=0]="Normal",e[e.Small=1]="Small"})(u=t.OverflowMenuSize||(t.OverflowMenuSize={}));var p=function(e,o){return function(){return i.default.createElement(t.FilesViewOverflowMenuButton,{size:o,showBorders:e})}},f=(function(e){function r(t){var o=e.call(this,t)||this;return o.onClick=function(e){e.preventDefault(),e.stopPropagation()},o.handleSelection=function(e){e.performAction()},o.handleMenuToggle=function(e){var t=e.isOpen;if(t&&o.props.onMenuOpen&&o.props.onMenuOpen(),r.isDynamicProps(o.props)&&t){var i=o.props.getOverflowMenuActions(o.props.file,!!o.props.canDisplayFolderSizes);o.setState({actionSection:i})}},o.handleMobileMenuOpen=function(e){return function(t){t.preventDefault(),o.handleMenuToggle({isOpen:!0}),e()}},o.state={actionSection:r.isDynamicProps(t)?[]:t.actionSection},o}return o.__extends(r,e),r.prototype.render=function(){var e,o=this,l=this.props,d=l.isResponsive,u=l.size,f=l.showBorders,m=l.ariaHidden,h=l.scrollContainer,_=r.isDynamicProps(this.props)?this.props:{},g=_.file,E=void 0===g?void 0:g,S=_.thumbStore,v=void 0===S?void 0:S,y=d&&c.is_mobile_or_tablet();return i.default.createElement("div",{className:"browse-overflow-menu","aria-hidden":m?"true":void 0},y?i.default.createElement(t.AsyncFilesViewMobileOverflowMenu,{trigger:function(e){var r=e.openMobileMenu;return i.default.createElement(t.FilesViewOverflowMenuButton,{onClick:o.handleMobileMenuOpen(r),showBorders:f,size:u})},file:E,actionSection:this.state.actionSection,thumbStore:v}):i.default.createElement(s.PortalPopover,{contentClassName:"browse-overflow-menu-popover-content",popoverTriggerSelector:".browse-overflow-menu-trigger-button",renderPopoverTrigger:p(f,u),renderPopoverItems:(e=this.state.actionSection,function(){return i.default.createElement("div",{className:"browse-overflow-menu-content"},i.default.createElement(a.OverflowMenuItemSection,{actionSection:e,renderItem:function(e){return i.default.createElement(n.PopoverContentItem,{className:e.className,disabled:e.disabled,value:e},e.label)}}))}),scrollableContainer:h,onMenuToggle:this.handleMenuToggle,onSelection:this.handleSelection,onClick:this.onClick,onDoubleClick:this.onClick,triggerTabIndex:m?-1:0}))},r.isDynamicProps=function(e){return"file"in e},r.defaultProps={onMenuToggle:function(){},isResponsive:!0},r})(i.default.Component);t.FilesViewOverflowMenu=f,t.FilesViewOverflowMenuButton=function(e){var t=e.size,o=e.showBorders,n=e.onClick;return i.default.createElement(r.OverflowButton,{"aria-label":d._("More actions"),className:"browse-overflow-menu-trigger-button",onClick:n,size:t===u.Small?"small":"default",tagName:"span",variant:o?"secondary":"borderless"})}})),define("modules/clean/react/files_view/overflow_menu_item_section",["require","exports","tslib","react","spectrum/popover"],(function(e,t,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),t.OverflowMenuItemSection=function(e){var t=e.actionSection,n=e.showSeparators,l=void 0===n||n,a=e.renderItem;return 0===t.length?null:i.default.createElement(i.default.Fragment,null,t.map((function(e){return e.map((function(e,t){return i.default.createElement(i.default.Fragment,{key:t+"-"+e.label},a(e))}))})).reduce((function(e,t,n){return o.__spreadArrays(e,l?[i.default.createElement(r.PopoverItemGroupSeparator,{key:n})]:[],t)})))}})),define("modules/clean/react/files_view/star",["require","exports","tslib","react","modules/clean/react/async/loadable"],(function(e,t,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),t.StarContainer=r.Loadable({loader:function(){return o.__awaiter(this,void 0,Promise,(function(){var t,r,n,l;return o.__generator(this,(function(a){switch(a.label){case 0:return[4,new Promise((function(t,o){e(["modules/clean/react/starred/browse_exports"],t,o)})).then(o.__importStar)];case 1:return t=a.sent(),r=t.idTypePairFromStarrableItem,n=t.Star,l=t.StarredSource,[2,function(e){var t=e.item,o=e.user,a=e.className,s=e.onStarClick,c=e.isReadOnly,d=e.tabIndex,u=r(t),p=u.id,f=u.type;return i.default.createElement("div",{className:a},i.default.createElement(n,{id:p,key:"star",idType:f,isDir:Boolean(t.is_dir),user:o,onStarClick:s,source:l.BROWSE,isReadOnly:c,tabIndex:d}))}]}}))}))}})})),define("modules/clean/react/files_view/file_thumbnail",["require","exports","tslib","classnames","react","spectrum/file_icon/get_extension","modules/clean/react/files_view/constants","modules/clean/react/files_view/types","modules/clean/react/icon/file_folder_icon","modules/clean/react/icon/lock_badge","modules/clean/user_education/react/user_education_effect"],(function(e,t,o,i,r,n,l,a,s,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i);var u=(function(e){function t(t){var o=e.call(this,t)||this;o._thumbRequestId=null,o.handleThumbnailError=function(){o.setState({thumbnailSrc:null})};var i=t.thumbStore,r=t.file.thumbnail_url_tmpl;return o.state={thumbnailSrc:r?i.get_thumb(r):null},o}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.fetchThumbnail(this.props)},t.prototype.componentWillReceiveProps=function(e){e.file.thumbnail_url_tmpl!==this.props.file.thumbnail_url_tmpl&&(this.unbindThumbnailIfNeeded(),this.fetchThumbnail(e))},t.prototype.componentWillUnmount=function(){this.unbindThumbnailIfNeeded()},t.prototype.fetchThumbnail=function(e){var t=this,o=e.file,i=e.thumbStore,r=o.fq_path||o.filename||"",c=n.getExtension(r);if(c&&l.IMAGE_THUMBNAIL_EXTENSIONS.includes(c)){var d=s.getThumbnailUrlForItem(o.thumbnail_url_tmpl,this.props.thumbnailSize?this.props.thumbnailSize:l.ViewTypeThumbnailSizes[a.ViewType.List]);d&&(this._thumbRequestId=i.bind_url(d,{onSuccess:function(){t.setState({thumbnailSrc:i.get_thumb(d)})},onError:function(){t.handleThumbnailError()}}))}},t.prototype.unbindThumbnailIfNeeded=function(){var e=this.props.thumbStore;this._thumbRequestId&&(e.unbind_url(this._thumbRequestId),this._thumbRequestId=null),this.setState({thumbnailSrc:null})},t.prototype.render=function(){var e=this.props,t=e.file,o=e.showCDMUserEducationEffects,n=e.iconSize,l=this.state.thumbnailSrc,a=t.fq_path||t.filename;return l?r.default.createElement(c.LockBadge,{file:this.props.file,variant:"preview-small"},r.default.createElement("img",{alt:a,draggable:!1,className:i.default("brws-file-name-cell-icon","brws-file-name-cell-thumb"),src:l,onError:this.handleThumbnailError})):r.default.createElement(p,{file:t,showCDMUserEducationEffects:o,iconSize:n})},t})((r=o.__importDefault(r)).default.PureComponent);t.FileThumbnail=u;var p=function(e){var t=e.file,i=e.showCDMUserEducationEffects,n=e.iconSize,l=n?{height:n.toString(),width:n.toString()}:{},a=r.default.createElement(s.FileOrFolderIcon,o.__assign({className:"brws-file-name-cell-icon",file:t,showPreview:!1},l));return i?r.default.createElement(d.UserEducationEffect,{containerName:"FileItemRow",name:"TMFIcon",useSpan:!0},a):a}})),define("modules/clean/react/files_view/tile_grid",["require","exports","tslib","classnames","immutable","react","spectrum/button","modules/clean/em_string","modules/clean/filepath","modules/clean/filetypes","modules/clean/react/browse/action_logger","modules/clean/react/browse/models","modules/clean/react/files_view/beta_tag","modules/clean/react/files_view/constants","modules/clean/react/files_view/drag_and_drop","modules/clean/react/files_view/file_list_utils","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/overflow_menu","modules/clean/react/files_view/star","modules/clean/react/files_view/tile_label_input","modules/clean/react/files_view/types","modules/clean/react/files_view/util","modules/clean/react/icon/file_folder_icon","modules/clean/react/maestro/components/tile_grid","modules/clean/react/selectable_list","modules/clean/react/title_bubble","modules/clean/web_user_action_events","modules/core/browser","modules/core/i18n"],(function(e,t,o,i,r,n,l,a,s,c,d,u,p,f,m,h,_,g,E,S,v,y,b,T,I,w,L,F,C){"use strict";function R(e){var t=e instanceof u.File?s.filename(e.fq_path):y.isFswm(e)?e.filename:e instanceof u.Paper?e.title:e.name;if(e instanceof u.File)switch(e.type){case c.FileTypes.FOLDER:t=C._("Folder, %(alt)s").format({alt:t});break;case c.FileTypes.PACKAGE:t=C._("Package, %(alt)s").format({alt:t});break;case c.FileTypes.SHARED_FOLDER:t=C._("Shared folder, %(alt)s").format({alt:t});break;case c.FileTypes.SANDBOX:t=C._("Sandbox, %(alt)s").format({alt:t});break;case c.FileTypes.TEAM_SHARED_FOLDER:t=C._("Team shared folder, %(alt)s").format({alt:t});break;case c.FileTypes.TEAM_MEMBER_FOLDER:t=C._("Team member folder, %(alt)s").format({alt:t});break;default:t=C._("File, %(alt)s").format({alt:t})}return t}Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),r=o.__importStar(r),n=o.__importDefault(n),s=o.__importStar(s),F=o.__importStar(F);var D=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onStarClickCallback=function(e){var o=t.props,i=o.onStarClick,r=o.item;i&&i(r,e)},t}return o.__extends(t,e),t.prototype.render=function(){var e,t=this.props,o=t.fileRename,i=t.arePostTTIModulesLoaded,r=t.user,l=t.item,d=t.createRenameCancelHandler,m=t.createRenameSubmitHandler;if(e=l instanceof u.File?s.filename(l.fq_path):l instanceof u.FileSharedWithMe?l.filename:l instanceof u.Paper?l.title:l.name,l instanceof u.File&&o&&s.paths_are_equal(o.file.fq_path,l.fq_path)){if(o.state===v.RenameState.PENDING_INPUT)return n.default.createElement(S.TileLabelInput,{defaultValue:e,label:e,onCancel:d(l),onSubmit:m(l)});if(o.state===v.RenameState.SAVING_INPUT)return n.default.createElement(T.TileItemLabelText,{className:"tile-label__text--saving",label:C._("Renaming…")})}var h=a.Emstring.em_snippet(e,14,.5),_=i&&l instanceof u.File&&!u.File.isNoAccessSharedFolder(l),g=n.default.createElement(T.TileItemLabelText,{key:"label",label:h});if(e!==h){var b=e.length<=f.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH?e:n.default.createElement("div",{className:"tile-label-tooltip"},e);g=n.default.createElement(w.TitleBubble,{content:b,position:w.TitleBubble.POSITIONS.BOTTOM,className:"tile-label__title-bubble",key:"tooltip"},g)}var I=l instanceof u.File?this.onStarClickCallback:void 0,L=n.default.createElement(E.StarContainer,{item:l,user:r,className:"tile-star",key:"tileStar",onStarClick:I,tabIndex:-1}),F=y.isFile(l)&&l.type===c.FileTypes.VAULT_FOLDER;return n.default.createElement("span",null,[g,F&&!o&&n.default.createElement(p.BetaTag,null),_&&!o&&L])},t})(n.default.PureComponent);t.TileLabel=D;var N=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tileGridRef=n.default.createRef(),t.state={inSelectMode:!1,selectedIds:r.Set()},t.createRenameCancelHandler=function(e){return function(){t.props.onRenameCancel(e)}},t.createRenameSubmitHandler=function(e){return function(o){t.props.onRenameSubmit(e,o)}},t.logOverflowMenuOpen=function(){var e=t.props,o=e.selectedFiles,i=e.user,r=e.viewType,n=o?o.count((function(e){return e.is_dir})):0,l=o?o.count()-n:0;d.logContextMenuClick({uid:i.id,viewType:r,action_surface:L.ActionSurfaceLogValue.CENTER_PANE,numFilesSelected:l,numFoldersSelected:n})},t.hrefForItem=function(e,o){return o instanceof u.File?t.props.hrefForFile(e,o):o instanceof u.FileSharedWithMe?o.href:o.url},t.getTileItem=function(e,o){var i=t.props,r=i.activeDropTarget,a=i.isCreateFolderUIActive,s=i.isPhotosPage,c=i.items,d=i.selection,p=i.user,m=i.viewType,h=i.focusedFileIndex,_=i.disabledMultiselect,g=t.state.inSelectMode;if(a){if(0===e)return t.getCreateFolderTile();e-=1}var E,S=c.get(e);if(!S){var T="Placeholder "+e;return{altText:T,id:T,isViewOnly:!0,isDraggable:!1,isSelectable:!1}}E=y.isFile(S)||y.isFswm(S);var I,w=S,L=g&&E,F=h===e,D=L&&d.selected.some((function(e){return w instanceof u.FileSharedWithMe?w.file_id===e:w.fq_path===e})),N=t.createToggleSelectHandler(w,D),O=t.createClickHandler({item:S,inSelectModeAndIsFile:L,toggleSelectHandler:N}),A=t.createViewFileHandler(S,v.FilesViewActionSource.ROW_DOUBLE_CLICK),M=t.createViewFileHandler(S,v.FilesViewActionSource.ROW_TITLE);I=(y.isFile(S)||y.isFswm(S))&&g?n.default.createElement(l.Button,{className:"tile__action-button--view-file",variant:"secondary",size:"small","aria-label":C._("View File"),onClick:t.createViewFileHandler(S,v.FilesViewActionSource.ROW_PREVIEW_ICON),tabIndex:F||s?0:-1}):!y.isFile(S)&&!y.isFswm(S)||g?void 0:t.renderTileOverflowMenu(S,o,s);var P=t.renderLabelElement(e),k=R(S),x=S===r,H=t.hrefForItem(p,S),V=S instanceof u.File||S instanceof u.FileSharedWithMe?b.getThumbnailUrlForItem(S.thumbnail_url_tmpl,f.ViewTypeThumbnailSizes[m]):void 0;return{file:w,paper:S instanceof u.Paper?S:void 0,fileSharedWithMe:S instanceof u.FileSharedWithMe?S:void 0,id:u.itemId(S),labelNode:P,altText:k,thumbnailUrl:V,actionNode:I,onClick:O,onDoubleClick:A,onLabelClick:M,isDraggable:!s,isViewOnly:_,isFocused:F,isSelectable:E,handleToggleSelect:N,checkboxAriaText:C._("Select tile"),href:H,onDragEnter:s?void 0:t.createDragEnterHandler(w,D,x),onDragStart:s?void 0:t.createDragStartHandler(w,D,N),isCheckboxFocusable:s}},t.shouldFileBeHighlightedDropTarget=function(e,o){var i=t.props.dropTargetHighlightMode;return h.shouldFileBeHighlightedDropTarget({file:e,isSelected:o,dropTargetHighlightMode:i})},t.scrollIntoView=function(e,o){var i=e.top,r=e.bottom,n=t.props.viewportTopOffset,l=void 0===n?0:n,a=t.getScrollPane(),s=a.height,c=a.scrollTop,d=a.scrollTo,u=s-l,p=c+u;i<c?d(0,i):r>p&&d(0,o&&r-i<u/2?r-u/2:r-u)},t}return o.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({inSelectMode:this.props.selectedFiles.count()>0}),this.setSelectedTiles(this.props)},t.prototype.componentDidMount=function(){this.setupExternalDragHandler(),this.setupKeyboardShortcuts()},t.prototype.componentWillUnmount=function(){this.props.isPhotosPage||_.resetFileJumpKeyboardShortcuts(I.SELECTABLE_TILE_GRID_KEY_SCOPE),_.resetFilesViewKeyboardShortcuts(I.SELECTABLE_TILE_GRID_KEY_SCOPE),m.cleanupExternalDragHandler(I.SELECTABLE_TILE_GRID_KEY_SCOPE)},t.prototype.componentWillReceiveProps=function(e){e.selectedFiles!==this.props.selectedFiles&&(this.setSelectedTiles(e),this.setState({inSelectMode:e.selectedFiles.count()>0}))},t.prototype.componentDidUpdate=function(e){(e.createNewFolderState===v.NewFolderCreationState.PENDING_INPUT&&this.props.createNewFolderState===v.NewFolderCreationState.SAVING_INPUT||e.fileRename!==this.props.fileRename||e.items!==this.props.items||e.starredState!==this.props.starredState)&&this.tileGridRef.current&&this.tileGridRef.current.forceUpdate()},t.prototype.getTotalNumItems=function(){var e=this.props,t=e.items,o=e.totalNumItems,i=e.isCreateFolderUIActive,r=Math.max(t.size,o);return i&&(r+=1),r},t.prototype.createToggleSelectHandler=function(e,t){var o=this,i=e instanceof u.FileSharedWithMe?e.file_id:e.fq_path;return function(e,r){void 0===r&&(r=!0),r&&e.preventDefault(),e.stopPropagation();var n=o.props,l=n.onDeselectFile,a=n.onSelectFile,s=Boolean(!("keyCode"in e)&&e.shiftKey);t?l(i,s):a(i,s?I.SelectOptions.EXTEND:I.SelectOptions.DEFAULT)}},t.prototype.renderTileOverflowMenu=function(e,t,o){var i=this.props,r=i.getOverflowMenuActions,l=i.thumbStore,a=i.arePostTTIModulesLoaded,s=i.scrollContainer;return a&&n.default.createElement(g.FilesViewOverflowMenu,{file:e,thumbStore:l,getOverflowMenuActions:r,size:g.OverflowMenuSize.Small,showBorders:!0,ariaHidden:!o,onMenuOpen:this.logOverflowMenuOpen,scrollContainer:s})},t.prototype.renderLabelElement=function(e){var t=this.props,o=t.items,i=t.focusedFileIndex,r=t.user,l=t.fileRename,a=t.arePostTTIModulesLoaded,s=t.onStarClick;if(!t.isPhotosPage){var c=o.get(e);if(c){var d=this.state.inSelectMode,u=i===e;return n.default.createElement(D,{item:c,user:r,fileRename:l,arePostTTIModulesLoaded:a,onStarClick:s,inSelectMode:d,isTileFocused:u,createRenameCancelHandler:this.createRenameCancelHandler,createRenameSubmitHandler:this.createRenameSubmitHandler})}}},t.prototype.createViewFileHandler=function(e,t){var o=this;return function(i){if(i.preventDefault(),i.stopPropagation(),"click"===i.type){var r=i;if(0===r.button){var n=o.hrefForItem(o.props.user,e);if(y.hasModifierKey(r))return void F.open_tab(n)}}e instanceof u.File?o.props.onNavigateToFileOrFolder(e,{actionSource:t}):e instanceof u.FileSharedWithMe?o.props.onOpenFileSharedWithMe(e):e instanceof u.Paper&&o.props.onOpenPaper(e)}},t.prototype.createClickHandler=function(e){var t=this,o=e.item,i=(e.inSelectModeAndIsFile,e.toggleSelectHandler),r=o instanceof u.File||o instanceof u.FileSharedWithMe;return function(e){if(r)if("keyCode"in e)i(e);else{e.preventDefault();var n=o instanceof u.FileSharedWithMe?o.file_id:o.fq_path;t.props.onSelectFile&&(e.shiftKey?t.props.onSelectFile(n,I.SelectOptions.EXTEND):e.ctrlKey||e.metaKey?i(e):t.props.onSelectFile(n,I.SelectOptions.ONLY))}}},t.prototype.setSelectedTiles=function(e){var t=r.Set().withMutations((function(t){e.selectedFiles.forEach((function(e){var o;t.add((o=e)instanceof u.FileSharedWithMe?o.file_id:o.fq_path)}))}));this.setState({selectedIds:t})},t.prototype.setupExternalDragHandler=function(){var e=this;m.setupExternalDragHandler(I.SELECTABLE_TILE_GRID_KEY_SCOPE,(function(){return!!e.props.isDraggingInternalFiles}),(function(){return!!e.props.isDraggingExternalFiles}),this.props.onSetFileUploaderPath,".tile",(function(){return e.props.activeDropTarget}),this.props.onSetDropTarget)},t.prototype.setupKeyboardShortcuts=function(){var e=this,t=this.props,o=t.user,i=t.viewType,r=t.onDelete,n=t.onShowRename,l=t.deselectAll,a=t.getIsCurrentPathWriteable,s=t.getIsFileJumping,c=t.onAddFileJumpKeyCode,d=t.onResetFileJump,u=t.onCopyToClipboard,p=t.onFocusSearchBar,f=t.onPasteFromClipboard,m=t.selectAll,h=_.generateGetIsGlobalEvent(this),g=h;this.props.isPhotosPage||_.setupFileJumpKeyboardShortcuts({scope:I.SELECTABLE_TILE_GRID_KEY_SCOPE,getIsFileJumping:s,onAddFileJumpKeyCode:c,onResetFileJump:d}),_.setupFilesViewKeyboardShortcuts({user:o,viewType:i,getIsGlobalEvent:h,getIsItemEvent:g,getSelectedFiles:function(){return e.props.selectedFiles},isCurrentPathWriteable:a,selectAllAction:m,deselectAllAction:l,onCopyToClipboard:u,onDelete:r,onFocusSearchBar:p,onPasteFromClipboard:f,onShowRename:n,onNavigateToFileOrFolder:function(){},onNavigateToParentFolder:function(){},scope:I.SELECTABLE_TILE_GRID_KEY_SCOPE,onShowHelpMenu:this.props.onOpenKeyboardShortcutModal})},t.prototype.createDragEnterHandler=function(e,t,o){var i=this;return function(r){i.props.onDragEnter(r,e,t,o)}},t.prototype.createDragStartHandler=function(e,t,o){var i=this;return function(r){t?i.props.onDragStart(r):(o(r,!1),i.props.onDragStart(r,[e]))}},t.prototype.getCreateFolderTile=function(){var e=this.props,t=e.createNewFolderState,o=e.onNewFolderCancel,i=e.onNewFolderSubmit,r=C._("New folder"),l=n.default.createElement("div",null);return t===v.NewFolderCreationState.PENDING_INPUT?(r=C._("Folder name"),l=n.default.createElement(S.TileLabelInput,{label:r,onCancel:o,onSubmit:i})):t===v.NewFolderCreationState.SAVING_INPUT&&(r=C._("Creating new folder…"),l=n.default.createElement(T.TileItemLabelText,{className:"tile-label__text--saving",label:r})),{altText:r,id:"New folder tile",isDraggable:!1,isSelectable:!1,labelNode:l}},t.prototype.getScrollPane=function(){var e=this.props.scrollContainer;if(e&&e.current){var t=e.current,o=t.clientHeight,i=t.scrollTop,r=t.scrollTo;return{height:o,scrollTop:i,scrollTo:r?r.bind(e.current):function(){}}}return{height:window.innerHeight,scrollTop:"scrollingElement"in window.document&&window.document.scrollingElement?window.document.scrollingElement.scrollTop:window.document.documentElement.scrollTop,scrollTo:window.scrollTo?window.scrollTo.bind(window):function(){}}},t.prototype.getWindow=function(){var e=this.props.scrollContainer;return e&&e.current?y.createFakeWindow(e.current):window},t.prototype.render=function(){var e=this.props,t=e.enableMaxHeightGrouping,o=e.sections,r=e.viewType,l=e.viewportTopOffset,a=e.scrollContainer,s=e.scrollPositionOffset,c=i.default({"file-tile-grid-container":!0,"file-tile-grid-container--show-checkboxes":this.state.inSelectMode,"file-tile-grid-container--click-to-select":!0}),d=new Set;return this.state.selectedIds.forEach((function(e){return d.add(e)})),a&&!a.current?null:n.default.createElement("div",{role:"grid","aria-multiselectable":"true"},n.default.createElement(T.InfiniteTileGrid,{key:"tileGrid",ref:this.tileGridRef,totalNumItems:this.getTotalNumItems(),containerClass:c,rowClass:"file-tile-row",enableMaxHeightGrouping:t,delayRenderFullTile:!this.props.isCreateFolderUIActive,logTileLoading:!0,numThresholdRows:f.FilesViewTileGridConstants.NUM_THRESHOLD_ROWS,scrollDeltaThreshold:f.FilesViewTileGridConstants.SCROLL_DELTA_THRESHOLD,sectionStartIndices:o.sectionStartIndices,sectionLabels:o.sectionLabels,showLabels:!this.props.isPhotosPage,contentOffset:l,getTileItem:this.getTileItem,selectedIds:d,handleTTI:this.props.onTTI,thumbStore:this.props.thumbStore,onRangeInView:this.props.onRangeInView,tilesPerRow:this.props.tilesPerRow,onTilesPerRowChange:this.props.onTilesPerRowChange,activeDropTarget:this.props.activeDropTarget,maxTileWidth:f.ViewTypeGridSizes[r],tileHeight:f.ViewTypeGridSizes[r],shouldFileBeHighlightedDropTarget:this.shouldFileBeHighlightedDropTarget,scrollToIndex:this.props.focusedFileIndex,scrollIntoView:this.scrollIntoView,scrollPositionOffset:s||0,window:this.getWindow()}))},t.defaultProps={enableMaxHeightGrouping:!1},t})(n.default.PureComponent);t.FilesViewTileGrid=N})),define("modules/clean/react/files_view/tile_label_input",["require","exports","tslib","classnames","react","modules/clean/react/files_view/name_input"],(function(e,t,o,i,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),r=o.__importDefault(r),t.TileLabelInput=function(e){var t=i.default("tile-label-input",e.className),o=e.defaultValue||"";return r.default.createElement(n.NameInput,{className:t,defaultValue:o,label:e.label,onCancel:e.onCancel,onClick:function(e){e.stopPropagation(),e.preventDefault()},onSubmit:e.onSubmit})}})),define("modules/clean/react/files_view/util",["require","exports","tslib","modules/clean/filepath","modules/clean/react/browse/models"],(function(e,t,o,i,r){"use strict";function n(e){return e.altKey||e.ctrlKey||e.metaKey}Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importStar(i),t.shouldHandleClick=function(e){return 0===e.button&&!n(e)},t.hasModifierKey=n,t.isFile=function(e){return e instanceof r.File},t.isFswm=function(e){return e instanceof r.FileSharedWithMe},t.getFilename=function(e){return t.isFile(e)?i.filename(e.fq_path):e.filename},t.createFakeWindow=function(e){return o.__assign(o.__assign({},window),{document:{documentElement:{get scrollHeight(){return e.scrollHeight},get scrollTop(){return e.scrollTop}},body:{get scrollTop(){return e.scrollTop}}},get innerHeight(){return e.clientHeight},get pageYOffset(){return e.scrollTop},addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e),requestAnimationFrame:requestAnimationFrame.bind(window),cancelAnimationFrame:cancelAnimationFrame.bind(window),scrollTo:e.scrollTo?e.scrollTo.bind(e):function(){}})},t.shouldClickDeselect=function(e){if(e.defaultPrevented)return!1;for(var t=e.target;t instanceof Node&&t!==e.currentTarget;){if(0===t.tabIndex||t instanceof HTMLAnchorElement||t instanceof HTMLButtonElement||t instanceof HTMLInputElement||t instanceof HTMLLabelElement||"button"===t.getAttribute("role")||t.classList.contains("mc-popover"))return!1;t=t.parentElement}return!0}}));var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};define("modules/clean/react/file_viewer/async_controller",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=[".maestro-chrome","#maestro-nav","#page-footer","#page-content","#page-header","#page-sidebar","#browse-box","#flash-upload-container","#maestro-header","#maestro-header-portal","#maestro-prompt",".snackbar-container","#onboarding-sidebar-pagelet"].join();t.hideElementsBehindFileViewer=function(){Array.from(document.querySelectorAll(o)).forEach((function(e){e.style.display&&e.setAttribute("data-preview-old-display",e.style.display),e.style.display="none"}))},t.showElementsBehindFileViewer=function(){Array.from(document.querySelectorAll(o)).forEach((function(e){e.style.display=e.hasAttribute("data-preview-old-display")?e.getAttribute("data-preview-old-display"):""}))},t.asyncOpenPreview=function(t){var o=t.containerId,i=t.files,r=t.fileViewAction,n=t.fileViewOrigin,l=t.fileViewTarget,a=t.indexOfPreviewFile,s=t.onFileViewerDidMount,c=t.onFileViewerUnmount,d=(t.shouldFocusComment,t.shouldPresentInZoom),u=void 0!==d&&d,p=t.updateBrowserLocation,f=void 0===p||p,m=t.user;new Promise((function(t,o){e(["modules/clean/react/file_viewer/controller"],t,o)})).then(__importStar).then((function(e){e.open(i,a,m,o,{fileViewTarget:l,fileViewOrigin:n,fileViewAction:r,disableRouting:!f,onComponentDidMount:s,onComponentWillUnmount:c,shouldPresentInZoom:u})}))}})),define("modules/clean/react/maestro/components/tile_grid",["require","exports","tslib","react","classnames","react-dom","spectrum/culled_list","modules/clean/filepath","modules/clean/js_client_stopwatch","modules/clean/react/maestro/components/tile_element","modules/clean/react/maestro/components/tile_grid_logger"],(function(e,t,o,i,r,n,l,a,s,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),r=o.__importDefault(r),n=o.__importStar(n),a=o.__importStar(a);function u(e){var t=null;return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if(!t||t.length!==o.length||!t.every((function(e,t){return e===o[t]})))return t=o,e.apply(void 0,o)}}t.memoizeCallback=u,t.TileItemLabelText=function(e){var t=e.className,o=e.label;return t=r.default("tile-label__text",t),i.default.createElement("div",{className:t},o)};var p=(function(e){function t(t){var o=e.call(this,t)||this;if(o.tileIndexToRowIndex=[],o.rowHeights=[],o.ttiReported=!1,o.itemRangeByRow=[],o.updateScroll=function(e){var t=o.props,i=t.scrollToIndex,r=t.scrollIntoView,n=t.scrollPositionOffset;if(void 0!==i&&r){var l=o.tileIndexToRowIndex[i],a=o.rowHeights.slice(0,l).reduce((function(e,t){return e+t}),n);r({top:a,bottom:a+o.rowHeights[l]},e)}},o.updateOnResize=function(){window.requestAnimationFrame((function(){o.getAndUpdateTileLayout()}))},o.handleTTI=function(){o.ttiReported=!0;var e=o.props.handleTTI;e&&e()},o.setLastViewedPage=function(e){var t=document.documentElement.scrollTop||document.body.scrollTop,i=Math.round(t/e);if(o.tileLoadLogger.pruneTrackedPages(),o.tileLoadLogger.logCompletedPages(),!o.tileLoadLogger.pagesCompletedLogging.has(i)&&!o.tileLoadLogger.pagesToLog.has(i))if(i!==o.tileLoadLogger.lastViewedPage){if(o.tileLoadLogger.lastViewedPage=i,o.tileLoadLogger.pageChangeTime=o.tileLoadLogger.getTimeNow(),!o.tileLoadLogger.startTimeByPage.get(i)){var r=o.tileLoadLogger.getTimeNow();o.tileLoadLogger.startTimeByPage.set(i,r)}}else(r=o.tileLoadLogger.getTimeNow())-o.tileLoadLogger.pageChangeTime>1e3&&o.tileLoadLogger.pagesToLog.add(i)},o.logTileError=function(e){o.tileLoadLogger&&o.tileLoadLogger.recordTileError(e),o.props.logTileLoading&&d.InfiniteTileGridLogger.logThumbLoadError()},o.logTileLoaded=function(e,t,i){o.tileLoadLogger&&o.tileLoadLogger.recordTileLoaded(e,t,i)},o.renderTileElement=function(e,t,r){if(e<0||e>o.props.totalNumItems)return null;var n=o.props.getTileItem(e,r);if(!n)return i.default.createElement(c.TilePlaceholder,{leftOffset:t,tileHeight:o.state.tileWidth,tileWidth:o.state.tileWidth});var l,s=o.ttiReported&&o.props.delayRenderFullTile,d=n.isSelectable&&!!o.props.selectedIds&&o.props.selectedIds.has(n.id),u=n.file&&o.props.shouldFileBeHighlightedDropTarget(n.file,d),p=u&&n.file===o.props.activeDropTarget;n.fileSharedWithMe?l={type:n.fileSharedWithMe.type,icon:n.fileSharedWithMe.icon,fq_path:"/"+n.fileSharedWithMe.filename,thumbnail_url_tmpl:n.fileSharedWithMe.thumbnail_url_tmpl,name:n.fileSharedWithMe.filename}:n.file&&(l={type:n.file.type,icon:n.file.icon,fq_path:n.file.fq_path,thumbnail_url_tmpl:n.file.thumbnail_url_tmpl,name:a.filename(n.file.fq_path),isDeleted:n.file.isDeleted,is_locked:n.file.is_locked,is_lockholder:n.file.is_lockholder,lockholder_name:n.file.lockholder_name,lock_info:n.file.lock_info});var f=0===e&&o.props.selectedIds&&0===o.props.selectedIds.size;return i.default.createElement(c.TileElement,{file:l,paper:n.paper,key:n.id,onClick:n.onClick,onDoubleClick:n.onDoubleClick,onLabelClick:n.onLabelClick,width:o.state.tileWidth,leftOffset:t,tileIndex:e,labelHeight:n.labelNode?o.props.labelHeight:0,delayRenderFullTile:s,actionNode:n.actionNode,thumbnailUrl:n.thumbnailUrl,labelNode:n.labelNode,altText:n.altText,onThumbnailError:o.props.logTileLoading?o.logTileError:void 0,onThumbnailLoad:o.props.logTileLoading?o.logTileLoaded:void 0,isDraggable:n.isDraggable,onDragEnter:n.onDragEnter,onDragStart:n.onDragStart,isFocused:n.isFocused,isSelectable:n.isSelectable,isSelected:d,isViewOnly:n.isViewOnly,isActiveDropTarget:p,isAvailableDropTarget:u,handleToggleSelect:n.handleToggleSelect,checkboxAriaText:n.checkboxAriaText,checkboxTabIndex:n.isCheckboxFocusable?0:-1,thumbStore:o.props.thumbStore,href:n.href,overrideTabIndex:f})},o.renderRow=function(e,t,r){var n=o.getRowHeight(t);if(!e)return i.default.createElement(l.CulledItem,{className:o.props.rowClass,height:n,key:t,tagName:"div",topOffset:r});if(!Array.isArray(e))return i.default.createElement(l.CulledItem,{className:o.props.rowClass,height:n,key:t,tagName:"div",topOffset:r},e);for(var a=e,s=a[0],c=a[1],d=o.state.tileWidth+o.props.tilePadding,u=[],p=4,f=s;f<c;f++)u.push(o.renderTileElement(f,p,u.length)),p+=d;return i.default.createElement(l.CulledItem,{className:o.props.rowClass,height:n,key:t,tagName:"div",topOffset:r},u)},o.handleRangeInView=u((function(e,t){var i=o.props.onRangeInView;if(i&&0!==o.props.totalNumItems){var r=o.translateRowRangeToItemRange(e,t),n=r[0],l=r[1];isNaN(n)||isNaN(l)||i(n,l)}})),o.props.sectionLabels||o.props.sectionStartIndices){if(!o.props.sectionLabels||!o.props.sectionStartIndices)throw new Error("Included only one of `sectionLabels` or `sectionStartIndices`.");if(o.props.sectionLabels.length!==o.props.sectionStartIndices.length)throw new Error("sectionLabels and sectionStartIndices must be of same length.")}return o.state={tileWidth:o.props.maxTileWidth},s.JSStopwatch.create_stopwatch_if_not_exist("infinite_tile_grid_logging"),o}return o.__extends(t,e),t.prototype.updateLayout=function(){var e=this;this.animationFrameRequestId=window.requestAnimationFrame((function(){var t=e.getAndUpdateTileLayout();e.props.logTileLoading&&!e.tileLoadLogger&&e.setupTileLogging(e.getRowHeight(),t.tilesPerRow)}))},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.updateOnResize),this.updateLayout(),this.updateScroll(!0)},t.prototype.componentWillReceiveProps=function(e){this.tileLoadLogger&&this.tileLoadLogger.updateNumTiles(e.totalNumItems),this.props.maxTileWidth!==e.maxTileWidth&&this.updateLayout()},t.prototype.componentDidUpdate=function(e){e.scrollToIndex!==this.props.scrollToIndex&&this.updateScroll(void 0===e.scrollToIndex||e.scrollToIndex<0)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.updateOnResize),this.animationFrameRequestId&&window.cancelAnimationFrame(this.animationFrameRequestId),this.tileLoadLogger&&(clearInterval(this.logTrackingInterval),delete this.tileLoadLogger)},t.prototype.getRowHeight=function(e){if(void 0!==e&&this.rowHeights)return this.rowHeights[e];var t=this.state.tileWidth+this.props.tilePadding;return this.props.showLabels&&(t+=this.props.labelHeight+4),t},t.prototype.getPageHeight=function(){var e=(document.documentElement.clientHeight||window.outerHeight)-(this.props.contentOffset||0),t=this.getRowHeight(),o=t*Math.ceil(e/t);return Math.max(o,t)},t.prototype.getAndUpdateTileLayout=function(){var e=this.props.maxTileWidth+this.props.tilePadding,t=n.findDOMNode(this);if(!t||0===t.clientWidth)return{tileWidth:this.state.tileWidth,tilesPerRow:this.props.tilesPerRow};var o=t.clientWidth,i=Math.max(1,Math.floor(o/e)),r=this.props.maxTileWidth;return o%e>1&&(r=o/++i-this.props.tilePadding),this.state.tileWidth!==r&&this.setState({tileWidth:r}),this.props.tilesPerRow!==i&&this.props.onTilesPerRowChange(i),{tileWidth:r,tilesPerRow:i}},t.prototype.setupTileLogging=function(e,t){var o=this.getPageHeight(),i=t*Math.ceil(o/e);this.tileLoadLogger=new d.InfiniteTileGridLogger(this.props.totalNumItems,i,t,this.handleTTI),this.tileLoadLogger.pagesToLog.add(0);var r=this.tileLoadLogger.getTimeNow();this.tileLoadLogger.startTimeByPage.set(0,r),this.logTrackingInterval=setInterval(this.setLastViewedPage,200,o)},t.prototype.translateRowRangeToItemRange=function(e,t){var o=this.itemRangeByRow;return[o[e][0],o[t][1]]},t.prototype.render=function(){var e=this;this.itemRangeByRow=[],this.rowHeights=[],this.tileIndexToRowIndex=[];var t=[],o=this.getRowHeight(),r=this.props,n=r.containerClass,a=r.enableMaxHeightGrouping,s=r.numThresholdRows,c=r.scrollDeltaThreshold,d=r.sectionStartIndices,u=r.sectionLabels,p=r.totalNumItems,f=r.window;if(d&&d.length>0)d.forEach((function(r,n){var l=p;n!==d.length-1&&(l=d[n+1]),e.rowHeights.push(32);var a=l-r,s=Math.ceil(a/e.props.tilesPerRow),c=u[n],f=i.default.createElement("div",{className:"tile-section-header",role:"heading","aria-level":2},c);t.push(f),e.itemRangeByRow.push([r,r]);for(var m=0;m<s;m++){var h=r+m*e.props.tilesPerRow,_=Math.min(h+e.props.tilesPerRow,l),g=[h,_];t.push(g),e.itemRangeByRow.push(g);for(var E=h;E<_;E++)e.tileIndexToRowIndex.push(e.rowHeights.length);e.rowHeights.push(o)}}));else for(var m=Math.ceil(p/this.props.tilesPerRow),h=0;h<m;h++){var _=h*this.props.tilesPerRow,g=Math.min(_+this.props.tilesPerRow,p),E=[_,g];t.push(E),this.itemRangeByRow.push(E);for(var S=_;S<g;S++)this.tileIndexToRowIndex.push(this.rowHeights.length);this.rowHeights.push(o)}return i.default.createElement(l.CulledList,{enableMaxHeightGrouping:a,items:t,listItemHeight:this.rowHeights,itemBuffer:s,className:n,renderRow:this.renderRow,scrollThreshold:c,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView,tagName:"div",window:f})},t.defaultProps={enableMaxHeightGrouping:!1,numThresholdRows:10,tilePadding:16,tileHeight:160,maxTileWidth:160,labelHeight:40,logTileLoading:!1,scrollDeltaThreshold:1,showLabels:!0,getTileItem:function(){return null},handleTTI:function(){}},t})(i.default.PureComponent);t.InfiniteTileGrid=p})),define("modules/clean/sharing/avatar_info",["require","exports","tslib","modules/core/user_i18n"],(function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importStar(i);var r=function(e){switch(e){case"reader":return"viewer";case"writer":return"editor";case"owner":return"owner";default:return"default"}};t.apiUserMemberToAvatarInfo=function(e){var t=e.displayName()||"",o=e.email()||"";return{access_type:r(e.access_type),display_name:t,familiar_name:null!=e.account?e.account.familiar_name:void 0,initials:null!=e.initials?e.initials:i.getInitials(t),photo_url:null!=e.account?e.account.profile_photo_url:void 0,user_id:e.memberId(),email:o,account_id:e.account_id}},t.apiGroupMemberToAvatarInfo=function(e){return{access_type:r(e.access_type),gid:e.memberId(),is_automatic:"team"===e.group_type,name:e.displayName(),num_users:e.member_count}},t.apiInviteeMemberToAvatarInfo=function(e){return{access_type:r(e.access_type),invitation_id:e.memberId(),email_or_fbname:e.displayName()}}})),define("modules/clean/react/files_view/keyboard_focus",["require","exports","tslib","react"],(function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastMouseDown=0,t.onFocus=function(e){Date.now()-t.lastMouseDown>500&&t.props.onKeyboardFocus(e)},t.onMouseDown=function(){t.lastMouseDown=Date.now()},t}return o.__extends(t,e),t.prototype.render=function(){return this.props.children({onFocus:this.onFocus,onMouseDown:this.onMouseDown})},t})((i=o.__importDefault(i)).default.PureComponent);t.WithKeyboardFocus=r}));
//# sourceMappingURL=pkg-selectable-list.min.js-vfl4bp5_q.map