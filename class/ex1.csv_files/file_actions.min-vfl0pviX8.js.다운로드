define(["require","exports","tslib","react","modules/clean/browse_interface","modules/clean/cloud_docs/constants","modules/clean/em_string","modules/clean/filepath","modules/clean/filetypes","modules/clean/react/app_actions/app_actions_menu","modules/clean/react/async_file_modal_controller","modules/clean/react/badge","modules/clean/react/browse/actions","modules/clean/react/browse/client_download_modal","modules/clean/react/browse/constants","modules/clean/react/browse/data/folder_overview_selectors","modules/clean/react/browse/file_actions/actions/copy","modules/clean/react/browse/file_actions/actions/move","modules/clean/react/browse/file_actions/actions/share","modules/clean/react/browse/file_actions/file_action_helpers","modules/clean/react/browse/models","modules/clean/react/browse/util","modules/clean/react/extensions/data/types","modules/clean/react/extensions/utils","modules/clean/react/file_lock/api","modules/clean/react/file_transfers/async/browse_entry_point_onboarding_modal_async","modules/clean/react/file_transfers/lib/api","modules/clean/react/file_transfers/lib/urls","modules/clean/react/file_transfers/lib/utils","modules/clean/react/files_view/types","modules/clean/react/folder_overview/async_components","modules/clean/react/folder_overview/data/action_creators","modules/clean/react/folder_overview/data/store","modules/clean/react/folder_overview/utils","modules/clean/react/retrieval_success_banner/util","modules/clean/react/snackbar","modules/clean/react/starred/browse_exports","modules/clean/search/types","modules/clean/sharing/browse_exports","modules/clean/sharing/constants","modules/clean/sharing/gating_util","modules/clean/unity/check_file_cache","modules/clean/unity/features","modules/clean/viewer","modules/clean/web_user_action_events","modules/core/browser","modules/core/i18n"],(function(e,r,n,o,s,i,t,a,l,c,d,u,f,h,p,w,m,_,v,F,S,g,y,E,b,A,T,R,N,O,U,I,L,k,B,D,M,C,P,x,V,W,q,z,H,Q,G){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),o=n.__importDefault(o),a=n.__importStar(a),d=n.__importStar(d),w=n.__importStar(w),b=n.__importStar(b),I=n.__importStar(I),W=n.__importDefault(W),Q=n.__importStar(Q);var K={showTiburonShare:!1,showCopyPublicFolderFileLink:!1,showOpen:!1,showOpenWith:!1,showDownload:!1,showComment:!1,showDelete:!1,showArchive:!1,showRemove:!1,showRename:!1,showRenameTeamFolder:!1,showMove:!1,showCopy:!1,showVersions:!1,showRewindFolder:!1,showRestore:!1,showReadd:!1,showPermanentDelete:!1,showRemoveAccess:!1,showShowInFolder:!1,showStar:!1,showUnstar:!1,showLoadingStar:!1,showSharedFolderEvents:!1,showCalculateFolderSize:!1,showManageAsAdmin:!1,showRequestFiles:!1,showPin:!1,showPinTo:!1,showUnpin:!1,showSplitShare:!1,showAddToTransfer:!1,showAddFolderToTransfer:!1,showTransferBrowseEntryOnboarding:!1,showFileLock:!1,showFileUnlock:!1,showFileRequestUnlock:!1};function J(e){return e.isDeleted||e.is_unmounted}function j(e){var r=e.context,o=e.files,s=e.user,t=e.viewType,c=e.sharingServiceInfo,d=e.extensionsFeatureFlags,u=e.canDisplayFolderSizes,f=void 0!==u&&u,h=e.isSearchMode,p=void 0!==h&&h,w=e.isQueryingFolderSizes,m=e.expFolderHistoryRollbacks,_=void 0!==m&&m,v=e.pinnedItems,F=e.showAddToTransfer,y=e.showAddFolderToTransfer,b=e.expShowFileLocking,A=void 0!==b&&b,T=n.__assign({},K);if(r.isInsideArchivedTeamFolder)return T.showDownload=!0,T;var R=o.every((function(e){return!J(e)})),N=!R&&o.every((function(e){return J(e)}));return R?(function(e){var r,n=e.actions,o=e.context,s=e.files,t=e.user,c=e.viewType,d=e.sharingServiceInfo,u=e.extensionsFeatureFlags,f=e.canDisplayFolderSizes,h=void 0!==f&&f,p=e.isQueryingFolderSizes,w=void 0!==p&&p,m=e.isSearchMode,_=void 0!==m&&m,v=e.expFolderHistoryRollbacks,F=void 0!==v&&v,y=e.pinnedItems,b=e.showAddToTransfer,A=void 0!==b&&b,T=e.showAddFolderToTransfer,R=void 0!==T&&T,N=e.expShowFileLocking,U=void 0!==N&&N,I=s.first(),L=1===s.count(),k=L&&!I.is_dir,B=L&&I.is_dir,D=s.every((function(e){return e.type===l.FileTypes.FILE})),C=s.some((function(e){return e.type===l.FileTypes.TEAM_SHARED_FOLDER})),x=s.some((function(e){return e.type===l.FileTypes.TEAM_MEMBER_FOLDER})),H=s.some((function(e){return e.type===l.FileTypes.SANDBOX})),Q=s.some((function(e){return e instanceof S.FileSharedWithMe})),G=s.some((function(e){return e.is_cloud_doc})),K=s.some((function(e){return e.is_cloud_doc&&e instanceof S.FileSharedWithMe})),J=s.some((function(e){return e.type===l.FileTypes.VAULT_FOLDER})),j=!1;Q||C||x||(n.showCopy=!0,n.showDelete=!0,n.showMove=!0,n.showRename=L);!Q&&C&&B&&t&&V.GoldenGate.hasContentManagerAndSuperAdmin(t.id)&&(n.showRenameTeamFolder=!0,n.showArchive=!0);!Q&&!z.Viewer.get_viewer().is_assume_user_session&&t&&V.GoldenGate.hasContentManagerAndSuperAdmin(t.id)&&V.GoldenGate.hasNewOwnershipModel(t.id)&&o.isInsideTeamFolderTree&&(n.showManageAsAdmin=!0);if(L){var X=s.first();r=P.shouldUsePublicFolderSharing(o.config,X.fq_path),Q||o.isInsideVaultFolder||r||x||H||(n.showTiburonShare=!0),(j=!Q&&q.UnityFeatures.isUnitySupported()&&null!=W.default&&W.default.is_cached_and_locally_available(X.ns_id,X.ns_path))&&!o.isInsideVaultFolder&&(n.showOpen=!0),Q||o.isInsideVaultFolder||(n.showOpenWith=!0),!Q&&!o.isInsideVaultFolder&&u&&d&&E.shouldShowSplitShare(u,d,X)&&(n.showSplitShare=!0)}!Q&&B&&(F||g.shouldShowRewindsUpsell(t))&&(n.showRewindFolder=!0);n.showShowInFolder=!Q&&_&&(function(e){var r=e.toArray().map((function(e){return e.fq_path}));return a.inSameDirectory(r)})(s),k&&(n.showComment=!I.is_cloud_doc,n.showVersions=!(Q||I.is_cloud_doc&&i.isPointerByExtension(I.ns_path)),o.isInFolderMode?n.showCopyPublicFolderFileLink=!!r:n.showCopyPublicFolderFileLink=!1);if(k)if(I.is_locked)I.is_lockholder?n.showFileUnlock=!0:n.showFileRequestUnlock=!0;else if(U){var Y=I.ns_id!==t.home_ns_id,Z=I.read_only||I.is_symlink||!Y;n.showFileLock=!Z}j||(n.showDownload=k?!G:!Q&&!K&&(o.isInFolderMode||_));if(n.showAddToTransfer=A&&!G&&(D||R)&&!s.some(S.File.isNoAccessSharedFolder),n.showRequestFiles=B&&o.isCurrentPathWriteable()&&!o.isInsideVaultFolder&&!S.File.isReadOnlySharedFolder(I),!Q&&L){var $=s.first().type;$!==l.FileTypes.SHARED_FOLDER&&$!==l.FileTypes.TEAM_SHARED_FOLDER||(n.showSharedFolderEvents=!0),B&&null==s.first().fetchFolderSizesStatus&&!w&&!_&&c!==O.ViewType.Grid&&h&&(n.showCalculateFolderSize=!0)}if(!Q){var ee=s.every((function(e){return null==e.fetchFolderSizesStatus})),re=s.every((function(e){return e.is_dir})),ne=s.some((function(e){return!S.File.canViewFileMembers(e,o)}));ee&&re&&!ne&&!w&&!_&&c!==O.ViewType.Grid&&h&&(n.showCalculateFolderSize=!0)}if(!Q&&!o.isInsideVaultFolder&&L){var oe={id:s.first().file_id,type:M.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID},se=M.StarredStore.getIsLoading(oe),ie=M.StarredStore.getIsStarred(oe);n.showStar=!1===ie,n.showUnstar=!0===ie,n.showLoadingStar=se}if(!Q&&void 0!==y&&!_){var te=s.toArray().filter((function(e){return y.some((function(r){return r.fq_path===e.fq_path||r.file_id===e.file_id}))})).length;o.isCurrentPathWriteable()&&(n.showUnpin=te===s.size,n.showPin=!o.isInsideVaultFolder&&te<s.size),n.showPinTo=!o.isInsideVaultFolder&&a.normalize(o.currentFQPath).split("/").length>1}J&&(n.showCopy=!1,n.showDelete=!1,n.showMove=!1,n.showRename=!1,n.showTiburonShare=!1,n.showRequestFiles=!1);return n})({actions:T,canDisplayFolderSizes:f,expFolderHistoryRollbacks:_,context:r,files:o,sharingServiceInfo:c,extensionsFeatureFlags:d,isQueryingFolderSizes:w,isSearchMode:p,user:s,viewType:t,pinnedItems:v,showAddToTransfer:F,showAddFolderToTransfer:y,expShowFileLocking:A}):N?(function(e){var r,n=e.actions,o=e.files,s=e.context,i=e.user,t=o.first();if(o.some((function(e){return e.is_unmounted||e.ns_id!==t.ns_id})))return n;1===o.count()&&t.is_dir&&s.inactiveNSIDByFQPath[t.fq_path.toLowerCase()]&&!s.isInsideTeamFolderTree?n.showReadd=!0:n.showRestore=!0;if(s.isInFolderMode)r=s.permanentDeletionDisabledStateByNSID[s.currentNSID];else{var a=o.map((function(e){return e.ns_id}));r=a.some((function(e){return s.permanentDeletionDisabledStateByNSID[e]}))}!z.Viewer.get_viewer().is_assume_user_session&&i&&V.GoldenGate.hasContentManagerAndSuperAdmin(i.id)&&V.GoldenGate.hasNewOwnershipModel(i.id)&&s.isInsideTeamFolderTree&&(n.showManageAsAdmin=!0);r||(n.showPermanentDelete=!0);return n})({actions:T,files:o,context:r,user:s}):T}var X=function(e){var r=e.user,n=e.files,o=e.firstFile,i=n.map((function(e){return e.fq_path})).toArray();return function(){var n=i.map((function(e){return a.filename(e)})),t=a.parent_dir(i[0]),l=s.browse_uri_for_fq_path(r,t);n.length>1?l.updateQuery({select_multi:JSON.stringify(n)}):l.updateQuery({select:n[0]}),F.logUserEventOnFile({result:o,args:e,action_type:H.WebUserActionLogEvent.SHOW_IN_FOLDER}),window.open(l.toString(),"_blank")}},Y=function(e){return function(){var r=e.isSidebar?H.ActionSurfaceLogValue.RIGHT_SIDEBAR:H.ActionSurfaceLogValue.CENTER_PANE;F.logUserEventOnFile({result:e.firstFile,args:e,action_type:H.WebUserActionLogEvent.OPEN_EXTENSIONS,action_surface:r})}},Z=function(e){return function(r){var n=e.isSidebar?H.ActionSurfaceLogValue.RIGHT_SIDEBAR:H.ActionSurfaceLogValue.CENTER_PANE;F.logUserEventOnFile({result:e.firstFile,args:e,action_type:H.WebUserActionLogEvent.EXTENSIONS_SELECTED,action_surface:n,extra:{extensions_option:r||"unknown"}})}},$=function(e){return function(){var r=e.user,n=e.firstFile;F.logUserEventOnFile({result:n,args:e,action_type:H.WebUserActionLogEvent.OPEN_DESKTOP}),q.UnityFeatures.open_file(n.ns_id,n.ns_path,r.id,q.UnityFeatures.standard_open_file_handler,(function(){return q.UnityFeatures.standard_open_file_handler(!1)}))}},ee=function(e){var r=e.canShowUJPopup,n=e.args;return function(){var e=n.user,o=n.context,s=n.files,i=n.firstFile,t=n.isSearchMode,a=n.useSearchSuccessBanner,l=n.expBrowseSuccessBanner;F.logUserEventOnFile({result:i,args:n,action_type:H.WebUserActionLogEvent.DOWNLOAD}),F.showRetrievalSuccessBanner(a,t,l,H.WebUserActionLogEvent.DOWNLOAD),f.browseActions.downloadFiles({files:s,context:o,user:e}),r&&h.maybeShowClientDownloadModal(!0)}},re=function(e){return function(){var r=e.firstFile,n=e.isSearchMode,o=e.useSearchSuccessBanner,s=e.expBrowseSuccessBanner;F.logUserEventOnFile({result:r,args:e,action_type:H.WebUserActionLogEvent.ADD_COMMENT}),ve(o,n,s,H.WebUserActionLogEvent.ADD_COMMENT),e.actionHandlers.onShowComment(r)}},ne=function(e){var r=e.isStarred,n=e.args;return function(){var e=n.user,o=n.firstFile,s=n.isSearchMode,i=n.useSearchSuccessBanner,t=n.expBrowseSuccessBanner;F.logUserEventOnFile({result:o,args:n,action_type:r?H.WebUserActionLogEvent.STAR:H.WebUserActionLogEvent.REMOVE_STAR}),F.showRetrievalSuccessBanner(i,s,t,H.WebUserActionLogEvent.STAR),M.StarredActions.update(e.role,o.file_id,M.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID,r)}},oe=function(e){return function(){var r=e.actionHandlers,n=e.firstFile,o=e.isSearchMode,s=e.useSearchSuccessBanner,i=e.expBrowseSuccessBanner;F.logUserEventOnFile({result:n,args:e,action_type:H.WebUserActionLogEvent.RENAME}),F.showRetrievalSuccessBanner(s,o,i,H.WebUserActionLogEvent.RENAME),r.onShowRename(n)}},se=function(e){return function(){var r=e.files,n=e.firstFile;F.logUserEventOnFile({result:n,args:e,action_type:H.WebUserActionLogEvent.RENAME}),d.showContentManagerBridge(r.toArray(),"rename",z.Viewer.get_viewer().team_is_limited)}},ie=function(e){return function(){var r=e.files,n=e.firstFile;F.logUserEventOnFile({result:n,args:e,action_type:H.WebUserActionLogEvent.ARCHIVE}),d.showContentManagerBridge(r.toArray(),"archive",z.Viewer.get_viewer().team_is_limited)}},te=function(e){var r=e.args;return function(){var e=r.actionHandlers,n=r.files,o=r.firstFile,s=r.isSearchMode,i=r.useSearchSuccessBanner,t=r.expBrowseSuccessBanner,a=n.toArray();F.logUserEventOnFile({result:o,args:r,action_type:H.WebUserActionLogEvent.RESTORE}),F.showRetrievalSuccessBanner(i,s,t,H.WebUserActionLogEvent.RESTORE),e.onRestore(a)}},ae=function(e){return function(){var r=s.browse_uri_for_fq_path(e.user,e.firstFile.fq_path);r.setQuery({rewind:"true"}),Q.replace_location(r.toString())}},le=function(e){return function(){var r=e.user,n=e.context,o=e.firstFile.fq_path.toLowerCase(),s=n.inactiveNSIDByFQPath[o];s&&P.asyncMountSharedFolder(s,r.role,x.SHARE_ACTION_ORIGIN_TYPE.BROWSE_FILE_ACTIONS,!1,null,!0)}},ce=function(e){return function(){var r=e.user,n=e.firstFile,o=e.isSearchMode,i=e.useSearchSuccessBanner,t=e.expBrowseSuccessBanner;F.logUserEventOnFile({result:n,args:e,action_type:H.WebUserActionLogEvent.VERSIONS}),ve(i,o,t,H.WebUserActionLogEvent.VERSIONS);var a=s.getFileHistoryUrl({fqPath:n.fq_path,userId:r.id});Q.redirect(a)}},de=function(e){return function(){var r=e.actionHandlers,n=e.firstFile,o=e.files,s=e.isSearchMode,i=e.useSearchSuccessBanner,t=e.expBrowseSuccessBanner;F.logUserEventOnFile({result:n,args:e,action_type:H.WebUserActionLogEvent.DELETE}),F.showRetrievalSuccessBanner(i,s,t,H.WebUserActionLogEvent.DELETE),r.onDelete(o.toArray())}},ue=function(e){return function(){var r=e.actionHandlers,n=e.files,o=e.firstFile,s=e.isSearchMode,i=e.useSearchSuccessBanner,t=e.expBrowseSuccessBanner;F.logUserEventOnFile({result:o,args:e,action_type:H.WebUserActionLogEvent.PERMANENT_DELETE}),F.showRetrievalSuccessBanner(i,s,t,H.WebUserActionLogEvent.PERMANENT_DELETE),r.onPermanentDelete(n.toArray())}},fe=function(e){return function(){var r=e.firstFile;F.logUserEventOnFile({result:r,args:e,action_type:H.WebUserActionLogEvent.EVENTS}),Q.redirect("/events?ns="+r.target_ns)}},he=function(e){return function(){var r=e.firstFile,n=e.files;F.logUserEventOnFile({result:r,args:e,action_type:H.WebUserActionLogEvent.CALCULATE_SIZE}),f.browseActions.fetchMultipleFolderSizes({files:n})}},pe=function(r){return function(){(function(r){n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(o){switch(o.label){case 0:return[4,new Promise((function(r,n){e(["modules/clean/sharing/content_manager"],r,n)})).then(n.__importStar)];case 1:return(0,o.sent().goToContentManagerForPath)(r),[2]}}))}))})({containingFolder:r.context.currentFQPath})}},we=function(e){return function(){var r=e.files,n=e.firstFile,o=L.getStoreForFolderOverview();o.dispatch(I.addContentReferences({folderFileId:w.folderOverviewFolderFileId(o.getState()),fileIds:r.toArray().map(k.fileToContentReferenceId),componentNamespace:p.BrowseFolderOverviewComponentNamespace})),F.logUserEventOnFile({result:n,args:e,action_type:H.WebUserActionLogEvent.FOLDER_OVERVIEW_PIN})}},me=function(e){return function(){var r=e.files,n=e.firstFile,o=e.user,s=e.context;U.asyncShowPinToModal({user:o,path:s.currentFQPath,files:r.toArray(),onFolderSelected:function(o){L.getStoreForFolderOverview().dispatch(I.addContentReferencesForPath({files:r.toArray(),path:o})),F.logUserEventOnFile({result:n,args:e,action_type:H.WebUserActionLogEvent.FOLDER_OVERVIEW_PIN})},isCurrentPathReadOnly:!s.isCurrentPathWriteable()})}},_e=function(e){return function(){var r=e.files,n=e.firstFile,o=L.getStoreForFolderOverview();o.dispatch(I.removeContentReferences({folderFileId:w.folderOverviewFolderFileId(o.getState()),fileIds:r.toArray().map(k.fileToContentReferenceId),componentNamespace:p.BrowseFolderOverviewComponentNamespace})),F.logUserEventOnFile({result:n,args:e,action_type:H.WebUserActionLogEvent.FOLDER_OVERVIEW_UNPIN})}},ve=function(e,r,n,o){e&&r&&B.setSearchSuccessBannerVisible(),n!==C.BrowseSuccessBannerVariants.V2||r||B.setBrowseSuccessBannerVisible(o)},Fe=function(e){return function(){var r=function(){var r=e.user.id,n=e.files.map((function(e){return{file_id:e.file_id,destination_path:a.filename(e.ns_path)}})).toArray();D.Snackbar.sync(G._("Creating new transfer...",{comment:"Message shown when creating a new transfer from file list on web"}),!1,"create-transfer"),T.createTransfer(r,N.generateTransferTrackingId()).then((function(e){if(!e.transfer)return Promise.reject();var o=e.transfer.transfer_id;return T.addFilesById(r,o,n).then((function(){D.Snackbar.close("create-transfer"),Q.redirect(R.editTransferUrl(o,{referrer:"browse",logCreateTransferEvent:!0}))}))})).catch((function(){D.Snackbar.fail(G._("Unable to create transfer",{comment:"Error message shown when creating a new transfer from file list on web"}),"create-transfer")}))};e.showTransferBrowseEntryOnboarding?A.asyncShowBrowseEntryPointOnboardingModal({primaryActionOnClick:r,userId:e.user.id}):r()}};function Se(e){return function(){var r=e.firstFile,n=r.ns_id,o=r.ns_path;Q.redirect("/requests?ns_id="+n+"&path="+o+"&referrer=web_browse_file_action")}}var ge=function(e){return function(){b.showFileLockConfirmModal(e.user.id,e.firstFile),F.logUserEventOnFile({result:e.firstFile,args:e,action_type:H.WebUserActionLogEvent.LOCK_FILE})}},ye=function(e){return function(){b.asyncUnlockFile(e.user.id,[e.firstFile]),F.logUserEventOnFile({result:e.firstFile,args:e,action_type:H.WebUserActionLogEvent.UNLOCK_FILE})}},Ee=function(e){return function(){b.showRequestUnlockConfirmModal(e.user.id,e.firstFile),F.logUserEventOnFile({result:e.firstFile,args:e,action_type:H.WebUserActionLogEvent.REQUEST_UNLOCK_FILE})}};r.getActionsForFileCollection=function(e){var r,n=e.files,s=e.context,i=e.user,l=e.responsive,d=e.sharingServiceInfo,f=e.extensionsFeatureFlags,h=e.canDisplayFolderSizes,p=void 0!==h&&h,w=e.actionHandlers,F=e.skipSharing,g=void 0!==F&&F,E=e.source,b=e.viewType,A=e.isOverFreeQuota,T=void 0!==A&&A,R=e.hasExcludedNsIds,N=void 0!==R&&R,O=e.isSearchMode,U=void 0!==O&&O,I=e.isQueryingFolderSizes,L=void 0!==I&&I,k=e.canShowUJPopup,B=void 0!==k&&k,D=e.isSidebar,M=void 0!==D&&D,x=e.useSearchSuccessBanner,V=void 0!==x&&x,W=e.expBrowseSuccessBanner,q=void 0===W?C.BrowseSuccessBannerVariants.OFF:W,z=e.expListSubfoldersWithOdyssey,H=void 0!==z&&z,Q=e.pinnedItems,K=e.expFolderHistoryRollbacks,J=void 0!==K&&K,ve=e.showAddToTransfer,be=void 0!==ve&&ve,Ae=e.showAddFolderToTransfer,Te=void 0!==Ae&&Ae,Re=e.showTransferBrowseEntryOnboarding,Ne=void 0!==Re&&Re,Oe=e.expShowFileLocking,Ue=void 0!==Oe&&Oe,Ie=e.isCreateButtonMoveEnabled,Le=void 0!==Ie&&Ie,ke=e.forceSplitShareSecondary,Be=void 0!==ke&&ke,De=e.shouldUsePortalPopover,Me=void 0===De||De,Ce=e.scrollableSidebarRef,Pe=n.first(),xe=!s.isCurrentPathWriteable()||n.some((function(e){return e.read_only})),Ve=xe,We=xe,qe=xe,ze=xe,He=n.some((function(e){return!S.File.canViewFileMembers(e,s)})),Qe=He,Ge=He,Ke=n.every(S.File.isNoAccessSharedFolder),Je=Ke,je=Ke,Xe=Ke,Ye=n.some(S.File.isNoAccessSharedFolder),Ze=!l.isMatchedMedium&&!l.isMatchedLarge,$e=j({files:n,context:s,user:i,viewType:b,sharingServiceInfo:d,extensionsFeatureFlags:f,canDisplayFolderSizes:p,isQueryingFolderSizes:L,isSearchMode:U,expFolderHistoryRollbacks:J,pinnedItems:Q,showAddToTransfer:be,showAddFolderToTransfer:Te,expShowFileLocking:Ue}),er=new Array,rr=null===q?C.BrowseSuccessBannerVariants.OFF:q,nr={user:i,context:s,actionHandlers:w,files:n,firstFile:Pe,isSearchMode:U,source:E,viewType:b,useSearchSuccessBanner:V,expBrowseSuccessBanner:rr,isSidebar:M,expListSubfoldersWithOdyssey:H,showTransferBrowseEntryOnboarding:Ne};return!g&&$e.showTiburonShare&&er.push(v.getShareItem(nr,{showSplitShare:$e.showSplitShare,user:i,firstFile:Pe,isViewSmall:Ze,shareItemDisabled:Qe,isCreateButtonMoveEnabled:Le,forceSplitShareSecondary:Be,extensionsFeatureFlags:f,sharingServiceInfo:d,scrollableSidebarRef:Ce,shouldUsePortalPopover:Me,isSidebar:M,isSearchMode:U})),$e.showCopyPublicFolderFileLink&&er.push({label:G._("Copy public link"),iconName:"link",className:"action-world-link",performAction:(r=nr,function(){var e=r.user,n=r.context,o=r.firstFile;if(n.config&&o&&o.fq_path){var s=P.makePublicFolderLink(e.id,n.config,o.fq_path,o.is_dir);s&&P.showPublicFolderLinkModal(s)}}),key:"copy-public-link"}),$e.showOpen&&er.push({label:G._("Open"),performAction:$(nr),iconName:"open-in-app",className:"action-open-in-app",key:"open"}),$e.showShowInFolder&&er.push({label:G._("Show in folder"),performAction:X(nr),iconName:"open-in-app",className:"action-show-in-folder",key:"show-in-folder"}),$e.showDownload&&er.push({label:G._("Download"),performAction:ee({canShowUJPopup:B,args:nr}),disabled:Je,iconName:"download",className:"action-download",key:"download"}),$e.showOpenWith&&er.push((function(){return o.default.createElement(c.ExtensionsMenu,{user:i,file:Pe,triggerType:y.TriggerType.SecondaryButton,telemetryContext:{surface:"sidebar"},key:"extensions-"+Pe.fq_path,onDropdownOpen:Y(nr),onExtensionClick:Z(nr),scrollableSidebarRef:Ce,shouldUsePortalPopover:Me})})),$e.showAddToTransfer&&er.push({label:G._("Send with Transfer"),performAction:Fe(nr),iconName:"send-with-transfer"}),$e.showRequestFiles&&er.push({label:G._("Request files"),performAction:Se(nr),iconName:"new-file-request"}),$e.showComment&&er.push({label:G._("Add comment"),performAction:re(nr),iconName:"add-comment",className:"action-add-comment",key:"add-comment"}),$e.showStar?er.push({label:G._("Star",{project:"browse-web",comment:'Verb describing the "starring" action, not the noun. Used as a menu option.'}),ariaLabel:G._("Add to Starred"),ariaPressed:!1,performAction:ne({isStarred:!0,args:nr}),iconName:"star",className:"action-star",key:"star"}):$e.showUnstar&&er.push({label:G._("Unstar",{comment:'Verb describing the "unstarring" action.'}),ariaLabel:G._("Add to Starred"),ariaPressed:!0,performAction:ne({isStarred:!1,args:nr}),iconName:"unstar",className:"action-unstar",key:"star"}),$e.showFileLock&&er.push({label:G._("Lock editing"),performAction:ge(nr),key:"file-lock",iconName:"permissions",badge:{variant:u.BadgeVariant.BETA,color:u.BadgeColor.PINK}}),$e.showFileUnlock&&er.push({label:G._("Unlock editing"),performAction:ye(nr),key:"file-lock",iconName:"permissions",badge:{variant:u.BadgeVariant.BETA,color:u.BadgeColor.PINK}}),$e.showFileRequestUnlock&&er.push({label:G._("Ask to unlock"),performAction:Ee(nr),key:"file-lock",iconName:"permissions",badge:{variant:u.BadgeVariant.BETA,color:u.BadgeColor.PINK}}),$e.showVersions&&(void 0===nr.firstFile.is_versionable||nr.firstFile.is_versionable)&&er.push({label:G._("Version history"),performAction:ce(nr),iconName:"view-version-history",className:"action-view-version-history",key:"version-history"}),$e.showRewindFolder&&er.push({label:G._("Rewind",{project:"folder-history"}),performAction:ae(nr),iconName:"revert-folder",className:"action-revert-folder",key:"rewind"}),$e.showRename&&er.push({label:G._("Rename"),performAction:oe(nr),iconName:"rename",className:"action-rename",disabled:We,key:"rename"}),$e.showRenameTeamFolder&&er.push({label:G._("Rename"),performAction:se(nr),iconName:"rename",className:"action-rename",key:"rename-team-folder"}),$e.showArchive&&er.push({label:G._("Archive"),performAction:ie(nr),iconName:"delete",className:"action-delete",key:"archive"}),$e.showMove&&er.push(_.getMoveItem(nr,{isOverFreeQuota:T,hasExcludedNsIds:N,moveItemDisabled:qe})),$e.showCopy&&er.push(m.getCopyItem(nr,{isOverFreeQuota:T,hasExcludedNsIds:N,copyItemDisabled:je})),$e.showDelete&&er.push({label:G._("Delete"),performAction:de(nr),disabled:Ve,iconName:"delete",className:"action-delete",key:"delete"}),$e.showRestore&&er.push({label:G._("Restore"),className:"action-restore",performAction:te({args:nr}),disabled:ze,key:"restore"}),$e.showReadd&&er.push({label:G._("Re-add shared folder"),className:"action-re-add",performAction:le(nr),disabled:ze,key:"re-add-shared-folder"}),$e.showPermanentDelete&&er.push({label:G._("Permanently delete"),iconName:"delete",className:"action-permanently-delete",performAction:ue(nr),key:"permanently-delete"}),$e.showSharedFolderEvents&&er.push({label:G._("Events"),performAction:fe(nr),disabled:Ge,iconName:"events",className:"action-events",key:"events"}),$e.showCalculateFolderSize&&er.push({label:G._("Calculate size"),performAction:he(nr),disabled:Xe,iconName:"calculate",className:"action-calculate-folder-size",key:"calculate-size"}),$e.showManageAsAdmin&&er.push({label:G._("View in admin console"),performAction:pe(nr),iconName:"settings-gear",key:"view-in-admin-console"}),$e.showPin&&er.push({label:G._("Pin to %(path)s").format({path:t.Emstring.em_snippet(a.filename(s.currentFQPath),8,1)}),performAction:we(nr),iconName:"pin",disabled:Ye,key:"pin-to"}),$e.showUnpin&&er.push({label:G._("Unpin"),performAction:_e(nr),iconName:"pin",disabled:Ye,key:"unpin"}),$e.showPinTo&&er.push({label:G._("Pin to..."),performAction:me(nr),iconName:"pin",disabled:Ye,key:"pin-to-path"}),er}}));
//# sourceMappingURL=file_actions.min.js-vflWmLZLO.map