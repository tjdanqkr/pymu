define(["require","exports","tslib","external/lodash","modules/clean/logging/hive/schemas/web-modal-activity","modules/clean/react/async_fileops_modals","modules/clean/react/async_overquota_modal_controller","modules/clean/react/browse/action_logger","modules/clean/react/browse/actions","modules/clean/react/browse/file_actions/file_action_helpers","modules/clean/react/browse/logger_util","modules/clean/react/fileops_actions","modules/clean/react/folder_dialog/api","modules/clean/react/folder_dialog/constants","modules/clean/web_user_action_events","modules/core/i18n"],(function(e,o,t,s,n,r,l,a,c,i,u,d,_,m,p,g){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),s=t.__importStar(s),r=t.__importStar(r),l=t.__importStar(l),a=t.__importStar(a),u=t.__importStar(u),d=t.__importStar(d);function f(){l.showOverquota("wb_oq_mv_cp")}o.getCopyItem=function(e,o){var l,v=o.isOverFreeQuota,F=o.hasExcludedNsIds,w=o.copyItemDisabled,S=v&&!F?f:(l=e,function(){var e=l.user,o=l.files,g=l.firstFile,f=l.isSearchMode,v=l.source,F=l.viewType,w=l.context,S=l.useSearchSuccessBanner,y=l.expBrowseSuccessBanner,b=l.expListSubfoldersWithOdyssey,h=o.toArray();i.logUserEventOnFile({result:g,args:l,action_type:p.WebUserActionLogEvent.OPEN_COPY_MODAL}),i.showRetrievalSuccessBanner(S,f,y,p.WebUserActionLogEvent.OPEN_COPY_MODAL);var C={user:e,files:h,onSuccess:function(t){var s=u.countFilesAndFolders(o),n=s.num_files_selected,r=s.num_folders_selected;a.logCopyFiles({uid:e.id,source:v,view_type:F,result:g,num_files_selected:n,num_folders_selected:r}),c.browseActions.selectRowsFromBoltClient(t)},onRequestNotSent:function(){c.browseActions.selectFilesByFqPath({fqPathsToSelect:h.map((function(e){return e.fq_path}))})},onUndo:function(){c.browseActions.selectRowsFromBoltClient(h)}},O=b?_.getFolderContentsAPIv2:_.getFolderContents;r.showMoveDialog({operation:m.Operation.COPY,modalName:n.ModalName.COPY,user:e,entries:h,initialFolderSelection:w.currentFQPath,apiClient:{moveToFolder:function(e){var o=t.__assign(t.__assign({},C),{newPath:e,checkFSWs:!0});return d.copyFiles(o),Promise.resolve()},getFolderContents:O,getFolderSuggestion:_.getFolderSuggestion},onSuccess:s.noop,onCancel:s.noop,showFolderSuggestion:!0,createNewFolderInMoveDialog:!0})});return{label:g._("Copy"),performAction:S,disabled:w,iconName:"copy",className:"action-copy",key:"copy"}}}));
//# sourceMappingURL=copy.min.js-vflrk1mqz.map