define("modules/clean/teams/content_manager_modern/constants",["require","exports","modules/core/i18n","modules/constants/trademark"],(function(e,t,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.MEMBERS="MEMBERS",e.FILES="FILES",e.ACTIVE_TEAM_FOLDERS="ACTIVE_TEAM_FOLDERS",e.ARCHIVED_TEAM_FOLDERS="ARCHIVED_TEAM_FOLDERS",e.LOCKED_FILES="LOCKED_FILES"})(t.ContentManagerTab||(t.ContentManagerTab={})),t.BASE_PREFIX_CDM="/team/admin/content",t.HOME_PREFIX_CDM=t.BASE_PREFIX_CDM+"/home",t.BASE_PREFIX_GG="/team/admin/team_folders",t.HOME_PREFIX_GG=t.BASE_PREFIX_GG+"/home",t.MAX_SHARING_ENTITIES=5,t.CONTENT_MANAGER_SORT_KEY="CONTENT_MANAGER_SORT",t.CONTENT_MANAGER_COLUMNS_KEY="CONTENT_MANAGER_COLUMNS",(function(e){e.d="d",e.select="select",e.stormcrow_override="stormcrow_override"})(t.ContentManagerQueryArg||(t.ContentManagerQueryArg={})),t.SyncSettingTranslations={sync:n._("Starts as synced",{project:"content-manager"}),nosync:n._("Starts as unsynced",{project:"content-manager"}),nosync_inherited:n._("Starts as unsynced",{project:"content-manager"}),sync_partial:n._("Some start synced",{project:"content-manager"}),deleted:""},(function(e){e.ARCHIVE="ARCHIVE",e.CHANGE_SYNC_DEFAULT="CHANGE_SYNC_DEFAULT",e.COPY="COPY",e.DELETE="DELETE",e.DOWNLOAD="DOWNLOAD",e.HIDE_DELETED="HIDE_DELETED",e.MOVE="MOVE",e.NEW_FOLDER="NEW_FOLDER",e.PERMANENTLY_DELETE="PERMANENTLY_DELETE",e.PERMANENTLY_DELETE_TEAM_FOLDER="PERMANENTLY_DELETE_TEAM_FOLDER",e.RENAME="RENAME",e.RENAME_TEAM_FOLDER="RENAME_TEAM_FOLDER",e.SHOW_DELETED="SHOW_DELETED",e.VERSION_HISTORY="VERSION_HISTORY",e.VIEW_ACTIVITY="VIEW_ACTIVITY"})(t.ContentManagerSecondaryActionType||(t.ContentManagerSecondaryActionType={})),(function(e){e.ARCHIVE_IN_PROGRESS="ARCHIVE_IN_PROGRESS",e.CREATE_TEAM_FOLDER="CREATE_TEAM_FOLDER_PRIMARY",e.DELETE="DELETE_PRIMARY",e.DOWNLOAD="DOWNLOAD_PRIMARY",e.MANAGE="MANAGE_PRIMARY",e.MANAGE_TEAM_FOLDER="MANAGE_TEAM_FOLDER_PRIMARY",e.NEW_FOLDER="NEW_FOLDER_PRIMARY",e.RESTORE="RESTORE_PRIMARY",e.UNARCHIVE="UNARCHIVE_PRIMARY",e.UPLOAD="UPLOAD_PRIMARY"})(t.ContentManagerPrimaryActionType||(t.ContentManagerPrimaryActionType={})),(function(e){e.ARCHIVE="ARCHIVE",e.ARCHIVE_IN_PROGRESS="ARCHIVE_IN_PROGRESS",e.CHANGE_SYNC_DEFAULT="CHANGE_SYNC_DEFAULT",e.COPY="COPY",e.CREATE_TEAM_FOLDER="CREATE_TEAM_FOLDER",e.DELETE="DELETE",e.DOWNLOAD="DOWNLOAD",e.HIDE_DELETED="HIDE_DELETED",e.MOVE="MOVE",e.NEW_FOLDER="NEW_FOLDER",e.PERMANENTLY_DELETE="PERMANENTLY_DELETE",e.PERMANENTLY_DELETE_TEAM_FOLDER="PERMANENTLY_DELETE_TEAM_FOLDER",e.RENAME="RENAME",e.RENAME_TEAM_FOLDER="RENAME_TEAM_FOLDER",e.SHOW_DELETED="SHOW_DELETED",e.VERSION_HISTORY="VERSION_HISTORY",e.VIEW_ACTIVITY="VIEW_ACTIVITY",e.MANAGE="MANAGE",e.MANAGE_TEAM_FOLDER="MANAGE_TEAM_FOLDER",e.RESTORE="RESTORE",e.UNARCHIVE="UNARCHIVE",e.UPLOAD="UPLOAD"})(t.ContentManagerActionType||(t.ContentManagerActionType={})),t.fswModalTranslations={MOVE:n._("Move",{project:"content-manager"}),COPY:n._("Copy",{project:"content-manager"})},t.fileActionTranslations={moveInProgress:n._("Moving files…",{project:"content-manager"}),copyInProgress:n._("Copying files…",{project:"content-manager"}),moveCompleted:n._("Move completed.",{project:"content-manager"}),copyCompleted:n._("Copy completed.",{project:"content-manager"}),moveNestedPathError:n._("Moving a folder into itself isn’t allowed",{project:"content-manager"}),copyNestedPathError:n._("Copying a folder into itself isn’t allowed.",{project:"content-manager"}),moveTooManyFilesError:n._("Can’t move 10,000+ files. Try moving subfolders individually.",{project:"content-manager"}),copyTooManyFilesError:n._("Can’t copy 10,000+ files. Try copying subfolders individually.",{project:"content-manager"}),generalError:n._("There was a problem completing this request.",{project:"content-manager"})},t.teamFolderModalsTitleStrings={createTeamFolder:n._("Create team folder",{project:"content-manager"}),renameTeamFolder:n._("Rename <strong>%(folder_name)s</strong> team folder",{project:"content-manager"}),archiveTeamFolder:n._("Archive team folder?",{project:"content-manager"}),addGroupsToTeamFolder:n._("Add groups?",{project:"content-manager"}),permanentlyDeleteTeamFolder:n._("Permanently delete team folder?",{project:"content-manager"}),detailsAccessPoints:n._("Access points for %(member_name)s",{project:"content-manager"}),dataMigrationToolDownload:n._("Dropbox Migration Assistant",{project:"content-manager"})},t.teamFolderModalsAcceptStrings={createFolder:n._("Create",{comment:"BUTTON",project:"content-manager"}),createTeamFolder:n._("Create",{comment:"BUTTON",project:"content-manager"}),renameTeamFolder:n._("Rename",{comment:"BUTTON",project:"content-manager"}),archiveTeamFolder:n._("Archive",{comment:"BUTTON",project:"content-manager"}),addGroupsToTeamFolder:n._("Add groups",{comment:"BUTTON",project:"content-manager"}),permanentlyDeleteTeamFolder:n._("Permanently delete",{comment:"BUTTON",project:"content-manager"})},t.teamFolderModalsMsgStrings={renameTeamFolder:n._("The name will be changed for everyone on your team. If a member already has another folder with the same name, their folder will be automatically renamed to avoid a conflict.",{project:"content-manager"}),archiveTeamFolder:n._("This will unshare <strong>%(folder_name)s</strong> with everyone. After the folder has been archived, you can choose to restore it or permanently delete it.",{project:"content-manager"}),addGroupsToTeamFolder:n._("<strong>%(folder_name)s</strong> team folder has been restored but no groups have access to it. Would you like to add groups now?",{project:"content-manager"}),permanentlyDeleteTeamFolder:n._("Are you sure you want to permanently delete the <strong>%(folder_name)s</strong> team folder? This can’t be undone.",{project:"content-manager"}),dataMigrationToolDownload:n._("The Dropbox Migration Assistant is an early access feature that makes it easy to migrate content to your %(trademark_business)s account from external drives, network shares, and local file servers.",{project:"content-manager"}).format({trademark_business:a.TRADEMARK_BUSINESS})},t.teamFolderModalsMiscStrings={cancel:n._("Cancel",{comment:"BUTTON",project:"content-manager"}),notNow:n._("Not now",{comment:"BUTTON",project:"content-manager"}),createTeamFolderLabel:n._("Team folder name",{comment:"label for input field",project:"content-manager"}),createFolderLabel:n._("Folder name",{comment:"label for input field",project:"content-manager"}),syncSettingCreateLabel:n._("Starts as unsynced",{comment:"form label for a checkbox in a modal",project:"content-manager"}),close:n._("Close",{comment:"BUTTON",project:"content-manager"}),syncSettingCreateTooltip:n._("Unsynced folders don’t start out on members’ computers",{comment:"A tooltip in a modal",project:"content-manager"})},t.teamFolderModalsAdditionalString={archiveTeamFolder:n._("Archiving usually takes a few minutes, but it could take up to a few hours if it’s shared with many people. Archiving can’t be canceled once started.",{project:"content-manager"}),dataMigrationToolDownload:n._("Learn more with our deployment guide.",{project:"content-manager"})},(function(e){e.ARCHIVE_TEAM_FOLDER="archiveTeamFolder",e.BROWSE="browse",e.COPY="copy",e.CREATE_TEAM_FOLDER="createTeamFolder",e.CREATE_FOLDER="createFolder",e.DELETE="delete",e.DOWNLOAD="download",e.MOVE="move",e.PERMANENT_DELETE="permanentDeleteFile",e.PERMANENT_DELETE_TEAM_FOLDER="permanentDeleteTeamFolder",e.RENAME="rename",e.RENAME_TEAM_FOLDER="reanameTeamFolder",e.RESTORE="restore",e.SEARCH="search",e.SEARCH_LEGACY="search_legacy",e.SHARE_FOLDER="shareFolder",e.SHARING="sharing",e.UNARCHIVE_TEAM_FOLDER="unarchiveTeamFolder",e.UPDATE_SYNC_SETTING="updateSyncSetting",e.UPLOAD="upload",e.VIEW_ACTIVITY="viewActivity",e.VIEW_VERSION_HISTORY="viewVersionHistory"})(t.ContentManagerLogActionType||(t.ContentManagerLogActionType={}))})),define("modules/clean/teams/content_manager_modern/content_manager_api",["require","exports","tslib","modules/clean/ajax","external/lodash","modules/clean/teams/admin/api/admin_console_api_client"],(function(e,t,n,a,o,r){"use strict";function s(e){try{return JSON.parse(e)}catch(e){if(!(e instanceof SyntaxError))throw e}return null}Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),o=n.__importStar(o),r=n.__importDefault(r);t.browse=function(e){var t=e.sortLabel,n=e.sortIsAscending,o=e.path,r=e.userId,i=e.onSuccess,l=e.includeDeletedFiles,c=e.sortFoldersFirst,d=e.onError,u=null===e.nsId?-1:e.nsId;return a.WebRequest({data:{admin_console:!0,include_file_info:!0,ns_id:u,path2:o,show_deleted:l,sort_folders_first:c,sort_is_ascending:n,sort_label:t},url:"/browse",subject_user:r,success:function(e,t,n){var a=s(e);a?i({path:o,data:a,xhr:n}):d(n,t,"Couldn't parse Json")},error:function(e,t,n){d(e,t,n)}})},t.getChangesForDirectory=function(e){var t=e.path,n=e.userId,r=e.namespaceToJournalIdMap,i=e.onSuccess,l=e.includeDeletedFiles,c={fq_dir:"/"===t?"":t,ns_map:o.map(r,(function(e,t){return t+"_"+e})).join(","),show_deleted:!!l,admin_console:!0};return a.WebRequest({url:"/update/list_dir",subject_user:n,data:c,dataType:"text",success:function(e){var t=s(e);t&&i(t)}})},t.validateFolderPath=function(e){var t=e.nsId,n=e.nsPath,a=e.actions,o=e.listMembersArg;return new r.default(!0).validateFolderPath(t,n,a,o)}})),define("modules/clean/teams/content_manager_modern/content_manager_modern",["require","exports","tslib","react","react-redux","modules/clean/teams/content_manager_modern/data/store","modules/clean/teams/content_manager_modern/data/action_creators/action_creators","modules/clean/teams/content_manager_modern/data/action_creators/search_action_creators","modules/clean/teams/content_manager_modern/data/selectors/selectors","modules/clean/teams/content_manager_modern/data/selectors/search_selectors","modules/clean/teams/content_manager_modern/view/content_manager_controller","modules/clean/teams/content_manager_modern/data/selectors/sort_selector","modules/clean/teams/content_manager_modern/data/selectors/contextual_actions_selectors","modules/clean/teams/content_manager_modern/data/action_creators/browse_action_creators","modules/clean/teams/content_manager_modern/data/action_creators/load_folder_action_creators","modules/clean/teams/content_manager_modern/data/selectors/create_folder_selectors","modules/clean/teams/content_manager_modern/data/action_creators/create_folder_action_creators","modules/clean/teams/content_manager_modern/data/action_creators/file_operations_action_creators","modules/clean/teams/content_manager_modern/data/constants","modules/clean/teams/content_manager_modern/data/action_creators/log_action_creator","modules/clean/teams/content_manager_modern/data/action_creators/fsw_action_creators","modules/clean/teams/content_manager_modern/data/action_creators/change_sync_setting_action_creators","modules/clean/teams/content_manager_modern/data/action_creators/bolt_action_creators","modules/clean/teams/content_manager_modern/data/action_creators/team_folder_action_creators"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_,m,g,p,f,h,E,T,S,C,A,F){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a);var y=r.getStoreForContentManager(),M=o.connect((function(e){return{absolutePath:l.getAbsolutePath(e),actions:_.getContextualActions(e),activeTab:l.getActiveTab(e),activeTeamName:l.getActiveTeamName(e),basePrefix:l.getBasePrefix(e),homePrefix:l.getHomePrefix(e),context:l.getContext(e),createFolderClickedArgs:p.getCreateFolderClickedArgs(e),currentNsId:l.getCurrentNsId(e),dataMigrationToolInfo:l.getDataMigrationToolInfo(e),debugInfo:l.getDebugInfo(e),folderCreationState:p.getFolderCreationState(e),files:u.getSortedFiles(e),fileCounts:l.getFileCounts(e),folderSizes:l.getFolderSizes(e),syncSettings:l.getSyncSettings(e),folderLoadingState:l.getLoadingState(e),getAbsolutePathForPath:l.getAbsolutePathForPath(e),getUriForFqPath:l.getUriForFqPath(e),isContentManagerCdm:l.isContentManagerCdm(e),isInCMTSDRoot:l.isTsdPlus1(e),isInsideArchivedTeamFolder:l.isInsideArchiveFolder(e),isInTeamFoldersList:l.isInTeamFoldersList(e),isLockedTeam:l.isLockedTeam(e),isSignInAsEnabled:l.isSignInAsEnabled(e),isFileLockingTabEnabled:l.isFileLockingTabEnabled(e),isShowTeamOwnedSharedFoldersEnabled:l.isShowTeamOwnedSharedFoldersEnabled(e),isTsdReadWriteForEveryone:l.isTsdReadWriteForEveryone(e),memberCountByFilePath:l.getMemberCountByFilePath(e),path:l.getPath(e),treeViewRootName:l.getTreeViewRootName(e),uploadPath:l.getUploadPath(e),shareModalPrefill:l.getShareModalPrefill(e),shouldShowDeletedFiles:l.shouldShowDeletedFiles(e),selectedFiles:l.getSelectedFilesNamesMap(e),numberSelectedFiles:l.getNumberSelectedFiles(e),numberSelectedSharedFolders:l.getNumberSelectedSharedFolders(e),numberSelectedTeamFolders:l.getNumberSelectedTeamFolders(e),selection:l.getSelection(e),fileSharingInfoMap:l.getFileSharingInfoMap(e),sort:l.getSort(e),columnsTypes:l.getColumnsTypes(e),user:l.getUser(e),rootNsId:l.getRootNsId(e),searchQuery:c.getSearchQuery(e),searchIsLoadingFirstResults:c.getSearchIsLoadingFirstResults(e),searchNormalizedQuery:c.getSearchNormalizedQuery(e),searchResults:c.getSearchResults(e),searchResultsHasMore:c.getSearchResultsHasMore(e),searchResultsHighlightedIndex:c.getSearchResultsHighlightedIndex(e),fileRename:l.getFileRename(e),singleFileActions:_.getFilesActionsForSingleSelectedFile(e),fswDetails:l.getFSWDetails(e),mountPointMap:l.getMountPointMap(e),getIsFileJumping:function(){return l.getIsFileJumping(e)},teamFolderActionDetails:l.getTeamFolderActionDetails(e),teamGroupInfo:l.getTeamGroupInfo(e),isUploadDownloadEnabled:l.isUploadDownloadEnabled(e),experiments:l.getExperiments(e)}}),(function(e){return{browseToFolder:function(t){var n=t.folderPath;return e(m.browseToFolder({folderPath:n}))},browseToFolderAbsolutePath:function(t){var n=t.folderAbsolutePath;return e(m.browseToFolderAbsolutePath({folderAbsolutePath:n}))},onChangeUploadPath:function(t){return e(s.onChangeUploadPath(t))},onSelectionChange:function(t){return e(s.onChangeSelection(t))},onSortChange:function(t,n){return e(s.onChangeSort(t,n))},hideDeletedFiles:function(){return e(s.hideDeletedFiles())},showDeletedFiles:function(){return e(s.showDeletedFiles())},onChangeSyncSetting:function(t){return e(C.onChangeSyncSetting(t))},onCreateFolder:function(t){return e(f.onCreateFolder(t))},onCreateFolderCanceled:function(){return e(f.onCreateFolderCanceled())},onCreateFolderClicked:function(){return e(f.onCreateFolderClicked())},onCreateFolderCompleted:function(){return e(f.onCreateFolderCompleted())},onManageSharingCompleted:function(t){return e(h.onManageSharingCompleted(t))},onLogActionRequest:function(t){return e(T.onLogActionRequest(t))},onSearch:function(t){var n=t.searchQuery,a=t.searchStartIndex;return e(i.onSearch({searchQuery:n,searchStartIndex:a}))},onSetActiveTab:function(t){return e(m.onChangeActiveTab(t))},onSearchMore:function(){return e(i.onSearchMore())},onSearchResultFileClicked:function(t){return e(i.onSearchResultFileClicked(t))},onSearchResultPathClicked:function(t){return e(i.onSearchResultPathClicked(t))},onSearchClear:function(){return e(i.onSearchClear())},onSearchResultHighlight:function(t){var n=t.searchResultsHighlightedIndex;return e(i.onSearchResultHighlight({searchResultsHighlightedIndex:n}))},onSearchResultHighlightNext:function(){return e(i.onSearchResultHighlightNext())},onSearchResultHighlightPrevious:function(){return e(i.onSearchResultHighlightPrevious())},onLoadFolder:function(){return e(g.onLoadFolder())},onRenameRequest:function(t){return e(h.onRenameRequest(t))},onRenameSuccess:function(){return e(h.onRenameSuccess())},onRenameError:function(){return e(h.onRenameError())},onRenameCancel:function(){return e(h.onRenameCancel())},onRenameSubmit:function(t){var n=t.file,a=t.newName;return e(h.onRenameSubmit({file:n,newName:a}))},onFswAccept:function(){return e(S.onFswAccept())},onFswReject:function(){return e(S.onFswReject())},onMoveSubmit:function(t){var n=t.files,a=t.newPath,o=t.checkFSWs;return e(h.onMoveOrCopySubmit({action:E.FswActionType.MOVE,files:n,newPath:a,checkFSWs:o}))},onCopySubmit:function(t){var n=t.files,a=t.newPath,o=t.checkFSWs;return e(h.onMoveOrCopySubmit({action:E.FswActionType.COPY,files:n,newPath:a,checkFSWs:o}))},onColumnsChange:function(t){return e(s.onColumnsChange(t))},onVersionHistoryClicked:function(t){return e(h.onVersionHistoryClicked(t))},onViewActivityClicked:function(t){return e(h.onViewActivityClicked(t))},onDisplayedPrefillModal:function(){return e(s.onDisplayedPrefillModal())},onDownloadFilesClicked:function(t){return e(h.onDownloadFilesClicked(t))},onDeleteSubmit:function(t){return e(h.onDeleteSubmit(t))},onPermanentDeleteSubmit:function(t){return e(h.onPermanentDeleteSubmit(t))},onRestoreSubmit:function(t){return e(h.onRestoreSubmit(t))},onRefreshFolder:function(){return e(A.onRefreshFolder())},onNavigateToParentFolder:function(){return e(m.onNavigateToParentFolder())},onAddFileJumpKeyCode:function(t){return e(s.onAddFileJumpKeyCode(t))},onResetFileJump:function(){return e(s.onResetFileJump())},onArchiveTeamFolderClicked:function(t){return e(F.onArchiveTeamFolderClicked(t))},onArchiveTeamFolderAccept:function(t){return e(F.onArchiveTeamFolder(t))},onArchiveTeamFolderClose:function(){return e(F.onArchiveTeamFolderClose())},onPermanentlyDeleteTeamFolderAccept:function(t){return e(F.onPermanentlyDeleteTeamFolder(t))},onPermanentlyDeleteTeamFolderClicked:function(t){return e(F.onPermanentlyDeleteTeamFolderClicked(t))},onPermanentlyDeleteTeamFolderClose:function(){return e(F.onPermanentlyDeleteTeamFolderClose())},onUnarchiveTeamFolderClicked:function(t){return e(F.onUnarchiveTeamFolder(t))},onAddGroupsClose:function(){return e(F.onAddGroupsClose())},onCreateTeamFolder:function(t){return e(F.onCreateTeamFolder(t))},onCreateTeamFolderClicked:function(){return e(F.onCreateTeamFolderClicked())},onCreateTeamFolderClose:function(){return e(F.onCreateTeamFolderClose())},onRenameTeamFolder:function(t){return e(F.onRenameTeamFolder(t))},onRenameTeamFolderClicked:function(t){return e(F.onRenameTeamFolderClicked(t))},onRenameTeamFolderClose:function(){return e(F.onRenameTeamFolderClose())},onDataMigrationToolClicked:function(){return e(F.onDataMigrationToolClicked())},onDataMigrationToolClose:function(){return e(F.onDataMigrationToolClose())}}}))(d.ContentManagerController),N=(function(e){function t(t){var n=e.call(this,t)||this;return y.dispatch(s.initContentManager(n.props)),n}return n.__extends(t,e),t.prototype.componentWillUnmount=function(){y.dispatch(s.terminateContentManager())},t.prototype.render=function(){return a.default.createElement(o.Provider,{store:y},a.default.createElement(M,null))},t})(a.default.Component);t.ContentManagerModern=N})),define("modules/clean/teams/content_manager_modern/data/action_creators/action_creators",["require","exports","tslib","modules/core/browser","modules/core/browser_detection","modules/clean/teams/content_manager_modern/data/types","modules/clean/react/files_view/types","modules/clean/teams/content_manager_modern/data/action_creators/load_folder_action_creators","modules/clean/react/selection","modules/clean/teams/content_manager_modern/data/selectors/selectors","modules/clean/teams/content_manager_modern/constants","modules/clean/teams/content_manager_modern/data/action_creators/bolt_action_creators","modules/clean/storage","modules/clean/teams/content_manager_modern/data/reducers/default_content_manager_state","external/lodash","modules/clean/teams/content_manager_modern/data/action_creators/browse_action_creators","modules/core/exception_tag_registry","modules/clean/teams/content_manager_modern/data/selectors/sort_selector","modules/clean/filepath"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_,m,g,p,f,h,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),o=n.__importStar(o),g=n.__importStar(g),t._isMacintosh=function(){return o.mac},t._isMemberTabUrl=function(e){if("/"===e&&"member"===a.get_hash())return!0;return!1};t._isLockedFileTabUrl=function(e){if("/"===e&&"locked"===a.get_hash())return!0;return!1},t._getColumnsTypes=function(e,t,a){a&&(m.defaultContentManagerState.columnsTypes=[s.SortField.FILENAME,s.SortField.CATEGORY,s.SortField.SHARED_WITH,s.SortField.MODIFIED,s.SortField.EXTENSION,s.SortField.SIZE,s.SortField.FILE_COUNTS]);var o=(_.UserLocalStorage.get(e,d.CONTENT_MANAGER_COLUMNS_KEY)||{}).columnsTypes,r=void 0===o?m.defaultContentManagerState.columnsTypes:o;g.difference(m.defaultContentManagerState.columnsTypes,r).length>0&&(r=m.defaultContentManagerState.columnsTypes);var i,l;return i=t,l=s.SortField.SYNC_SETTING,i&&!r.includes(l)?r=n.__spreadArrays(r,[l]):!i&&r.includes(l)&&r.splice(r.indexOf(l),1),r},t.initContentManager=function(e){return function(a,o){return n.__awaiter(void 0,void 0,void 0,(function(){var o,r,c,g,h,E,T;return n.__generator(this,(function(S){switch(S.label){case 0:return f.register_tag("content_manager_modern"),e.contentManagerCdm?f.register_tag("content_manager_cdm"):f.register_tag("content_manager_gg"),e.teamEnabledCmFeatures.is_show_team_owned_shared_folders_enabled&&(m.defaultContentManagerState.sortField=s.SortField.CATEGORY,m.defaultContentManagerState.sortDirection=s.SortDirection.DESCENDING),o=_.UserLocalStorage.get(e.userId,d.CONTENT_MANAGER_SORT_KEY)||{},r=o.sortField,c=void 0===r?m.defaultContentManagerState.sortField:r,g=o.sortDirection,h=void 0===g?m.defaultContentManagerState.sortDirection:g,E=t._getColumnsTypes(e.userId,e.teamEnabledFileops.is_cm_sel_sync_enabled,e.teamEnabledCmFeatures.is_show_team_owned_shared_folders_enabled),t._isMemberTabUrl(e.initFqPath)?T=d.ContentManagerTab.MEMBERS:t._isLockedFileTabUrl(e.initFqPath)?T=d.ContentManagerTab.LOCKED_FILES:(C=e.contentManagerCdm,A=e.initTeamFolderId,T=C||null!==A?d.ContentManagerTab.FILES:d.ContentManagerTab.ACTIVE_TEAM_FOLDERS),a(t.initStore(n.__assign(n.__assign({},e),{isMacintosh:t._isMacintosh(),activeTab:T,sortDirection:h,sortField:c,columnsTypes:E}))),a(u.initializeBolt(e.boltData)),e.teamEnabledCmFeatures.is_show_team_owned_shared_folders_enabled?(a(i.onLoadFolder()),"/"===e.initFqPath&&null==e.initTeamFolderId?[3,2]:[4,a(i.getTeamNamespaces())]):[3,3];case 1:S.sent(),S.label=2;case 2:return[3,7];case 3:return e.contentManagerCdm?(a(i.onLoadFolder()),[3,7]):[3,4];case 4:return null!==e.initTeamFolderId?[3,5]:(a(p.browseTeamFolders()),[3,7]);case 5:return[4,a(p.getTeamFolders())];case 6:S.sent(),a(i.onLoadFolder()),S.label=7;case 7:return a(t.onChangeSelection(l.createSelection(e.selectFqPaths))),[2]}var C,A}))}))}},t.terminateContentManager=function(){return function(e,t){e(u.stopBoltLiveUpdates()),f.unregister_tag("content_manager_modern"),f.unregister_tag("content_manager_cdm"),f.unregister_tag("content_manager_gg")}},t.initStore=function(e){return{type:r.ContentManagerActionTypes.INIT_STORE,payload:e}},t.onChangeShouldShowDeletedFiles=function(e){return{type:r.ContentManagerActionTypes.ON_CHANGE_SHOULD_SHOW_DELETED_FILES,payload:{shouldShowDeletedFiles:e}}},t.showDeletedFiles=function(){return function(e,n){e(t.onChangeShouldShowDeletedFiles("show")),e(i.onLoadFolder())}},t.hideDeletedFiles=function(){return function(e,n){e(t.onChangeShouldShowDeletedFiles("hide")),e(i.onLoadFolder())}},t.onChangeSort=function(e,n){return function(a,o){a(t.onNewSortSelected({sortField:e,sortDirection:n})),_.UserLocalStorage.set(c.getUserId(o()),d.CONTENT_MANAGER_SORT_KEY,{sortField:e,sortDirection:n}),c.getLoadingState(o())!==s.LoadingState.LOADED&&a(i.onLoadFolder())}},t.onNewSortSelected=function(e){return{type:r.ContentManagerActionTypes.ON_NEW_SORT_SELECTED,payload:{newSort:e}}},t.onChangeSelection=function(e){return{type:r.ContentManagerActionTypes.ON_CHANGE_SELECTION,payload:{selection:e}}},t.onChangeUploadPath=function(e){return{type:r.ContentManagerActionTypes.ON_CHANGE_UPLOAD_PATH,payload:{uploadPath:e}}},t.onDisplayedPrefillModal=function(){return{type:r.ContentManagerActionTypes.ON_DISPLAYED_PREFILL_MODAL}},t.onColumnsChange=function(e){return function(t,n){t({type:r.ContentManagerActionTypes.ON_CHANGE_COLUMNS,payload:{columnsTypes:e.map((function(e){return e.sortField}))}}),_.UserLocalStorage.set(c.getUserId(n()),d.CONTENT_MANAGER_COLUMNS_KEY,{columnsTypes:e.map((function(e){return e.sortField}))})}},t.onAddFileJumpKeyCode=function(e){return function(n,a){n({type:r.ContentManagerActionTypes.FILE_JUMP_KEY_PRESSED,payload:{keyChar:e}});var o=h.getSortSelector({sortField:s.SortField.FILENAME,sortDirection:s.SortDirection.ASCENDING})(a()).find((function(e){return E.filename(e.fq_path).toLowerCase()>=c.getFileJumpKeys(a())}));o&&n(t.onChangeSelection(l.createSelection([o.fq_path])))}},t.onResetFileJump=function(){return{type:r.ContentManagerActionTypes.FILE_JUMP_KEYS_CLEARED}},t.resetState=function(){return{type:r.ContentManagerActionTypes.RESET_STATE}}})),define("modules/clean/teams/content_manager_modern/data/action_creators/bolt_action_creators",["require","exports","tslib","modules/clean/teams/content_manager_modern/data/bolt/content_manager_bolt_client","modules/clean/teams/content_manager_modern/data/selectors/selectors","modules/clean/teams/content_manager_modern/content_manager_api","modules/clean/teams/content_manager_modern/data/action_creators/browse_action_creators","modules/clean/filepath","external/lodash","modules/core/i18n","modules/clean/teams/content_manager_modern/data/utils/notifications_utils","modules/clean/teams/content_manager_modern/data/types","modules/clean/teams/content_manager_modern/data/action_creators/load_folder_metadata_action_creator"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_){"use strict";var m,g;Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importStar(i),l=n.__importStar(l),t.onRefreshFolder=function(){return function(e,n){return new Promise((function(a){g&&g.abort();var s=o.getAbsolutePath(n());g=r.getChangesForDirectory({path:s,userId:o.getUserId(n()),namespaceToJournalIdMap:m.getNsMap(),includeDeletedFiles:o.shouldShowDeletedFiles(n()),onSuccess:function(n){e(t.applyBrowseUpdates(n,s)),m.handleUpdateBoltClient(n.bolt_data),g=null,a()}})}))}},t.initializeBolt=function(e){return function(n,o){return(m=new a.ContentManagerBoltClient).setInitialBoltData(e),m.startLiveUpdate((function(){return n(t.onRefreshFolder())})),m}},t.applyBrowseUpdates=function(e,n){return function(a,r){if(i.paths_are_equal(o.getAbsolutePath(r()),n)){var l=e.parent_changes;if(l&&null!==l.change_to_fq_path)return a(t.showNotificationMessage(l)),void a(s.browseToFolderAbsolutePath({folderAbsolutePath:l.change_to_fq_path}));a(t.onBoltUpdate(e)),a(_.loadFolderMetadata())}}},t.stopBoltLiveUpdates=function(){return function(e,t){if(m)return m.stopLiveUpdate()}},t.showNotificationMessage=function(e){return function(t,n){var a=e.old_fq_path,o=e.new_fq_path,r=e.is_changing_view,u=e.change_type,_=function(e){return l.escape(i.filename(e))};if("moved"===u&&o){var m=c._("The folder ‘%(folder_name)s’ has been moved",{project:"content-manager"}).format({folder_name:_(a)});r?d.showSnackbarWithAction(m,"fail",c._("View",{project:"content-manager"}),(function(){t(s.browseToFolderAbsolutePath({folderAbsolutePath:o}))})):d.showCompleteSnackbar(m)}else if("renamed"===u&&o){m=c._("The folder ‘%(old_name)s’ has been renamed to ‘%(new_name)s’",{project:"content-manager"}).format({old_name:_(a),new_name:_(o)});r?d.showSnackbarWithAction(m,"fail",c._("View",{project:"content-manager"}),(function(){t(s.browseToFolderAbsolutePath({folderAbsolutePath:o}))})):d.showCompleteSnackbar(m)}else if("deleted"===u){m=c._("The folder ‘%(folder_name)s’ has been deleted",{project:"content-manager"}).format({folder_name:_(a)});d.showFailSnackbar(m)}}},t.onBoltUpdate=function(e){return{type:u.ContentManagerActionTypes.ON_BOLT_UPDATE,payload:e}}})),define("modules/clean/teams/content_manager_modern/data/action_creators/browse_action_creators",["require","exports","tslib","modules/core/exception","modules/clean/teams/content_manager_modern/data/selectors/selectors","modules/clean/teams/content_manager_modern/data/action_creators/load_folder_action_creators","modules/clean/teams/content_manager_modern/data/types","modules/clean/teams/admin/api/admin_console_api_client","modules/clean/teams/content_manager_modern/data/action_creators/load_folder_metadata_action_creator","modules/clean/teams/content_manager_modern/constants","modules/core/i18n","modules/clean/teams/content_manager_modern/data/utils/notifications_utils","modules/clean/teams/content_manager_modern/path_util","modules/clean/filepath","modules/clean/teams/content_manager_modern/util"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_,m,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i);var p=function(e){return{type:s.ContentManagerActionTypes.ON_CHANGE_TEAM_FOLDER,payload:{teamFolderName:e}}};t.onChangeActiveTab=function(e){return{type:s.ContentManagerActionTypes.ON_CHANGE_ACTIVE_TAB,payload:{tab:e}}},t.browseToFolder=function(e){var n=e.folderPath;return function(e,s){if(a.assert(n!==o.getPath(s())||"/"===n&&null!==o.getCurrentTeamFolderName(s()),"new path should be different"),o.isInTeamFoldersList(s())){var i=n.split("/")[1];e(p(i)),e(t.onChangeActiveTab(c.ContentManagerTab.FILES)),e(r.onChangeCurrentFolder({folderPath:"/"}))}else e(r.onChangeCurrentFolder({folderPath:n}));return e(r.onLoadFolder())}};var f=function(e,t,a){var o=new i.default(!0);return e?o.teamFoldersListContinue(a).then((function(e){return f(e.has_more,n.__spreadArrays(t,e.team_folders),e.cursor)})):Promise.resolve(t)};t.getTeamFolders=function(){return function(e,t){var n=new i.default(!0),a=o.getIcons(t());return n.teamFoldersList().then((function(t){var n={},o=t.team_folders,r=t.cursor,i=t.has_more;return f(i,o,r).then((function(t){var o;t.map((function(e){return n[e.name]=g.teamFolderEntryToFileLikeObject(e,a)})),e((o=n,{type:s.ContentManagerActionTypes.ON_TEAM_FOLDERS_RECEIVED,payload:{teamFoldersData:o}}))}))})).catch((function(e){u.showFailSnackbar(d._("There was a problem completing this request.",{project:"content-manager"}))}))}},t.browseTeamFolders=function(){return function(e,a){return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return e({type:s.ContentManagerActionTypes.STARTED_LOADING_TEAM_FOLDERS}),[4,e(t.getTeamFolders())];case 1:return n.sent(),e({type:s.ContentManagerActionTypes.FINISHED_LOADING_TEAM_FOLDERS}),[2,e(l.loadFolderMetadata())]}}))}))}},t.browseToFolderAbsolutePath=function(e){var n=e.folderAbsolutePath;return function(e,s){if(a.assert(n!==o.getAbsolutePath(s()),"new path should be different"),o.isContentManagerCdm(s()))return e(t.browseToFolder({folderPath:n}));var i=_.getTeamFolder(n),l=_.getRelativePath(n);return""===i?(e(t.onChangeActiveTab(c.ContentManagerTab.ACTIVE_TEAM_FOLDERS)),o.isShowTeamOwnedSharedFoldersEnabled(s())?r.loadTeamNamespaces(e,s).then((function(){})):e(t.browseTeamFolders())):i===o.getCurrentTeamFolderName(s())?e(t.browseToFolder({folderPath:l})):Object.keys(o.getTeamFoldersData(s())).includes(i)?(e(p(i)),e(t.onChangeActiveTab(c.ContentManagerTab.FILES)),e(t.browseToFolder({folderPath:l}))):(g.logWarning(!0,"Trying to browse to path under non-existing team folder"),e(t.onChangeActiveTab(c.ContentManagerTab.ACTIVE_TEAM_FOLDERS)),o.isShowTeamOwnedSharedFoldersEnabled(s())?r.loadTeamNamespaces(e,s).then((function(){})):e(t.browseTeamFolders()))}},t.onNavigateToParentFolder=function(){return function(e,n){var a=m.parent_dir(o.getAbsolutePath(n()));e(t.browseToFolderAbsolutePath({folderAbsolutePath:a}))}}})),define("modules/clean/teams/content_manager_modern/data/action_creators/change_sync_setting_action_creators",["require","exports","tslib","modules/clean/teams/admin/api/admin_console_api_client","modules/clean/teams/content_manager_modern/data/utils/notifications_utils","modules/clean/teams/content_manager_modern/sync_settings_i18n_util","modules/clean/teams/content_manager_modern/data/selectors/selectors","modules/clean/teams/content_manager_modern/sync_settings_utils","modules/core/exception","modules/clean/teams/content_manager_modern/constants","modules/clean/teams/content_manager_modern/data/action_creators/log_action_creator","modules/clean/teams/content_manager_modern/data/action_creators/fsw_show_request_action_creators","modules/clean/teams/content_manager_modern/data/constants","modules/clean/filepath","modules/clean/teams/content_manager_modern/data/action_creators/load_folder_metadata_action_creator"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_,m,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),m=n.__importStar(m),t.onChangeSyncSetting=function(e){var t=e.files,n=e.shouldSync,p=e.confirmSyncSettingAccepted;return function(e,f){var h,E=new a.AdminConsoleApiClient(!0),T=s.getSyncSetting(f()),S=s.isInTeamFoldersList(f());S?(l.assert(1===t.length,"Changing the sync setting of multiple team folders is not supported "),h=t[0].target_ns):h=s.getRootNsId(f()),l.assert(null!==h,"rootNsId or target_ns should not be null when modifying sync settings"),l.assert(s.isSelSyncEnabled(f()),"received non null value for syncThisFolder while the TSS feature is off"),l.assert(null!=T,"current folder sync settings must be defined when selctive sync is on");var C={teamFolderId:String(h),syncSetting:i.calculateSyncSetting({syncThisFolder:n,parentSyncSetting:T})};S||(C.fileIds=t.map((function(e){return e.file_id})));var A=t.length;if("nosync"===T&&n&&!p){var F=void 0;1===A&&(F=m.filename(t[0].fq_path));var y=s.getActiveTeamName(f()),M=m.filename(s.getPath(f()));e(u.onFswShowRequest({cmFswDetails:{action:_.FswActionType.CHANGE_SYNC_SETTING,payload:{folderName:F,numberOfFolders:A,teamName:y,parentFolderName:M,files:t}}}))}else o.showSyncSnackbar(r.getUpdateSyncSettingsProgressMessage(t)),E.teamFolderUpdateSyncSetting(C).then((function(){e(d.onLogActionRequest({cmLogActionType:c.ContentManagerLogActionType.UPDATE_SYNC_SETTING,nsId:h})),o.showCompleteSnackbar(r.getUpdateSyncSettingsSuccessMessage({files:t,shouldSync:n})),e(g.loadFolderMetadata())})).catch((function(){o.showFailSnackbar(r.getUpdateSyncSettingsFailureMessage(t))}))}}})),define("modules/clean/teams/content_manager_modern/data/action_creators/create_folder_action_creators",["require","exports","tslib","modules/clean/sharing/access_level","modules/clean/teams/admin/api/admin_console_api_client","modules/clean/teams/content_manager_modern/data/selectors/selectors","modules/clean/teams/content_manager_modern/data/utils/file_operations_utils","modules/clean/teams/content_manager_modern/path_util","modules/clean/sharing/api/client","modules/clean/teams/content_manager_modern/data/selectors/create_folder_selectors","modules/core/exception","modules/clean/api_v2/error","modules/core/i18n","modules/clean/web_user_action_logger","modules/clean/web_user_action_events","modules/clean/teams/content_manager_modern/data/types","modules/clean/teams/content_manager_modern/data/utils/notifications_utils","external/lodash","modules/clean/teams/content_manager_modern/data/action_creators/log_action_creator","modules/clean/teams/content_manager_modern/constants","modules/clean/filepath","modules/clean/teams/content_manager_modern/data/constants","modules/clean/teams/content_manager_modern/data/action_creators/fsw_show_request_action_creators","modules/clean/teams/content_manager_modern/sync_settings_utils","modules/clean/teams/content_manager_modern/data/action_creators/bolt_action_creators"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_,m,g,p,f,h,E,T,S,C,A,F,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),h=n.__importStar(h),S=n.__importStar(S),t.onCreateFolderCanceled=function(){return{type:p.ContentManagerActionTypes.ON_CREATE_FOLDER_CANCELED}},t.onCreateFolderClicked=function(){return{type:p.ContentManagerActionTypes.ON_CREATE_FOLDER_CLICKED}},t.onCreateFolderRequestSent=function(){return{type:p.ContentManagerActionTypes.ON_CREATE_FOLDER_REQUEST_SENT}},t.onCreateFolderCompleted=function(){return{type:p.ContentManagerActionTypes.ON_CREATE_FOLDER_COMPLETED}},t.onCreateFolder=function(e){var t=e.autoTeamGroupAccessLevel,n=e.folderName,a=e.syncThisFolder,o=e.confirmSyncSettingAccepted;return function(e,i){var l=c.getShareFolderPathPrefix(i()),u=r.getUserId(i()),_=r.getPathDepth(i()),m=c.getAutoTeamGroupDefaultAccessLevel(i()),g=c.getCdmAutoTeamGroupId(i()),p=r.getSyncSetting(i()),h=r.getCurrentNsId(i()),E=r.getCurrentNsPath(i()),T=r.isContentManagerCdm(i()),S=0===_&&T,C=1===_&&null!==a;null!==a&&d.assert(r.isSelSyncEnabled(i()),"received non null value for syncThisFolder while the TSS feature is off"),d.assert(null!==h,"currentNsId must not be null"),d.assert(null!==E,"currentNsPath must not be null"),r.isSelSyncEnabled(i())&&d.assert(null!=p,"current folder sync settings must be defined when selctive sync is on");var A=s.validateFolderName(n);A?f.showFailSnackbar(A):(f.showSyncSnackbar("Creating folder…"),S?(d.assert(void 0!==t,"must provide autoTeamGroupAccessLevel for new TSD+1"),I({cdmAutoTeamGroupId:g,folderName:n,autoTeamGroupDefaultAccessLevel:m,autoTeamGroupAccessLevel:t,syncThisFolder:a,userId:u,currentFolderSyncSetting:p,dispatch:e,currentFolderFqPath:l})):C?D({currentFolderSyncSetting:p,currentFolderFqPath:l,currentNsId:h,currentNsPath:E,dispatch:e,getState:i,folderName:n,syncThisFolder:a,userId:u,confirmSyncSettingAccepted:o}):O({currentNsId:h,currentNsPath:E,folderName:n,dispatch:e}))}};var M=_._("The folder name is invalid.",{project:"content-manager"}),N=_._("A folder with the same name exists.",{project:"content-manager"}),R=_._("There was a problem completing this request.",{project:"content-manager"}),v=_._("You don’t have permission to perform this action.",{project:"content-manager"}),b=function(e){var n=e.apiError;return(0,e.dispatch)(t.onCreateFolderCanceled()),n instanceof u.AppError&&n.error&&"bad_path"===n.error[".tag"]?f.showFailSnackbar(N):n instanceof u.AppError&&n.error&&"no_permission"===n.error[".tag"]?f.showFailSnackbar(v):f.showFailSnackbar(R),Promise.reject(n)},I=function(e){var t=e.autoTeamGroupAccessLevel,n=e.autoTeamGroupDefaultAccessLevel,a=e.cdmAutoTeamGroupId,o=e.currentFolderFqPath,r=e.currentFolderSyncSetting,s=e.dispatch,i=e.folderName,c=e.syncThisFolder,d=e.userId,_=k({autoTeamGroupDefaultAccessLevel:n,autoTeamGroupAccessLevel:t}),p=new l.FolderShareApiClient({userId:d,isNonUserRelativeContext:!0});L({confidential:_,currentFolderFqPath:o,currentFolderSyncSetting:r,dispatch:s,folderName:i,syncThisFolder:c,userId:d}).then((function(e){var o=e.shared_folder_id;return _&&m.WebUserActionLog.log(d,g.WebUserActionLogEvent.CONF_BY_CREATE_CONFIDENTIAL_FOLDER,{ns_id:o,who_has_access:g.WebUserActionLogExtraValue.EVERYONE_GROUP_VIEW_ACCESS,location:g.WebUserActionLogExtraValue.CONTENT_MANAGER}),n!==t?_?p.addMembers({contentId:o,members:[{".tag":"dropbox_id",dropbox_id:a}],accessLevel:t}).then((function(){return w({dispatch:s,folderName:i,isSharedFolder:!0,nsId:e.shared_folder_id})})).catch(u.catchApiError((function(e){return b({apiError:e,dispatch:s})}))):p.updateMember({contentId:o,memberId:a,accessLevel:t}).then((function(){return w({dispatch:s,folderName:i,isSharedFolder:!0,nsId:e.shared_folder_id})})).catch(u.catchApiError((function(e){return b({apiError:e,dispatch:s})}))):w({dispatch:s,folderName:i,isSharedFolder:!0,nsId:e.shared_folder_id})}))},D=function(e){var t=e.currentFolderSyncSetting,n=e.currentFolderFqPath,a=e.currentNsId,o=e.currentNsPath,s=e.dispatch,i=e.folderName,l=e.confirmSyncSettingAccepted,c=e.syncThisFolder,d=e.userId,u=e.getState,_="sync"===t||"sync_partial"===t;if(c===_)O({currentNsId:a,currentNsPath:o,dispatch:s,folderName:i});else if(!_&&c&&!l){var m=r.getActiveTeamName(u()),g=S.filename(r.getAbsolutePath(u()));s(A.onFswShowRequest({cmFswDetails:{action:C.FswActionType.CREATE_FOLDER_SYNC_SETTING,payload:{folderName:i,numberOfFolders:1,teamName:m,parentFolderName:g}}}))}else L({confidential:!1,currentFolderFqPath:n,currentFolderSyncSetting:t,dispatch:s,folderName:i,syncThisFolder:c,userId:d}).then((function(e){return w({dispatch:s,folderName:i,isSharedFolder:!0,nsId:e.shared_folder_id})}))},O=function(e){var n=e.currentNsId,a=e.currentNsPath,r=e.dispatch,s=e.folderName;r(t.onCreateFolderRequestSent()),new o.AdminConsoleApiClient(!0).folderCreate(n,a,s).then((function(){w({dispatch:r,folderName:s,isSharedFolder:!1,nsId:n})})).catch(u.catchApiError((function(e){return(function(e){var n=e.apiError,a=e.dispatch;a(y.onRefreshFolder()),a(t.onCreateFolderCanceled());var o=h.isNull(n.error)||h.isUndefined(n.error)?null:n.error;return null!=o&&"path"===o[".tag"]&&null!=o.path&&"disallowed_name"===o.path[".tag"]?f.showFailSnackbar(M):o&&"path"===o[".tag"]&&null!=o.path&&"conflict"===o.path[".tag"]?f.showFailSnackbar(N):f.showFailSnackbar(R),Promise.reject(n)})({apiError:e,dispatch:r})})))},L=function(e){var n=e.confidential,a=e.currentFolderFqPath,o=e.currentFolderSyncSetting,r=e.dispatch,s=e.folderName,c=e.syncThisFolder,d=e.userId,_=new l.FolderShareApiClient({userId:d,isNonUserRelativeContext:!0}),m=i.joinPathWithFileName({fqPath:a,fileName:s});return r(t.onCreateFolderRequestSent()),_.share({fqPath:m,confidential:n,syncSetting:F.calculateSyncSetting({syncThisFolder:c,parentSyncSetting:o}),should_be_new_path:!0,folderPolicy:null}).catch(u.catchApiError((function(e){return b({apiError:e,dispatch:r})})))},w=function(e){var n=e.dispatch,a=e.folderName,o=e.isSharedFolder,r=e.nsId;n(y.onRefreshFolder()),n(t.onCreateFolderCompleted()),P({folderName:a}),n(o?E.onLogActionRequest({cmLogActionType:T.ContentManagerLogActionType.SHARE_FOLDER,nsId:r}):E.onLogActionRequest({cmLogActionType:T.ContentManagerLogActionType.CREATE_FOLDER,nsId:r}))},P=function(e){var t=e.folderName,n=_._("Created folder %(folder_name)s.",{project:"content-manager"}).format({folder_name:t});f.showCompleteSnackbar(n)},k=function(e){var t=e.autoTeamGroupDefaultAccessLevel,n=e.autoTeamGroupAccessLevel;return t===a.ACCESS_LEVEL.WRITER&&n===a.ACCESS_LEVEL.READER}})),define("modules/clean/teams/content_manager_modern/data/action_creators/file_operations_action_creators",["require","exports","tslib","modules/core/uri","modules/core/browser","modules/clean/teams/content_manager_modern/data/selectors/selectors","modules/core/exception","modules/clean/teams/content_manager_modern/data/types","modules/clean/teams/content_manager_modern/constants","modules/clean/teams/admin/api/admin_console_api_client","modules/core/i18n","modules/clean/teams/content_manager_modern/data/utils/notifications_utils","modules/clean/teams/content_manager_modern/data/utils/file_operations_utils","modules/clean/teams/content_manager_modern/data/action_creators/log_action_creator","modules/clean/teams/content_manager_modern/data/constants","modules/clean/downloads","modules/clean/teams/content_manager_modern/data/action_creators/fsw_show_request_action_creators","modules/clean/teams/content_manager_modern/data/action_creators/bolt_action_creators","modules/clean/teams/content_manager_modern/data/action_creators/load_folder_action_creators","modules/clean/teams/content_manager_modern/data/action_creators/load_folder_metadata_action_creator"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_,m,g,p,f,h,E,T){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),c=n.__importDefault(c),t.onRenameRequest=function(e){return{type:i.ContentManagerActionTypes.ON_RENAME_REQUEST,payload:{file:e}}},t.onRenameSuccess=function(){return{type:i.ContentManagerActionTypes.ON_RENAME_SUCCESS}},t.onRenameError=function(){return{type:i.ContentManagerActionTypes.ON_RENAME_ERROR}},t.onRenameCancel=function(){return{type:i.ContentManagerActionTypes.ON_RENAME_CANCEL}},t.onRenameSubmitSent=function(e){return{type:i.ContentManagerActionTypes.ON_RENAME_SUBMIT_SENT,payload:{file:e}}};var S=function(){return{type:i.ContentManagerActionTypes.ON_FILE_OPERATION_SUCCESS}};t.onRenameSubmit=function(e){var n=e.file,a=e.newName;return function(e,o){var r;if(e(t.onRenameSubmitSent(n)),r=n.is_dir?_.validateFolderName(a):_.validateFileName(a))return e(t.onRenameError()),void u.showFailSnackbar(r);n.is_dir?u.showSyncSnackbar(d._("Renaming folder…",{project:"content-manager"})):u.showSyncSnackbar(d._("Renaming file…",{project:"content-manager"})),new c.default(!0).fileRename(n.ns_id,n.ns_path,a).then((function(){e(S()),e(h.onRefreshFolder()),e(t.onRenameSuccess()),n.is_dir?u.showCompleteSnackbar(d._("Folder renamed.",{project:"content-manager"})):u.showCompleteSnackbar(d._("File renamed.",{project:"content-manager"})),e(m.onLogActionRequest({cmLogActionType:l.ContentManagerLogActionType.RENAME,nsId:n.ns_id}))})).catch((function(){e(h.onRefreshFolder()),e(t.onRenameError()),u.showFailSnackbar(d._("There was a problem completing this request.",{project:"content-manager"}))}))}},t.onVersionHistoryClicked=function(e){return function(t,s){var i={ns_id:e.ns_id.toString(),return_url:o.get_pathname()},c=(function(e,t){var o,r=e.fqPath,s=e.userId,i=n.__assign(n.__assign({},t),((o={undelete:"1"})._subject_uid=s.toString(),o));r=r.replace(/^[/]/,"");return a.URI.parse("/history/"+r).updateQuery(i)})({fqPath:e.ns_path,userId:r.getUserId(s())},i);return t(m.onLogActionRequest({nsId:e.ns_id,cmLogActionType:l.ContentManagerLogActionType.VIEW_VERSION_HISTORY})),o.redirect(c.toString())}},t.onViewActivityClicked=function(e){return function(t,n){var r=e.file_id.substr(3),s=a.URI.parse("/team/admin/activity").updateQuery({is_file_id:"true",file_obj_id:r});return t(m.onLogActionRequest({nsId:e.ns_id,cmLogActionType:l.ContentManagerLogActionType.VIEW_ACTIVITY})),o.redirect(s.toString())}},t.onMoveOrCopySubmit=function(e){var t=e.action,n=e.files,a=e.newPath,o=e.checkFSWs;return function(e,i){var d;s.assert(n.length>0,"Trying to move or copy zero files.");var _=r.getContext(i()).rootNSID.toString(),p=_,E=a;r.isContentManagerCdm(i())||(p=(d=r.getNsIdNsPath(i())(a))[0],E=d[1]);var T=new c.default(!0),C=o?{".tag":"check"}:null,A=function(){e(S()),e(h.onRefreshFolder());var n=t===g.FswActionType.MOVE?l.fileActionTranslations.moveCompleted:l.fileActionTranslations.copyCompleted;u.showCompleteSnackbar(n),e(m.onLogActionRequest({nsId:parseInt(_,10),cmLogActionType:t===g.FswActionType.MOVE?l.ContentManagerLogActionType.MOVE:l.ContentManagerLogActionType.COPY}))},F=function(o){if(e(h.onRefreshFolder()),o.error&&"duplicated_or_nested_paths"===o.error[".tag"]){var r=t===g.FswActionType.MOVE?l.fileActionTranslations.moveNestedPathError:l.fileActionTranslations.copyNestedPathError;u.showFailSnackbar(r)}else if(o.error&&"too_many_files"===o.error[".tag"]){r=t===g.FswActionType.MOVE?l.fileActionTranslations.moveTooManyFilesError:l.fileActionTranslations.copyTooManyFilesError;u.showFailSnackbar(r)}else o.error&&"to"===o.error[".tag"]&&"file_system_warnings"===o.error.to[".tag"]?(u.hideSnackbar(),e(f.onFswShowRequest({cmFswDetails:{action:t,payload:{fsws:o.error.to.details,files:n,newPath:a}}}))):u.showFailSnackbar(l.fileActionTranslations.generalError)},y=t===g.FswActionType.MOVE?l.fileActionTranslations.moveInProgress:l.fileActionTranslations.copyInProgress;return u.showSyncSnackbar(y),t===g.FswActionType.MOVE?T.bulkFileMove(_,p,n,E,C).then((function(){return A()})).catch((function(e){return F(e)})):T.bulkFileCopy(_,p,n,E,C).then((function(){return A()})).catch((function(e){return F(e)}))}},t.onDownloadFilesClicked=function(e){return function(t,n){s.assert(e.length>0,"tried to download zero files.");var a=r.getContext(n());if(s.assert(null!=a.rootNSID,"tried to download without context.rootNSID"),1!==e.length||e[0].is_dir)s.assert(null!=a.blockHash,"tried batch download without context.blockHash"),p.zip_batch_by_ns_id({parent_ns_id:a.rootNSID,parent_ns_path:a.currentFQPath,files:e,subject_uid:r.getUserId(n()),block_hash:a.blockHash});else{var o=e[0],i=o.direct_blockserver_link,c=a.rootNSID,d=o.fq_path;p.get_blockserver_link({url:i,ns_id:c,ns_path:d,inside_admin_console:!0})}t(m.onLogActionRequest({nsId:a.rootNSID,cmLogActionType:l.ContentManagerLogActionType.DOWNLOAD}))}},t.onDeleteSubmit=function(e){return function(t,n){s.assert(e.length>0,"Trying to delete zero files.");var a=new c.default(!0);return _.showDeleteSyncMessage(e),a.bulkFileDelete(e).then((function(n){t(S()),t(h.onRefreshFolder()),_.handleDeleteResult(n)||t(m.onLogActionRequest({nsId:e[0].ns_id,cmLogActionType:l.ContentManagerLogActionType.DELETE}))})).catch((function(e){t(h.onRefreshFolder()),u.showFailSnackbar(d._("There was a problem completing this request.",{project:"content-manager"}))}))}},t.onPermanentDeleteSubmit=function(e){return function(t,n){return u.showSyncSnackbar("Permanently deleting item…"),new c.default(!0).permanentDeleteFile(e.ns_id,e.ns_path).then((function(){u.showCompleteSnackbar(d._("Permanently deleted 1 item.",{project:"content-manager"})),t(S()),t(E.onLoadFolder()),t(m.onLogActionRequest({nsId:e.ns_id,cmLogActionType:l.ContentManagerLogActionType.PERMANENT_DELETE}))})).catch((function(e){return u.showFailSnackbar(d._("There was a problem completing this request.",{project:"content-manager"}))}))}},t.onRestoreSubmit=function(e){return function(t,n){var a,o=new c.default(!0);return e.is_dir?(u.showSyncSnackbar("Restoring folder…"),a=o.restorePaths([e]).then((function(n){return t(S()),t(h.onRefreshFolder()),_.handleRestorePathResult(n,[e])}))):(u.showSyncSnackbar("Restoring file…"),a=o.restoreFile(e.ns_id,e.ns_path,e.latest_rev).then((function(){return t(S()),t(h.onRefreshFolder()),_.onRestoreSuccess([e]),!0}))),a.then((function(n){n&&t(m.onLogActionRequest({nsId:e.ns_id,cmLogActionType:l.ContentManagerLogActionType.RESTORE}))})).catch((function(e){t(h.onRefreshFolder()),u.showFailSnackbar(d._("There was a problem completing this request.",{project:"content-manager"}))}))}},t.onManageSharingCompleted=function(e){return function(t,n){return t(m.onLogActionRequest({nsId:e,cmLogActionType:l.ContentManagerLogActionType.SHARING})),t(T.loadTeamOwnedSharedFolderMetadata()),t(T.loadFolderMetadata())}}})),define("modules/clean/teams/content_manager_modern/data/action_creators/fsw_action_creators",["require","exports","modules/clean/teams/content_manager_modern/data/action_creators/change_sync_setting_action_creators","modules/clean/teams/content_manager_modern/data/types","modules/clean/teams/content_manager_modern/data/selectors/selectors","modules/clean/teams/content_manager_modern/data/constants","modules/clean/teams/content_manager_modern/data/action_creators/file_operations_action_creators","modules/clean/teams/content_manager_modern/data/action_creators/create_folder_action_creators"],(function(e,t,n,a,o,r,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onFswAcceptSent=function(){return{type:a.ContentManagerActionTypes.ON_FSW_ACCEPT_SENT}},t.onFswReject=function(){return{type:a.ContentManagerActionTypes.ON_FSW_REJECT}},t.onFswAccept=function(){return function(e,a){var l=o.getFSWDetails(a());if(e(t.onFswAcceptSent()),l.action===r.FswActionType.MOVE||l.action===r.FswActionType.COPY){var c=l.payload,d=c.files,u=c.newPath;e(s.onMoveOrCopySubmit({action:l.action,files:d,newPath:u,checkFSWs:!1}))}else if(l.action===r.FswActionType.CREATE_FOLDER_SYNC_SETTING){var _=l.payload.folderName,m=!0;e(i.onCreateFolder({confirmSyncSettingAccepted:m,folderName:_,syncThisFolder:!0}))}else if(l.action===r.FswActionType.CHANGE_SYNC_SETTING){d=l.payload.files,m=!0;e(n.onChangeSyncSetting({confirmSyncSettingAccepted:m,shouldSync:!0,files:d}))}}}})),define("modules/clean/teams/content_manager_modern/data/action_creators/fsw_show_request_action_creators",["require","exports","modules/clean/teams/content_manager_modern/data/types"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onFswShowRequest=function(e){var t=e.cmFswDetails;return{type:n.ContentManagerActionTypes.ON_FSW_SHOW_REQUEST,payload:t}}})),define("modules/clean/teams/content_manager_modern/data/action_creators/load_folder_action_creators",["require","exports","tslib","modules/clean/react/browse/models","modules/clean/teams/content_manager_modern/util","modules/clean/teams/content_manager_modern/content_manager_api","modules/clean/pagination_manager","modules/clean/teams/admin/api/admin_console_api_client","modules/clean/teams/content_manager_modern/data/selectors/selectors","modules/clean/teams/content_manager_modern/data/types","modules/clean/teams/content_manager_modern/data/utils/notifications_utils","modules/clean/react/files_view/types","modules/clean/teams/content_manager_modern/data/action_creators/load_folder_metadata_action_creator","modules/clean/teams/content_manager_modern/constants","modules/clean/teams/content_manager_modern/data/action_creators/log_action_creator","modules/core/exception","modules/core/i18n"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_,m,g,p,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i),t.onChangeCurrentFolder=function(e){var t=e.folderPath;return{type:c.ContentManagerActionTypes.ON_CHANGE_CURRENT_FOLDER,payload:{folderPath:t}}};t.finishedLoadingFolder=function(e){var t=e.context,n=e.files;return{type:c.ContentManagerActionTypes.FINISHED_LOADING_FOLDER,payload:{context:t,files:n}}};var h=-1;t.__testingOnlyIncreamentFolderLoadingIndex=function(){h++},t.onLoadFolder=function(){var e=++h;return function(n,a){var r=[];return(l.isContentManagerCdm(a())||"/"!==l.getAbsolutePath(a()))&&r.push(E(n,a,e)),l.isShowTeamOwnedSharedFoldersEnabled(a())&&!l.isContentManagerCdm(a())&&"/"===l.getAbsolutePath(a())&&r.push(t.loadTeamNamespaces(n,a)),Promise.all(r).then((function(){})).catch((function(e){e.message&&e.message.startsWith("Assertion Error:")||(o.logWarning(!0,e.message),"/"!==l.getPath(a())&&(n(t.onChangeCurrentFolder({folderPath:"/"})),n(t.onLoadFolder())))}))}},t.loadTeamNamespaces=function(e,a){return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return e({type:c.ContentManagerActionTypes.STARTED_LOADING_TEAM_NAMESPACES}),[4,e(t.getTeamNamespaces())];case 1:return n.sent(),e({type:c.ContentManagerActionTypes.FINISHED_LOADING_TEAM_NAMESPACES}),[2,e(_.loadTeamNamespacesMetadata())]}}))}))},t.getTeamNamespaces=function(){return function(e,t){var n=new i.default(!0),a=l.getIcons(t());return n.teamNamespacesList().then((function(t){var n,r,s,i={},l={};t.namespaces.map((function(e){"team_folder"===e.namespace_type[".tag"]?i[e.name]=o.teamNamespaceEntryToFileLikeObject(e,a):l[e.namespace_id]=o.teamNamespaceEntryToFileLikeObject(e,a)})),e((r=(n={teamFoldersData:i,teamOwnedSharedFoldersData:l}).teamFoldersData,s=n.teamOwnedSharedFoldersData,{type:c.ContentManagerActionTypes.ON_TEAM_NAMESPACES_RECEIVED,payload:{teamFoldersData:r,teamOwnedSharedFoldersData:s}}))})).catch((function(e){d.showFailSnackbar(f._("There was a problem completing this request.",{project:"content-manager"}))}))}};var E=function(e,n,o){var i=l.getPath(n()),d="/"!==i||null===l.getCurrentTeamFolderName(n());e({type:c.ContentManagerActionTypes.STARTED_LOADING_FOLDER});var f=[];return f.push(new Promise((function(e,t){r.browse({sortLabel:l.getSort(n()).sortField,sortIsAscending:l.getSort(n()).sortDirection===u.SortDirection.ASCENDING,path:d?i:void 0,sortFoldersFirst:!l.isMacintosh(n()),includeDeletedFiles:l.shouldShowDeletedFiles(n()),nsId:l.getRootNsId(n()),onSuccess:e,onError:t,userId:l.getUserId(n())})}))),l.isShowTeamOwnedSharedFoldersEnabled(n())&&l.isContentManagerCdm(n())&&"/"===l.getAbsolutePath(n())&&f.push(e(t.getTeamNamespaces())),Promise.all(f).then((function(r){var i=r[0],d=i.path,u=i.data;i.xhr,r[1];p.assert(o===h,"stale load folder request"),p.assert(void 0===d&&null!==l.getCurrentTeamFolderName(n())&&"/"===l.getPath(n())||d===l.getPath(n()),"loadedPath and current path are not equal and the page is not browsing a team folder");var _=a.BrowseContext.fromServerObject(u).toJSON();if(u.paginated)return new Promise((function(r,i){s.PaginationManager.create({firstPage:u.first_page,keyName:"sjid",ajaxURL:"/browse_get_next",userID:l.getUserId(n()),newDataAvailableCallback:function(s,u){try{p.assert(o===h,"stale load folder request - paginated case"),p.assert(void 0===d&&null!==l.getCurrentTeamFolderName(n())&&"/"===l.getPath(n())||d===l.getPath(n()),"loadedPath and current path are not equal and the page is not browsing a team folder - paginated case")}catch(e){return s.stopAutoFetching(),i(e)}var m=u.map((function(e){return a.File.fromServerObject(e)}));if(s.areAllItemsReady())return e(t.finishedLoadingFolder({context:_,files:m})),s.stopAutoFetching(),r();e((function(e){var t=e.context,n=e.files;return{type:c.ContentManagerActionTypes.STARTED_LOADING_REMAINING_PAGES,payload:{context:t,files:n}}})({context:_,files:m}))}}).startAutoFetching()}));var m=u.file_info.map((function(e){return a.File.fromServerObject(e)}));return e(t.finishedLoadingFolder({context:_,files:m})),Promise.resolve()})).then((function(){e(g.onLogActionRequest({nsId:l.getCurrentNsId(n()),cmLogActionType:m.ContentManagerLogActionType.BROWSE})),l.isInsideArchiveFolder(n())||e(_.loadFolderMetadata()),l.isShowTeamOwnedSharedFoldersEnabled(n())&&l.isContentManagerCdm(n())&&"/"===l.getAbsolutePath(n())&&e(_.loadTeamNamespacesMetadata())}))}})),define("modules/clean/teams/content_manager_modern/data/action_creators/load_folder_metadata_action_creator",["require","exports","tslib","modules/clean/teams/content_manager_modern/data/api/browse_metadata_api","modules/clean/teams/content_manager_modern/data/selectors/selectors","modules/clean/teams/content_manager_modern/data/types","modules/clean/teams/admin/api/admin_console_api_client","modules/clean/teams/content_manager_modern/util"],(function(e,t,n,a,o,r,s,i){"use strict";function l(e,r){return n.__awaiter(this,void 0,void 0,(function(){var s;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,a.sharedWith({userId:o.getUserId(r()),currentFolderFqPath:o.getAbsolutePath(r())})];case 1:return s=n.sent(),[2,e(t.onReceivedFolderSharingInfo(s))]}}))}))}function c(e,r){return n.__awaiter(this,void 0,void 0,(function(){var s,i;return n.__generator(this,(function(n){switch(n.label){case 0:return s=o.getTeamOwnedSharedFoldersNsIds(r()),[4,Promise.all(s.map((function(e){return a.previewMembers({userId:o.getUserId(r()),nsId:e})})))];case 1:return i=n.sent(),[2,e(t.onReceivedTeamOwnedSharedFolderSharingInfo(i))]}}))}))}function d(e,t){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(n){return[2,new s.default(!0).teamContentGetMetadata({path:"/"===o.getAbsolutePath(t())?"":o.getAbsolutePath(t()),include_file_count:!0,include_folder_size:!0,include_sync_settings:o.isSelSyncEnabled(t()),include_mount_point_map:!0,include_dg_info:o.isDgEnabled(t())}).then((function(n){var a={},s=o.getFilesNsIdNsPathMap(t());void 0!==n.current_sync_setting&&(a[o.getAbsolutePath(t())]={sync_setting:n.current_sync_setting[".tag"]}),n.folders_metadata.forEach((function(e){var t=e.ns_id_ns_path,n=e.file_count,o=e.sync_setting,r=e.folder_size;if(s.has(t)){var l=s.get(t).fq_path;a[l]={},void 0!==n&&(a[l].file_count=n),void 0!==o&&(a[l].sync_setting=o[".tag"]),void 0!==r&&(a[l].folder_size=r)}else i.logWarning(!0,"metadata returned from server doesnt exists in store")})),e({type:r.ContentManagerActionTypes.FINISHED_LOADING_METADATA,payload:{foldersMetadata:a,mountPointMap:n.mount_point_map,dgInfo:n.dg_info}})}))]}))}))}Object.defineProperty(t,"__esModule",{value:!0}),s=n.__importDefault(s),t.onReceivedFolderSharingInfo=function(e){return{type:r.ContentManagerActionTypes.ON_SHARING_INFO_RECEIVED,payload:{fileSharingInfoList:e}}},t.onReceivedTeamOwnedSharedFolderSharingInfo=function(e){return{type:r.ContentManagerActionTypes.ON_TEAM_OWNED_SHARED_FOLDER_SHARING_INFO_RECEIVED,payload:{fileSharingInfoList:e}}},t._loadFolderSharingInfo=l,t._loadTeamOwnedSharedFolderSharingInfo=c,t._loadMetadata=d,t.loadFolderMetadata=function(){return function(e,t){return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(n){return[2,Promise.all([l(e,t),d(e,t)]).then((function(){}))]}))}))}},t.loadTeamNamespacesMetadata=function(){return function(e,t){return n.__awaiter(void 0,void 0,void 0,(function(){var a;return n.__generator(this,(function(n){return"/"!==o.getAbsolutePath(t())?[2,Promise.resolve()]:((a=[]).push(c(e,t)),o.isContentManagerCdm(t())||(a.push(l(e,t)),a.push(d(e,t))),[2,Promise.all(a).then((function(){}))])}))}))}},t.loadTeamOwnedSharedFolderMetadata=function(){return function(e,t){return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(n){return"/"!==o.getAbsolutePath(t())?[2,Promise.resolve()]:[2,c(e,t).then((function(){}))]}))}))}}})),define("modules/clean/teams/content_manager_modern/data/action_creators/log_action_creator",["require","exports","tslib","modules/clean/ajax","external/lodash","modules/clean/teams/content_manager_modern/data/selectors/selectors"],(function(e,t,n,a,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),o=n.__importStar(o),t._generateSessionId=o.once((function(){return Math.random().toString(36).substring(2,15)})),t.onLogActionRequest=function(e){return function(n,o){a.SilentBackgroundRequest({url:"/team/admin/content_manager_activity_logger",data:{session_id:t._generateSessionId(),ns_id:e.nsId,action:e.cmLogActionType,_subject_uid:r.getUserId(o())}})}}})),define("modules/clean/teams/content_manager_modern/data/action_creators/search_action_creators",["require","exports","tslib","modules/clean/react/selection","modules/clean/teams/content_manager_modern/data/selectors/selectors","modules/core/exception","modules/clean/teams/content_manager_modern/data/types","modules/clean/teams/content_manager_modern/constants","modules/clean/teams/content_manager_modern/data/constants","modules/clean/teams/content_manager_modern/data/selectors/search_selectors","modules/clean/teams/content_manager_modern/data/api/search_api","modules/clean/teams/content_manager_modern/data/utils/search_utils","modules/clean/teams/content_manager_modern/path_util","modules/clean/react/browse/models","modules/clean/filepath","modules/clean/filetypes","modules/clean/teams/content_manager_modern/data/action_creators/action_creators","modules/clean/teams/content_manager_modern/data/action_creators/browse_action_creators","modules/clean/teams/content_manager_modern/data/action_creators/log_action_creator"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_,m,g,p,f,h,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),g=n.__importStar(g),t.onSearchChange=function(e){var t=e.searchQuery,n=e.searchSessionId,a=e.searchStartIndex;return{type:s.ContentManagerActionTypes.ON_SEARCH_CHANGE,payload:{searchQuery:t,searchSessionId:n,searchStartIndex:a}}},t.onSearchResults=function(e){var t=e.searchSessionId,n=e.searchResults,a=e.searchResultsHasMore;return{type:s.ContentManagerActionTypes.ON_SEARCH_RESULTS,payload:{searchSessionId:t,searchResults:n,searchResultsHasMore:a}}};t.onSearch=function(e){var a=e.searchQuery,r=e.searchStartIndex,s=void 0===r?0:r;return function(e,r){return n.__awaiter(void 0,void 0,void 0,(function(){var g,p,f,h,T,S,C,A,F,y;return n.__generator(this,(function(M){switch(M.label){case 0:if(g=o.getPath(r()),p=o.getUser(r()),f=u.normalize(a),h=o.isInTeamFoldersList(r()),!(T=(function(e){var t=e.searchNormalizedQuery,n=e.searchStartIndex,a=e.state,o=""===t,r=t===c.getSearchNormalizedQuery(a),s=n===c.getSearchStartIndex(a);return!(o||r&&s)})({searchNormalizedQuery:f,searchStartIndex:s,state:r()})&&!h)&&!h)return[3,5];if(S=u.generateRandomId(),e(t.onSearchChange({searchQuery:a,searchSessionId:S,searchStartIndex:s})),!T)return[3,4];e(E.onLogActionRequest({cmLogActionType:c.isNewSearchService(r())?i.ContentManagerLogActionType.SEARCH:i.ContentManagerLogActionType.SEARCH_LEGACY,nsId:o.getRootNsId(r())})),M.label=1;case 1:return M.trys.push([1,3,,4]),[4,d.loadResults({user:p,path:g,query:c.getSearchNormalizedQuery(r()),start:s,maxResults:l.CONTENT_MANAGER_SEARCH_RESULT_BATCH_SIZE+1,searchSessionId:S,rootNsid:o.getRootNsId(r()),newSearchService:c.isNewSearchService(r())})];case 2:return C=M.sent(),A=(function(e){var t=e.searchResults,a=e.state;return o.isContentManagerCdm(a)?t:t.map((function(e){return new m.File(n.__assign(n.__assign({},e.toJS()),{fq_path:_.getRelativePath(e.fq_path)}))}))})({searchResults:C,state:r()}),F=A.length>l.CONTENT_MANAGER_SEARCH_RESULT_BATCH_SIZE,A=F?A.slice(0,-1):A,!F&&o.isContentManagerCdm(r())&&"/"===g&&(y=o.getTeamOwnedSharedFoldersAsFilesInSearch(r()).toArray(),A=A.concat(y)),e(t.onSearchResults({searchSessionId:S,searchResults:A,searchResultsHasMore:F})),[3,4];case 3:return M.sent(),[3,4];case 4:return[3,6];case 5:e(t.onSearchChange({searchQuery:a})),M.label=6;case 6:return[2]}}))}))}},t.onSearchMore=function(){return function(e,n){r.assert(c.getSearchResultsHasMore(n()),"Must have more search results");var a=c.getSearchStartIndex(n())+l.CONTENT_MANAGER_SEARCH_RESULT_BATCH_SIZE,o=c.getSearchQuery(n());e(t.onSearch({searchQuery:o,searchStartIndex:a}))}},t.onSearchResultFileClicked=function(e){var t=e.searchResultRow;return function(e,n){var r=c.getSearchResults(n())[t];if(r.type!==p.FileTypes.SHARED_FOLDER||r.is_in_team_folder_tree){var s=r.is_dir?r.fq_path:g.parent_dir(r.fq_path);s!==o.getPath(n())&&e(h.browseToFolder({folderPath:s}))}else e(f.onChangeSelection(a.createSelection([r.fq_path])))}},t.onSearchResultPathClicked=function(e){var t=e.searchResultRow;return function(e,n){var a=c.getSearchResults(n())[t];if(a.type!==p.FileTypes.SHARED_FOLDER||a.is_in_team_folder_tree){var r=g.parent_dir(a.fq_path);r!==o.getPath(n())&&e(h.browseToFolder({folderPath:r}))}}},t.onSearchResultHighlight=function(e){var t=e.searchResultsHighlightedIndex;return{type:s.ContentManagerActionTypes.ON_SEARCH_RESULT_HIGHLIGHT,payload:{searchResultsHighlightedIndex:t}}},t.onSearchResultHighlightNext=function(){return{type:s.ContentManagerActionTypes.ON_SEARCH_RESULT_HIGHLIGHT_NEXT}},t.onSearchResultHighlightPrevious=function(){return{type:s.ContentManagerActionTypes.ON_SEARCH_RESULT_HIGHLIGHT_PREVIOUS}},t.onSearchClear=function(){return{type:s.ContentManagerActionTypes.ON_SEARCH_CLEAR}}})),define("modules/clean/teams/content_manager_modern/data/action_creators/team_folder_action_creators",["require","exports","tslib","modules/clean/teams/content_manager_modern/data/action_creators/browse_action_creators","modules/clean/teams/content_manager_modern/data/action_creators/load_folder_action_creators","modules/clean/teams/content_manager_modern/data/utils/notifications_utils","modules/clean/teams/content_manager_modern/data/utils/file_operations_utils","modules/clean/teams/admin/api/admin_console_api_client","modules/clean/teams/content_manager_modern/data/selectors/selectors","modules/core/exception","modules/core/i18n","modules/clean/teams/content_manager_modern/data/action_creators/log_action_creator","modules/clean/teams/content_manager_modern/constants","modules/clean/teams/content_manager_modern/data/types","modules/clean/teams/content_manager_modern/data/action_creators/file_operations_action_creators","modules/clean/teams/content_manager_modern/view/sharing_management","modules/clean/teams/content_manager_modern/data/utils/team_folders_i18n_util","modules/clean/teams/content_manager_modern/data/action_creators/bolt_action_creators"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_,m,g,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importDefault(i);var E=d._("The team folder name is invalid.",{project:"content-manager"}),T=d._("A team folder with this name already exists.",{project:"content-manager"}),S=d._("The team folder name is reserved.",{project:"content-manager"}),C=d._("There was a problem completing this request.",{project:"content-manager"}),A=d._("Team folder permanently deleted.",{project:"content-manager"});t.onCreateTeamFolder=function(e){var t=e.requestedTeamFolderName,n=e.syncThisFolder,m=void 0===n?null:n;return function(e,n){var f=new i.default(!0),A=s.validateTeamFolderName(t),F=l.isSelSyncEnabled(n()),y=l.getTeamGroupInfo(n()),M=l.getUser(n());if(!A)return c.assert(F&&null!==m||!F&&null===m,"When selective sync is enabled syncThisFolder should not be null"),r.showSyncSnackbar(d._("Creating team folder…",{project:"content-manager"})),f.teamFolderCreate(t,null===m?void 0:m).then((function(s){r.showCompleteSnackbar(d._("Team folder created.",{project:"content-manager"})),l.isShowTeamOwnedSharedFoldersEnabled(n())?o.loadTeamNamespaces(e,n):e(a.browseTeamFolders());var i=Number(s.team_folder_id);e(u.onLogActionRequest({cmLogActionType:_.ContentManagerLogActionType.CREATE_TEAM_FOLDER,nsId:i})),p.showShareModalForTeamFolder({user:M,teamFolderId:i,teamFolderName:t,prefillTeamGroup:!0,teamGroupInfo:y,onManageSharingCompleted:function(){return e(g.onManageSharingCompleted(i))}}),e(h.onRefreshFolder())})).catch((function(e){"invalid_folder_name"===(null!=e.error?e.error[".tag"]:void 0)?r.showFailSnackbar(E):"folder_name_already_used"===(null!=e.error?e.error[".tag"]:void 0)?r.showFailSnackbar(T):"folder_name_reserved"===(null!=e.error?e.error[".tag"]:void 0)?r.showFailSnackbar(S):r.showFailSnackbar(C)}));r.showFailSnackbar(A)}},t.onArchiveTeamFolder=function(e){return function(s,c){var d=new i.default(!0),m=l.getTeamFolderNsIdByName(c(),e);return d.teamFolderArchive(m,!0).then((function(){return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return l.isShowTeamOwnedSharedFoldersEnabled(c())?[4,o.loadTeamNamespaces(s,c)]:[3,2];case 1:return n.sent(),[3,4];case 2:return[4,s(a.browseTeamFolders())];case 3:n.sent(),n.label=4;case 4:return s(t.onArchiveTeamFolderInProgress(e)),r.showCompleteSnackbar(f.getArchiveTeamFolderProgressMessage(e)),s(u.onLogActionRequest({cmLogActionType:_.ContentManagerLogActionType.ARCHIVE_TEAM_FOLDER,nsId:m})),[2]}}))}))})).catch((function(e){r.showFailSnackbar(C)}))}},t.onUnarchiveTeamFolder=function(e){return function(n,s){var c=new i.default(!0),d=l.getTeamFolderNsIdByName(s(),e);c.teamFolderUnarchive(d).then((function(){n(u.onLogActionRequest({cmLogActionType:_.ContentManagerLogActionType.UNARCHIVE_TEAM_FOLDER,nsId:d})),n(t.onUnarchiveTeamFolderFinished(e)),l.isShowTeamOwnedSharedFoldersEnabled(s())?o.loadTeamNamespaces(n,s):n(a.browseTeamFolders())})).catch((function(e){r.showFailSnackbar(C)}))}},t.onPermanentlyDeleteTeamFolder=function(e){return function(t,n){var s=new i.default(!0),c=l.getTeamFolderNsIdByName(n(),e);r.showSyncSnackbar(d._("Permanently deleting team folder…",{project:"content-manager"})),s.teamFolderPermanentlyDelete(c).then((function(){t(u.onLogActionRequest({cmLogActionType:_.ContentManagerLogActionType.PERMANENT_DELETE_TEAM_FOLDER,nsId:c})),r.showCompleteSnackbar(A),l.isShowTeamOwnedSharedFoldersEnabled(n())?o.loadTeamNamespaces(t,n):t(a.browseTeamFolders())})).catch((function(e){r.showFailSnackbar(C)}))}},t.onRenameTeamFolder=function(e){var t=e.teamFolderName,n=e.teamFolderId,c=e.requestedTeamFolderName;return function(e,m){var p=new i.default(!0),f=l.getTeamFolderByName(m(),t),h=s.validateTeamFolderName(c);if(!h)return e(g.onRenameSubmitSent(f)),p.teamFolderRename(n,c).then((function(){e(g.onRenameSuccess()),r.showCompleteSnackbar(d._("Team folder renamed.",{project:"content-manager"})),l.isShowTeamOwnedSharedFoldersEnabled(m())?o.loadTeamNamespaces(e,m):e(a.browseTeamFolders()),e(u.onLogActionRequest({cmLogActionType:_.ContentManagerLogActionType.RENAME_TEAM_FOLDER,nsId:n}))})).catch((function(t){return e(g.onRenameError()),"invalid_folder_name"===(null!=t.error?t.error[".tag"]:void 0)?r.showFailSnackbar(E):"folder_name_already_used"===(null!=t.error?t.error[".tag"]:void 0)?r.showFailSnackbar(T):"folder_name_reserved"===(null!=t.error?t.error[".tag"]:void 0)?r.showFailSnackbar(S):r.showFailSnackbar(C)}));r.showFailSnackbar(h)}},t.onArchiveTeamFolderClicked=function(e){return{type:m.ContentManagerActionTypes.ON_ARCHIVE_TEAM_FOLDER_CLICKED,payload:{teamFolderName:e}}},t.onArchiveTeamFolderInProgress=function(e){return{type:m.ContentManagerActionTypes.ON_ARCHIVE_TEAM_FOLDER_IN_PROGRESS,payload:{teamFolderName:e}}},t.onArchiveTeamFolderClose=function(){return{type:m.ContentManagerActionTypes.ON_ARCHIVE_TEAM_FOLDER_CLOSE}},t.onPermanentlyDeleteTeamFolderClicked=function(e){return{type:m.ContentManagerActionTypes.ON_PERMANENTLY_DELETE_TEAM_FOLDER_CLICKED,payload:{teamFolderName:e}}},t.onPermanentlyDeleteTeamFolderClose=function(){return{type:m.ContentManagerActionTypes.ON_PERMANENTLY_DELETE_TEAM_FOLDER_CLOSE}},t.onUnarchiveTeamFolderFinished=function(e){return{type:m.ContentManagerActionTypes.ON_UNARCHIVE_TEAM_FOLDER_FINISHED,payload:{teamFolderName:e}}},t.onAddGroupsClose=function(){return{type:m.ContentManagerActionTypes.ON_ADD_GROUPS_CLOSE}},t.onCreateTeamFolderClicked=function(){return{type:m.ContentManagerActionTypes.ON_CREATE_TEAM_FOLDER_CLICKED}},t.onCreateTeamFolderClose=function(){return{type:m.ContentManagerActionTypes.ON_CREATE_TEAM_FOLDER_CLOSE}},t.onRenameTeamFolderClicked=function(e){return{type:m.ContentManagerActionTypes.ON_RENAME_TEAM_FOLDER_CLICKED,payload:{teamFolderName:e}}},t.onRenameTeamFolderClose=function(){return{type:m.ContentManagerActionTypes.ON_RENAME_TEAM_FOLDER_CLOSE}},t.onDataMigrationToolClicked=function(){return{type:m.ContentManagerActionTypes.ON_DATA_MIGRATION_TOOL_CLICKED}},t.onDataMigrationToolClose=function(){return{type:m.ContentManagerActionTypes.ON_DATA_MIGRATION_TOOL_CLOSE}}})),define("modules/clean/teams/content_manager_modern/data/api/browse_metadata_api",["require","exports","tslib","modules/clean/ajax","modules/clean/teams/content_manager_modern/constants"],(function(e,t,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),t.sharedWith=function(e){return new Promise((function(t,n){a.WebRequest({url:"/share_ajax/shared_with",dataType:"json",subject_user:e.userId,data:{max_results:o.MAX_SHARING_ENTITIES,fq_path_prefix:e.currentFolderFqPath,include_inherited:!0,admin_console:!0,sort_by_name:!0},success:function(e){var n=e.map((function(e){return{nsId:e.ns_id,numUndisplayableUsersAndInvites:e.num_avatars_not_shown,groups:e.groups,invitations:e.invitations,joinedMembers:e.joined_members,audienceDescription:e.audience_description,memberCount:e.num_users_and_invites}}));t(n)},error:n})}))},t.previewMembers=function(e){return new Promise((function(t,n){a.WebRequest({url:"/share_ajax/preview_members/"+e.nsId,dataType:"json",subject_user:e.userId,data:{max_results:o.MAX_SHARING_ENTITIES,sort_by_name:!0,admin_console:!0},success:function(e){var n={nsId:e.ns_id,numUndisplayableUsersAndInvites:e.num_avatars_not_shown,groups:e.groups,invitations:e.invitations,joinedMembers:e.joined_members,audienceDescription:e.audience_description,memberCount:e.num_users_and_invites};t(n)},error:n})}))}})),define("modules/clean/teams/content_manager_modern/data/api/search_api",["require","exports","modules/clean/search/constants","modules/clean/search/api","modules/clean/teams/content_manager_modern/data/utils/search_utils"],(function(e,t,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadResults=function(e){var t=e.user,r=e.path,s=e.query,i=e.start,l=e.maxResults,c=e.searchSessionId,d=e.rootNsid,u=e.webTimer,_=e.newSearchService;return new Promise((function(e,m){a.searchApiClient.loadResults({user:t,nsId:d,path:r,query:o.normalize(s),searchSessionId:c,showPaperResults:!1,loadDeleted:!1,fileNameOnly:!0,isDropdown:!0,start:i,maxResults:l,isAdminConsole:!0,webTimer:u,onSuccess:function(t){var n=t.searchResults;e(n.results)},onError:m,overrideUrl:_?n.ADMIN_CONSOLE_SEARCH_ENDPOINT:void 0,searchResultsExperiments:{}})}))}})),define("modules/clean/teams/content_manager_modern/data/bolt/content_manager_bolt_client",["require","exports","modules/clean/bolt"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(function(){function e(){var e=this;this.startLiveUpdate=function(t){void 0===t&&(t=null),t&&(e.handleUpdate=t),e.updateBoltClient()},this.onBoltRefresh=function(){e.updateBoltClient()},this.onBoltUpdate=function(){e.handleUpdate&&e.handleUpdate()},this.updateBoltClient=function(){var t=e.boltData.map((function(e){return new n.SignedChannelState("sfj",e.bolt_unique_id,e.latest_sjid.toString(),e.bolt_token)}));e.boltClient?e.boltClient.update_states(t):(e.boltClient=new n.BoltClient(t,e.onBoltUpdate,e.onBoltRefresh),e.boltClient.start())},this.boltData=[]}return e.prototype.setInitialBoltData=function(e){this.boltData=e},e.prototype.handleUpdateBoltClient=function(e){this.boltData=e,this.updateBoltClient()},e.prototype.getNsMap=function(){var e={};return this.boltData.forEach((function(t){e[t.bolt_unique_id]=parseInt(t.latest_sjid,10)})),e},e.prototype.stopLiveUpdate=function(){this.boltClient&&this.boltClient.unsubscribe()},e})();t.ContentManagerBoltClient=a})),define("modules/clean/teams/content_manager_modern/data/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTENT_MANAGER_SEARCH_RESULT_BATCH_SIZE=8,(function(e){e.NOT_STARTED="not-started",e.IN_PROGRESS="in-progress",e.SUCCESSFUL="successful"})(t.FileRenameStatus||(t.FileRenameStatus={})),(function(e){e.MOVE="MOVE",e.COPY="COPY",e.CREATE_FOLDER_SYNC_SETTING="CREATE_FOLDER_SYNC_SETTING",e.CHANGE_SYNC_SETTING="CHANGE_SYNC_SETTING"})(t.FswActionType||(t.FswActionType={}))})),define("modules/clean/teams/content_manager_modern/data/reducers/default_content_manager_state",["require","exports","tslib","modules/clean/teams/content_manager_modern/data/types","immutable","modules/clean/react/selection","modules/clean/teams/content_manager_modern/constants","modules/clean/teams/content_manager_modern/data/constants","modules/clean/react/files_view/types"],(function(e,t,n,a,o,r,s,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),t.defaultContentManagerCreateFolderState={folderCreationState:l.NewFolderCreationState.CREATE_FOLDER_INACTIVE},t.defaultContentManagerSearchState={searchIsLoadingFirstResults:!1,searchQuery:"",searchResults:[],searchResultsHasMore:!1,searchSessionId:"",searchStartIndex:0,searchResultsHighlightedIndex:-1},t.defaultContentManagerSharingInfoState={fileSharingInfoList:Array(),teamOwnedSharedFolderSharingInfoList:Array()},t.defaultContentManagerState=n.__assign(n.__assign(n.__assign(n.__assign({activeTab:s.ContentManagerTab.FILES,activeTeamName:"",cdmAutoTeamGroupId:null,context:null},t.defaultContentManagerCreateFolderState),t.defaultContentManagerSearchState),t.defaultContentManagerSharingInfoState),{files:o.List(),foldersMetadata:{},isContentManagerCdm:!0,isLockedTeam:!0,isMacintosh:!0,isTsdReadWriteForEveryone:!1,loadingState:l.LoadingState.LOADED,path:"",pendingBrowseUpdates:[],uploadPath:"",selection:r.createSelection(),shareModalFilePath:null,shareModalPrefillEmail:null,shouldShowDeletedFiles:!1,sortDirection:l.SortDirection.ASCENDING,sortField:l.SortField.FILENAME,teamEnabledCmFeatures:{is_upload_download_enabled:!0,is_permanent_delete_enabled:!0,is_file_locking_tab_enabled:!1,is_show_team_owned_shared_folders_enabled:!1},teamEnabledFileops:{can_view_file_activity:!1,is_cm_sel_sync_enabled:!1},userId:-1,columnsTypes:[l.SortField.FILENAME,l.SortField.MODIFIED,l.SortField.SHARED_WITH,l.SortField.CATEGORY,l.SortField.EXTENSION,l.SortField.SIZE,l.SortField.FILE_COUNTS],renameOperation:{fileRename:null,fileRenameStatus:i.FileRenameStatus.NOT_STARTED},fswDetails:null,mountPointMap:o.Map(),currentTeamFolder:null,dataMigrationToolInfo:null,icons:null,rootNsId:null,teamFoldersData:{},teamOwnedSharedFoldersData:{},fileJumpkeys:"",teamFolderActionDetails:{teamFolderName:"",teamFolderActionType:a.TeamFolderActionType.NONE},teamGroupInfo:{id:"",name:"",group_size:0}})})),define("modules/clean/teams/content_manager_modern/data/reducers/reducer",["require","exports","tslib","modules/clean/filepath","modules/clean/teams/content_manager_modern/data/types","modules/clean/react/files_view/types","immutable","modules/clean/react/browse/models","modules/clean/teams/content_manager_modern/data/reducers/create_folder_reducer","modules/clean/teams/content_manager_modern/data/reducers/search_reducer","modules/clean/teams/content_manager_modern/data/constants","modules/clean/teams/content_manager_modern/data/reducers/default_content_manager_state","external/lodash","modules/clean/teams/content_manager_modern/path_util"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),s=n.__importStar(s),_=n.__importStar(_);var g=function(e,t){for(var n=function(t){var n=e.findEntry((function(e){return t.fq_path===e.fq_path}))||[null,null],a=n[0],o=n[1];o?t.sjid>o.sjid&&(e=e.set(a,t)):e=e.push(t)},a=0,o=t;a<o.length;a++){n(o[a])}return e},p=function(e){var t=e.state,o=e.added,r=e.moved,l=e.removed,c=e.mount_points,u=t.files,_=t.renameOperation;if(o.length>0){var m=o.map((function(e){return i.File.fromServerObject(e)}));null!=t.context&&(m=m.filter((function(e){return e.ns_id===t.context.currentNSID}))),u=g(u,m)}if(r.length>0){var p=r.map((function(e){return e[0]})),f=r.map((function(e){return i.File.fromServerObject(e[1])})).filter((function(e){return a.paths_are_equal(a.parent_dir(e.fq_path),t.path)}));u=u.filter((function(e){return!p.includes(e.fq_path)})),null!=t.context&&(f=f.filter((function(e){return e.ns_id===t.context.currentNSID}))),u=g(u,f);var h=t.renameOperation.fileRename;null!==h&&p.includes(h.file.fq_path)&&(_={fileRename:null,fileRenameStatus:d.FileRenameStatus.NOT_STARTED})}return l.length>0&&(u=u.filter((function(e){return!l.includes(e.fq_path)}))),n.__assign(n.__assign({},t),{files:u,renameOperation:_,mountPointMap:s.Map(c)})};t.contentManagerReducer=function(e,t){switch(void 0===e&&(e=u.defaultContentManagerState),t.type){case o.ContentManagerActionTypes.INIT_STORE:return(function(e){var t=e.state,a=e.activeTab,r=e.activeTeamName,s=e.cdmAutoTeamGroupId,i=e.initFqPath,l=e.isLockedTeam,c=e.isTsdReadWriteForEveryone,d=e.shareFilePath,u=e.sharePrefillEmail,_=e.shouldShowDeletedFiles,g=e.teamEnabledCmFeatures,p=e.teamEnabledFileops,f=e.userId,h=e.columnsTypes,E=e.sortDirection,T=e.sortField,S=e.initTeamFolderId,C=e.initTeamFolderName,A=e.dataMigrationToolInfo,F=e.icons,y=e.contentManagerCdm,M=e.teamGroupInfo,N=e.experiments;return n.__assign(n.__assign({},t),{columnsTypes:h,activeTeamName:r,activeTab:a,cdmAutoTeamGroupId:s,isLockedTeam:l,isTsdReadWriteForEveryone:c,path:i,uploadPath:m.joinTeamFolderAndRelativePath({teamFolder:C,relativePath:i}),shareModalFilePath:d,shareModalPrefillEmail:u,shouldShowDeletedFiles:_,teamEnabledCmFeatures:g,teamEnabledFileops:p,userId:f,sortDirection:E,sortField:T,rootNsId:S||null,currentTeamFolder:C||null,dataMigrationToolInfo:A||null,icons:F||null,isContentManagerCdm:y,teamFolderActionDetails:{teamFolderName:"",teamFolderActionType:o.TeamFolderActionType.NONE},teamGroupInfo:M,experiments:N})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.STARTED_LOADING_FOLDER:return(function(e){var t=e.state;return n.__assign(n.__assign(n.__assign(n.__assign(n.__assign({},t),u.defaultContentManagerCreateFolderState),u.defaultContentManagerSearchState),u.defaultContentManagerSharingInfoState),{context:null,foldersMetadata:{},debugInfo:void 0,files:s.List(),selection:u.defaultContentManagerState.selection,loadingState:r.LoadingState.LOADING_FIRST_PAGE})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.STARTED_LOADING_REMAINING_PAGES:return(function(e){var t=e.state,a=e.context,o=e.files;return n.__assign(n.__assign({},t),{loadingState:r.LoadingState.LOADING_REMAINING_PAGES,context:a,rootNsId:a.rootNSID||null,files:t.files.concat(s.List(o))})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.FINISHED_LOADING_FOLDER:return(function(e){for(var t=e.state,a=e.context,o=e.files,i=0,l=(t=n.__assign(n.__assign({},t),{loadingState:r.LoadingState.LOADED,context:a,rootNsId:a.rootNSID||null,files:t.files.concat(s.List(o))})).pendingBrowseUpdates;i<l.length;i++){var c=l[i];t=p(n.__assign({state:t},c))}return n.__assign(n.__assign({},t),{pendingBrowseUpdates:[]})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_CHANGE_SELECTION:return(function(e){var t=e.state,a=e.selection;return n.__assign(n.__assign({},t),{selection:a})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_CHANGE_SHOULD_SHOW_DELETED_FILES:return(function(e){var t=e.state;switch(e.shouldShowDeletedFiles){case"show":return n.__assign(n.__assign({},t),{shouldShowDeletedFiles:!0});case"hide":return n.__assign(n.__assign({},t),{shouldShowDeletedFiles:!1})}})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_CREATE_FOLDER_CANCELED:return l.onCreateFolderCanceled({state:e});case o.ContentManagerActionTypes.ON_CREATE_FOLDER_CLICKED:return l.onCreateFolderClicked({state:e});case o.ContentManagerActionTypes.ON_CREATE_FOLDER_COMPLETED:return l.onCreateFolderCompleted({state:e});case o.ContentManagerActionTypes.ON_CREATE_FOLDER_REQUEST_SENT:return l.onCreateFolderRequestSent({state:e});case o.ContentManagerActionTypes.ON_NEW_SORT_SELECTED:return(function(e){var t=e.state,a=e.newSort;return n.__assign(n.__assign({},t),a)})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_CHANGE_CURRENT_FOLDER:return(function(e){var t=e.state,a=e.folderPath;return n.__assign(n.__assign({},t),{path:a,uploadPath:m.joinTeamFolderAndRelativePath({teamFolder:t.currentTeamFolder,relativePath:a})})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_CHANGE_UPLOAD_PATH:return(function(e){var t=e.state,a=e.uploadPath;return n.__assign(n.__assign({},t),{uploadPath:a})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_SEARCH_CHANGE:return c.onSearchChange(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_SEARCH_CLEAR:return c.onSearchClear({state:e});case o.ContentManagerActionTypes.ON_SEARCH_RESULTS:return c.onSearchResults(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_SEARCH_RESULT_HIGHLIGHT:return c.onSearchResultHighlight(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_SEARCH_RESULT_HIGHLIGHT_NEXT:return c.onSearchResultHighlightNext({state:e});case o.ContentManagerActionTypes.ON_SEARCH_RESULT_HIGHLIGHT_PREVIOUS:return c.onSearchResultHighlightPrevious({state:e});case o.ContentManagerActionTypes.ON_CHANGE_ACTIVE_TAB:return(function(e){var t=e.state,a=e.tab;return n.__assign(n.__assign({},t),{activeTab:a,selection:u.defaultContentManagerState.selection})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_SHARING_INFO_RECEIVED:return(function(e){var t=e.state,a=e.fileSharingInfoList;return n.__assign(n.__assign({},t),{fileSharingInfoList:a})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_TEAM_OWNED_SHARED_FOLDER_SHARING_INFO_RECEIVED:return(function(e){var t=e.state,a=e.fileSharingInfoList;return n.__assign(n.__assign({},t),{teamOwnedSharedFolderSharingInfoList:a})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_RENAME_REQUEST:return(function(e){var t=e.state,a=e.file;return n.__assign(n.__assign({},t),{renameOperation:{fileRename:{file:a,state:r.RenameState.PENDING_INPUT},fileRenameStatus:d.FileRenameStatus.IN_PROGRESS}})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_RENAME_SUCCESS:return(function(e){var t=e.state;return n.__assign(n.__assign({},t),{renameOperation:{fileRename:t.renameOperation.fileRename,fileRenameStatus:d.FileRenameStatus.SUCCESSFUL}})})({state:e});case o.ContentManagerActionTypes.ON_RENAME_CANCEL:case o.ContentManagerActionTypes.ON_RENAME_ERROR:return(function(e){var t=e.state;return n.__assign(n.__assign({},t),{renameOperation:{fileRename:null,fileRenameStatus:d.FileRenameStatus.NOT_STARTED}})})({state:e});case o.ContentManagerActionTypes.ON_RENAME_SUBMIT_SENT:return(function(e){var t=e.state,a=e.file;return n.__assign(n.__assign({},t),{renameOperation:{fileRename:{file:a,state:r.RenameState.SAVING_INPUT},fileRenameStatus:d.FileRenameStatus.IN_PROGRESS}})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_BOLT_UPDATE:return(function(e){var t=e.state,a=e.browseUpdate;return t.loadingState===r.LoadingState.LOADED?p(n.__assign({state:t},a)):n.__assign(n.__assign({},t),{pendingBrowseUpdates:n.__spreadArrays(t.pendingBrowseUpdates,[a])})})({state:e,browseUpdate:t.payload});case o.ContentManagerActionTypes.ON_FSW_SHOW_REQUEST:return(function(e){var t=e.state,a=e.payload;return n.__assign(n.__assign({},t),{fswDetails:a})})({state:e,payload:t.payload});case o.ContentManagerActionTypes.ON_FSW_ACCEPT_SENT:case o.ContentManagerActionTypes.ON_FSW_REJECT:return(function(e){var t=e.state;return n.__assign(n.__assign({},t),{fswDetails:null})})({state:e});case o.ContentManagerActionTypes.ON_CHANGE_COLUMNS:return(function(e){var t=e.state,a=e.columnsTypes;return n.__assign(n.__assign({},t),{columnsTypes:_.uniq(n.__spreadArrays(a,t.columnsTypes))})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.FINISHED_LOADING_METADATA:return(function(e){var t=e.state,a=e.foldersMetadata,o=e.mountPointMap,r=e.dgInfo;return n.__assign(n.__assign({},t),{foldersMetadata:a,mountPointMap:s.Map(o),debugInfo:r})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.STARTED_LOADING_TEAM_FOLDERS:return(function(e){var t=e.state;return n.__assign(n.__assign(n.__assign(n.__assign(n.__assign({},t),u.defaultContentManagerCreateFolderState),u.defaultContentManagerSearchState),u.defaultContentManagerSharingInfoState),{foldersMetadata:{},context:null,files:s.List(),selection:u.defaultContentManagerState.selection,loadingState:r.LoadingState.LOADING_FIRST_PAGE,currentTeamFolder:null,rootNsId:null,path:"/",uploadPath:"/",debugInfo:void 0})})({state:e});case o.ContentManagerActionTypes.FINISHED_LOADING_TEAM_FOLDERS:return(function(e){var t=e.state,a=i.BrowseContext.fromServerObject({inside_team_folder_root:!0,is_non_user_relative_context:!0}).toJSON();return n.__assign(n.__assign({},t),{loadingState:r.LoadingState.LOADED,context:a})})({state:e});case o.ContentManagerActionTypes.STARTED_LOADING_TEAM_NAMESPACES:return(function(e){var t=e.state;return n.__assign(n.__assign(n.__assign(n.__assign(n.__assign({},t),u.defaultContentManagerCreateFolderState),u.defaultContentManagerSearchState),u.defaultContentManagerSharingInfoState),{foldersMetadata:{},context:null,files:s.List(),selection:u.defaultContentManagerState.selection,loadingState:r.LoadingState.LOADING_FIRST_PAGE,currentTeamFolder:null,rootNsId:null,path:"/",uploadPath:"/",debugInfo:void 0})})({state:e});case o.ContentManagerActionTypes.FINISHED_LOADING_TEAM_NAMESPACES:return(function(e){var t=e.state,a=i.BrowseContext.fromServerObject({inside_team_folder_root:!0,is_non_user_relative_context:!0}).toJSON();return n.__assign(n.__assign({},t),{loadingState:r.LoadingState.LOADED,context:a})})({state:e});case o.ContentManagerActionTypes.ON_TEAM_FOLDERS_RECEIVED:return(function(e){var t=e.state,a=e.teamFoldersData;return n.__assign(n.__assign({},t),{teamFoldersData:a})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_TEAM_NAMESPACES_RECEIVED:return(function(e){var t=e.state,a=e.teamFoldersData,o=e.teamOwnedSharedFoldersData;return n.__assign(n.__assign({},t),{teamFoldersData:a,teamOwnedSharedFoldersData:o})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.FILE_JUMP_KEY_PRESSED:return(function(e){var t=e.state,a=e.keyChar;return n.__assign(n.__assign({},t),{fileJumpkeys:t.fileJumpkeys+a.toLowerCase()})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.FILE_JUMP_KEYS_CLEARED:return(function(e){var t=e.state;return n.__assign(n.__assign({},t),{fileJumpkeys:""})})({state:e});case o.ContentManagerActionTypes.ON_FILE_OPERATION_SUCCESS:return(function(e){var t=e.state;return n.__assign(n.__assign({},t),{selection:u.defaultContentManagerState.selection})})({state:e});case o.ContentManagerActionTypes.RESET_STATE:return u.defaultContentManagerState;case o.ContentManagerActionTypes.ON_CHANGE_TEAM_FOLDER:return(function(e){var t=e.state,a=e.teamFolderName,o=t.teamFoldersData[a].target_ns||null;return n.__assign(n.__assign({},t),{rootNsId:o,currentTeamFolder:a})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_ARCHIVE_TEAM_FOLDER_CLICKED:return(function(e){var t=e.state,a=e.teamFolderName;return n.__assign(n.__assign({},t),{teamFolderActionDetails:{teamFolderName:a,teamFolderActionType:o.TeamFolderActionType.ARCHIVE_TEAM_FOLDER}})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_ARCHIVE_TEAM_FOLDER_IN_PROGRESS:return(function(e){var t,a=e.state,o=e.teamFolderName,r=a.teamFoldersData,s=r[o];if(s){var l=n.__assign(n.__assign({},s.toJS()),{team_folder_status:"archive_in_progress"});s=new i.File(l),r=n.__assign(n.__assign({},r),((t={})[o]=s,t))}return n.__assign(n.__assign({},a),{teamFoldersData:r})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_ARCHIVE_TEAM_FOLDER_CLOSE:return(function(e){var t=e.state;return n.__assign(n.__assign({},t),{teamFolderActionDetails:{teamFolderName:"",teamFolderActionType:o.TeamFolderActionType.NONE}})})({state:e});case o.ContentManagerActionTypes.ON_PERMANENTLY_DELETE_TEAM_FOLDER_CLICKED:return(function(e){var t=e.state,a=e.teamFolderName;return n.__assign(n.__assign({},t),{teamFolderActionDetails:{teamFolderName:a,teamFolderActionType:o.TeamFolderActionType.PERMANENTLY_DELETE_TEAM_FOLDER}})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_PERMANENTLY_DELETE_TEAM_FOLDER_CLOSE:return(function(e){var t=e.state;return n.__assign(n.__assign({},t),{teamFolderActionDetails:{teamFolderName:"",teamFolderActionType:o.TeamFolderActionType.NONE}})})({state:e});case o.ContentManagerActionTypes.ON_UNARCHIVE_TEAM_FOLDER_FINISHED:return(function(e){var t=e.state,a=e.teamFolderName;return n.__assign(n.__assign({},t),{teamFolderActionDetails:{teamFolderName:a,teamFolderActionType:o.TeamFolderActionType.ADD_GROUPS_TO_TEAM_FOLDER}})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_ADD_GROUPS_CLOSE:return(function(e){var t=e.state;return n.__assign(n.__assign({},t),{teamFolderActionDetails:{teamFolderName:"",teamFolderActionType:o.TeamFolderActionType.NONE}})})({state:e});case o.ContentManagerActionTypes.ON_DISPLAYED_PREFILL_MODAL:return(function(e){var t=e.state;return n.__assign(n.__assign({},t),{shareModalFilePath:null,shareModalPrefillEmail:null})})({state:e});case o.ContentManagerActionTypes.ON_CREATE_TEAM_FOLDER_CLICKED:return(function(e){var t=e.state;return n.__assign(n.__assign({},t),{teamFolderActionDetails:{teamFolderName:"",teamFolderActionType:o.TeamFolderActionType.CREATE_TEAM_FOLDER}})})({state:e});case o.ContentManagerActionTypes.ON_CREATE_TEAM_FOLDER_CLOSE:return(function(e){var t=e.state;return n.__assign(n.__assign({},t),{teamFolderActionDetails:{teamFolderName:"",teamFolderActionType:o.TeamFolderActionType.NONE}})})({state:e});case o.ContentManagerActionTypes.ON_RENAME_TEAM_FOLDER_CLICKED:return(function(e){var t=e.state,a=e.teamFolderName;return n.__assign(n.__assign({},t),{teamFolderActionDetails:{teamFolderName:a,teamFolderActionType:o.TeamFolderActionType.RENAME_TEAM_FOLDER}})})(n.__assign({state:e},t.payload));case o.ContentManagerActionTypes.ON_RENAME_TEAM_FOLDER_CLOSE:return(function(e){var t=e.state;return n.__assign(n.__assign({},t),{teamFolderActionDetails:{teamFolderName:"",teamFolderActionType:o.TeamFolderActionType.NONE}})})({state:e});case o.ContentManagerActionTypes.ON_DATA_MIGRATION_TOOL_CLICKED:return(function(e){var t=e.state;return n.__assign(n.__assign({},t),{teamFolderActionDetails:{teamFolderName:"",teamFolderActionType:o.TeamFolderActionType.DATA_MIGRATION_TOOL}})})({state:e});case o.ContentManagerActionTypes.ON_DATA_MIGRATION_TOOL_CLOSE:return(function(e){var t=e.state;return n.__assign(n.__assign({},t),{teamFolderActionDetails:{teamFolderName:"",teamFolderActionType:o.TeamFolderActionType.NONE}})})({state:e})}return e}})),define("modules/clean/teams/content_manager_modern/data/reducers/create_folder_reducer",["require","exports","tslib","modules/clean/react/files_view/types","modules/clean/redux/namespaces","modules/clean/teams/content_manager_modern/data/selectors/create_folder_selectors","modules/clean/teams/content_manager_modern/data/reducers/default_content_manager_state"],(function(e,t,n,a,o,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onCreateFolderCanceled=function(e){var t=e.state;return n.__assign(n.__assign({},t),s.defaultContentManagerCreateFolderState)},t.onCreateFolderClicked=function(e){var t,s=e.state;return r.shouldCreateNewFolderUsingModal(((t={})[o.CONTENT_MANAGER_NAMESPACE_KEY]=s,t))?s:n.__assign(n.__assign({},s),{folderCreationState:a.NewFolderCreationState.PENDING_INPUT})},t.onCreateFolderRequestSent=function(e){var t,s=e.state;return r.shouldCreateNewFolderUsingModal(((t={})[o.CONTENT_MANAGER_NAMESPACE_KEY]=s,t))?s:n.__assign(n.__assign({},s),{folderCreationState:a.NewFolderCreationState.SAVING_INPUT})},t.onCreateFolderCompleted=function(e){var t,s=e.state;return r.shouldCreateNewFolderUsingModal(((t={})[o.CONTENT_MANAGER_NAMESPACE_KEY]=s,t))?s:n.__assign(n.__assign({},s),{folderCreationState:a.NewFolderCreationState.CREATE_FOLDER_INACTIVE})}})),define("modules/clean/teams/content_manager_modern/data/reducers/search_reducer",["require","exports","tslib","modules/clean/teams/content_manager_modern/data/utils/search_utils","modules/core/exception","modules/clean/teams/content_manager_modern/data/reducers/default_content_manager_state"],(function(e,t,n,a,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=function(e){var t=e.state,n=e.searchQuery;return a.normalize(t.searchQuery)!==a.normalize(n)},i=function(e){var t=e.searchQuery;return""===a.normalize(t)};t.onSearchChange=function(e){var t=e.state,a=e.searchQuery,l=e.searchSessionId,c=e.searchStartIndex;return(function(e){var t=e.state,n=e.searchQuery,a=e.searchSessionId,r=e.searchStartIndex;s({state:t,searchQuery:n})&&!i({searchQuery:n})&&(o.assert(0===r,"For new searchQuery, searchStartIndex must be 0"),o.assert(t.searchSessionId!==a,"searchSessionId must be unique per normalized search"))})({state:t,searchQuery:a,searchSessionId:l,searchStartIndex:c}),s({state:t,searchQuery:a})?i({searchQuery:a})?n.__assign(n.__assign(n.__assign({},t),r.defaultContentManagerSearchState),{searchQuery:a}):n.__assign(n.__assign(n.__assign({},t),r.defaultContentManagerSearchState),{searchQuery:a,searchSessionId:l,searchIsLoadingFirstResults:!0,searchResults:[]}):(l=l||t.searchSessionId,c=c||t.searchStartIndex,n.__assign(n.__assign({},t),{searchQuery:a,searchSessionId:l,searchStartIndex:c}))},t.onSearchClear=function(e){var t=e.state;return n.__assign(n.__assign({},t),r.defaultContentManagerSearchState)},t.onSearchResults=function(e){var t=e.state,a=e.searchSessionId,o=e.searchResults,r=e.searchResultsHasMore;return a===t.searchSessionId?n.__assign(n.__assign({},t),{searchResults:t.searchResults.concat(o),searchIsLoadingFirstResults:!1,searchResultsHasMore:r}):t},t.onSearchResultHighlight=function(e){var t=e.state,a=e.searchResultsHighlightedIndex;return o.assert(a>=0&&a<t.searchResults.length,"searchResultsHighlightedIndex is out of range"),n.__assign(n.__assign({},t),{searchResultsHighlightedIndex:a})},t.onSearchResultHighlightNext=function(e){var t=e.state,a=t.searchResults.length-1,o=Math.min(t.searchResultsHighlightedIndex+1,a);return n.__assign(n.__assign({},t),{searchResultsHighlightedIndex:o})},t.onSearchResultHighlightPrevious=function(e){var t=e.state,a=Math.max(t.searchResultsHighlightedIndex-1,0);return n.__assign(n.__assign({},t),{searchResultsHighlightedIndex:a})}})),define("modules/clean/teams/content_manager_modern/data/selectors/contextual_actions_selectors",["require","exports","tslib","reselect","modules/clean/teams/content_manager_modern/data/selectors/state_selectors","modules/clean/teams/content_manager_modern/data/selectors/selectors","modules/clean/filetypes","modules/clean/teams/content_manager_modern/constants","external/lodash","modules/core/exception"],(function(e,t,n,a,o,r,s,i,l,c){"use strict";var d;Object.defineProperty(t,"__esModule",{value:!0}),l=n.__importStar(l);var u=a.createSelector(r.getSelectedFiles,(function(e){return e.every((function(e){return!e.isDeleted}))})),_=a.createSelector(r.getSelectedFiles,(function(e){return e.every((function(e){return e.type===s.FileTypes.SHARED_FOLDER||e.type===s.FileTypes.FOLDER}))})),m=a.createSelector(r.getSelectedFiles,(function(e){return e.every((function(e){return e.is_in_team_folder_tree}))})),g=a.createSelector(o.getContentManagerState,(function(e){return e.teamEnabledFileops.can_view_file_activity})),p=a.createSelector(o.getContentManagerState,(function(e){return e.teamEnabledFileops.is_cm_sel_sync_enabled})),f=function(e){return Object.keys(l.pickBy(e,l.identity))},h=a.createSelector(r.isInTeamFoldersList,r.isInsideArchiveFolder,r.shouldShowDeletedFiles,r.isUploadDownloadEnabled,r.getContextObject,(function(e,t,n,a,o){var r,s;return null===o?[]:e?f(((r={})[i.ContentManagerActionType.CREATE_TEAM_FOLDER]=!0,r)):t?[]:f(((s={})[i.ContentManagerActionType.NEW_FOLDER]=!0,s[i.ContentManagerActionType.SHOW_DELETED]=!n,s[i.ContentManagerActionType.HIDE_DELETED]=n,s[i.ContentManagerActionType.UPLOAD]=a,s))})),E=a.createSelector(p,(function(e){return function(t){var n,a,o,r;return t.type===s.FileTypes.SHARED_FOLDER?f(((n={})[i.ContentManagerActionType.MANAGE]=!0,n)):"active"===t.team_folder_status?f(((a={})[i.ContentManagerActionType.MANAGE_TEAM_FOLDER]=!0,a[i.ContentManagerActionType.RENAME_TEAM_FOLDER]=!0,a[i.ContentManagerActionType.ARCHIVE]=!0,a[i.ContentManagerActionType.CHANGE_SYNC_DEFAULT]=e,a)):"archive_in_progress"===t.team_folder_status?f(((o={})[i.ContentManagerActionType.ARCHIVE_IN_PROGRESS]=!0,o)):f(((r={})[i.ContentManagerActionType.UNARCHIVE]=!0,r[i.ContentManagerActionType.PERMANENTLY_DELETE_TEAM_FOLDER]=!0,r[i.ContentManagerActionType.RENAME_TEAM_FOLDER]=!0,r))}})),T=a.createSelector([r.isTsdPlus1,r.isTsdPlus2,r.isTeamFolder,r.isTeamFolderPlus1,p,g,r.isInsideArchiveFolder,r.isUploadDownloadEnabled],(function(e,t,n,a,o,r,l,c){return function(d){var u,_,m,g,p=c&&!d.is_cloud_doc;return l?f(((u={})[i.ContentManagerActionType.DOWNLOAD]=p,u)):d.isDeleted?d.isDeleted?f(((g={})[i.ContentManagerActionType.PERMANENTLY_DELETE]=!0,g[i.ContentManagerActionType.RESTORE]=!0,g)):[]:d.type!==s.FileTypes.SHARED_FOLDER||d.is_in_team_folder_tree?f(((m={})[i.ContentManagerActionType.MANAGE]=!0,m[i.ContentManagerActionType.DOWNLOAD]=p,m[i.ContentManagerActionType.COPY]=!0,m[i.ContentManagerActionType.DELETE]=!0,m[i.ContentManagerActionType.MOVE]=!0,m[i.ContentManagerActionType.RENAME]=!0,m[i.ContentManagerActionType.CHANGE_SYNC_DEFAULT]=o&&(d.type===s.FileTypes.SHARED_FOLDER||d.type===s.FileTypes.FOLDER)&&(e||t||n||a),m[i.ContentManagerActionType.VIEW_ACTIVITY]=!d.is_dir&&r,m[i.ContentManagerActionType.VERSION_HISTORY]=!d.is_dir,m)):f(((_={})[i.ContentManagerActionType.MANAGE]=!0,_))}}));t.getFilesActionsForSingleSelectedFile=a.createSelector([r.isInTeamFoldersList,E,T],(function(e,t,n){return function(a){return e?t(a):n(a)}}));var S=a.createSelector([r.isInTeamFoldersList,u,_,m,r.isTsdPlus1,r.isTsdPlus2,r.isTeamFolder,r.isTeamFolderPlus1,p,r.isInsideArchiveFolder,r.isUploadDownloadEnabled],(function(e,t,n,a,o,r,s,l,c,d,u){var _,m;return d?f(((_={})[i.ContentManagerActionType.DOWNLOAD]=u,_)):t&&!e&&a?f(((m={})[i.ContentManagerActionType.COPY]=!0,m[i.ContentManagerActionType.DELETE]=!0,m[i.ContentManagerActionType.MOVE]=!0,m[i.ContentManagerActionType.CHANGE_SYNC_DEFAULT]=c&&n&&(o||r||s||l),m[i.ContentManagerActionType.DOWNLOAD]=u,m)):[]})),C=a.createSelector(r.getSelectedFiles,h,t.getFilesActionsForSingleSelectedFile,S,(function(e,t,n,a){return 0===e.size?t:1===e.size?n(e.first()):a})),A=((d={})[i.ContentManagerActionType.ARCHIVE]=i.ContentManagerSecondaryActionType.ARCHIVE,d[i.ContentManagerActionType.CHANGE_SYNC_DEFAULT]=i.ContentManagerSecondaryActionType.CHANGE_SYNC_DEFAULT,d[i.ContentManagerActionType.COPY]=i.ContentManagerSecondaryActionType.COPY,d[i.ContentManagerActionType.DELETE]=i.ContentManagerSecondaryActionType.DELETE,d[i.ContentManagerActionType.DOWNLOAD]=i.ContentManagerSecondaryActionType.DOWNLOAD,d[i.ContentManagerActionType.HIDE_DELETED]=i.ContentManagerSecondaryActionType.HIDE_DELETED,d[i.ContentManagerActionType.MOVE]=i.ContentManagerSecondaryActionType.MOVE,d[i.ContentManagerActionType.NEW_FOLDER]=i.ContentManagerSecondaryActionType.NEW_FOLDER,d[i.ContentManagerActionType.PERMANENTLY_DELETE]=i.ContentManagerSecondaryActionType.PERMANENTLY_DELETE,d[i.ContentManagerActionType.PERMANENTLY_DELETE_TEAM_FOLDER]=i.ContentManagerSecondaryActionType.PERMANENTLY_DELETE_TEAM_FOLDER,d[i.ContentManagerActionType.RENAME]=i.ContentManagerSecondaryActionType.RENAME,d[i.ContentManagerActionType.RENAME_TEAM_FOLDER]=i.ContentManagerSecondaryActionType.RENAME_TEAM_FOLDER,d[i.ContentManagerActionType.SHOW_DELETED]=i.ContentManagerSecondaryActionType.SHOW_DELETED,d[i.ContentManagerActionType.VERSION_HISTORY]=i.ContentManagerSecondaryActionType.VERSION_HISTORY,d[i.ContentManagerActionType.VIEW_ACTIVITY]=i.ContentManagerSecondaryActionType.VIEW_ACTIVITY,d);t.getContextualActions=a.createSelector(C,(function(e){if(0===e.length)return{};var t,a=n.__spreadArrays(e);return a.includes(i.ContentManagerActionType.MANAGE)?(t=i.ContentManagerPrimaryActionType.MANAGE,a.splice(a.indexOf(i.ContentManagerActionType.MANAGE),1)):a.includes(i.ContentManagerActionType.RESTORE)?(t=i.ContentManagerPrimaryActionType.RESTORE,a.splice(a.indexOf(i.ContentManagerActionType.RESTORE),1)):a.includes(i.ContentManagerActionType.UPLOAD)?(t=i.ContentManagerPrimaryActionType.UPLOAD,a.splice(a.indexOf(i.ContentManagerActionType.UPLOAD),1)):a.includes(i.ContentManagerActionType.DOWNLOAD)?(t=i.ContentManagerPrimaryActionType.DOWNLOAD,a.splice(a.indexOf(i.ContentManagerActionType.DOWNLOAD),1)):a.includes(i.ContentManagerActionType.CREATE_TEAM_FOLDER)?(t=i.ContentManagerPrimaryActionType.CREATE_TEAM_FOLDER,a.splice(a.indexOf(i.ContentManagerActionType.CREATE_TEAM_FOLDER),1)):a.includes(i.ContentManagerActionType.ARCHIVE_IN_PROGRESS)?(t=i.ContentManagerPrimaryActionType.ARCHIVE_IN_PROGRESS,a.splice(a.indexOf(i.ContentManagerActionType.ARCHIVE_IN_PROGRESS),1)):a.includes(i.ContentManagerActionType.UNARCHIVE)?(t=i.ContentManagerPrimaryActionType.UNARCHIVE,a.splice(a.indexOf(i.ContentManagerActionType.UNARCHIVE),1)):a.includes(i.ContentManagerActionType.MANAGE_TEAM_FOLDER)?(t=i.ContentManagerPrimaryActionType.MANAGE_TEAM_FOLDER,a.splice(a.indexOf(i.ContentManagerActionType.MANAGE_TEAM_FOLDER),1)):a.includes(i.ContentManagerActionType.NEW_FOLDER)?(t=i.ContentManagerPrimaryActionType.NEW_FOLDER,a.splice(a.indexOf(i.ContentManagerActionType.NEW_FOLDER),1)):a.includes(i.ContentManagerActionType.DELETE)?(t=i.ContentManagerPrimaryActionType.DELETE,a.splice(a.indexOf(i.ContentManagerActionType.DELETE),1)):c.assert(!1,"should define primary action"),{primaryAction:t,secondaryActions:a.map((function(e){return A[e]}))}}))})),define("modules/clean/teams/content_manager_modern/data/selectors/create_folder_selectors",["require","exports","modules/clean/sharing/access_level","modules/clean/teams/content_manager_modern/data/selectors/state_selectors","modules/clean/teams/content_manager_modern/data/selectors/selectors","reselect","modules/clean/teams/content_manager_modern/path_util","modules/core/exception"],(function(e,t,n,a,o,r,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldCreateNewFolderUsingModal=r.createSelector(o.getPathDepth,o.isSelSyncEnabled,(function(e,t){return 0===e||1===e&&t})),t.getCreateFolderClickedArgs=r.createSelector(o.getSyncSetting,o.getPathDepth,o.isSelSyncEnabled,o.isTsdReadWriteForEveryone,t.shouldCreateNewFolderUsingModal,(function(e,t,a,o,r){return{autoTeamGroupDefaultAccessLevel:o?n.ACCESS_LEVEL.WRITER:n.ACCESS_LEVEL.READER,currentFolderSyncSetting:e,isSelSyncEnabled:a,shouldDisplayAudienceInput:0===t,shouldDisplayModal:r,shouldSyncDefault:0===t||1===t&&a&&("sync"===e||"sync_partial"===e)}})),t.getFolderCreationState=function(e){return a.getContentManagerState(e).folderCreationState},t.getAutoTeamGroupDefaultAccessLevel=function(e){return o.isTsdReadWriteForEveryone(e)?n.ACCESS_LEVEL.WRITER:n.ACCESS_LEVEL.READER},t.getCdmAutoTeamGroupId=function(e){return a.getContentManagerState(e).cdmAutoTeamGroupId},t.getShareFolderPathPrefix=r.createSelector(o.isContentManagerCdm,o.getAbsolutePath,o.getRootNsId,(function(e,t,n){return e?t:(i.assert(null!=n,"rootNsId must be defined when requesting ShareFolderPrefix"),s.nsPathForNsIdAndPath({nsId:n}))}))})),define("modules/clean/teams/content_manager_modern/data/selectors/search_selectors",["require","exports","modules/clean/teams/content_manager_modern/data/selectors/state_selectors","modules/clean/teams/content_manager_modern/data/utils/search_utils","reselect"],(function(e,t,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSearchQuery=function(e){return n.getContentManagerState(e).searchQuery},t.getSearchNormalizedQuery=o.createSelector(t.getSearchQuery,(function(e){return a.normalize(e)})),t.getSearchIsLoadingFirstResults=function(e){return n.getContentManagerState(e).searchIsLoadingFirstResults},t.getSearchResultsHighlightedIndex=function(e){return n.getContentManagerState(e).searchResultsHighlightedIndex},t.getSearchResults=function(e){return n.getContentManagerState(e).searchResults},t.getSearchStartIndex=function(e){return n.getContentManagerState(e).searchStartIndex},t.getSearchResultsHasMore=function(e){return n.getContentManagerState(e).searchResultsHasMore},t.isNewSearchService=function(e){return n.getContentManagerState(e).teamEnabledCmFeatures.is_cerebro_search_enabled}})),define("modules/clean/teams/content_manager_modern/data/selectors/selectors",["require","exports","tslib","immutable","modules/clean/filetypes","modules/clean/react/browse/models","modules/clean/react/files_view/types","reselect","external/lodash","modules/clean/viewer","modules/clean/teams/content_manager_modern/constants","modules/clean/teams/content_manager_modern/path_util","modules/clean/teams/content_manager_modern/data/selectors/search_selectors","modules/clean/fuzzy","modules/clean/filepath","modules/clean/teams/content_manager_modern/data/selectors/state_selectors","modules/core/i18n","modules/clean/react/file_uploader/utils"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_,m,g,p,f,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),l=n.__importStar(l),u=n.__importStar(u),m=n.__importDefault(m),g=n.__importStar(g);var E=i.createSelectorCreator(i.defaultMemoize,l.isEqual),T=function(e){return p.getContentManagerState(e).files},S=function(e){return p.getContentManagerState(e).teamOwnedSharedFoldersData};t.getTeamFoldersData=function(e){return p.getContentManagerState(e).teamFoldersData},t.getTeamFolderByName=function(e,t){return p.getContentManagerState(e).teamFoldersData[t]},t.getActiveTab=function(e){return p.getContentManagerState(e).activeTab},t.isContentManagerCdm=function(e){return p.getContentManagerState(e).isContentManagerCdm},t.isUploadDownloadEnabled=function(e){return p.getContentManagerState(e).teamEnabledCmFeatures.is_upload_download_enabled},t.getPath=function(e){return p.getContentManagerState(e).path};var C=i.createSelector(t.getTeamFoldersData,t.getActiveTab,(function(e,t){var n=[];return Object.keys(e).forEach((function(a){t===d.ContentManagerTab.ACTIVE_TEAM_FOLDERS&&"active"===e[a].team_folder_status?n.push(e[a]):t===d.ContentManagerTab.ARCHIVED_TEAM_FOLDERS&&["archived","archive_in_progress"].includes(e[a].team_folder_status)&&n.push(e[a])})),a.List(n)})),A=function(e,t){return a.List(l.map(m.default.filter(t,e,{extract:function(e){return g.filename(e.fq_path)}}),(function(e){return e.original})))},F=i.createSelector(C,_.getSearchNormalizedQuery,(function(e,t){return""!==t?A(e,t):e})),y=i.createSelector(S,t.getActiveTab,_.getSearchNormalizedQuery,(function(e,t,n){var o=a.List(l.values(e));return t===d.ContentManagerTab.FILES?o:t===d.ContentManagerTab.ACTIVE_TEAM_FOLDERS?""!==n?A(o,n):o:a.List()}));t.getRootNsId=function(e){return p.getContentManagerState(e).rootNsId},t.isInTeamFoldersList=i.createSelector(t.isContentManagerCdm,t.getRootNsId,(function(e,t){return!e&&null===t}));var M=i.createSelector(t.getTeamFoldersData,T,t.isInTeamFoldersList,(function(e,t,n){return n?a.List(l.values(e)):t}));t.getFiles=i.createSelector(T,F,y,t.isContentManagerCdm,t.getRootNsId,t.getPath,(function(e,t,n,a,o,r){return a||null!==o?a&&"/"===r?e.concat(n):e:t.concat(n)})),t.getTeamOwnedSharedFoldersAsFilesInSearch=i.createSelector(S,_.getSearchNormalizedQuery,(function(e,t){if(""!==t){var n=a.List(l.values(e));return A(n,t)}return a.List()})),t.getTotalNumberOfFiles=function(e){return t.getFiles(e).size},t.shouldShowDeletedFiles=function(e){return p.getContentManagerState(e).shouldShowDeletedFiles},t.isTsdReadWriteForEveryone=function(e){return p.getContentManagerState(e).isTsdReadWriteForEveryone},t.getLoadingState=function(e){return p.getContentManagerState(e).loadingState},t.getMemberCountByFilePath=function(e){return{}},t.getSort=function(e){var t=p.getContentManagerState(e);return{sortField:t.sortField,sortDirection:t.sortDirection}},t.getCurrentTeamFolderName=function(e){return p.getContentManagerState(e).currentTeamFolder},t.getTreeViewRootName=i.createSelector(t.isContentManagerCdm,t.isInTeamFoldersList,t.getCurrentTeamFolderName,(function(e,t,n){return e?f._("Content",{comment:"Displayed in a modal that displayes the the direcotry tree of the team. Content is the root element in this tree",project:"content-manager"}):t?"":f._("Team folders",{comment:"Displayed in a modal that displayes the the direcotry tree of the team. Team folder is the root element in this tree",project:"content-manager"})})),t.getAbsolutePath=i.createSelector(t.isContentManagerCdm,t.getPath,t.getCurrentTeamFolderName,(function(e,t,n){return e?t:u.joinTeamFolderAndRelativePath({teamFolder:n,relativePath:t})})),t.getUserId=function(e){return p.getContentManagerState(e).userId},t.isMacintosh=function(e){return p.getContentManagerState(e).isMacintosh},t.getContextObject=function(e){return p.getContentManagerState(e).context},t.getContext=E(t.getContextObject,(function(e){return null!=e?new r.BrowseContext(n.__assign(n.__assign({},e),{config:new r.Config(e.config)})):new r.BrowseContext({})})),t.getCurrentNsId=i.createSelector(t.getContextObject,(function(e){return l.isNull(e)||l.isUndefined(e.currentNSID)?null:e.currentNSID})),t.getCurrentNsPath=i.createSelector(t.getContextObject,(function(e){return l.isNull(e)||l.isUndefined(e.currentNSPath)?null:e.currentNSPath})),t.getCurrentMountPoint=i.createSelector(t.getContextObject,(function(e){return l.isNull(e)||l.isUndefined(e.currentMountPoint)||l.isNull(e.currentMountPoint)?null:e.currentMountPoint})),t.getActiveTeamName=function(e){return p.getContentManagerState(e).activeTeamName},t.getPathDepth=function(e){return u.getPathDepth({fqPath:t.getAbsolutePath(e)})},t.isTsdPlus1=function(e){return 0===t.getPathDepth(e)&&t.isContentManagerCdm(e)},t.isTsdPlus2=i.createSelector(t.getPathDepth,t.isContentManagerCdm,(function(e,t){return 1===e&&t})),t.isInsideArchiveFolder=i.createSelector(t.getContextObject,(function(e){return!l.isNull(e)&&!l.isUndefined(e.currentNSID)&&e.isInsideArchivedTeamFolder})),t.isInsideTeamFolder=i.createSelector(t.getTeamFoldersData,t.getCurrentTeamFolderName,(function(e,t){return null!==t&&void 0!==e[t]&&"active"===e[t].team_folder_status})),t.isTeamFolder=t.isInTeamFoldersList,t.isTeamFolderPlus1=i.createSelector(t.getPathDepth,t.isContentManagerCdm,t.isInsideTeamFolder,(function(e,t,n){return n&&1===e})),t.isSignInAsEnabled=function(e){return p.getContentManagerState(e).teamEnabledCmFeatures.is_sign_in_as_enabled||!1},t.isFileLockingTabEnabled=function(e){return p.getContentManagerState(e).teamEnabledCmFeatures.is_file_locking_tab_enabled||!1},t.isShowTeamOwnedSharedFoldersEnabled=function(e){return p.getContentManagerState(e).teamEnabledCmFeatures.is_show_team_owned_shared_folders_enabled||!1};t.getColumnsTypes=i.createSelector([function(e){return p.getContentManagerState(e).columnsTypes},t.getPathDepth],(function(e,t){return t<2?e:l.without(e,s.SortField.SYNC_SETTING)})),t.getSelection=function(e){return p.getContentManagerState(e).selection},t.getSelectedFiles=i.createSelector([t.getFiles,t.getSelection],(function(e,t){return e.filter((function(e){return t.selected.has(e.fq_path)}))})),t.getNumberSelectedFiles=i.createSelector(t.getSelectedFiles,(function(e){return e.filter((function(e){return!e.is_dir})).size})),t.getNumberSelectedSharedFolders=i.createSelector(t.getSelectedFiles,(function(e){return e.filter((function(e){return e.is_dir&&!e.is_in_team_folder_tree&&e.type===o.FileTypes.SHARED_FOLDER})).size})),t.getNumberSelectedTeamFolders=i.createSelector(t.getSelectedFiles,(function(e){return e.filter((function(e){return e.is_dir&&e.is_in_team_folder_tree||e.type===o.FileTypes.TEAM_SHARED_FOLDER})).size})),t.getSelectedFilesNamesMap=i.createSelector(t.getSelectedFiles,(function(e){return a.OrderedMap(e.map((function(e){return[e.fq_path,e]})))})),t.getFilesNsIdNsPathMap=i.createSelector(M,(function(e){return a.OrderedMap(e.map((function(e){return[e.target_ns?"ns:"+e.target_ns:"ns:"+e.ns_id+e.ns_path,e]})))})),t.getFoldersMetadata=function(e){return p.getContentManagerState(e).foldersMetadata},t.getFileCounts=i.createSelector(t.getFoldersMetadata,(function(e){return l.mapValues(e,"file_count")})),t.getFolderSizes=i.createSelector(t.getFoldersMetadata,(function(e){return l.mapValues(e,"folder_size")})),t.getUser=function(e){return c.Viewer.get_viewer().get_user_by_id(t.getUserId(e))},t.isLockedTeam=function(e){return p.getContentManagerState(e).isLockedTeam};t.getFileSharingInfoMap=i.createSelector(t.getCurrentNsId,t.getFiles,(function(e){return p.getContentManagerState(e).fileSharingInfoList}),(function(e){return p.getContentManagerState(e).teamOwnedSharedFolderSharingInfoList}),(function(e,t,n,a){var r={};if(l.isNumber(e)){var s=l.keyBy(n,"nsId"),i=l.keyBy(a,"nsId");t.filter((function(e){return!!e.target_ns})).forEach((function(e){e.type===o.FileTypes.TEAM_SHARED_FOLDER||e.is_in_team_folder_tree?r[e.target_ns]=s[e.target_ns]:r[e.target_ns]=i[e.target_ns]})),r[e]=s[e]}return r}));t.getShareModalPrefill=i.createSelector((function(e){return p.getContentManagerState(e).shareModalFilePath}),(function(e){return p.getContentManagerState(e).shareModalPrefillEmail}),t.getAbsolutePath,t.getCurrentNsId,t.getCurrentNsPath,(function(e,t,n,a,o){if(t&&a){var r=!e,s=r?o:e;return{fileFqPath:r?n:u.joinPaths({path1:n,path2:e}),isFolder:r,email:t,fileNsPath:s,fileNsId:a}}return null})),t.isSelSyncEnabled=function(e){return p.getContentManagerState(e).teamEnabledFileops.is_cm_sel_sync_enabled},t.isDgEnabled=function(e){return p.getContentManagerState(e).teamEnabledCmFeatures.is_dg_enabled||!1},t.getFileRename=function(e){return p.getContentManagerState(e).renameOperation.fileRename},t.getFSWDetails=function(e){return p.getContentManagerState(e).fswDetails},t.getSyncSettings=i.createSelector(t.getFoldersMetadata,(function(e){var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].sync_setting})),t})),t.getSyncSetting=i.createSelector(t.isInTeamFoldersList,t.getAbsolutePath,t.getSyncSettings,(function(e,t,n){return e?"sync":n[t]})),t.getMountPointMap=function(e){return p.getContentManagerState(e).mountPointMap},t.getUploadPath=function(e){return p.getContentManagerState(e).uploadPath},t.getIcons=function(e){return p.getContentManagerState(e).icons||{active:"folder_team_32",archived:"folder_team_gray_32",archive_in_progress:"folder_team_gray_32",other:""}},t.getTeamFoldersNsIdByName=i.createSelector(t.getTeamFoldersData,(function(e){var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].target_ns})),t})),t.getTeamOwnedSharedFoldersNsIds=i.createSelector(S,(function(e){return l.values(e).map((function(e){return e.target_ns}))})),t.getTeamFolderNsIdByName=function(e,n){return t.getTeamFoldersNsIdByName(e)[n]},t.getFileJumpKeys=function(e){return p.getContentManagerState(e).fileJumpkeys},t.getIsFileJumping=function(e){return""!==t.getFileJumpKeys(e)},t.getUriForFqPath=i.createSelector(t.isContentManagerCdm,t.getCurrentTeamFolderName,(function(e,t){return function(n){return e||null===t||(n=u.joinTeamFolderAndRelativePath({teamFolder:t,relativePath:n})),u.cmUriForFqPath({fqPath:""+n,isContentManagerCdm:e}).toString()}})),t.getBasePrefix=i.createSelector(t.isContentManagerCdm,(function(e){return e?d.BASE_PREFIX_CDM:d.BASE_PREFIX_GG})),t.getHomePrefix=i.createSelector(t.isContentManagerCdm,(function(e){return e?d.HOME_PREFIX_CDM:d.HOME_PREFIX_GG})),t.getDataMigrationToolInfo=function(e){return p.getContentManagerState(e).dataMigrationToolInfo},t.getDebugInfo=function(e){return p.getContentManagerState(e).debugInfo},t.getAbsolutePathForPath=i.createSelector(t.isContentManagerCdm,t.getCurrentTeamFolderName,(function(e,t){return function(n){return e?n:u.joinTeamFolderAndRelativePath({teamFolder:t,relativePath:n})}})),t.getTeamFolderActionDetails=function(e){var n=p.getContentManagerState(e).teamFolderActionDetails,a=n.teamFolderName,o=n.teamFolderActionType,r=t.getTeamFolderNsIdByName(e,a);return{isSelSyncEnabled:t.isSelSyncEnabled(e),teamFolderId:r,teamFolderName:a,teamFolderActionType:o}},t.getTeamGroupInfo=function(e){return p.getContentManagerState(e).teamGroupInfo},t.getNsIdNsPath=function(e){return function(n){var a=t.getRootNsId(e),o=t.getMountPointMap(e),r=h.getNsId(o,Number(a),n).toString();return[r,n.replace(o.get(r),"")]}},t.getExperiments=function(e){return p.getContentManagerState(e).experiments}})),define("modules/clean/teams/content_manager_modern/data/selectors/sort_selector",["require","exports","tslib","modules/clean/filepath","modules/clean/react/files_view/types","modules/clean/react/browse/models","immutable","reselect","modules/clean/teams/content_manager_modern/data/selectors/selectors","modules/core/i18n"],(function(e,t,n,a,o,r,s,i,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),s=n.__importStar(s);var d=function(e,t,n){for(var a="=ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<Math.max(e.length,t.length);o++){var r=e.charAt(o),s=t.charAt(o);if(!r)return-n;if(!s)return n;var i=a.indexOf(r),l=a.indexOf(s);if(i<l)return-n;if(l<i)return n}return 0},u=function(e,t,n,a,o,r){if(Array.isArray(e)&&Array.isArray(t)){for(var s=0;s<Math.max(e.length,t.length);s++){var i=e[s],l=t[s];if(null==i)return-n;if(null==l)return n;if("number"==typeof i&&"string"==typeof l)return-n;if("number"==typeof l&&"string"==typeof i)return n;if("string"==typeof i&&"string"==typeof l){var c=d(i,l,n);if(0!==c)return c}else{if(i<l)return-n;if(l<i)return n}}return 0}return e===t?null!=o&&null!=r?u(o,r,1,a):0:a&&"string"==typeof e&&"string"==typeof t?a(e,t)<0?-n:n:e<t?-n:n},_=function(e){return i.createSelector([l.getFiles,l.isMacintosh,l.getFileCounts,l.getFolderSizes,l.getFileSharingInfoMap,l.getSyncSettings,l.isShowTeamOwnedSharedFoldersEnabled],(n=(t=e).sortField,d=t.sortDirection,function(e,t,i,l,_,m,g){var p=d===o.SortDirection.ASCENDING?1:-1,f=c.case_insensitive_comparator(!0),h=t?function(e,t){var n=e.value,a=t.value;return u(n,a,p,f)}:function(e,t){var n=e.isFolder,a=e.value,o=t.isFolder,r=t.value;return a||(a=1/0*p),r||(r=1/0*p),n&&o?u(a,r,p,f):n?-p:o?p:u(a,r,p,f)},E=s.List();if(n===o.SortField.FILENAME)E=e.sortBy((function(e){return{isFolder:e.is_dir,value:a.filename(e.fq_path)}}),h);else if(n===o.SortField.MODIFIED)E=e.sortBy((function(e){return{isFolder:e.is_dir,value:e.ts}}),S);else if(n===o.SortField.CATEGORY)E=e.sortBy((function(e){return{isFolder:e.is_dir,fileName:g?a.filename(e.fq_path):void 0,value:r.File.getCategoryDescription(e)}}),S);else if(n===o.SortField.EXTENSION)E=e.sortBy((function(e){return{isFolder:e.is_dir,value:r.File.getExtension(e)}}),S);else if(n===o.SortField.SIZE)E=e.sortBy((function(e){return{isFolder:e.is_dir,value:l[e.fq_path]||e.bytes}}),h);else if(n===o.SortField.SYNC_SETTING){var T=["sync","sync_partial","nosync_inherited","nosync","deleted","other"];E=e.sortBy((function(e){return{isFolder:e.is_dir,value:void 0!==m[e.fq_path]?T.indexOf(m[e.fq_path]):T.indexOf("deleted")}}),C)}else n===o.SortField.FILE_COUNTS?E=e.sortBy((function(e){return{isFolder:e.is_dir,value:i[e.fq_path]||-1}}),C):n===o.SortField.SHARED_WITH&&(E=e.sortBy((function(e){return{isFolder:e.is_dir,value:e.target_ns&&_[e.target_ns]?_[e.target_ns].memberCount:e.ns_id&&_[e.ns_id]?_[e.ns_id].memberCount:-1}}),C));return E;function S(e,t){var n=e.isFolder,a=e.fileName,o=e.value,r=t.isFolder,s=t.fileName,i=t.value;return n&&r?u(o,i,p,f,a,s):n?1:r?-1:""===o?1:""===i?-1:u(o,i,p,f,a,s)}function C(e,t){var n=e.isFolder,a=e.value,o=t.isFolder,r=t.value;return n&&o?""===a?1:""===r?-1:u(a,r,p,f):n?-1:o?1:""===a?1:""===r?-1:u(a,r,p,f)}}));var t,n,d},m=(function(){for(var e={},t=0,n=[o.SortDirection.ASCENDING,o.SortDirection.DESCENDING];t<n.length;t++)for(var a=n[t],r=0,s=[o.SortField.CATEGORY,o.SortField.EXTENSION,o.SortField.FILENAME,o.SortField.MODIFIED,o.SortField.SHARED_WITH,o.SortField.SIZE,o.SortField.SYNC_SETTING,o.SortField.FILE_COUNTS];r<s.length;r++){var i=s[r];e[i+"."+a]=_({sortField:i,sortDirection:a})}return e})();t.getSortSelector=function(e){var t=e.sortField,n=e.sortDirection;return m[t+"."+n]},t.getSortedFiles=function(e){return t.getSortSelector(l.getSort(e))(e)}})),define("modules/clean/teams/content_manager_modern/data/selectors/state_selectors",["require","exports","modules/clean/redux/namespaces","modules/clean/teams/content_manager_modern/data/reducers/default_content_manager_state","modules/clean/redux/selectors"],(function(e,t,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getContentManagerState=function(e){return o.getStateAtNamespace(e,n.CONTENT_MANAGER_NAMESPACE_KEY)||a.defaultContentManagerState}})),define("modules/clean/teams/content_manager_modern/data/store",["require","exports","tslib","modules/clean/redux/store","modules/clean/redux/namespaces","modules/clean/teams/content_manager_modern/data/reducers/reducer","external/lodash"],(function(e,t,n,a,o,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s=n.__importStar(s),t.getStoreForContentManager=s.once((function(){var e;return a.getStoreAndRegisterReducers(((e={})[o.CONTENT_MANAGER_NAMESPACE_KEY]=r.contentManagerReducer,e))}))})),define("modules/clean/teams/content_manager_modern/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.FINISHED_LOADING_FOLDER="CONTENT_MANAGER/FINISHED_LOADING_FOLDER",e.FINISHED_LOADING_METADATA="CONTENT_MANAGER/FINISHED_LOADING_METADATA",e.INIT_STORE="CONTENT_MANAGER/INIT_STORE",e.LOG_EVENT="CONTENT_MANAGER/LOG_EVENT",e.ON_CHANGE_COLUMNS="CONTENT_MANAGER/ON_CHANGE_COLUMNS",e.ON_CHANGE_CURRENT_FOLDER="CONTENT_MANAGER/ON_CHANGE_CURRENT_FOLDER",e.ON_CHANGE_UPLOAD_PATH="CONTENT_MANAGER/ON_CHANGE_UPLOAD_PATH",e.ON_CHANGE_TEAM_FOLDER="CONTENT_MANAGER/ON_CHANGE_TEAM_FOLDER",e.ON_CHANGE_SELECTION="CONTENT_MANAGER/ON_CHANGE_SELECTION",e.ON_CHANGE_SHOULD_SHOW_DELETED_FILES="CONTENT_MANAGER/ON_CHANGE_SHOULD_SHOW_DELETED_FILES",e.ON_CREATE_FOLDER_CANCELED="CONTENT_MANAGER/ON_CREATE_FOLDER_CANCELED",e.ON_CREATE_FOLDER_CLICKED="CONTENT_MANAGER/ON_CREATE_FOLDER_CLICKED",e.ON_CREATE_FOLDER_COMPLETED="CONTENT_MANAGER/ON_CREATE_FOLDER_COMPLETED",e.ON_CREATE_FOLDER_REQUEST_SENT="CONTENT_MANAGER/ON_CREATE_FOLDER_REQUEST_SENT",e.ON_NEW_SORT_SELECTED="CONTENT_MANAGER/ON_NEW_SORT_SELECTED",e.ON_SEARCH_CHANGE="CONTENT_MANAGER/ON_SEARCH_CHANGE",e.ON_SEARCH_CLEAR="CONTENT_MANAGER/ON_SEARCH_CLEAR",e.ON_SEARCH_RESULTS="CONTENT_MANAGER/ON_SEARCH_RESULTS",e.ON_SEARCH_RESULT_HIGHLIGHT="CONTENT_MANAGER/ON_SEARCH_RESULT_HIGHLIGHT",e.ON_SEARCH_RESULT_HIGHLIGHT_NEXT="CONTENT_MANAGER/ON_SEARCH_RESULT_HIGHLIGHT_NEXT",e.ON_SEARCH_RESULT_HIGHLIGHT_PREVIOUS="CONTENT_MANAGER/ON_SEARCH_RESULT_HIGHLIGHT_PREVIOUS",e.ON_CHANGE_ACTIVE_TAB="CONTENT_MANAGER/ON_CHANGE_ACTIVE_TAB",e.ON_SHARING_INFO_RECEIVED="CONTENT_MANAGER/ON_SHARING_INFO_RECEIVED",e.ON_TEAM_OWNED_SHARED_FOLDER_SHARING_INFO_RECEIVED="CONTENT_MANAGER/ON_TEAM_OWNED_SHARED_FOLDER_SHARING_INFO_RECEIVED",e.STARTED_LOADING_FOLDER="CONTENT_MANAGER/STARTED_LOADING_FOLDER",e.STARTED_LOADING_REMAINING_PAGES="CONTENT_MANAGER/STARTED_LOADING_REMAINING_PAGES",e.ON_RENAME_REQUEST="CONTENT_MANAGER/ON_RENAME_REQUEST",e.ON_RENAME_SUCCESS="CONTENT_MANAGER/ON_RENAME_SUCCESS",e.ON_RENAME_ERROR="CONTENT_MANAGER/ON_RENAME_ERROR",e.ON_RENAME_CANCEL="CONTENT_MANAGER/ON_RENAME_CANCEL",e.ON_RENAME_SUBMIT_SENT="CONTENT_MANAGER/ON_RENAME_SUBMIT_SENT",e.ON_BOLT_UPDATE="CONTENT_MANAGER/ON_BOLT_UPDATE",e.ON_FSW_SHOW_REQUEST="CONTENT_MANAGER/ON_FSW_SHOW_REQUEST",e.ON_FSW_ACCEPT_SENT="CONTENT_MANAGER/ON_FSW_ACCEPT_SENT",e.ON_FSW_REJECT="CONTENT_MANAGER/ON_FSW_REJECT",e.ON_FILE_OPERATION_SUCCESS="CONTENT_MANAGER/ON_FILE_OPERATION_SUCCESS",e.STARTED_LOADING_TEAM_FOLDERS="CONTENT_MANAGER/STARTED_LOADING_TEAM_FOLDERS",e.FINISHED_LOADING_TEAM_FOLDERS="CONTENT_MANAGER/FINISHED_LOADING_TEAM_FOLDERS",e.STARTED_LOADING_TEAM_NAMESPACES="CONTENT_MANAGER/STARTED_LOADING_TEAM_NAMESPACES",e.FINISHED_LOADING_TEAM_NAMESPACES="CONTENT_MANAGER/FINISHED_LOADING_TEAM_NAMESPACES",e.ON_TEAM_FOLDERS_RECEIVED="CONTENT_MANAGER/ON_TEAM_FOLDERS_RECEIVED",e.ON_TEAM_NAMESPACES_RECEIVED="CONTENT_MANAGER/TEAM_NAMESPACES_RECEIVED",e.FILE_JUMP_KEY_PRESSED="CONTENT_MANAGER/FILE_JUMP_KEY_PRESSED",e.FILE_JUMP_KEYS_CLEARED="CONTENT_MANAGER/FILE_JUMP_KEYS_CLEARED",e.RESET_STATE="CONTENT_MANAGER/RESET_STATE",e.ON_ARCHIVE_TEAM_FOLDER_CLICKED="CONTENT_MANAGER/ON_ARCHIVE_TEAM_FOLDER_CLICKED",e.ON_ARCHIVE_TEAM_FOLDER_IN_PROGRESS="CONTENT_MANAGER/ON_ARCHIVE_TEAM_FOLDER_IN_PROGRESS",e.ON_ARCHIVE_TEAM_FOLDER_CLOSE="CONTENT_MANAGER/ON_ARCHIVE_TEAM_FOLDER_CLOSE",e.ON_PERMANENTLY_DELETE_TEAM_FOLDER_CLICKED="CONTENT_MANAGER/ON_PERMANENTLY_DELETE_TEAM_FOLDER_CLICKED",e.ON_PERMANENTLY_DELETE_TEAM_FOLDER_CLOSE="CONTENT_MANAGER/ON_PERMANENTLY_DELETE_TEAM_FOLDER_CLOSE",e.ON_UNARCHIVE_TEAM_FOLDER_FINISHED="CONTENT_MANAGER/ON_UNARCHIVE_TEAM_FOLDER_FINISHED",e.ON_ADD_GROUPS_CLOSE="CONTENT_MANAGER/ON_ADD_GROUPS_CLOSE",e.ON_DISPLAYED_PREFILL_MODAL="CONTENT_MANAGER/ON_DISPLAYED_PREFILL_MODAL",e.ON_CREATE_TEAM_FOLDER_CLICKED="CONTENT_MANAGER/ON_CREATE_TEAM_FOLDER_CLICKED",e.ON_CREATE_TEAM_FOLDER_CLOSE="CONTENT_MANAGER/ON_CREATE_TEAM_FOLDER_CLOSE",e.ON_RENAME_TEAM_FOLDER_CLICKED="CONTENT_MANAGER/ON_RENAME_TEAM_FOLDER_CLICKED",e.ON_RENAME_TEAM_FOLDER_CLOSE="CONTENT_MANAGER/ON_RENAME_TEAM_FOLDER_CLOSE",e.ON_DATA_MIGRATION_TOOL_CLICKED="CONTENT_MANAGER/ON_DATA_MIGRATION_TOOL_CLICKED",e.ON_DATA_MIGRATION_TOOL_CLOSE="CONTENT_MANAGER/ON_DATA_MIGRATION_TOOL_CLOSE"})(t.ContentManagerActionTypes||(t.ContentManagerActionTypes={})),(function(e){e.CREATE_TEAM_FOLDER="create_team_folder",e.ARCHIVE_TEAM_FOLDER="archive_team_folder",e.ADD_GROUPS_TO_TEAM_FOLDER="add_groups_to_team_folder",e.RENAME_TEAM_FOLDER="rename_team_folder",e.PERMANENTLY_DELETE_TEAM_FOLDER="permanently_delete_team_folder",e.DATA_MIGRATION_TOOL="data_migration_tool",e.NONE="none"})(t.TeamFolderActionType||(t.TeamFolderActionType={}))})),define("modules/clean/teams/content_manager_modern/data/utils/file_operations_utils",["require","exports","tslib","modules/core/i18n","modules/clean/teams/content_manager_modern/data/utils/notifications_utils","modules/clean/filepath","external/lodash"],(function(e,t,n,a,o,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importStar(r),s=n.__importStar(s);var i=new RegExp('([\\u0000-\\u001F]|\\\\|\\/|:|\\?|\\*|<|>|\\"|\\|)'),l=new RegExp('([\\u0000-\\u001F]|\\\\|\\/|:|\\?|\\*|\\"|\\|)'),c=new RegExp("[\\ufffe-\\uffff\\ud800-\\udfff]"),d=[".",".."];t.validateTeamFolderName=function(e){return e.startsWith(".")?a._("The folder name can’t start with a dot (.)",{project:"content-manager"}):t.validateFolderName(e)},t.validateFolderName=function(e){return""===e?"":e.length>255?a._("The folder name should be under 255 characters",{project:"content-manager"}):e.endsWith(".")?a._("The folder name can’t end with a dot (.)",{project:"content-manager"}):Array.from(d).includes(e)?a._("The names dot (.) and dot dot (..) are’t allowed",{project:"content-manager"}):i.test(e)?a._("The following characters aren’t allowed: \\ / : ? * < > ” |",{project:"content-manager"}):c.test(e)?a._("The folder name contains invalid characters",{project:"content-manager"}):null},t.validateFileName=function(e){return""===e?"":e.length>255?a._("The file name should be under 255 characters",{project:"content-manager"}):l.test(e)?a._("The following characters aren’t allowed: \\ / : ? * ” |",{project:"content-manager"}):c.test(e)?a._("The file name contains invalid characters",{project:"content-manager"}):null},t.handleDeleteResult=function(e){var t=e.entries.every((function(e){return"failure"===e[".tag"]}));if(t){var n=a._("There was a problem completing this request.",{project:"content-manager"});e.entries.every((function(e){return"too_many_files"===e.failure[".tag"]}))&&(n=a._("There are too many files in one request. Please retry with fewer files.",{project:"content-manager"})),o.showFailSnackbar(n)}else{var r=a.ungettext("Deleted %(num)s item.","Deleted %(num)s items.",e.entries.length,{project:"content-manager"}).format({num:e.entries.length});o.showCompleteSnackbar(r)}return t},t.onRestoreSuccess=function(e){var t,n=e.length;if(1===n){var i=s.escape(r.filename(e[0].fq_path));t=a._("Restored %(filename)s.",{project:"content-manager"}).format({filename:i})}else t=a.ungettext("Restored %(num)s file.","Restored %(num)s files.",n,{project:"content-manager"}).format({num:n});o.showCompleteSnackbar(t)},t.handleRestorePathResult=function(e,n){return 1===e.ignored_mounts.length&&0===e.count?(o.showFailSnackbar(a._("Can’t restore “%(folder_name)s” here because it was moved",{project:"content-manager"}).format({folder_name:r.filename(n[0].fq_path)})),!1):e.ignored_mounts.length>0?(o.showFailSnackbar(a.ungettext("“%(folder_name)s” restored, but an item inside it was previously moved","“%(folder_name)s” restored, but %(num)s items inside were previously moved",e.ignored_mounts.length,{project:"content-manager"}).format({num:n.length,folder_name:r.filename(n[0].fq_path)})),!0):(t.onRestoreSuccess(n),!0)},t.showDeleteSyncMessage=function(e){var t=a.ungettext("Deleting item…","Deleting items…",e.length,{project:"content-manager"});o.showSyncSnackbar(t)}})),define("modules/clean/teams/content_manager_modern/data/utils/notifications_utils",["require","exports","tslib","modules/clean/react/snackbar","react"],(function(e,t,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),t.showCompleteSnackbar=function(e){a.Snackbar.complete(e)},t.showFailSnackbar=function(e){a.Snackbar.fail(e)},t.showSyncSnackbar=function(e,t,n){return a.Snackbar.show(o.default.createElement(a.Snackbar,{syncProgressLoop:n,timeoutDelayMs:t,title:e,variant:"sync"}))},t.hideSnackbar=function(){a.Snackbar.close()},t.showSnackbarWithAction=function(e,t,n,r,s){void 0===s&&(s=5e3),a.Snackbar.show(o.default.createElement(a.Snackbar,{title:e,variant:t,timeoutDelayMs:s,actionButtonText:n,onActionClick:function(){r()}}))}})),define("modules/clean/teams/content_manager_modern/data/utils/search_utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateRandomId=function(){for(var e="",t=0;t<32;t++){var n=Math.floor(10*Math.random());e+=String(n)}return e},t.normalize=function(e){return e.trim().replace(/\ +/g," ")}})),define("modules/clean/teams/content_manager_modern/data/utils/team_folders_i18n_util",["require","exports","tslib","react","modules/clean/react_format","modules/core/i18n","modules/clean/em_string"],(function(e,t,n,a,o,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),t.getArchiveTeamFolderProgressMessage=function(e){return o.reactFormat(r._("Archiving <strong>%(folder_name)s</strong>… Archiving can take up to a few hours.").format({folder_name:s.Emstring.em_snippet(e,20)}),{strong:a.default.createElement("strong",{style:{fontWeight:800}})})}})),define("modules/clean/teams/content_manager_modern/sync_settings_i18n_util",["require","exports","tslib","react","modules/clean/react_format","modules/clean/filepath","modules/core/i18n","modules/clean/em_string"],(function(e,t,n,a,o,r,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),r=n.__importStar(r),t.getUpdateSyncSettingsProgressMessage=function(e){if(1===e.length){var t=r.filename(e[0].fq_path);return o.reactFormat(s._("Updating <strong>%(folder_name)s</strong>…").format({folder_name:t}),{strong:a.default.createElement("strong",{style:{fontWeight:800}})})}return s._("Updating folders…")},t.getUpdateSyncSettingsSuccessMessage=function(e){var t=e.files,n=e.shouldSync;if(1===t.length){var i=r.filename(t[0].fq_path);return n?o.reactFormat(s._("<strong>%(folder_name)s</strong> will start as synced.",{comment:"A notification in a snackbar, should be kept short."}).format({folder_name:i}),{strong:a.default.createElement("strong",{style:{fontWeight:800}})}):o.reactFormat(s._("<strong>%(folder_name)s</strong> will start as unsynced.",{comment:"A notification in a snackbar, should be kept short."}).format({folder_name:i}),{strong:a.default.createElement("strong",{style:{fontWeight:800}})})}return n?s._("These folders will start as synced.",{comment:"A notification in a snackbar, should be kept short.",project:"content-manager"}):s._("These folders will start as unsynced.",{comment:"A notification in a snackbar, should be kept short.",project:"content-manager"})},t.getUpdateSyncSettingsFailureMessage=function(e){if(1===e.length){var t=r.filename(e[0].fq_path);return o.reactFormat(s._("Couldn’t update sync default for <strong>%(folder_name)s</strong>. Try again.").format({folder_name:t}),{strong:a.default.createElement("strong",{style:{fontWeight:800}})})}return s._("Couldn’t update sync default for these folders. Try again.",{project:"content-manager"})},t.getFolderNameInBodySnippet=function(e){return i.Emstring.em_snippet(e,15)}})),define("modules/clean/teams/content_manager_modern/sync_settings_utils",["require","exports","modules/clean/teams/content_manager_modern/constants"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSyncSettingDescription=function(e){return n.SyncSettingTranslations[e]},t.calculateSyncSetting=function(e){var t=e.syncThisFolder,n=e.parentSyncSetting;return null===t?null:"nosync"===n&&t?"force_synced":t?"default":"not_synced"}})),define("modules/clean/teams/content_manager_modern/history/content_manager_history",["require","exports","tslib","modules/clean/history","external/lodash","modules/core/uri","modules/core/exception","modules/clean/teams/content_manager_modern/constants","modules/core/browser"],(function(e,t,n,a,o,r,s,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),o=n.__importStar(o),l=n.__importStar(l);var c=(function(){function e(e){var t=this;this._updateActiveTabByHash=function(){var e=l.get_hash();"member"===e&&t.isInCMTSDRoot?t.onSetActiveTab(i.ContentManagerTab.MEMBERS):"locked"===e&&t.isInCMTSDRoot?t.onSetActiveTab(i.ContentManagerTab.LOCKED_FILES):"team"!==e&&e||!t.isInCMTSDRoot?l.set_hash(""):t.onSetActiveTab(i.ContentManagerTab.FILES)},this._onPathChange=function(e){e="/"+r.URI.decode(e),t.browseToFolderAbsolutePath({folderAbsolutePath:e})},this.basePath=e.basePath,this.callbackPath=e.callbackPath,this.browseToFolderAbsolutePath=e.browseToFolderAbsolutePath,this.onSetActiveTab=e.onSetActiveTab,this.isInCMTSDRoot=e.isInCMTSDRoot}return e.prototype.setup=function(){a.default.set_base_prefix(this.basePath),this._sanitizeUserQueryParams(),a.default.add_callback(this.callbackPath,this._onPathChange,!0),window.addEventListener("hashchange",this._updateActiveTabByHash)},e.prototype.tearDown=function(){window.removeEventListener("hashchange",this._updateActiveTabByHash),a.default.remove_callback(this.callbackPath,this._onPathChange)},e.prototype.pushTab=function(e){e===i.ContentManagerTab.FILES&&l.get_hash()?l.set_hash("team"):e===i.ContentManagerTab.MEMBERS?l.set_hash("member"):e===i.ContentManagerTab.LOCKED_FILES&&l.set_hash("locked")},e.prototype.pushPath=function(e,t){this.isInCMTSDRoot=t,"/"===e&&(e="");var n=a.default.deconstruct_url().qargs,s=o.pick(n,i.ContentManagerQueryArg.d,i.ContentManagerQueryArg.stormcrow_override),l=e?r.URI.encode_parts(e):"";a.default.push_state(this.callbackPath+l,s,{immediatelyRestoreState:!1})},e.prototype.toggleDelete=function(e){var t,r,l=a.default.deconstruct_url(),c=l.qargs,d=l.path,u="1"===c[i.ContentManagerQueryArg.d];s.assert(u!==e,"show deleted in the url is out of sync with content manager state"),r=e?n.__assign(n.__assign({},c),((t={})[i.ContentManagerQueryArg.d]="1",t)):o.omit(c,i.ContentManagerQueryArg.d),a.default.replace_state(d,r,{immediatelyRestoreState:!1})},e.prototype._sanitizeUserQueryParams=function(){var e=a.default.deconstruct_url(),t=e.qargs,n=e.path,r=o.pick(t,i.ContentManagerQueryArg.d,i.ContentManagerQueryArg.stormcrow_override,i.ContentManagerQueryArg.select);return a.default.replace_state(n,r)},e})();t.ContentManagerHistory=c})),define("modules/clean/teams/content_manager_modern/path_util",["require","exports","modules/core/uri","modules/clean/teams/content_manager_modern/constants"],(function(e,t,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPathDepth=function(e){var t=e.fqPath;return"/"===t?0:t.split("/").length-1},t.joinPathWithFileName=function(e){var t=e.fqPath,n=e.fileName;return[t,n].join("/"===t?"":"/")},t.joinPaths=function(e){var t=e.path1,n=e.path2;return"/"===t?n:"/"===n?t:[t,n].join("")},t.joinTeamFolderAndRelativePath=function(e){var t=e.teamFolder,n=e.relativePath;return null===t?n:"/"===n?["/",t].join(""):["/",t,n].join("")},t.cmUriForFqPath=function(e){var t=e.fqPath,o=e.isContentManagerCdm;return"/"===t&&(t=""),new n.URI({scheme:"https",authority:"www.dropbox.com",path:o?""+a.HOME_PREFIX_CDM+t:""+a.HOME_PREFIX_GG+t})},t.getTeamFolder=function(e){var t=e.split("/");return t.length>1?t[1]:""},t.getRelativePath=function(e){return"/"+e.split("/").slice(2).join("/")},t.nsPathForNsIdAndPath=function(e){var t=e.nsId,n=e.path;return n?"ns:"+t+n:"ns:"+t}})),define("modules/clean/teams/content_manager_modern/view/search_bar/content_manager_search_bar_controller",["require","exports","tslib","modules/core/i18n","react","modules/clean/filepath","modules/clean/react/css","modules/clean/keycode","modules/core/dom","modules/clean/teams/content_manager_modern/view/search_bar/content_manager_search_bar_view"],(function(e,t,n,a,o,r,s,i,l,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importStar(r),l=n.__importStar(l);var d=(function(e){function t(t){var n=e.call(this,t)||this;return n._onInputChange=function(e){n.props.onSearch({searchQuery:e.currentTarget.value})},n._onInputKeydown=function(e){e.keyCode!==i.KeyCode.ESC?(e.stopPropagation(),e.keyCode===i.KeyCode.UP?(e.preventDefault(),n.props.onSearchResultHighlightPrevious()):e.keyCode===i.KeyCode.DOWN&&(e.preventDefault(),n.props.onSearchResultHighlightNext())):n.props.onSearchClear()},n._onSearchBarFocus=function(){n.setState({isFocused:!0})},n._onSearchBarBlur=function(){n.setState({isFocused:!1})},n._onSearchResultOpen=function(e){n.props.onSearchResultFileClicked({searchResultRow:e})},n._onResultObjectPathClick=function(e){n.props.onSearchResultPathClicked({searchResultRow:e})},n._onHighlightDropdownItem=function(e){n.props.onSearchResultHighlight({searchResultsHighlightedIndex:e})},n._isActive=function(){return""!==n.props.searchQuery},n.state={isFocused:!1},n}return n.__extends(t,e),t.prototype.componentWillUnmount=function(){l.scroll_unlock_document()},t.prototype.componentDidUpdate=function(e,t){var n=""!==this.props.searchNormalizedQuery,a=""!==e.searchNormalizedQuery;!t.isFocused||!a||this.state.isFocused&&n?t.isFocused&&a||!this.state.isFocused||!n||l.scroll_lock_document():l.scroll_unlock_document()},t.prototype.render=function(){var e=r.filename(this.props.absolutePath);return o.default.createElement("div",null,o.default.createElement("div",{className:"cm-search-bar-with-label-controller-title"},this.props.searchIsInFilterMode?a._("Search",{project:"content-manager"}):a._("Search %(folder_name)s",{project:"content-manager"}).format({folder_name:e})),o.default.createElement(c.ContentManagerSearchBarView,{isActive:this._isActive(),firstBreadcrumbName:this.props.firstBreadcrumbName,getAbsolutePathForPath:this.props.getAbsolutePathForPath,getUriForFqPath:this.props.getUriForFqPath,isFocused:this.state.isFocused,searchIsInFilterMode:this.props.searchIsInFilterMode,onInputChange:this._onInputChange,onInputKeydown:this._onInputKeydown,onSearchResultOpen:this._onSearchResultOpen,onSearchBarFocus:this._onSearchBarFocus,onSearchBarBlur:this._onSearchBarBlur,onHighlightDropdownItem:this._onHighlightDropdownItem,onResultObjectPathClick:this._onResultObjectPathClick,searchBarLoading:this.props.searchIsLoadingFirstResults,searchResultsHasMore:this.props.searchResultsHasMore,highlightedRow:this.props.searchResultsHighlightedIndex,suggestions:this.props.searchResults,user:this.props.user,rawQuery:this.props.searchQuery,normalizedQuery:this.props.searchNormalizedQuery,onSearchMore:this.props.onSearchMore}))},t})(o.default.Component);t.ContentManagerSearchBarController=s.requireCssWithComponent(d,["/static/css/content_manager/modern/content_manager_search_bar-vflx9slNx.css"])})),define("modules/clean/teams/content_manager_modern/view/search_bar/content_manager_search_bar_input",["require","exports","tslib","modules/clean/keycode","react","modules/core/i18n"],(function(e,t,n,a,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.focusSearchBarTextInput=function(){t.props.isFocused||t._searchBarTextInput.focus()},t._onKeyDown=function(e){e.keyCode===a.KeyCode.ESC&&t.blurSearchBarTextInput(),t.props.onInputKeydown(e,t._getCursorPosition())},t._setSearchBarTextInputRef=function(e){return t._searchBarTextInput=e},t._onSubmit=function(e){e.preventDefault(),e.stopPropagation(),t.props.highlightedRow>=0&&t.props.onSearchResultOpen(t.props.highlightedRow)},t}return n.__extends(t,e),t.prototype._getCursorPosition=function(){return this._searchBarTextInput.selectionEnd},t.prototype.getSearchBarTextInput=function(){return this._searchBarTextInput},t.prototype.blurSearchBarTextInput=function(){this._searchBarTextInput.blur(),this.props.onSearchBarBlur()},t.prototype.render=function(){var e=this.props,t=e.onInputChange,a=e.onSearchBarFocus,s=e.onSearchBarBlur,i=e.isFocused,l=e.highlightedRow,c=e.rawQuery,d=e.shouldRenderDropdown?{"aria-expanded":i,"aria-activedescendant":"search-dropdown-suggestion"+l,"aria-autocomplete":"list","aria-owns":"cm-search-bar__suggestions",role:"combobox"}:void 0,u=this.props.searchIsInFilterMode?r._("Folder name",{comment:"a placeholder for a filter input field in team/admin/team_folders",project:"content-manager"}):r._("Folder or file…",{comment:"a placeholder for an search input field in team/admin/content",project:"content-manager"});return o.default.createElement("form",{className:"cm-search-bar__input",onSubmit:this._onSubmit},o.default.createElement("input",n.__assign({"aria-label":r._("Search",{project:"content-manager"})},d,{className:"cm-search-bar__text-input",maxLength:1e3,onChange:t,onFocus:a,onBlur:s,onKeyDown:this._onKeyDown,placeholder:u,ref:this._setSearchBarTextInputRef,value:c})))},t})((o=n.__importDefault(o)).default.Component);t.ContentManagerSearchBarInput=s})),define("modules/clean/teams/content_manager_modern/view/search_bar/content_manager_search_bar_view",["require","exports","tslib","classnames","react","modules/clean/web_timing_logger","modules/clean/teams/content_manager_modern/view/search_bar/content_manager_search_bar_input"],(function(e,t,n,a,o,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),o=n.__importDefault(o),r=n.__importStar(r);var i=(function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e._renderDropdown=function(){},e._handleNavigation=function(){e._searchBarInput.blurSearchBarTextInput()},e._onSearchResultOpen=function(t){e.props.onSearchResultOpen(t),e._handleNavigation()},e._onResultObjectPathClick=function(t){e.props.onResultObjectPathClick(t),e._handleNavigation()},e._setSearchBarInputRef=function(t){return e._searchBarInput=t},e}return n.__extends(i,t),i.prototype.getSearchBarInput=function(){return this._searchBarInput},i.prototype._shouldRenderDropdown=function(){var e=this.props,t=e.normalizedQuery,n=e.searchIsInFilterMode;return!(!t||!t.length||n)},i.prototype.componentDidMount=function(){var t=this;r.waitForTTI().then((function(){new Promise((function(t,n){e(["modules/clean/teams/content_manager_modern/view/search_bar/content_manager_search_bar_dropdown"],t,n)})).then(n.__importStar).then((function(e){var n=e.ContentManagerSearchBarDropdown;t._renderDropdown=function(){var e=t.props,a=e.firstBreadcrumbName,r=e.highlightedRow,s=e.getAbsolutePathForPath,i=e.getUriForFqPath,l=e.isFocused,c=e.normalizedQuery,d=e.onHighlightDropdownItem,u=e.searchBarLoading,_=e.suggestions,m=e.user,g=e.searchResultsHasMore,p=e.onSearchMore;return o.default.createElement(n,{firstBreadcrumbName:a,highlightedRow:r,isOpen:l,getAbsolutePathForPath:s,getUriForFqPath:i,normalizedQuery:c,onHighlightDropdownItem:d,onResultObjectPathClick:t._onResultObjectPathClick,onSearchResultOpen:t._onSearchResultOpen,searchBarLoading:u,suggestions:_,user:m,searchResultsHasMore:g,onSearchMore:p})},t._shouldRenderDropdown()&&t.forceUpdate()}))}))},i.prototype.render=function(){var e=this.props,t=e.isActive,r=e.isFocused,i={"cm-search-bar--container":!0,"is-expanded":!0,"is-focused":r},l={"is-active":t,"is-collapsed":!1,"is-expanded":!0,"is-focused":r,"cm-search-bar":!0},c=this._shouldRenderDropdown();return o.default.createElement("div",{className:a.default(i)},o.default.createElement("div",{className:a.default(l)},o.default.createElement(s.ContentManagerSearchBarInput,n.__assign({},this.props,{shouldRenderDropdown:!0,ref:this._setSearchBarInputRef})),c&&this._renderDropdown()))},i})(o.default.Component);t.ContentManagerSearchBarView=i})),define("modules/clean/teams/content_manager_modern/view/search_bar/content_manager_search_bar_dropdown",["require","exports","tslib","classnames","react","modules/clean/filepath","modules/clean/react_format","modules/clean/react/browse/models","modules/clean/react/icon/file_folder_icon","modules/clean/search/models","modules/clean/search/search_helpers","modules/clean/filename_highlights","modules/core/accessible_announce","modules/core/i18n","spectrum/icon_form"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_,m,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),o=n.__importDefault(o),r=n.__importStar(r),d=n.__importStar(d),u=n.__importStar(u);var p=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._announceLoading=function(){_.AccessibleAnnounce.polite(m._("Loading search…",{project:"content-manager"}))},t._onShowMore=function(e){e.stopPropagation(),e.preventDefault(),t.props.onSearchMore()},t._renderShowMoreButton=function(){var e=o.default.createElement("div",{className:"cm-search-bar__suggestion"},o.default.createElement("a",{onMouseDown:t._onShowMore,className:"cm-search-bar__show-more"},o.default.createElement("span",null,o.default.createElement(g.IconForm,{name:"caret-down"}),o.default.createElement("span",null,m._("Show more",{project:"content-manager"})))));return t.props.searchResultsHasMore?e:o.default.createElement("noscript",null)},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.props.searchBarLoading&&this._announceLoading()},t.prototype.componentDidUpdate=function(e){var t=this.props,n=t.searchBarLoading,a=t.normalizedQuery,o=t.suggestions,r=t.onDropdownTTI;n&&!e.searchBarLoading&&this._announceLoading(),a&&e.searchBarLoading&&!n&&(_.AccessibleAnnounce.polite(m.ungettext("Found %(num)s search result","Found %(num)s search results",o.length,{project:"content-manager"}).format({num:o.length})),r&&r())},t.prototype.render=function(){for(var e=[],t=this.props.suggestions.length,r=0;r<t;r++){var s=this.props.suggestions[r],l=n.__assign(n.__assign({},this.props),{row:r,suggestionCount:t});(s instanceof c.SlimFileSearchResult||s instanceof i.File)&&e.push(o.default.createElement(f,n.__assign({},l,{resultObject:s,key:s.fq_path})))}var d={"cm-search-bar__dropdown":!0,"is-expanded":this.props.isOpen},u=0!==e.length||this.props.searchBarLoading?o.default.createElement("noscript",null):o.default.createElement("span",{className:"cm-search-bar__no-results"},m._("No results. Sorry.",{comment:"This message shows when nothing can be found from search.",project:"content-manager"}));return o.default.createElement("div",{className:a.default(d),"aria-hidden":!this.props.isOpen},o.default.createElement("ol",{className:"cm-search-bar__suggestions",id:"cm-search-bar__suggestions",role:"listbox","aria-label":m._("Suggestions",{project:"content-manager"})},u,e),this._renderShowMoreButton(),this.props.searchBarLoading&&o.default.createElement("div",{className:"cm-search-bar__loading"},o.default.createElement("span",{className:"ax-visually-hidden"},m._("Loading search...",{project:"content-manager"}))))},t})(o.default.Component);t.ContentManagerSearchBarDropdown=p;var f=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){var e=this.props.resultObject,t=r.filename(e.fq_path),a=this.props.getAbsolutePathForPath(r.parent_dir(e.fq_path)),s=this.props.firstBreadcrumbName,i=a.split("/");i.shift(),e.is_unmounted&&i.length>0&&(s=i.shift());var c=i[i.length-1];i.length>=2&&(s+="/..."),c&&c.length&&(s+="/"+c);var d,_=n.__assign({isDeleted:e.is_unmounted},e);return d=e.highlight_spans?u.highlightReactFromHighlightSpans(t,e.highlight_spans):u.highlightMatchReact(t,e.filename_highlights),o.default.createElement(h,n.__assign({},this.props,{icon:o.default.createElement(l.FileOrFolderIcon,{className:"cm-search-bar__suggestion-icon",file:_}),title:d,ariaTitle:t,location:s,isUnmounted:e.is_unmounted,parentFolderUrl:this.props.getUriForFqPath(r.parent_dir(e.fq_path))}))},t})(o.default.Component),h=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onMouseDown=function(e){e.stopPropagation(),e.preventDefault(),d.shouldHandleClick(e)&&t.props.onSearchResultOpen(t.props.row)},t._onPathLinkClick=function(e){e.stopPropagation(),e.preventDefault(),d.shouldHandleClick(e)&&t.props.onResultObjectPathClick(t.props.row)},t._onMouseEnter=function(){return t.props.onHighlightDropdownItem(t._listIndex)},t._getSearchBarDropdownSuggestionVariant=function(){var e,n=t.props,a=n.isUnmounted,r=n.location,i=n.resultObject,l=n.user,c=n.title,u=n.parentFolderUrl;e=a?s.reactFormat(m._("not added yet, in <locationSpan>%(location)s</locationSpan>",{comment:"Describes the mountable directory of a file in a list of search results."}),{location:r,locationSpan:o.default.createElement("span",{key:"location",title:r})}):s.reactFormat(m._("<locationSpan>in %(location)s</locationSpan>",{comment:"Describes the parent directory of a file in a list of search results."}),{location:r,locationSpan:o.default.createElement("span",{key:"location",title:r})});var _=d.resultObjectToUrl(i,l);return o.default.createElement("div",{className:"cm-search-bar__suggestion-name-overflow-wrapper"},o.default.createElement("a",{href:_},o.default.createElement("div",{className:"cm-search-bar__suggestion-name-star-group"},o.default.createElement("div",{className:"cm-search-bar__suggestion-name"},c))),o.default.createElement("div",{className:"cm-search-bar__suggestion-desc"},u?o.default.createElement("a",{href:u,onMouseDown:t._onPathLinkClick,className:"cm-search-bar__suggestion-desc-link"},e):o.default.createElement("span",null,e)))},t}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.highlightedRow,n=e.row,r=e.suggestionCount,s=e.icon,i=e.ariaTitle,l=e.location;this._listIndex=n;var c=this._listIndex===t,d=this._listIndex,u={"cm-search-bar__suggestion":!0,"cm-search-bar__result":!0,"cm-search-bar__suggestion--is-highlighted":c,"cm-search-bar__first-suggestion":0===d},_=m._("Search Result %(index)s of %(suggestion_count)s: %(aria_title)s in %(location)s",{project:"content-manager"}).format({index:d+1,suggestion_count:r,aria_title:i,location:l});return o.default.createElement(E,{className:a.default(u),id:"cm-search-dropdown-suggestion"+n,onMouseDown:this._onMouseDown,onMouseEnter:this._onMouseEnter,"aria-selected":c,"aria-label":_},o.default.createElement("div",{className:"mc-media-cell-icon"},s),this._getSearchBarDropdownSuggestionVariant())},t})(o.default.Component),E=function(e){return o.default.createElement("li",n.__assign({role:"option","aria-label":e["aria-label"],"aria-selected":e["aria-selected"],tabIndex:0},e))}})),define("modules/clean/teams/content_manager_modern/view/sync_settings/async_show_confirm_sync_settings_modal",["require","exports","tslib"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncShowConfirmSyncSettingsModal=function(t){var a=t.parentFolderName,o=t.folderName,r=t.onAccept,s=t.numberOfFolders,i=t.onClose,l=t.teamName;return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){e(["modules/clean/teams/content_manager_modern/view/sync_settings/confirm_sync_settings_modal"],t,n)})).then(n.__importStar)];case 1:return(0,t.sent().showConfirmSyncSettingsModal)({teamName:l,parentFolderName:a,folderName:o,onAccept:r,onClose:i,numberOfFolders:s}),[2]}}))}))}})),define("modules/clean/teams/content_manager_modern/view/actions/content_manager_contextual_actions",["require","exports","tslib","modules/core/i18n","modules/clean/teams/admin/maestro/admin_console_constants","modules/clean/teams/content_manager_modern/constants","external/lodash","modules/core/exception"],(function(e,t,n,a,o,r,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),s=n.__importStar(s);var l=function(e,t,n){return void 0===n&&(n=!1),{displayName:e,handleClick:t,uploadButton:n}},c=function(e,t,n,a){return void 0===a&&(a=o.IconGroup.Action),{displayName:e,iconName:n,handleClick:t,groupName:a}};t.getSidebarActions=function(e){var t,n,d,u,_=e.actions,m=_.primaryAction,g=_.secondaryActions,p=void 0===g?[]:g,f=e.actionHandlers;return m?{primaryMenuItem:(function(e,t){var n=s.values(s.pick(e,[t]));return i.assert(1===n.length,"should only ever be one primary action"),s.head(n)})(((t={})[r.ContentManagerPrimaryActionType.ARCHIVE_IN_PROGRESS]=l(a._("Archive in progress",{project:"content-manager"}),f.onArchiveInProgressClicked),t[r.ContentManagerPrimaryActionType.CREATE_TEAM_FOLDER]=l(a._("Create team folder",{project:"content-manager"}),f.onCreateTeamFolderClicked),t[r.ContentManagerPrimaryActionType.DOWNLOAD]=l(a._("Download",{project:"content-manager"}),f.onDownloadClicked),t[r.ContentManagerPrimaryActionType.MANAGE]=l(a._("Manage",{project:"content-manager"}),f.onManageClicked),t[r.ContentManagerPrimaryActionType.MANAGE_TEAM_FOLDER]=l(a._("Manage",{project:"content-manager"}),f.onManageTeamFolderClicked),t[r.ContentManagerPrimaryActionType.RESTORE]=l(a._("Restore",{project:"content-manager"}),f.onRestoreClicked),t[r.ContentManagerPrimaryActionType.UNARCHIVE]=l(a._("Restore",{project:"content-manager"}),f.onUnarchiveClicked),t[r.ContentManagerPrimaryActionType.UPLOAD]=l(a._("Upload…",{project:"content-manager"}),f.uploadClicked,!0),t[r.ContentManagerPrimaryActionType.NEW_FOLDER]=l(a._("New folder…",{project:"content-manager"}),f.newFolderClicked),t[r.ContentManagerPrimaryActionType.DELETE]=l(a._("Delete…",{project:"content-manager"}),f.onDeleteClicked),t),m),secondaryMenuItems:((n={})[r.ContentManagerSecondaryActionType.CHANGE_SYNC_DEFAULT]=c(a._("Change sync default",{project:"content-manager"}),f.onChangeSyncSettingClicked,"sync-settings"),n[r.ContentManagerSecondaryActionType.COPY]=c(a._("Copy",{project:"content-manager"}),f.onCopyClicked,"copy"),n[r.ContentManagerSecondaryActionType.DELETE]=c(a._("Delete",{project:"content-manager"}),f.onDeleteClicked,"delete"),n[r.ContentManagerSecondaryActionType.DOWNLOAD]=c(a._("Download",{project:"content-manager"}),f.onDownloadClicked,"download"),n[r.ContentManagerSecondaryActionType.HIDE_DELETED]=c(a._("Hide deleted files",{project:"content-manager"}),f.hideDeletedFiles,"hide"),n[r.ContentManagerSecondaryActionType.MOVE]=c(a._("Move",{project:"content-manager"}),f.onMoveClicked,"move"),n[r.ContentManagerSecondaryActionType.NEW_FOLDER]=c(a._("New folder",{project:"content-manager"}),f.newFolderClicked,"new-folder"),n[r.ContentManagerSecondaryActionType.PERMANENTLY_DELETE]=c(a._("Permanently delete",{project:"content-manager"}),f.onPermenantlyDeleteClicked,"delete-group",o.IconGroup.Admin),n[r.ContentManagerSecondaryActionType.PERMANENTLY_DELETE_TEAM_FOLDER]=c(a._("Permanently delete",{project:"content-manager"}),f.onPermenantlyDeleteTeamFolderClicked,"delete-group",o.IconGroup.Admin),n[r.ContentManagerSecondaryActionType.RENAME]=c(a._("Rename",{project:"content-manager"}),f.onRenameClicked,"rename"),n[r.ContentManagerSecondaryActionType.RENAME_TEAM_FOLDER]=c(a._("Rename",{project:"content-manager"}),f.onRenameTeamFolderClicked,"rename"),n[r.ContentManagerSecondaryActionType.SHOW_DELETED]=c(a._("Show deleted files",{project:"content-manager"}),f.showDeletedFiles,"show-deleted-files"),n[r.ContentManagerSecondaryActionType.VERSION_HISTORY]=c(a._("Version history",{project:"content-manager"}),f.onVersionHistoryClicked,"view-version-history"),n[r.ContentManagerSecondaryActionType.VIEW_ACTIVITY]=c(a._("View activity",{project:"content-manager"}),f.onViewActivityClicked,"view-version-history"),n[r.ContentManagerSecondaryActionType.ARCHIVE]=c(a._("Archive",{project:"content-manager"}),f.onArchiveClicked,"archive"),d=n,u=p,s.values(s.pick(d,u)))}:{}},t.getOverflowMenuActions=function(e,t,n){var o,i=function(t,n){return{label:t,performAction:function(){return n(e)}}},l=((o={})[r.ContentManagerActionType.ARCHIVE_IN_PROGRESS]=i(a._("Archive in progress",{project:"content-manager"}),n.onArchiveInProgressClicked),o[r.ContentManagerActionType.COPY]=i(a._("Copy",{project:"content-manager"}),n.onCopyClicked),o[r.ContentManagerActionType.DELETE]=i(a._("Delete",{project:"content-manager"}),n.onDeleteClicked),o[r.ContentManagerActionType.DOWNLOAD]=i(a._("Download",{project:"content-manager"}),n.onDownloadClicked),o[r.ContentManagerActionType.MOVE]=i(a._("Move",{project:"content-manager"}),n.onMoveClicked),o[r.ContentManagerActionType.PERMANENTLY_DELETE]=i(a._("Permanently delete",{project:"content-manager"}),n.onPermenantlyDeleteClicked),o[r.ContentManagerActionType.PERMANENTLY_DELETE_TEAM_FOLDER]=i(a._("Permanently delete",{project:"content-manager"}),n.onPermenantlyDeleteTeamFolderClicked),o[r.ContentManagerActionType.RENAME]=i(a._("Rename",{project:"content-manager"}),n.onRenameClicked),o[r.ContentManagerActionType.RENAME_TEAM_FOLDER]=i(a._("Rename",{project:"content-manager"}),n.onRenameTeamFolderClicked),o[r.ContentManagerActionType.VERSION_HISTORY]=i(a._("Version history",{project:"content-manager"}),n.onVersionHistoryClicked),o[r.ContentManagerActionType.VIEW_ACTIVITY]=i(a._("View activity",{project:"content-manager"}),n.onViewActivityClicked),o[r.ContentManagerActionType.RESTORE]=i(a._("Restore",{project:"content-manager"}),n.onRestoreClicked),o[r.ContentManagerActionType.UNARCHIVE]=i(a._("Restore",{project:"content-manager"}),n.onUnarchiveClicked),o[r.ContentManagerActionType.ARCHIVE]=i(a._("Archive",{project:"content-manager"}),n.onArchiveClicked),o[r.ContentManagerActionType.MANAGE]=i(a._("Manage",{project:"content-manager"}),n.onManageClicked),o[r.ContentManagerActionType.MANAGE_TEAM_FOLDER]=i(a._("Manage",{project:"content-manager"}),n.onManageTeamFolderClicked),o);return t.includes(r.ContentManagerActionType.CHANGE_SYNC_DEFAULT)?[s.values(s.pick(l,t)),[i(a._("Change sync default",{project:"content-manager"}),n.onChangeSyncSettingClicked)]]:[s.values(s.pick(l,t))]}})),define("modules/clean/teams/content_manager_modern/view/actions/file_actions",["require","exports","tslib","modules/clean/filepath","modules/clean/teams/content_manager_modern/path_util","modules/core/exception","modules/clean/ajax"],(function(e,t,n,a,o,r,s){"use strict";function i(e,t,n){var a={ns_id:n,ns_path:t,hide_tmfs:!0};return s.WebRequestOref({url:"/browse_util/tree_view_team_folder_contents",type:"POST",subject_user:e,data:a,dataType:"json"})}Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),s=n.__importStar(s),t._adminGetFolderGG=function(e,t){return function(n){if("/"===n)return i(e,n,-1);var a=o.getTeamFolder(n)||n,s=t.flip().get("/"+a);return r.assert(!!s,"could not find a team folder with that name"),i(e,o.getRelativePath(n),parseInt(s,10))}},t.handleMove=function(a){var o=a.user,r=a.files,s=a.context,i=a.treeViewRootName,l=a.onMoveSubmit,c=a.mountPointMap,d=a.isContentManagerCdm;return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(a){switch(a.label){case 0:return[4,new Promise((function(t,n){e(["modules/clean/react/fileops_modals"],t,n)})).then(n.__importStar)];case 1:return(0,a.sent().showAdminMove)({user:o,rootNSID:s.rootNSID,files:r,path:s.currentFQPath,treeRootName:i,dataApi:{moveFiles:l},mkAjaxRequest:d?void 0:t._adminGetFolderGG(o.id,c),isRootSelectable:d}),[2]}}))}))},t.handleCopy=function(a){var o=a.user,r=a.files,s=a.context,i=a.treeViewRootName,l=a.onCopySubmit,c=a.mountPointMap,d=a.isContentManagerCdm;return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(a){switch(a.label){case 0:return[4,new Promise((function(t,n){e(["modules/clean/react/fileops_modals"],t,n)})).then(n.__importStar)];case 1:return(0,a.sent().showAdminCopy)({user:o,rootNSID:s.rootNSID,files:r,treeRootName:i,dataApi:{copyFiles:l},mkAjaxRequest:d?void 0:t._adminGetFolderGG(o.id,c),isRootSelectable:d}),[2]}}))}))},t.handleDelete=function(t){var o=t.user,r=t.files,s=t.context,i=t.currentPath,l=t.onDeleteSubmit;return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){e(["modules/clean/react/file_modal_controller"],t,n)})).then(n.__importStar)];case 1:return[2,(0,t.sent().showDelete)(o,r,s,a.filename(i),(function(){l(r)}))]}}))}))},t.handlePermanentDelete=function(t){var a=t.user,o=t.files,r=t.onPermanentDelete;return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){e(["modules/clean/react/file_modal_controller"],t,n)})).then(n.__importStar)];case 1:return(0,t.sent().showPermanentlyDelete)(a,o,(function(){r()})),[2]}}))}))},t.handleRestore=function(t){var a=t.userId,o=t.files,r=t.context,s=t.onRestore;return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){e(["modules/clean/react/async_file_modal_controller"],t,n)})).then(n.__importStar)];case 1:return[2,(0,t.sent().showUnifiedTrashModal)({userId:a,context:r,files:o,onRestore:s})]}}))}))}})),define("modules/clean/teams/content_manager_modern/view/actions/change_sync_setting_action",["require","exports","tslib","modules/clean/teams/content_manager_modern/view/sync_settings/async_show_sync_settings_modal","modules/clean/filepath"],(function(e,t,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),t.changeSyncSettingClicked=function(e){var t=e.files,n=e.syncSettings,r=e.onChangeSyncSetting,s="SYNC",i=t.length,l=t[0],c=void 0;if(t.every((function(e){return n[e.fq_path]===n[l.fq_path]})))switch(n[l.fq_path]){case"sync":s="SYNC";break;case"nosync":case"nosync_inherited":s="DONT_SYNC";break;case"sync_partial":s="MIXED"}else s="MIXED";return 1===i&&(c=o.filename(t[0].fq_path)),a.asyncShowSyncSettingsModal({folderName:c,onSaveSyncSettings:function(e){return r({shouldSync:e,files:t,confirmSyncSettingAccepted:!1})},syncPolicy:s,numberOfFolders:i})}})),define("modules/clean/teams/content_manager_modern/view/columns/content_manager_columns",["require","exports","tslib","react","external/lodash","modules/core/i18n","modules/clean/react/files_view/types","modules/clean/teams/content_manager_modern/sync_settings_utils","spectrum/media_table","reselect","modules/clean/display_format"],(function(e,t,n,a,o,r,s,i,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),o=n.__importStar(o);t.getColumnsItems=c.createSelector([function(e){return e.fileCounts},function(e){return e.folderSizes},function(e){return e.syncSettings}],(function(e,t,n){return[{sortField:s.SortField.FILENAME,label:r._("Name",{project:"content-manager"}),popoverTriggerLabel:r._("Name",{project:"content-manager"}),isLocked:!0},{sortField:s.SortField.MODIFIED,label:r._("Modified",{project:"content-manager"}),popoverTriggerLabel:r._("Modified",{project:"content-manager"})},{sortField:s.SortField.SHARED_WITH,label:r._("Members",{project:"content-manager"}),popoverTriggerLabel:r._("Members",{project:"content-manager"})},{sortField:s.SortField.CATEGORY,label:r._("Type",{project:"content-manager"}),popoverTriggerLabel:r._("Type",{project:"content-manager"})},{sortField:s.SortField.EXTENSION,label:r._("Extension",{project:"content-manager"}),popoverTriggerLabel:r._("Extension",{project:"content-manager"})},{sortField:s.SortField.SIZE,label:r._("Size",{project:"content-manager"}),popoverTriggerLabel:r._("Size",{project:"content-manager"}),renderCell:function(e){return a.default.createElement(l.MediaCell,{className:"brws-file-size-cell",key:"file_size",title:void 0!==t[e.file.fq_path]?d.format_bytes(t[e.file.fq_path]):-1!==e.file.bytes?d.format_bytes(e.file.bytes):"--"},e.mediaActions)}},{sortField:s.SortField.SYNC_SETTING,label:r._("Sync default",{project:"content-manager"}),popoverTriggerLabel:r._("Sync default",{project:"content-manager"}),renderCell:function(e){return a.default.createElement(l.MediaCell,{className:"brws-sync_setting-cell",key:"sync_setting",title:void 0!==n[e.file.fq_path]?i.getSyncSettingDescription(n[e.file.fq_path]):e.file.isDeleted?i.getSyncSettingDescription("deleted"):"--"},e.mediaActions)}},{sortField:s.SortField.FILE_COUNTS,label:r._("Files",{project:"content-manager"}),popoverTriggerLabel:r._("Files",{project:"content-manager"}),renderCell:function(t){return a.default.createElement(l.MediaCell,{className:"brws-file-counts-cell",key:"file_counts",title:void 0!==e[t.file.fq_path]?d.formatFolderFilesCount(e[t.file.fq_path]):"--"},t.mediaActions)}}]})),t.getColumns=function(e){var n=e.columnsTypes,a=e.fileCounts,r=e.folderSizes,s=e.syncSettings,i=o.keyBy(t.getColumnsItems({fileCounts:a,folderSizes:r,syncSettings:s}),"sortField");return n.map((function(e){return i[e]}))}})),define("modules/clean/teams/content_manager_modern/view/content_manager_controller",["require","exports","tslib","react","modules/clean/web_timing_logger","modules/core/i18n","modules/clean/teams/content_manager_modern/history/content_manager_history","modules/clean/teams/content_manager_modern/view/content_manager_view","modules/clean/teams/content_manager_modern/constants","modules/clean/teams/content_manager_modern/view/sharing_management","modules/clean/react/async_file_modal_controller","modules/clean/teams/content_manager_modern/view/sync_settings/async_show_confirm_sync_settings_modal","modules/clean/teams/content_manager_modern/data/constants"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),d=n.__importStar(d),u=n.__importStar(u);var m=(function(t){function m(e){var n=t.call(this,e)||this;return n._setWindowTitle=function(){var e=n.props.absolutePath,t="",a=e.split("/").length;t="/"!==e?r._("%(folder_name)s - Dropbox",{project:"content-manager"}).format({folder_name:e.split("/")[a-1]}):r._("Content - Dropbox",{project:"content-manager"}),document.title=t},n.onComponentTTI=function(e){!1===n.ttiMarked&&(o.mark_time_to_view(),o.mark_time_to_interactive()),n.ttiMarked=!0},n.state={arePostTTIModulesLoaded:!1},n.ttiMarked=!1,n}return n.__extends(m,t),m.prototype.componentDidMount=function(){var t=this;o.waitForTTI().then((function(){Promise.all([new Promise((function(t,n){e(["modules/clean/react/starred/browse_exports"],t,n)})).then(n.__importStar),new Promise((function(t,n){e(["modules/clean/teams/content_manager_modern/view/members_tab/content_manager_members_tab"],t,n)})).then(n.__importStar),new Promise((function(t,n){e(["modules/clean/teams/content_manager_modern/view/modals/team_folder_utility_modals"],t,n)})).then(n.__importStar),new Promise((function(t,n){e(["modules/clean/teams/content_manager_modern/view/modals/create_or_rename_team_folder_modal"],t,n)})).then(n.__importStar)]).then((function(e){e[0],e[1],e[2],e[3];t.setState({arePostTTIModulesLoaded:!0})}))})),this._setWindowTitle(),this.history=new s.ContentManagerHistory({basePath:this.props.basePrefix,callbackPath:this.props.homePrefix,browseToFolderAbsolutePath:this.props.browseToFolderAbsolutePath,onSetActiveTab:this.props.onSetActiveTab,isInCMTSDRoot:this.props.isInCMTSDRoot}),this.history.setup(),this.props.activeTab===l.ContentManagerTab.MEMBERS&&this.onComponentTTI("members")},m.prototype.componentWillUnmount=function(){this.history.tearDown()},m.prototype.componentWillReceiveProps=function(e){if(e.absolutePath!==this.props.absolutePath&&this.history.pushPath(e.absolutePath,e.isInCMTSDRoot),e.activeTab!==this.props.activeTab&&this.props.isInCMTSDRoot&&this.history.pushTab(e.activeTab),e.shouldShowDeletedFiles!==this.props.shouldShowDeletedFiles&&this.history.toggleDelete(e.shouldShowDeletedFiles),e.fswDetails&&e.fswDetails!==this.props.fswDetails){var t=e.fswDetails;if(t.action===_.FswActionType.MOVE||t.action===_.FswActionType.COPY){var a=n.__assign({},t),o=a.action,r=a.payload,s=l.fswModalTranslations[o];d.showFileSystemWarningsModal({fsws:r.fsws,confirmText:s,onFinalAccept:e.onFswAccept,onAbortAction:e.onFswReject})}else if(t.action===_.FswActionType.CREATE_FOLDER_SYNC_SETTING||t.action===_.FswActionType.CHANGE_SYNC_SETTING){var i=n.__assign({},t.payload),c=i.numberOfFolders,m=i.folderName,g=i.parentFolderName,p=i.teamName;u.asyncShowConfirmSyncSettingsModal({onAccept:e.onFswAccept,numberOfFolders:c,folderName:m,parentFolderName:g,teamName:p})}}},m.prototype.componentDidUpdate=function(){this._setWindowTitle();var e=this.props,t=e.user,n=e.shareModalPrefill;n&&(this.props.onDisplayedPrefillModal(),c.handlePrefilledACL({user:t,shareModalPrefill:n}))},m.prototype.render=function(){return a.default.createElement(i.ContentManagerView,n.__assign({},this.props,{arePostTTIModulesLoaded:this.state.arePostTTIModulesLoaded,onComponentTTI:this.onComponentTTI,searchIsInFilterMode:this.props.isInTeamFoldersList}))},m})(a.default.Component);t.ContentManagerController=m})),define("modules/clean/teams/content_manager_modern/view/content_manager_file_uploader_controller",["require","exports","tslib","react","modules/clean/web_timing_logger","modules/clean/react/file_uploader/file_uploader","modules/clean/react/file_uploader/utils","modules/clean/teams/content_manager_modern/constants"],(function(e,t,n,a,o,r,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.configureFileUploaderController=function(){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(e){switch(e.label){case 0:return[4,o.waitForTTI()];case 1:return e.sent(),!1===r.FileUploaderController.isCoreComponentDefined()&&(r.FileUploaderController.loadCoreComponent(),r.FileUploaderController.setUser(this.props.user)),[2]}}))}))},t.prototype.readyToUpload=function(){return null!=this.props.rootNsId},t.prototype.componentDidMount=function(){this.readyToUpload()&&this.configureFileUploaderController()},t.prototype.componentDidUpdate=function(){this.readyToUpload()&&this.configureFileUploaderController()},t.prototype.componentWillReceiveProps=function(e){e.uploadPath!==this.props.uploadPath&&r.FileUploaderController.setPath(e.uploadPath)},t.prototype.getAjaxInterceptor=function(){var e=this;return{interceptUploadPrecheck:function(e){return n.__assign(n.__assign({},e),{is_admin_console:1})},interceptUpload:function(t,a){var o=s.getNsId(e.props.mountPointMap,Number(e.props.rootNsId),t.dest),r=t.dest.replace(e.props.mountPointMap.get(o.toString()),"");return e.props.onLogActionRequest({nsId:o,cmLogActionType:i.ContentManagerLogActionType.UPLOAD}),n.__assign(n.__assign({},a),{team_context:1,ns_id:o,ns_path:r+"/"+t.name})}}},t.prototype.handleUploadButtonClick=function(){r.FileUploaderController.handleUploadButtonClick(!1)},t.prototype.render=function(){if(this.readyToUpload()){var e=this.props.teamGroupInfo?this.props.teamGroupInfo.id:void 0;return a.default.createElement(r.FileUploaderController,{needToSetStoreValues:!0,loadOnRender:!1,isContentManager:!0,rootNSIDForCM:this.props.rootNsId,ajaxInterceptor:this.getAjaxInterceptor(),onAllFileUploadsComplete:this.props.onRefreshFolder,initialPermission:!0,initialPath:this.props.uploadPath,dragAndDropEnabled:this.props.dragAndDropEnabled,uploaderPostTTIExperiments:this.props.experiments,autoTeamGroupId:e})}return a.default.createElement("noscript",null)},t})((a=n.__importDefault(a)).default.Component);t.ContentManagerFileUploaderController=l})),define("modules/clean/teams/content_manager_modern/view/content_manager_header",["require","exports","tslib","react","modules/clean/teams/content_manager_modern/constants","modules/clean/teams/content_manager_modern/view/search_bar/content_manager_search_bar_controller","modules/clean/react/css","modules/clean/react_format","modules/core/i18n","spectrum/vertically_fixed","spectrum/tabbed_header","modules/clean/teams/content_manager_modern/view/content_manager_view_util"],(function(e,t,n,a,o,r,s,i,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var _=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return a.default.createElement("div",{className:this._getFixedHeaderShadowClass()},a.default.createElement(c.VerticallyFixed,{className:"cm-header-fixed-header"},[this._renderSearchBar(),this._renderTabs(),this._renderTopLevelEditingSettings()]))},t.prototype._getFixedHeaderShadowClass=function(){return u.getFixedHeaderShadowClass(this.props)},t.prototype._shouldRenderSearchBar=function(){return[o.ContentManagerTab.FILES,o.ContentManagerTab.ACTIVE_TEAM_FOLDERS,o.ContentManagerTab.ARCHIVED_TEAM_FOLDERS].includes(this.props.activeTab)},t.prototype._renderSearchBar=function(){return this._shouldRenderSearchBar()?a.default.createElement("div",{className:"cm-header-search-bar-padding-bottom",key:"searchBar"},a.default.createElement(r.ContentManagerSearchBarController,n.__assign({},this.props))):a.default.createElement("div",{className:"cm-header-search-bar-placeholder",key:"searchBar"})},t.prototype._shouldRenderTabs=function(){return u.shouldRenderTabs(this.props)},t.prototype._renderTabs=function(){return this._shouldRenderTabs()?this.props.isInCMTSDRoot?this._renderCdmTabbedHeader():this._renderGgTabbedHeader():null},t.prototype._renderCdmTabbedHeader=function(){var e=this.props.isShowTeamOwnedSharedFoldersEnabled?l._("Team and shared",{project:"content-manager",comment:"A title for a tab in /team/admin/content, it allows the admin to switch the active view to team files(including team folders and team owned shared folders) view"}):l._("Team",{project:"content-manager",comment:"A title for a tab in /team/admin/content, it allows the admin to switch the active view to team files(including team folders, excluding team owned shared folders) view"}),t=[a.default.createElement(d.Tab,{id:o.ContentManagerTab.FILES,key:o.ContentManagerTab.FILES,active:this.props.activeTab===o.ContentManagerTab.FILES},e)];return this.props.isSignInAsEnabled&&t.push(a.default.createElement(d.Tab,{id:o.ContentManagerTab.MEMBERS,key:o.ContentManagerTab.MEMBERS,active:this.props.activeTab===o.ContentManagerTab.MEMBERS},l._("Member",{project:"content-manager",comment:"A title for a tab in /team/admin/content, it allows the admin to switch the active view to members view"}))),this.props.isFileLockingTabEnabled&&t.push(a.default.createElement(d.Tab,{id:o.ContentManagerTab.LOCKED_FILES,key:o.ContentManagerTab.LOCKED_FILES,active:this.props.activeTab===o.ContentManagerTab.LOCKED_FILES},l._("Locked files",{project:"content-manager",comment:"A title for a tab in /team/admin/content, it allows the admin to switch the active view to locked files view"}))),a.default.createElement("div",{className:"cm-header-tabs-padding-bottom",key:"tabs"},a.default.createElement(d.TabbedHeader,{onSelection:this.props.onSetActiveTab,activeTabId:this.props.activeTab},t))},t.prototype._renderGgTabbedHeader=function(){var e=this.props.isShowTeamOwnedSharedFoldersEnabled?l._("Team and shared",{project:"content-manager",comment:"A title for a tab in /team/admin/content, it allows the admin to switch the active team folders(including team folders and team owned shared folders) view to archived team folders view"}):l._("Team folders",{project:"content-manager",comment:"A title for a tab in /team/admin/content, it allows the admin to switch the active team folders(including team folders, excluding team owned shared folders) view to archived team folders view"}),t=[a.default.createElement(d.Tab,{id:o.ContentManagerTab.ACTIVE_TEAM_FOLDERS,key:o.ContentManagerTab.ACTIVE_TEAM_FOLDERS,active:this.props.activeTab===o.ContentManagerTab.ACTIVE_TEAM_FOLDERS},e)];return this.props.isInTeamFoldersList&&t.push(a.default.createElement(d.Tab,{id:o.ContentManagerTab.ARCHIVED_TEAM_FOLDERS,key:o.ContentManagerTab.ARCHIVED_TEAM_FOLDERS,active:this.props.activeTab===o.ContentManagerTab.ARCHIVED_TEAM_FOLDERS},l._("Archived",{project:"content-manager",comment:"A title for a tab in /team/admin/team_folders, it allows the admin to switch the active team folders view to archived team folders view"}))),this.props.isFileLockingTabEnabled&&t.push(a.default.createElement(d.Tab,{id:o.ContentManagerTab.LOCKED_FILES,key:o.ContentManagerTab.LOCKED_FILES,active:this.props.activeTab===o.ContentManagerTab.LOCKED_FILES},l._("Locked files",{project:"content-manager",comment:"A title for a tab in /team/admin/team_folders, it allows the admin to switch the active team folders view to locked files view"}))),a.default.createElement("div",{className:"cm-header-tabs-padding-bottom",key:"tabs"},a.default.createElement(d.TabbedHeader,{onSelection:this.props.onSetActiveTab,activeTabId:this.props.activeTab},t))},t.prototype._shouldRenderTopLevelEditing=function(){return u.shouldRenderTopLevelEditing(this.props)},t.prototype._renderTopLevelEditingSettings=function(){var e;return this._shouldRenderTopLevelEditing()?(e=this.props.isTsdReadWriteForEveryone?i.reactFormat(l._("Everyone at %(team_name)s can edit at the top level. <a>Change setting</a>").format({team_name:this.props.activeTeamName}),{a:a.default.createElement("a",{href:"/team/admin/settings/management",className:"cm-header-top-level-editing-link"})}):i.reactFormat(l._("Members can’t edit top-level folders, but admins can edit them here. <a>Change setting</a>"),{a:a.default.createElement("a",{href:"/team/admin/settings/management",className:"cm-header-top-level-editing-link"})}),a.default.createElement("div",{className:"cm-header-top-level-editing cm-header-top-level-editing-padding-bottom",key:"topLevelEditing"},a.default.createElement("span",null,e))):null},t})((a=n.__importDefault(a)).default.Component);t.ContentManagerHeader=s.requireCssWithComponent(_,["/static/css/content_manager/modern/content_manager_header-vflZgebhq.css"])})),define("modules/clean/teams/content_manager_modern/view/content_manager_view",["require","exports","tslib","react","modules/core/exception","modules/core/i18n","modules/clean/teams/admin/maestro/admin_console_maestro_view","modules/clean/react/path_breadcrumbs","modules/clean/teams/content_manager_modern/view/content_manager_header","modules/clean/teams/content_manager_modern/view/files_view/content_manager_files_view_controller","modules/clean/react/css","modules/clean/react/files_view/types","modules/clean/teams/content_manager_modern/constants","modules/clean/react/browse/models","modules/clean/teams/content_manager_modern/view/sharing_management","modules/clean/teams/content_manager_modern/view/create_folder/create_folder","modules/clean/teams/content_manager_modern/view/actions/content_manager_contextual_actions","modules/clean/teams/content_manager_modern/view/content_manager_file_uploader_controller","modules/clean/teams/content_manager_modern/view/actions/file_actions","modules/clean/teams/content_manager_modern/view/actions/change_sync_setting_action","modules/clean/teams/content_manager_modern/view/content_manager_view_util","modules/clean/teams/content_manager_modern/data/types","modules/clean/teams/content_manager_modern/view/modals/loadable_team_folder_utility_modals","modules/clean/filepath","modules/clean/filetypes","modules/clean/teams/content_manager_modern/view/modals/loadable_create_or_rename_team_folder_modal","modules/clean/teams/content_manager_modern/view/modals/loadable_data_migration_tool_modal","modules/clean/teams/content_manager_modern/data/utils/notifications_utils","modules/clean/react/async/loadable","external/lodash","modules/clean/react_format"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_,m,g,p,f,h,E,T,S,C,A,F,y,M,N,R,v,b,I){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),F=n.__importStar(F);var D=(function(d){function v(e){var t=d.call(this,e)||this;return t.contentManagerFileUploaderController=null,t.setUploader=function(e){t.contentManagerFileUploaderController=e},t.browseLocationSetUrl=function(e){var n=e.path;""===n&&(n="/"),t.props.browseToFolderAbsolutePath({folderAbsolutePath:n})},t.hrefForFile=function(e,n){return n.is_dir&&(n.type===y.FileTypes.TEAM_SHARED_FOLDER||n.is_in_team_folder_tree)?t.props.getUriForFqPath(n.fq_path):"#"},t._renderDataMigrationTool=function(){return t.props.isInTeamFoldersList&&null!==t.props.dataMigrationToolInfo&&t.props.dataMigrationToolInfo.enabled&&(0!==t.props.files.size||t.props.folderLoadingState!==u.LoadingState.LOADED)?a.default.createElement("div",{className:"cm-view-data-migration-tool"},a.default.createElement("span",{className:"cm-view-data-migration-tool-text"},r._("Need help migrating files to Dropbox?",{project:"content-manager"})),a.default.createElement("button",{className:"button-as-link",onClick:t.props.onDataMigrationToolClicked},r._("Try the Dropbox Migration Assistant.",{project:"content-manager"}))):null},t._onArchiveTeamFolderAccept=function(){var e=t.props.teamFolderActionDetails.teamFolderName;t.props.onArchiveTeamFolderAccept(e)},t._onPermanentlyDeleteTeamFolderAccept=function(){var e=t.props.teamFolderActionDetails.teamFolderName;t.props.onPermanentlyDeleteTeamFolderAccept(e)},t._onAddGroupsAccept=function(){var e=t.props,n=e.teamGroupInfo,a=e.user,o=e.onManageSharingCompleted,r=t.props.teamFolderActionDetails,s=r.teamFolderId,i=r.teamFolderName;g.showShareModalForTeamFolder({user:a,teamFolderId:s,teamFolderName:i,prefillTeamGroup:!0,teamGroupInfo:n,onManageSharingCompleted:o})},t._renderTeamFolderActionModal=function(){var e=t.props.teamFolderActionDetails,n=e.teamFolderName,o=e.teamFolderActionType,r=e.isSelSyncEnabled,s=e.teamFolderId;return o===C.TeamFolderActionType.ARCHIVE_TEAM_FOLDER?a.default.createElement(A.LoadableArchiveTeamFolderModal,{onArchiveTeamFolderClose:t.props.onArchiveTeamFolderClose,onArchiveTeamFolderAccept:t._onArchiveTeamFolderAccept,teamFolderName:n}):o===C.TeamFolderActionType.PERMANENTLY_DELETE_TEAM_FOLDER?a.default.createElement(A.LoadablePermanentlyDeleteTeamFolderModal,{onPermanentlyDeleteTeamFolderAccept:t._onPermanentlyDeleteTeamFolderAccept,onPermanentlyDeleteTeamFolderClose:t.props.onPermanentlyDeleteTeamFolderClose,teamFolderName:n}):o===C.TeamFolderActionType.ADD_GROUPS_TO_TEAM_FOLDER?a.default.createElement(A.LoadableAddGroupsModal,{onAddGroupsClose:t.props.onAddGroupsClose,onAddGroupsAccept:t._onAddGroupsAccept,teamFolderName:n}):o===C.TeamFolderActionType.CREATE_TEAM_FOLDER?a.default.createElement(M.LoadableCreateTeamFolderModal,{onCreateTeamFolderAccept:t.props.onCreateTeamFolder,onCreateTeamFolderClose:t.props.onCreateTeamFolderClose,shouldDisplaySyncSettings:r}):o===C.TeamFolderActionType.RENAME_TEAM_FOLDER?a.default.createElement(M.LoadableRenameTeamFolderModal,{teamFolderName:n,teamFolderId:s,onRenameTeamFolderAccept:t.props.onRenameTeamFolder,onRenameTeamFolderClose:t.props.onRenameTeamFolderClose}):o===C.TeamFolderActionType.DATA_MIGRATION_TOOL?a.default.createElement(N.LoadableDataMigrationToolModal,{onDataMigrationToolModalClose:t.props.onDataMigrationToolClose,dataMigrationToolInfo:t.props.dataMigrationToolInfo}):null},t.getOverflowMenuItems=function(e,n,a){return f.getOverflowMenuActions(e,t.props.singleFileActions(e),t._getFileActionHandlers())},t.newFolderClicked=t.newFolderClicked.bind(t),t.manageClicked=t.manageClicked.bind(t),t.manageTeamFolderClicked=t.manageTeamFolderClicked.bind(t),t._changeSyncSettingClicked=t._changeSyncSettingClicked.bind(t),t.versionHistoryClicked=t.versionHistoryClicked.bind(t),t.fileActivityClicked=t.fileActivityClicked.bind(t),t.renameClicked=t.renameClicked.bind(t),t.uploadClicked=t.uploadClicked.bind(t),t.moveClicked=t.moveClicked.bind(t),t.copyClicked=t.copyClicked.bind(t),t.deleteClicked=t.deleteClicked.bind(t),t.permanentDeleteClicked=t.permanentDeleteClicked.bind(t),t.permanentDeleteTeamFolderClicked=t.permanentDeleteTeamFolderClicked.bind(t),t.restoreClicked=t.restoreClicked.bind(t),t.unarchiveClicked=t.unarchiveClicked.bind(t),t.downloadClicked=t.downloadClicked.bind(t),t.archiveTeamFolderClicked=t.archiveTeamFolderClicked.bind(t),t.renameTeamFolderClicked=t.renameTeamFolderClicked.bind(t),t}return n.__extends(v,d),v.prototype.render=function(){return a.default.createElement(s.AdminConsoleMaestroView,{header:this._renderPathBreadcrumbs(),sidebar:this._getSidebarProps()},this._renderAppContent())},v.prototype.newFolderClicked=function(){p.createFolderClicked({user:this.props.user,context:this.props.context,onCreateFolder:this.props.onCreateFolder,createFolderClickedArgs:this.props.createFolderClickedArgs,onCreateFolderClicked:this.props.onCreateFolderClicked,onCreateFolderCompleted:this.props.onCreateFolderCompleted,onLogActionRequest:this.props.onLogActionRequest,path:this.props.path,currentNsId:this.props.currentNsId})},v.prototype._getSelectedFileForSingleFileAction=function(e){return void 0!==e&&e instanceof m.File?e:(o.assert(1===this.props.selectedFiles.count(),"Number of selected files is bigger than 1 for a single file operation."),this.props.selectedFiles.first())},v.prototype.manageClicked=function(e){var t=n.__assign({},this.props),a=t.user,o=t.context,r=t.onManageSharingCompleted,s=this._getSelectedFileForSingleFileAction(e);this.props.isInTeamFoldersList&&s.type===y.FileTypes.TEAM_SHARED_FOLDER?this.manageTeamFolderClicked(e):g.doManageSharing({user:a,file:s,context:o,onManageSharingCompleted:r})},v.prototype.manageTeamFolderClicked=function(e){var t=n.__assign({},this.props),a=t.user,o=t.onManageSharingCompleted,r=t.teamGroupInfo,s=this._getSelectedFileForSingleFileAction(e);g.showShareModalForTeamFolder({user:a,teamFolderId:s.target_ns,teamFolderName:F.filename(s.fq_path),prefillTeamGroup:!1,teamGroupInfo:r,onManageSharingCompleted:o})},v.prototype._changeSyncSettingClicked=function(e){var t=e instanceof m.File?[e]:this.props.selectedFiles.toArray();T.changeSyncSettingClicked({files:t,syncSettings:this.props.syncSettings,onChangeSyncSetting:this.props.onChangeSyncSetting})},v.prototype.versionHistoryClicked=function(e){var t=this._getSelectedFileForSingleFileAction(e);this.props.onVersionHistoryClicked(t)},v.prototype.fileActivityClicked=function(e){var t=this._getSelectedFileForSingleFileAction(e);this.props.onViewActivityClicked(t)},v.prototype.renameClicked=function(e){var t=this._getSelectedFileForSingleFileAction(e);this.props.onRenameRequest(t)},v.prototype.uploadClicked=function(){null!==this.contentManagerFileUploaderController&&this.contentManagerFileUploaderController.handleUploadButtonClick()},v.prototype.moveClicked=function(e){var t=e instanceof m.File?[e]:this.props.selectedFiles.toArray(),n=this.props.treeViewRootName;E.handleMove({user:this.props.user,files:t,context:this.props.context,treeViewRootName:n,onMoveSubmit:this.props.onMoveSubmit,mountPointMap:this.props.mountPointMap,isContentManagerCdm:this.props.isContentManagerCdm})},v.prototype.copyClicked=function(e){var t=e instanceof m.File?[e]:this.props.selectedFiles.toArray(),n=this.props.treeViewRootName;E.handleCopy({user:this.props.user,files:t,context:this.props.context,treeViewRootName:n,onCopySubmit:this.props.onCopySubmit,mountPointMap:this.props.mountPointMap,isContentManagerCdm:this.props.isContentManagerCdm})},v.prototype.deleteClicked=function(e){var t=n.__assign({},this.props),a=t.user,o=t.selectedFiles,r=t.context,s=t.path,i=t.onDeleteSubmit,l=e instanceof m.File?[e]:o.toArray();E.handleDelete({user:a,files:l,context:r,currentPath:s,onDeleteSubmit:i})},v.prototype.permanentDeleteClicked=function(e){var t=n.__assign({},this.props),a=t.user,o=t.onPermanentDeleteSubmit,r=this._getSelectedFileForSingleFileAction(e);E.handlePermanentDelete({user:a,files:[r],onPermanentDelete:function(){o(r)}})},v.prototype.permanentDeleteTeamFolderClicked=function(e){var t=n.__assign({},this.props).onPermanentlyDeleteTeamFolderClicked,a=this._getSelectedFileForSingleFileAction(e);t(F.filename(a.fq_path))},v.prototype.restoreClicked=function(e){var t=n.__assign({},this.props),a=t.user,o=t.context,r=t.onRestoreSubmit,s=this._getSelectedFileForSingleFileAction(e);E.handleRestore({userId:a.id,files:[s],context:o,onRestore:function(){r(s)}})},v.prototype.unarchiveClicked=function(e){var t=n.__assign({},this.props).onUnarchiveTeamFolderClicked,a=this._getSelectedFileForSingleFileAction(e);t(F.filename(a.fq_path))},v.prototype.downloadClicked=function(e){var t=e instanceof m.File?[e]:this.props.selectedFiles.toArray();this.props.onDownloadFilesClicked(t)},v.prototype.archiveTeamFolderClicked=function(e){var t=this._getSelectedFileForSingleFileAction(e);this.props.onArchiveTeamFolderClicked(F.filename(t.fq_path))},v.prototype.renameTeamFolderClicked=function(e){var t=this._getSelectedFileForSingleFileAction(e);this.props.onRenameTeamFolderClicked(F.filename(t.fq_path))},v.prototype._getGlobalActionHandlers=function(){return{showDeletedFiles:this.props.showDeletedFiles,hideDeletedFiles:this.props.hideDeletedFiles,newFolderClicked:this.newFolderClicked,uploadClicked:this.uploadClicked,onCreateTeamFolderClicked:this.props.onCreateTeamFolderClicked}},v.prototype._getFileActionHandlers=function(){return{onManageClicked:this.manageClicked,onManageTeamFolderClicked:this.manageTeamFolderClicked,onDownloadClicked:this.downloadClicked,onCopyClicked:this.copyClicked,onDeleteClicked:this.deleteClicked,onMoveClicked:this.moveClicked,onRenameClicked:this.renameClicked,onRenameTeamFolderClicked:this.renameTeamFolderClicked,onViewActivityClicked:this.fileActivityClicked,onVersionHistoryClicked:this.versionHistoryClicked,onChangeSyncSettingClicked:this._changeSyncSettingClicked,onRestoreClicked:this.restoreClicked,onUnarchiveClicked:this.unarchiveClicked,onPermenantlyDeleteClicked:this.permanentDeleteClicked,onPermenantlyDeleteTeamFolderClicked:this.permanentDeleteTeamFolderClicked,onArchiveClicked:this.archiveTeamFolderClicked,onArchiveInProgressClicked:function(){R.showSyncSnackbar(r._("Archive in progress",{project:"content-manager"}),5e3)}}},v.prototype._getContextualActionHandlers=function(){return n.__assign(n.__assign({},this._getGlobalActionHandlers()),this._getFileActionHandlers())},v.prototype._renderDebugInfo=function(){var e=this;return this.props.debugInfo?a.default.createElement("div",null,Object.keys(this.props.debugInfo).map((function(t){return a.default.createElement("div",null,t,": ",e.props.debugInfo[t])}))):null},v.prototype._getLockedFilesSidebarProps=function(){var e=this;if(this.locked_files){var t=this.locked_files.selectedFilesSize(),n=r.ungettext("%(count)d item selected","%(count)d items selected",t,{project:"locked-files"}).format({count:t});return{primaryMenuItem:{displayName:r._("Unlock Files",{project:"locked-files"}),handleClick:this.locked_files?function(){return e.locked_files.onUnlockFilesClicked()}:b.noop,uploadButton:!0,disabled:0===t},headerText:0===t?"":n}}return{}},v.prototype._getSidebarProps=function(){var e=n.__assign({},this.props),t=e.actions,a=e.activeTab;if(a===_.ContentManagerTab.MEMBERS)return{};if(a===_.ContentManagerTab.LOCKED_FILES)return this._getLockedFilesSidebarProps();var o=f.getSidebarActions({actions:t,actionHandlers:this._getContextualActionHandlers()});return n.__assign(n.__assign({},o),{headerText:this._renderHeaderText(),debugInfo:this._renderDebugInfo(),primarySubnode:this._renderSharedFolderMessage()})},v.prototype._renderHeaderText=function(){var e=this.props.selectedFiles,t=this.props.numberSelectedFiles,n=this.props.numberSelectedSharedFolders,a=this.props.numberSelectedTeamFolders,o="";if(0===e.size)return o;if(0!==t)o=r.ungettext("%(count)d item selected","%(count)d items selected",e.size,{project:"content-manager"}).format({count:e.size});else if(0===n&&0!==a)o=r.ungettext("%(count)d team folder selected","%(count)d team folders selected",a,{project:"content-manager"}).format({count:a});else if(0!==n&&0===a)o=r.ungettext("%(count)d shared folder selected","%(count)d shared folders selected",n,{project:"content-manager"}).format({count:n});else if(0!==n&&0!==a){var s=r.ungettext("%(count)d shared folder","%(count)d shared folders",n,{project:"content-manager"}).format({count:n});o=r.ungettext("%(count)d team folder","%(count)d team folders",a,{project:"content-manager"}).format({count:a})+", "+s}return o},v.prototype._renderSharedFolderMessage=function(){if(0===this.props.numberSelectedSharedFolders)return null;var e=I.reactFormat(r._("You can’t edit shared folders here. <a>How to sign in as the owner</a>"),{a:a.default.createElement("a",{href:"https://help.dropbox.com/teams-admins/admin/sign-in-as-user",target:"_blank",rel:"noopener noreferrer"})});return a.default.createElement("div",null,a.default.createElement("span",null,e))},v.prototype.browseLocationFirstBreadcrumbName=function(){return r._("Content",{project:"content-manager"})},v.prototype._renderPathBreadcrumbs=function(){return a.default.createElement(i.PathBreadcrumbs,{path:this.props.absolutePath,firstBreadcrumbName:this.browseLocationFirstBreadcrumbName(),firstBreadcrumbAlt:r._("Work",{project:"content-manager"}),getUrlForPath:this.props.getUriForFqPath,setUrl:this.browseLocationSetUrl})},v.prototype._renderAppContent=function(){var e;return e=this.props.activeTab===_.ContentManagerTab.MEMBERS?this._renderContentManagerMemberFolders():this.props.activeTab===_.ContentManagerTab.LOCKED_FILES?this._renderContentManagerLockedFilesTab():this._renderContentManagerFilesTab(),a.default.createElement("div",null,a.default.createElement(l.ContentManagerHeader,n.__assign({},this.props,{firstBreadcrumbName:this.browseLocationFirstBreadcrumbName()})),e)},v.prototype._renderContentManagerMemberFolders=function(){if(this.props.arePostTTIModulesLoaded){var t=e("modules/clean/teams/content_manager_modern/view/members_tab/content_manager_members_tab").ContentManagerMembersTab;return a.default.createElement(t,{user:this.props.user,isLockedTeam:this.props.isLockedTeam})}return a.default.createElement(O,null)},v.prototype._getColumnMenuHackClass=function(){return S.getColumnMenuHackClass(this.props)},v.prototype._getColumnMenuHackHeight=function(){return S.getColumnMenuHackHeight(this.props)},v.prototype._renderContentManagerFilesTab=function(){return a.default.createElement("div",{className:this._getColumnMenuHackClass()},a.default.createElement(h.ContentManagerFileUploaderController,{ref:this.setUploader,uploadPath:this.props.uploadPath,user:this.props.user,rootNsId:this.props.rootNsId,mountPointMap:this.props.mountPointMap,onRefreshFolder:this.props.onRefreshFolder,onLogActionRequest:this.props.onLogActionRequest,dragAndDropEnabled:this.props.isUploadDownloadEnabled,experiments:this.props.experiments,teamGroupInfo:this.props.teamGroupInfo}),a.default.createElement(c.ContentManagerFilesViewController,n.__assign({},this.props,{getOverflowMenuItems:this.getOverflowMenuItems,onManageSharingClicked:this.manageClicked,hrefForFile:this.hrefForFile,pageHeaderHeight:this._getColumnMenuHackHeight()})),this._renderDataMigrationTool(),this._renderTeamFolderActionModal())},v.prototype._renderContentManagerLockedFilesTab=function(){var e=this;return a.default.createElement(t.LockedFilesContent,n.__assign({},{userId:this.props.user.id,setLockedFilesContent:function(t){return e.locked_files=t}}))},v})(a.default.Component);t.ContentManagerViewWithoutCSS=D,t.LockedFilesContent=v.Loadable({loader:function(){return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){e(["modules/clean/react/locked_files/locked_files_content"],t,n)})).then(n.__importStar)];case 1:return[2,t.sent().LockedFilesContent]}}))}))},loading:function(){return a.default.createElement(O,null)}});var O=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.render=function(){return a.default.createElement("div",{className:"loading-indicator"},a.default.createElement("img",{src:"/static/images/icons/ajax-loading-small-vfl3Wt7C_.gif",alt:r._("Loading",{project:"content-manager"})}))},t})(a.default.Component);t.ContentManagerView=d.requireCssWithComponent(D,["/static/css/content_manager/modern/content_manager_hacks-vflW4EvUn.css","/static/css/content_manager/modern/content_manager_view-vflXl1VYl.css"])})),define("modules/clean/teams/content_manager_modern/view/content_manager_view_util",["require","exports","modules/clean/teams/content_manager_modern/constants"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getColumnMenuHackClass=function(e){var n=e.isInCMTSDRoot,a=e.isSignInAsEnabled,o=e.isInTeamFoldersList,r=e.activeTab,s=e.isFileLockingTabEnabled,i="cm-column-menu-hack-for-header";switch(t.getFixedHeaderShadowClass({isInCMTSDRoot:n,isSignInAsEnabled:a,isInTeamFoldersList:o,activeTab:r,isFileLockingTabEnabled:s})){case"cm-header-shadow":i="cm-column-menu-hack-for-header";break;case"cm-header-shadow-with-tabs":i="cm-column-menu-hack-for-header-with-tabs";break;case"cm-header-shadow-with-top-level-editing":i="cm-column-menu-hack-for-header-with-top-level-editing";break;case"cm-header-shadow-with-tabs-and-top-level-editing":i="cm-column-menu-hack-for-header-with-tabs-and-top-level-editing"}return i};t.getColumnMenuHackHeight=function(e){switch(t.getColumnMenuHackClass(e)){case"cm-column-menu-hack-for-header":return 243;case"cm-column-menu-hack-for-header-with-tabs":return 299;case"cm-column-menu-hack-for-header-with-top-level-editing":return 283;case"cm-column-menu-hack-for-header-with-tabs-and-top-level-editing":return 339}},t.getFixedHeaderShadowClass=function(e){var a=e.isInCMTSDRoot,o=e.isSignInAsEnabled,r=e.isInTeamFoldersList,s=e.activeTab,i=e.isFileLockingTabEnabled;return t.shouldRenderTabs({isInCMTSDRoot:a,isSignInAsEnabled:o,isInTeamFoldersList:r,isFileLockingTabEnabled:i})?s===n.ContentManagerTab.FILES?"cm-header-shadow-with-tabs-and-top-level-editing":"cm-header-shadow-with-tabs":t.shouldRenderTopLevelEditing({isInCMTSDRoot:a,activeTab:s})?"cm-header-shadow-with-top-level-editing":"cm-header-shadow"},t.shouldRenderTopLevelEditing=function(e){var t=e.isInCMTSDRoot,a=e.activeTab;return t&&a===n.ContentManagerTab.FILES},t.shouldRenderTabs=function(e){var t=e.isInCMTSDRoot,n=e.isSignInAsEnabled,a=e.isInTeamFoldersList,o=e.isFileLockingTabEnabled;return t&&n||a||t&&o}})),define("modules/clean/teams/content_manager_modern/view/create_folder/create_folder",["require","exports","tslib","modules/core/exception","external/lodash","modules/clean/sharing/browse_exports","modules/clean/teams/content_manager_modern/constants","modules/clean/teams/content_manager_modern/content_manager_api"],(function(e,t,n,a,o,r,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),r=n.__importStar(r);t.createFolderClicked=function(e){var t=e.user,n=e.context,l=e.onCreateFolder,c=e.createFolderClickedArgs,d=e.currentNsId,u=e.onCreateFolderClicked,_=e.onCreateFolderCompleted,m=e.onLogActionRequest,g=e.path;a.assert(null!==d,"current nsId must not be null"),u(),c.shouldDisplayModal&&r.asyncShowCdmNewFolderModal((function(e){var t=e.onCreateFolder,n=e.onCreateFolderCompleted,a=e.onLogActionRequest,l=e.currentNsId,c=e.path,d=e.user;return function(e){var u=e.folderName,_=e.isConfidential,m=e.autoTeamGroupAccessLevel,g=e.syncThisFolder;if(_)return r.asyncShowNewFolderShareModal(d,null,c,u,_,!0,g,o.noop,i.validateFolderPath,(function(){a({cmLogActionType:s.ContentManagerLogActionType.SHARE_FOLDER,nsId:l}),n()}));t({folderName:u,autoTeamGroupAccessLevel:m,syncThisFolder:g})}})({onCreateFolder:l,onCreateFolderCompleted:_,onLogActionRequest:m,currentNsId:d,path:g,user:t}),t,n,c.shouldSyncDefault,c.isSelSyncEnabled,c.shouldDisplayAudienceInput,c.autoTeamGroupDefaultAccessLevel)}})),define("modules/clean/teams/content_manager_modern/view/files_view/content_manager_empty_folder_with_image",["require","exports","tslib","classnames","react","modules/clean/react/css","modules/clean/analytics","modules/clean/react/button","modules/clean/react/image","modules/clean/sharing/access_level","modules/core/i18n","modules/clean/static_urls"],(function(e,t,n,a,o,r,s,i,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),o=n.__importDefault(o);var _=[c.NameSpaceAccess.ACCESS_READER,c.NameSpaceAccess.ACCESS_READER_NO_COMMENT],m=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.logEmptyFolderView=function(){var e;e=this.props.isInsideTeamFolderTree?"view_team_folder":this.props.isInsideSharedFolder?"view_shared_folder":"view_normal_folder",this.logTeamAction(e)},t.prototype.logTeamAction=function(e){s.TeamsWebActionsLogger.log(e,void 0,void 0,this.props.userId,!1,s.TeamsWebActionsLogger.LOG_CATEGORY.TEAM_INFO)},t.prototype.componentDidMount=function(){this.props.onComponentTTI("EmptyFolderWithImage")},t.prototype.getImgSrc=function(){return this.props.isViewingTeamFolder?u.static_url("/static/images/empty_states/team-folder-vflZkv0TQ.png"):u.static_url("/static/images/empty_states/files-vflIwBf8z.png")},t.prototype.getImgSrcHiRes=function(){return this.props.isViewingTeamFolder?u.static_url("/static/images/empty_states/team-folder@2x-vfloC8f3o.png"):u.static_url("/static/images/empty_states/files@2x-vfl62rava.png")},t.prototype.getImgAlt=function(){return this.props.isViewingTeamFolder?d._("empty team folder",{project:"content-manager"}):d._("empty folder",{project:"content-manager"})},t.prototype.getTagLine=function(){return o.default.createElement("h2",{className:"empty-folder__tagline"},d._("This folder is empty",{project:"content-manager"}))},t.prototype.render=function(){var e=this.props,t=e.isInsideSharedFolder,n=e.currentSharedFolderPermissionRole,r=e.isSearchState,s=e.isViewingTeamFolder,c=a.default("u-pad-top-xl","cm-empty-folder");if(r&&s)return o.default.createElement("div",{className:c},o.default.createElement(l.Image,{src:u.static_url("/static/images/empty_states/search-vflHMNVT9.png"),srcHiRes:u.static_url("/static/images/empty_states/search@2x-vfly2B3kk.png"),alt:""}),o.default.createElement("h2",{className:"u-pad-top-l"},d._("No results found",{project:"content-manager"})),o.default.createElement("div",null,d._("Please update your search and try again",{project:"content-manager"})));if(this.props.isArchiveState)return o.default.createElement("div",{className:a.default(c,"u-font-meta")},d._("No archived team folders",{project:"content-manager"}));if(this.props.isViewingTeamFolder)return o.default.createElement("div",{className:c,id:"cm-empty-state"},o.default.createElement(l.Image,{src:u.static_url("/static/images/empty_states/collaboration-team-folder-vflnrpwiW.png"),srcHiRes:u.static_url("/static/images/empty_states/collaboration-team-folder@2x-vfln-yHyS.png"),alt:""}),o.default.createElement("div",{className:"u-font-center u-font-meta cm-empty-folder-description"},d._("Team folders let you share with your entire department or team.",{project:"content-manager"})," ",o.default.createElement("a",{href:"/help/9263",target:"_blank",rel:"noopener noreferrer"},d._("Learn how",{project:"content-manager"}))),o.default.createElement(i.button,{onClick:this.props.onCreateTeamFolder},d._("Create team folder",{project:"content-manager"})),this.props.enableDataMigrationTool&&o.default.createElement("div",{className:"u-font-center u-font-meta cm-empty-folder-with-image-data-migration-tool"},d._("Need help migrating files to Dropbox?",{project:"content-manager"}),o.default.createElement("button",{className:"cm-empty-folder-with-image-data-migration-tool-link button-as-link",onClick:this.props.onShowDataMigrationToolModal},d._("Dropbox Migration Assistant",{project:"content-manager"}))));this.logEmptyFolderView(),s&&this.logTeamAction("upload_files_displayed");var m=t&&_.includes(n);return o.default.createElement("div",{className:"cm-empty-folder-container"},o.default.createElement("div",{className:c},o.default.createElement(l.Image,{src:this.getImgSrc(),srcHiRes:this.getImgSrcHiRes(),alt:this.getImgAlt(),className:"empty-folder__image"}),this.getTagLine(),o.default.createElement("div",{className:a.default({"u-l-dn":m,"drag-prompt":!0})})))},t})(o.default.PureComponent);t.EmptyFolderWithImageWithoutCSS=m,t.EmptyFolderWithImage=r.requireCssWithComponent(m,["/static/css/content_manager/modern/content_manager_empty_folder_with_image-vflKGyw5B.css"])})),define("modules/clean/teams/content_manager_modern/view/files_view/content_manager_files_view_controller",["require","exports","tslib","react","modules/clean/react/selection","modules/clean/teams/content_manager_modern/view/columns/content_manager_columns","modules/clean/react/files_view/constants","modules/clean/react/files_view/controller","modules/clean/react/files_view/types","modules/clean/filetypes","modules/clean/teams/content_manager_modern/view/files_view/content_manager_empty_folder_with_image","modules/clean/teams/content_manager_modern/view/files_view/content_manager_shared_with_controller","modules/core/i18n","modules/clean/teams/content_manager_modern/constants"],(function(e,t,n,a,o,r,s,i,l,c,d,u,_,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a);var g=function(e){return n.__assign(n.__assign(n.__assign(n.__assign(n.__assign({},(function(e){return{onDelete:function(e){},onShowRename:function(t){e.onRenameRequest(t)},onNewFolderSubmit:function(t){e.onCreateFolder({folderName:t,syncThisFolder:null})},onNewFolderCancel:function(){e.onCreateFolderCanceled()},onRenameSubmit:function(t,n){e.onRenameSubmit({file:t,newName:n})},onRenameCancel:function(t){e.onRenameCancel()},onCopyToClipboard:function(e){},onPasteFromClipboard:function(){},onSwitchViewType:function(e){},onColumnsChanged:function(t,n,a){return e.onColumnsChange(t)},onCanDisplayFolderSizesChanged:function(e){},onAddFileJumpKeyCode:e.onAddFileJumpKeyCode,onResetFileJump:e.onResetFileJump,onShowShare:function(t,n){e.onManageSharingClicked(t)}}})(e)),(function(e){return{onLocationLinkClick:function(e,t){},onNavigateToFileOrFolder:function(t){t.is_dir&&(t.type===c.FileTypes.TEAM_SHARED_FOLDER||t.is_in_team_folder_tree)?e.browseToFolder({folderPath:t.fq_path}):e.onSelectionChange(o.createSelection([t.fq_path]))},onNavigateToParentFolder:e.onNavigateToParentFolder,onOpenFileSharedWithMe:function(e){},onOpenPaper:function(e){}}})(e)),(function(e){return{onSelectionChange:e.onSelectionChange,onSortChange:e.onSortChange,onStarClick:function(e,t){},onComponentTTI:function(t){e.onComponentTTI(t)},setFileUploaderPath:function(t){e.onChangeUploadPath(t.path)},showFileUploaderModal:function(){},getOverflowMenuActions:e.getOverflowMenuItems,onAddFileJumpKeyCode:e.onAddFileJumpKeyCode,onResetFileJump:e.onResetFileJump,onFocusSearchBar:function(){return document.getElementsByClassName("cm-search-bar__text-input")[0].focus()}}})(e)),(function(e){return{enableUnity:!1,viewTypes:[l.ViewType.List],viewTypeLabels:s.ViewTypeLabels,viewType:l.ViewType.List,responsive:{isResponsive:!1,isMatchedMedium:!1,isMatchedLarge:!0},arePostTTIModulesLoaded:e.arePostTTIModulesLoaded,customEmptyFolderView:p(e),renderSharedWithController:u.createSharedWithController({fileSharingInfoMap:e.fileSharingInfoMap}),hrefForFile:e.hrefForFile,shareButtonLabel:_._("Manage",{project:"content-manager"}),showShareButton:!(e.activeTab===m.ContentManagerTab.ARCHIVED_TEAM_FOLDERS||e.isInsideArchivedTeamFolder),stickyOffsetTop:e.pageHeaderHeight}})(e)),(function(e){var t,n=((t={})[l.ViewType.List]=r.getColumns({columnsTypes:e.columnsTypes,fileCounts:e.fileCounts,folderSizes:e.folderSizes,syncSettings:e.syncSettings}),t[l.ViewType.Grid]=r.getColumns({columnsTypes:e.columnsTypes,fileCounts:e.fileCounts,folderSizes:e.folderSizes,syncSettings:e.syncSettings}),t);return{context:e.context,columns:r.getColumns({columnsTypes:e.columnsTypes,fileCounts:e.fileCounts,folderSizes:e.folderSizes,syncSettings:e.syncSettings}),createNewFolderState:e.folderCreationState,currentSort:e.sort,fileRename:e.fileRename,items:e.files,getIsFileJumping:e.getIsFileJumping,isDraggingInternalFiles:!1,isDraggingExternalFiles:!1,isSearchMode:!1,loadingState:e.folderLoadingState,path:e.path,selection:e.selection,selectedFiles:e.selectedFiles,totalNumFiles:1,user:e.user,isQueryingFolderSizes:!1,viewTypeColumns:n}})(e))},p=function(e){return function(t){var o={userId:e.user.id,isArchiveState:e.activeTab===m.ContentManagerTab.ARCHIVED_TEAM_FOLDERS&&!e.isInsideArchivedTeamFolder,isSearchState:""!==e.searchNormalizedQuery,currentSharedFolderPermissionRole:e.context.currentSharedFolderPermissionRole,onCreateTeamFolder:e.onCreateTeamFolderClicked,enableDataMigrationTool:null!==e.dataMigrationToolInfo&&e.dataMigrationToolInfo.enabled,onShowDataMigrationToolModal:e.onDataMigrationToolClicked,isInsideSharedFolder:e.context.isInsideSharedFolder,isViewingTeamFolder:e.context.isInsideTeamFolderRoot,isInsideTeamFolderTree:e.context.isInsideTeamFolderTree,onComponentTTI:e.onComponentTTI};return a.default.createElement(d.EmptyFolderWithImage,n.__assign({},o))}};t.ContentManagerFilesViewController=function(e){return a.default.createElement(i.FilesViewController,n.__assign({},g(e)))}})),define("modules/clean/teams/content_manager_modern/view/files_view/content_manager_shared_with_controller",["require","exports","tslib","modules/clean/em_string","modules/clean/components/title_bubble","react","modules/clean/teams/content_manager_modern/constants","modules/core/i18n","modules/clean/react/css"],(function(e,t,n,a,o,r,s,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importDefault(r);var c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n.__extends(t,e),t.prototype.getSharingInfoColumnText=function(e,t){return e.isDeleted?i._("Deleted",{project:"content-manager"}):t.audienceDescription?t.audienceDescription:i.ungettext("%(num)s member","%(num)s members",t.memberCount,{project:"content-manager"}).format({num:t.memberCount})},t.prototype.getSharingInfoBubbleText=function(e){var t=e.groups.map((function(e){return e.name})).concat(e.joinedMembers.map((function(e){return e.display_name||e.email}))).concat(e.invitations.map((function(e){return e.email_or_fbname}))),n=t.length+(e.numUndisplayableUsersAndInvites||0),o=t.slice(0,s.MAX_SHARING_ENTITIES).map((function(e){return a.Emstring.em_snippet(e,26)}));if(n>s.MAX_SHARING_ENTITIES){o.pop();var r=n-(s.MAX_SHARING_ENTITIES-1),l=i.ungettext("and %(num)s more...","and %(num)s more...",r,{comment:"Number of additional members in the file. Expected to be >= 2.",project:"content-manager"}).format({num:r});o.push(l)}return o.join("\n")},t.prototype.renderSharingInfoColumn=function(e){return r.default.createElement("div",{className:"cm-members-col-audiance-description"},e)},t.prototype.renderContent=function(){if(this.props.fileSharingInfo){var e=this.getSharingInfoColumnText(this.props.file,this.props.fileSharingInfo),t=this.getSharingInfoBubbleText(this.props.fileSharingInfo);return t?r.default.createElement(o.default,{respectLineBreaks:!0,text:t,direction:"south"},this.renderSharingInfoColumn(e)):this.renderSharingInfoColumn(e)}return r.default.createElement("noscript",null)},t.prototype.render=function(){return r.default.createElement("div",{className:"cm-members-col-wraper"},r.default.createElement("div",{className:"cm-members-col clearfix"},this.renderContent()))},t})(r.default.PureComponent),d=l.requireCssWithComponent(c,["/static/css/content_manager/modern/content_manager_members_column_cell-vflkixaD0.css"]);t.createSharedWithController=function(e){return function(t){var n=t.target_ns&&e.fileSharingInfoMap[t.target_ns]||e.fileSharingInfoMap[t.ns_id];return r.default.createElement(d,{file:t,fileSharingInfo:n})}}})),define("modules/clean/teams/content_manager_modern/view/modals/loadable_create_or_rename_team_folder_modal",["require","exports","tslib","react","modules/clean/react/async/loadable"],(function(e,t,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),t.LoadableCreateTeamFolderModal=o.Loadable({loader:function(){return new Promise((function(t,n){e(["modules/clean/teams/content_manager_modern/view/modals/create_or_rename_team_folder_modal"],t,n)})).then(n.__importStar).then((function(e){return e.CreateTeamFolderModal}))},loading:function(){return a.default.createElement("div",null)}}),t.LoadableRenameTeamFolderModal=o.Loadable({loader:function(){return new Promise((function(t,n){e(["modules/clean/teams/content_manager_modern/view/modals/create_or_rename_team_folder_modal"],t,n)})).then(n.__importStar).then((function(e){return e.RenameTeamFolderModal}))},loading:a.default.createElement("div",null)})})),define("modules/clean/teams/content_manager_modern/view/modals/loadable_data_migration_tool_modal",["require","exports","tslib","react","modules/clean/react/async/loadable"],(function(e,t,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),t.LoadableDataMigrationToolModal=o.Loadable({loader:function(){return new Promise((function(t,n){e(["modules/clean/teams/content_manager_modern/view/modals/data_migration_tool_modal"],t,n)})).then(n.__importStar).then((function(e){return e.DataMigrationToolModal}))},loading:a.default.createElement("div",null)})})),define("modules/clean/teams/content_manager_modern/view/modals/loadable_team_folder_utility_modals",["require","exports","tslib","react","modules/clean/react/async/loadable"],(function(e,t,n,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a),t.LoadableArchiveTeamFolderModal=o.Loadable({loader:function(){return new Promise((function(t,n){e(["modules/clean/teams/content_manager_modern/view/modals/team_folder_utility_modals"],t,n)})).then(n.__importStar).then((function(e){return e.ArchiveTeamFolderModal}))},loading:a.default.createElement("div",null)}),t.LoadablePermanentlyDeleteTeamFolderModal=o.Loadable({loader:function(){return new Promise((function(t,n){e(["modules/clean/teams/content_manager_modern/view/modals/team_folder_utility_modals"],t,n)})).then(n.__importStar).then((function(e){return e.PermanentlyDeleteTeamFolderModal}))},loading:a.default.createElement("div",null)}),t.LoadableAddGroupsModal=o.Loadable({loader:function(){return new Promise((function(t,n){e(["modules/clean/teams/content_manager_modern/view/modals/team_folder_utility_modals"],t,n)})).then(n.__importStar).then((function(e){return e.AddGroupsModal}))},loading:a.default.createElement("div",null)})})),define("modules/clean/teams/content_manager_modern/view/modals/team_folder_utility_modals",["require","exports","tslib","react","modules/clean/teams/content_manager_modern/constants","modules/clean/react_format","modules/clean/em_string","modules/clean/keycode","modules/clean/react/keyboard_binding/keyboard_binding_provider","modules/clean/react/keyboard_binding/keyboard_binding_connector","modules/clean/react/keyboard_binding/keyboard_binding","modules/clean/teams/admin/modals/action_utility_modal"],(function(e,t,n,a,o,r,s,i,l,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importDefault(a);var _=function(e){var t=e.onPrimaryAction,o=e.onRequestClose,r=[{keyboardEventCriteria:d.generateUnmodifiedKeyboardEventCriteria(i.KeyCode.ESC),callback:function(e){o(),e.preventDefault()}},{keyboardEventCriteria:d.generateUnmodifiedKeyboardEventCriteria(i.KeyCode.ENTER),callback:function(e){t(),o(),e.preventDefault()}}],s=e.children,_=n.__rest(e,["children"]);return a.default.createElement(u.ActionUtilityModal,n.__assign({shouldFocusAfterRender:!0},_),a.default.createElement(l.KeyboardBindingProvider,null,a.default.createElement("div",null,a.default.createElement(c.KeyboardBindingConnector,{keyboardBindings:r}),s)))};t.ArchiveTeamFolderModal=function(e){var t=e.onArchiveTeamFolderAccept,n=e.onArchiveTeamFolderClose,i=e.teamFolderName;return a.default.createElement(_,{title:o.teamFolderModalsTitleStrings.archiveTeamFolder,primaryAction:o.teamFolderModalsAcceptStrings.archiveTeamFolder,onPrimaryAction:t,onRequestClose:n},r.reactFormat(o.teamFolderModalsMsgStrings.archiveTeamFolder.format({folder_name:s.Emstring.em_snippet(i,18)}),{strong:a.default.createElement("strong",{style:{fontWeight:800}})}),a.default.createElement("br",null),a.default.createElement("br",null),o.teamFolderModalsAdditionalString.archiveTeamFolder)},t.PermanentlyDeleteTeamFolderModal=function(e){var t=e.onPermanentlyDeleteTeamFolderAccept,n=e.onPermanentlyDeleteTeamFolderClose,i=e.teamFolderName;return a.default.createElement(_,{title:o.teamFolderModalsTitleStrings.permanentlyDeleteTeamFolder,primaryAction:o.teamFolderModalsAcceptStrings.permanentlyDeleteTeamFolder,onPrimaryAction:t,onRequestClose:n},r.reactFormat(o.teamFolderModalsMsgStrings.permanentlyDeleteTeamFolder.format({folder_name:s.Emstring.em_snippet(i,32)}),{strong:a.default.createElement("strong",{style:{fontWeight:800}})}))},t.AddGroupsModal=function(e){var t=e.onAddGroupsClose,n=e.onAddGroupsAccept,i=e.teamFolderName;return a.default.createElement(_,{title:o.teamFolderModalsTitleStrings.addGroupsToTeamFolder,primaryAction:o.teamFolderModalsAcceptStrings.addGroupsToTeamFolder,secondaryAction:o.teamFolderModalsMiscStrings.notNow,onPrimaryAction:n,onRequestClose:t},r.reactFormat(o.teamFolderModalsMsgStrings.addGroupsToTeamFolder.format({folder_name:s.Emstring.em_snippet(i,32)}),{strong:a.default.createElement("strong",{style:{fontWeight:800}})}))}})),define("modules/clean/teams/content_manager_modern/view/sharing_management",["require","exports","tslib","modules/core/browser","modules/clean/sharing/async_share_modal_util","modules/clean/sharing/constants","modules/clean/teams/content_manager_modern/content_manager_api","external/lodash","modules/clean/contacts/util"],(function(e,t,n,a,o,r,s,i,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),i=n.__importStar(i),l=n.__importDefault(l),t.handlePrefilledACL=function(e){var t=e.user,n=e.shareModalPrefill;if(n){var a=n.fileFqPath,r=n.isFolder,l=n.email,c=n.fileNsPath,d={fileId:void 0,fqPath:a,isFolder:r,isNonUserRelativeContext:!0,nsId:n.fileNsId,nsPath:c};o.asyncShowPrefilledShareModal({user:t,sharePrefillEmails:[l],content:d,setUrl:i.noop,contentManagerValidateFolderPath:s.validateFolderPath})}},t.doManageSharing=function(e){var t=e.user,n=e.file,a=e.context,r=e.onManageSharingCompleted,l={browseContext:a,origin:"BROWSE_FILE_ROW",onSuccessSharing:function(){r(n.ns_id)}};o.asyncShowShareModal(t,n,l,i.noop,s.validateFolderPath)},t.showShareModalForTeamFolder=function(e){var t=e.user,n=e.teamFolderId,c=e.teamFolderName,d=e.prefillTeamGroup,u=e.teamGroupInfo,_=e.onManageSharingCompleted,m=d&&null!=u?[l.default.teamGroupInfoToContact(u)]:[],g={targetNsId:n,fqPath:"/"+c,isFolder:!0,isTeamSharedFolder:!0,icon:"folder_team_32",origin:r.SHARE_ACTION_ORIGIN_TYPE.CONTENT_MANAGER,teamGroupInfo:u,prefillContacts:m,isNonUserRelativeContext:!0,onSuccessSharing:function(){_(n)}},p={onCreateGroupCallback:function(){a.redirect("/team/admin/groups#/newgroup")}};o.asyncShowShareModal(t,g,p,i.noop,s.validateFolderPath)}})),define("modules/clean/teams/content_manager_modern/view/sync_settings/async_show_sync_settings_modal",["require","exports","tslib"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.asyncShowSyncSettingsModal=function(t){var a=t.folderName,o=t.onSaveSyncSettings,r=t.syncPolicy,s=t.numberOfFolders;return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t,n){e(["modules/clean/teams/content_manager_modern/view/sync_settings/sync_settings_modal"],t,n)})).then(n.__importStar)];case 1:return[2,(0,t.sent().showSyncSettingsModal)({folderName:a,onSaveSyncSettings:o,syncPolicy:r,numberOfFolders:s})]}}))}))}})),define("modules/clean/teams/content_manager_modern/util",["require","exports","modules/clean/react/browse/models","modules/clean/teams/content_manager_modern/constants","modules/core/exception","modules/clean/filetypes"],(function(e,t,n,a,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logWarning=function(e,t,n){var a=void 0===n?{reportInProd:!1,severity:o.SEVERITY.NONCRITICAL}:n,r=a.reportInProd,s=a.severity;r&&e&&o.reportStack(t,{severity:s})},t.teamFolderEntryToFileLikeObject=function(e,t){return new n.File({bytes:0,direct_blockserver_link:"",event_type:-1,file_id:"",ext:"",fq_path:"/"+e.name,href:a.HOME_PREFIX_GG+e.name,is_dir:!0,icon:t[e.status[".tag"]],is_cloud_doc:!1,isDeleted:!1,is_in_team_folder_tree:!1,is_symlink:!1,is_locked:!1,is_unmounted:!1,is_versionable:!0,target_ns:Number(e.team_folder_id),ns_id:-1,ns_path:"",read_only:!1,revision_id:"",sjid:-1,team_folder_status:e.status[".tag"],sort_key:e.sort_key,type:r.FileTypes.TEAM_SHARED_FOLDER})},t.teamNamespaceEntryToFileLikeObject=function(e,t){return"team_folder"===e.namespace_type[".tag"]?new n.File({bytes:0,direct_blockserver_link:"",event_type:-1,file_id:"",ext:"",fq_path:"/"+e.name,href:a.HOME_PREFIX_GG+e.name,is_dir:!0,icon:t[e.team_folder_status[".tag"]],is_cloud_doc:!1,isDeleted:!1,is_in_team_folder_tree:!1,is_symlink:!1,is_locked:!1,is_unmounted:!1,is_versionable:!0,target_ns:Number(e.namespace_id),ns_id:-1,ns_path:"",read_only:!1,revision_id:"",sjid:-1,team_folder_status:e.team_folder_status[".tag"],sort_key:e.team_folder_sort_key,type:r.FileTypes.TEAM_SHARED_FOLDER}):new n.File({bytes:0,direct_blockserver_link:"",event_type:-1,file_id:"",ext:"",fq_path:e.namespace_id+"/"+e.name,href:"#",is_dir:!0,icon:"folder_user_32",is_cloud_doc:!1,isDeleted:!1,is_in_team_folder_tree:!1,is_symlink:!1,is_locked:!1,is_unmounted:!1,is_versionable:!0,target_ns:Number(e.namespace_id),ns_id:-1,ns_path:"",read_only:!1,revision_id:"",sjid:-1,sort_key:"",type:r.FileTypes.SHARED_FOLDER})}}));
//# sourceMappingURL=pkg-content_manager_modern.min.js-vflz2jPIx.map