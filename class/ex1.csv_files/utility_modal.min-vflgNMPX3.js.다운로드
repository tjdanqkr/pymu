define(["require","exports","tslib","react","spectrum/modal","spectrum/button"],(function(e,t,o,n,a,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=o.__importStar(n),t.splitByUtilityModalProps=function(e){var t=e.valid,n=e.setFocus,a=e.actionBlockRequest,i=e.actionUnblockRequest,r=e.actionDataReady,c=e.actionAccept,l=e.actionCancel,s=e.actionOpen,u=e.actionClose,d=e.displayCloseButton,y=e.className,m=e.bodyClassName,p=e.parentElement,v=e.onRequestClose,f=e.onReady,C=e.width,h=e.height,A=e.contentTagName,b=e.ariaLabel,R=e.open,q=e.overlayClassName,E=e.overlayClickClose,k=e.overflowY,_=e.overlayFixed,g=e.primaryAction,B=e.secondaryAction,F=e.title,N=e.link,P=e.variant,w=e.onPrimaryAction,D=e.onSecondaryAction,O=e.onLink,S=e.shouldRequestCloseOnActions;e.children;return{modal:{displayCloseButton:d,bodyClassName:m,className:y,parentElement:p,onRequestClose:v,onReady:f,width:C,height:h,contentTagName:A,ariaLabel:b,open:R,overlayClassName:q,overlayClickClose:E,overflowY:k,overlayFixed:_,primaryAction:g,secondaryAction:B,title:F,link:N,variant:P,onPrimaryAction:w,onSecondaryAction:D,onLink:O,shouldRequestCloseOnActions:S},modalBehavior:{valid:t,setFocus:n,actionBlockRequest:a,actionUnblockRequest:i,actionDataReady:r,actionAccept:c,actionCancel:l,actionOpen:s,actionClose:u},rest:o.__rest(e,["valid","setFocus","actionBlockRequest","actionUnblockRequest","actionDataReady","actionAccept","actionCancel","actionOpen","actionClose","displayCloseButton","className","bodyClassName","parentElement","onRequestClose","onReady","width","height","contentTagName","ariaLabel","open","overlayClassName","overlayClickClose","overflowY","overlayFixed","primaryAction","secondaryAction","title","link","variant","onPrimaryAction","onSecondaryAction","onLink","shouldRequestCloseOnActions","children"])}},t.disabledPrimaryButton=function(e,t,a){var r=e;if(!r)throw new Error("Primary element is not set on utility modal");var c=r;return r="string"==typeof r?function(e){var r={variant:"primary",onClick:e};return!1===t&&(r.disabled=!0),n.createElement("span",{ref:a||void 0},n.createElement(i.Button,o.__assign({},r),c))}:function(e){var o={ref:a};return!1===t&&(o.disabled=!0),n.cloneElement(c(e),o)}};var r=(function(e){function i(t){var a=e.call(this,t)||this;return a.setPrimaryActionElement=function(e){return a.primaryActionElement=e},a.firstFocusableElement=function(){return a.primaryActionElement.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')[0]},a.modalBody=function(){var e=a.props.bodyClassName,t=void 0===e?"mc-modal-body":e;return document.querySelector("."+t)},a.modalOverlay=function(){return document.querySelector(".rn-modal-overlay")},a.setFocus=function(){return o.__awaiter(a,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(t){return setTimeout((function(){var t=e.props.valid,o=void 0===t||t,n=e.modalBody();if(n&&!n.contains(document.activeElement)){var a=n;if(o&&e.primaryActionElement){var i=e.firstFocusableElement();i&&(a=i)}a.focus()}}),0),[2]}))}))},a.accept=function(){var e=a.props,t=e.actionAccept,o=e.valid;(void 0===o||o)&&t()},a.onKeyDown=function(e){13===e.keyCode&&a.accept()},a.onRequestClose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=a.props,n=o.actionCancel,i=o.onRequestClose;i&&i();var r=e.length>=1&&27===e[0].keyCode,c=e[0]&&e[0].target===a.modalOverlay();(r||c)&&n()},a.cloneElement=function(e,t){return e?"string"==typeof e?e:n.cloneElement(e,o.__assign({},t,{onKeyDown:a.onKeyDown})):null},t.setFocus&&t.setFocus(a.setFocus),a}return o.__extends(i,e),i.prototype.componentDidMount=function(){this.props.open&&this.setFocus()},i.prototype.componentDidUpdate=function(e){this.props.open&&!e.open&&this.setFocus()},i.prototype.render=function(){var e=this,i=this.props,r=i.primaryAction,c=i.actionCancel,l=i.actionAccept,s=i.onPrimaryAction,u=i.onSecondaryAction,d=i.valid,y=void 0===d||d,m=t.splitByUtilityModalProps(this.props),p=m.modal,v=m.rest,f=t.disabledPrimaryButton(r,y,this.setPrimaryActionElement);return n.createElement(a.UtilityModal,o.__assign({},p,{primaryAction:f,onPrimaryAction:s||l,onSecondaryAction:u||c,onRequestClose:this.onRequestClose,onKeyPress:this.onKeyDown,overlayClassName:"rn-modal-overlay"}),n.Children.map(this.props.children,(function(t){return e.cloneElement(t,v)})))},i})(n.Component);t.UtilityModal=r}));
//# sourceMappingURL=utility_modal.min.js-vfl3_kD_b.map