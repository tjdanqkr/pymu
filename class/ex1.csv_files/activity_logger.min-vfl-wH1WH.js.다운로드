define(["require","exports","tslib","modules/clean/logging/telemetry","modules/clean/logging/hive/schemas/web-teams","modules/clean/rondo/behavior/logger_behavior","external/lodash"],(function(e,t,r,n,a,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=r.__importStar(n),o=r.__importStar(o),t.stateMapEvent=function(e){var t=e.filters;return{results_displayed:e.rowsData.length,total_filters_added:o.countBy(t,(function(e){return void 0!==e.fieldValue&&Boolean(e.fieldValue.toString())})).true,date_range_start:t.date.fieldValue.from,date_range_end:t.date.fieldValue.to,members_applied_known:o.countBy(t.members.fieldValue,(function(e){return"default"===e.variant})).true||0,members_applied_unknown:o.countBy(t.members.fieldValue,(function(e){return"warning"===e.variant})).true||0,members_applied_invalid:o.countBy(t.members.fieldValue,(function(e){return"error"===e.variant})).true||0,content_search_applied:!!t.file.fieldValue,activity_filters_applied:t.activity.fieldValue.length}};var l=function(e,t){return o.find(e,(function(e){return t===e}))};t.activityEvent=function(e,t){var n={};return t.allCategories.forEach((function(e){var r=(function(e,t){if(l(t.checkedCategories,e.id))return e.activities.length;var r=e.activities.map((function(e){return e.id}));return o.intersection(r,t.checkedActivities).length})(e,t);r>0&&(n["activity_"+e.label+"_applied"]=r)})),{eventName:"activity_applied",extra:r.__assign({},n)}};var c=new n.HiveLogger;t.logActivityPageEventToHive=function(e){var t=e.eventName,r=e.extra;t&&c.log(new a.WebTeamsTableRow({event_name:"activity_page_"+t,extra:r}))},t.ActivityPageLogger=i.LoggerBehavior({loggingComponent:t.logActivityPageEventToHive,actionsToLog:{ACTION_SUBMIT:function(e,r){return{eventName:"results_displayed_updated",extra:t.stateMapEvent(r)}},ACTION_FETCH_NEXT:function(e,r){return{eventName:"display_more_results",extra:t.stateMapEvent(r)}},"report/ACTION_OPEN":function(){return{eventName:"create_report_click",extra:{}}},"report/ACTION_CANCEL":function(){return{eventName:"create_report_cancel",extra:{}}},"report/ACTION_CREATE_REPORT":function(e,n){var a=t.stateMapEvent(n),i=(a.results_displayed,r.__rest(a,["results_displayed"]));return{eventName:"create_report_submit",extra:r.__assign({exclude_activities:n.report.excludeFileEvents},i)}},"report/ACTION_EXCLUDE_FILE_EVENTS":function(){return{eventName:"create_report_exclude_activities",extra:{}}},ACTION_COLUMN_SELECT:function(e,t){var r,n="customize_table_"+e.name;return{eventName:n,extra:(r={},r[n]=e.checked?"applied":"removed",r)}},ACTION_RESET_COLUMN_SELECTION:function(){return{eventName:"customize_table_reset",extra:{}}},ACTION_COLUMN_SELECTION_OPENED:function(){return{eventName:"customize_table_click",extra:{}}}}}),t.ActivityModalLogger=i.LoggerBehavior({loggingComponent:t.logActivityPageEventToHive,actionsToLog:{ACTION_ON_SUBMIT:t.activityEvent}}),t.ActivityTableLogger=i.LoggerBehavior({loggingComponent:t.logActivityPageEventToHive,actionsToLog:{ACTION_ON_ACTION_TOGGLE:function(e,t){return{eventName:"activity_row_action_opened",extra:{associated_actions:e.join(",")}}}}})}));
//# sourceMappingURL=activity_logger.min.js-vfllrH3mg.map