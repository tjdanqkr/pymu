define(["require","exports","tslib","external/lodash","rondo/v1/index","rondo-forms/v1/field/field_validation_behavior","rondo-forms/v1/field/field_lifecycle_behavior"],(function(e,i,a,t,l,n,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FieldBehavior=function(e){var i=e.initialValue,r=e.fieldValue,c=e.fieldChangeAction,d=e.parseValue,u=void 0===d?function(e){return e}:d,s=e.equalValue,f=void 0===s?t.isEqual:s,h=e.clearValue,V=e.allowNonValid,v=e.clearActions,A=e.commitActions,F=e.resetActions,p=e.validator,g=function(){var e=this;this.actionFieldChange=l.createAction(),this.actionFieldChanged=l.createAction(),this.actionSetValue=l.createOrUseIn(this,c).handle((function(e,i){var a=i.fieldValue;return{fieldValue:u(a)}})),this.actionFieldSet=l.createOrUseIn(this,c).handle((function(e,i){var a=u(i);return{fieldValue:a,initialValue:a}})),this.fieldValue=l.createSelector((function(e){return e.fieldValue})),this.fieldChanged=l.whenFieldChanged("fieldValue",(function(){e.actionFieldChanged()})),l.extendBehavior(this,o.FieldLifecycleBehavior({initialValue:i,fieldChangeAction:this.actionFieldChange,fieldValue:this.fieldValue,clearValue:h,clearActions:v,commitActions:A,resetActions:F,equalValue:f})),l.extendBehavior(this,n.FieldValidationBehavior({fieldValue:this.fieldValue,validAction:this.actionSetValue,validateAction:this.actionFieldChange,validator:p,allowNonValid:V}))},m=(function(e){function t(){var a=null!==e&&e.apply(this,arguments)||this;return a.initialState=function(){return{fieldValue:i}},a}return a.__extends(t,e),t.displayName="FieldBehavior",t})(g),C=(function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return a.__extends(i,e),i.displayName="FieldBehavior",i})(g);return r?C:m},i.FieldArrayBehavior=function(e){var n=e.initialValue,o=e.fieldValue,r=e.fieldChangeAction,c=e.parseValue,d=void 0===c?function(e){return e}:c,u=e.equalValue,s=void 0===u?t.isEqual:u,f=e.clearValue,h=e.allowNonValid,V=e.clearActions,v=e.commitActions,A=e.resetActions,F=e.validator,p=e.idExtractor,g=void 0===p?t.identity:p;return(function(e){function i(){var i=null!==e&&e.apply(this,arguments)||this;return i.actionFieldRemove=l.createAction().watch((function(e,a){var l=d(a),n=t.differenceWith(i.getFieldValue(e),t.isArray(l)?l:[l],t.isEqual);i.actionFieldChange(n)})),i.actionFieldAdd=l.createAction().watch((function(e,a){var t=i.getFieldValue(e).concat(d(a));i.actionFieldChange(t)})),i.actionFieldReplace=l.createAction().watch((function(e,a){var l=e.fieldValue,n=a.v,o=a.id,r=d([n]),c=t.findIndex(l,(function(e){return g(e)===o}));if(!(c<0)){var u=l.slice();u.splice(c,1,r[0]),i.actionFieldChange(u)}})),i}return a.__extends(i,e),i.prototype.getFieldValue=function(e){return o?o():e.fieldValue},i.displayName="FieldBehavior",i})(i.FieldBehavior({initialValue:n,fieldValue:o,fieldChangeAction:r,parseValue:d,equalValue:s,clearValue:f,allowNonValid:h,clearActions:V,commitActions:v,resetActions:A,validator:F}))}}));
//# sourceMappingURL=field_behavior.min.js-vflg9xnCJ.map