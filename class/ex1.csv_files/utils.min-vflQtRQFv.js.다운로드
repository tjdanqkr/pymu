define(["require","exports","tslib","modules/clean/open_with","modules/clean/file_store/utils","modules/clean/react/file_viewer/constants","modules/clean/react/file_viewer/open_button/types","modules/clean/react/file_viewer/unity/unity_utils","modules/clean/react/file_viewer/open_with_helpers","modules/clean/react/paper/utils","modules/clean/react/file_viewer/data/actions","modules/core/i18n","modules/clean/react/extensions/utils","modules/clean/react/extensions/connect_flow","modules/clean/cloud_docs/open_with_utils"],(function(e,n,i,t,o,r,l,s,u,a,p,c,d,f,_){"use strict";function h(e,n,t,o){var s;if(o.provider===_.OpenWithCloudDocProvider.GoogleDSS)s={type:l.OpenButtonAction.OPEN_WITH_CLOUD_DOC,userAction:r.UserAction.OpenWithCloudDocEditor};else{if(o.provider!==_.OpenWithCloudDocProvider.OfficeOnline)return null;s={type:l.OpenButtonAction.OPEN_WITH,userAction:r.UserAction.OpenInOfficeOnline}}return i.__assign({handler:function(){return o.handler(e,n,t)},spriteName:o.spriteName||null,iconUrl:o.iconUrl,text:o.text},s)}function O(e){for(var n=e.file,i=e.user,t=e.isOpenWithDisabled,o=[],r={gdd:!e.isCloudEditorDisabled,wopi:v({file:n,isOpenWithDisabled:t,user:i})},l=e.actionSource,s=0,u=_.getOpenWithCloudEditorInfo(n,i,r,l);s<u.length;s++){var a=h(n,i,l,u[s]);a&&o.push(a)}return o}function v(e){var n=e.file,i=e.isOpenWithDisabled,t=e.user;return!i&&u.OpenWithHelpers.canOpenWith(n,t)}function m(e){var n=(e?e.open_application_name:void 0)||c._("Desktop");return c._("Open in %(app_name)s").format({app_name:n})}function y(e){var n=(null!==e?e.file_browser_display_name:void 0)||c._("File Browser");return c._("Show in %(file_browser)s").format({file_browser:n})}function A(e){var n=e.file,i=e.isFolder,t=e.user;return function(){s.UnityHelpers.openFile(n.ns_id,n.ns_path,t.id,i)}}function I(e){var n=e.file,i=e.user;return function(){a.openFileInPaper({file:n,user:i})}}Object.defineProperty(n,"__esModule",{value:!0}),t=i.__importDefault(t),n.getOpenOptions=function(e){var n=e.file,t=i.__rest(e,["file"]);return o.isBrowseFile(n)?(function(e){var n=e.file,i=e.hasOpenInPaperSupport,t=e.isUnityDisabled,o=e.isOpenWithDisabled,u=e.isCloudEditorDisabled,a=e.unityInfo,O=e.extraOptions,w=e.user,D=e.sharingServiceInfo,U=e.refreshSharingServiceInfo,b=e.showOpenWithShare,S=e.onPresentInZoom,E=e.isCloudBasedDoc,N=e.actionSource,W=e.landingPagesEnabled;if(!a)return[];var g=[];i&&g.push({handler:I({file:n,user:w}),spriteName:"paper",text:c._("Copy to Paper"),type:l.OpenButtonAction.OPEN_IN_PAPER,userAction:r.UserAction.CopyToPaper});!E&&(function(e){var n=e.isUnityDisabled,i=e.unityInfo;return null!=i&&!n&&s.UnityHelpers.isUnityFileSupported(i)})({isUnityDisabled:t,unityInfo:a})&&g.push({handler:A({file:n,user:w,isFolder:!1}),spriteName:"ow_desktop",text:m(a),type:l.OpenButtonAction.UNITY_FILE,userAction:r.UserAction.OpenInUnity});for(var F=v({file:n,isOpenWithDisabled:o,user:w}),P={gdd:!u,wopi:F},C=_.getOpenWithCloudEditorInfo(n,w,P,N),B=0,x=C;B<x.length;B++){var T=x[B],H=h(n,w,N,T);H&&g.push(H)}(function(e){var n=e.isUnityDisabled,i=e.unityInfo;return null!=i&&!n&&s.UnityHelpers.isUnityFolderSupported(i)})({isUnityDisabled:t,unityInfo:a})&&g.push({handler:A({file:n,user:w,isFolder:!0}),spriteName:"ow_folder",text:y(a),type:l.OpenButtonAction.UNITY_FOLDER,userAction:r.UserAction.OpenInUnityFolder});O&&O.forEach((function(e){e&&g.push(e)}));g.length||E||g.push({handler:function(){return p.download(n)},spriteName:null,text:c._("Download"),type:l.OpenButtonAction.DOWNLOAD,userAction:r.UserAction.Download});var k=!1,L=!1;b&&D&&(k=d.isSlackAvailable(D),L=d.isZoomAvailable(D));k&&D&&U&&g.push({handler:function(){return f.shareInSlackFlow(w,D,U,n,"open_with_button",void 0!==W?W:null)},spriteName:null,text:c._("Slack"),type:l.OpenButtonAction.SHARE_TO_SLACK,userAction:r.UserAction.ShareToSlack});L&&D&&S&&U&&g.push({handler:function(){return f.presentInZoomFlow(w,D,U,S,"open_with_button",void 0!==W?W:null)},spriteName:null,text:c._("Zoom"),type:l.OpenButtonAction.PRESENT_IN_ZOOM,userAction:r.UserAction.PresentInZoom});return g})(i.__assign({file:n},t)):o.isSharedFile(n)?O(i.__assign({file:n},t)):[]},n.convertOpenWithCloudEditorInfo=h,n.getOpenOptionsSharedFile=O,n.shouldShowCoachmark=function(e,n){var i=e.map((function(e){return e.type})).includes(l.OpenButtonAction.UNITY_FILE),o=n&&t.default.is_adobe_app(n.open_application_identifier),r=e.map((function(e){return e.type})).includes(l.OpenButtonAction.OPEN_WITH);return i&&o||r}}));
//# sourceMappingURL=utils.min.js-vflcNzYr2.map