define(["require","exports","tslib","react","react-intl","spectrum/modal","modules/core/i18n","modules/clean/analytics","modules/clean/static_urls","modules/clean/ux_analytics_modal_tracking","modules/clean/react_format","modules/clean/viewer","modules/constants/page_load","modules/clean/react/image","modules/clean/teams/constants","modules/clean/teams/modals/team_admin_roles_modal","modules/clean/teams/admin/widgets/admin_permissions_modal/admin_permissions_modal","modules/clean/teams/admin/widgets/invite_modal/invite_modal_member_row","modules/clean/teams/admin/widgets/invite_modal/invite_modal_sidebar","modules/clean/react/growth/first_task/first_task","modules/clean/react/member_sidebar_actions"],(function(e,a,i,t,s,n,l,o,m,r,d,_,c,u,p,b,g,v,f,E,w){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),t=i.__importDefault(t);var N=_.Viewer.get_viewer(),h=l._("Member",{project:"growth-exps",comment:"This string appears on a dropdown menu option of the invite members modal. The 'Member' option is revoking Admin permissions."}),A=l._("Admin");function C(e){return null!=e&&e!==p.ADMIN_ROLE.NONE}var y=function(e){var a=e.baseClass,s=e.tieredAdmin,n=e.memberList,r=e.memberActionsData,_=e.loggingExtras,c=e.handleOnClose,f=["option-member","option-admin"],E=f[0],y=f[1],M={enabled:!0,id:"role-dropdown",options:[{apiId:E,label:h,tooltip:l._("Can view, edit, delete, comment on, and save files")},{apiId:y,label:A,tooltip:l._("Member, but can invite and manage team members")}]};return t.default.createElement("div",{className:a+"__members"},t.default.createElement("div",{className:a+"__members-header"},t.default.createElement(u.Image,{src:m.static_url("/static/images/growth/team-vfl8WprcF.svg"),className:a+"__members-image"}),d.reactFormat(l._("Members of %(team)s"),{team:N.team_name})),n.map((function(e,a){var n=r&&r[e.user_id],d=C(e.admin_role)?y:E,u=(function(e,a){return void 0===a&&(a=!1),e?C(e.admin_role)?a&&p.ADMIN_ROLE_NAMES[e.admin_role]||A:h:l._("Select between member or admin")})(e,s);return t.default.createElement(v.MemberRow,{key:a,id:"member-row-"+a,userId:e.user_id,showInvited:e.team_join_state===w.JoinState.PENDING,avatarUrl:e.team_join_state!==w.JoinState.PENDING?e.photo_url||"":m.static_url("/static/images/growth/member-vflJ3QUg7.svg"),displayName:e.display_name,roleLabel:u,initials:e.initials,email:e.email,actionsData:n,handleOnClose:c,onChange:function(a){if(a!==d||s&&a===y){c();var t=a===y?"granted":"revoked",l=i.__assign(i.__assign({},_),{user_id:e.user_id});o.TeamsWebActionsLogger.log(t+"_admin_permissions_open",i.__assign({},l));var m=function(){o.TeamsWebActionsLogger.log(t+"_admin_permissions_cancel",i.__assign({},l))};s?b.showTeamAdminRolesModal({userId:e.user_id,displayName:e.display_name,isAdmin:C(e.admin_role),origAdminRole:null!=e.admin_role?e.admin_role:p.ADMIN_ROLE.NONE,success:function(a){if(o.TeamsWebActionsLogger.log(t+"_admin_permissions",i.__assign({},l)),n&&n.roleUpdateCallback){var s=JSON.parse(a)[e.user_id].admin_role;n.roleUpdateCallback(s)}},onRequestClose:n&&n.onClose,onSecondaryAction:m}):g.showAdminPermissionsModal({userId:e.user_id,displayName:e.display_name,enablePermissions:"option-admin"===a,limited:!1,team_id:N.team_id,onPrimaryAction:function(){if(o.TeamsWebActionsLogger.log(t+"_admin_permissions",i.__assign({},l)),n&&n.roleUpdateCallback){var e="option-admin"===a?p.ADMIN_ROLE.SUPER:p.ADMIN_ROLE.NONE;n.roleUpdateCallback(e)}},onRequestClose:n&&n.onClose,onSecondaryAction:m})}},optionGroup:N.work_user.id!==e.user_id?i.__assign(i.__assign({},M),{selectedApiId:d,label:u}):void 0})})),1===n.length&&t.default.createElement(v.MemberRow,{id:"empty-row",userId:-1,empty:!0,avatarUrl:m.static_url("/static/images/growth/single-vflQ4gh9g.svg"),displayName:l._("Your team members will show up here"),roleLabel:h,handleOnClose:c}))};a.FirstTaskInviteModal=function(e){var a=e.baseClass,i=e.showSidebar,o=e.memberList,m=e.emails,d=e.sentEmails,_=e.handleOnClose,u=e.focusRef,p=e.open,b=1===o.length?l._("Invite team members"):l._("Manage team members");return t.default.createElement(s.IntlProvider,{defaultLocale:"en-US",locale:l.localeToBcp47LangTag(c.USER_LOCALE)},t.default.createElement(n.Modal,{open:p,ariaLabel:l._("Invite Members"),displayCloseButton:!0,onRequestClose:function(){d.length&&E.showClinkTooltip(E.TooltipType.Members),_()},overlayClickClose:!0,width:i?960:699,overflowY:!0,focusedElementOnOpen:u,appElement:document.body,bodyClassName:"invite-modal "+a+" "+(i?a+"--sidebar-visible":"")},t.default.createElement(r.UXAnalyticsModalTracking,{id:"invite-modal"}),t.default.createElement("div",{className:a+"__container"},t.default.createElement("div",{className:a+"__content"},t.default.createElement("div",{className:a+"__title"},b),t.default.createElement("div",{className:a+"__invite-content"},e.children),y(e)),i&&t.default.createElement(f.InviteModalSidebar,{baseClass:a,memberList:o,emails:m,sentEmails:d}))))}}));
//# sourceMappingURL=invite_modal_first_task.min.js-vfli3QUGW.map