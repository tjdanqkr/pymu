define("modules/clean/sortable",["require","exports","tslib","jquery"],(function(e,t,r,o){"use strict";function i(e,t,r){var i=o.default(e).find("[data-sort-name="+r+"]"),s=i.data("sort-value")||i.text();return"int"===t?parseInt(s,10):"float"===t?parseFloat(s):s}Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o);var s=(function(){function e(e,t,r,i){null==t&&(t=".sort-header"),null==r&&(r=".sort-row"),this.header_selector=t,this.row_selector=r,this.sort_callback=i,this.$root=o.default(e),this._build_indicators(),this._listen()}return e.prototype.sort=function(e,t){var r;this._clear(),e=o.default(e),t?(e.attr("data-sort-ascending",1),e.find(".sort-indicator").removeClass("s_web_arrow-down-gray").addClass("s_web_arrow-up-gray")):(e.attr("data-sort-descending",1),e.find(".sort-indicator").removeClass("s_web_arrow-up-gray").addClass("s_web_arrow-down-gray"));var s=e.attr("data-sort-type"),n=e.attr("data-sort-name"),a=this.$root.find(this.row_selector);if(a.length){for(var u=[],l=0,_=Array.from(a);l<_.length;l++){r=i(h=_[l],s,n),u.push([r,h])}u.sort((function(e,t){var r=e[0],o=t[0];return r<o?-1:r>o?1:0})),t||u.reverse();for(var c=o.default(a[0]).parent(),p=0,d=Array.from(u);p<d.length;p++){var h=d[p][1];c.append(h)}return"function"==typeof this.sort_callback?this.sort_callback(this.$root):void 0}},e.prototype._listen=function(){var e=this;return this.$root.on("click",this.header_selector,(function(t){var r=o.default(t.target).closest(e.header_selector);return e.sort(r,!r.attr("data-sort-ascending"))}))},e.prototype._clear=function(){for(var e=this.header_selector+"[data-sort-ascending]",t=this.header_selector+"[data-sort-descending]",r=this.$root.find(e),o=0,i=Array.from(r);o<i.length;o++){i[o].removeAttribute("data-sort-ascending")}var s=this.$root.find(t);return(function(){for(var e=[],t=0,r=Array.from(s);t<r.length;t++){var o=r[t];e.push(o.removeAttribute("data-sort-descending"))}return e})()},e.prototype._build_indicators=function(){return this.$root.find(this.header_selector).each((function(){var e=o.default(this),t=e.find(".sort-indicator");if(t.length)return t.addClass("sprite sprite_web");var r=o.default("<span/>",{class:"sort-indicator sprite sprite_web"});return r.append("&nbsp;"),e.append(r)}))},e})();t.default=s})),define("modules/clean/teams/device_management_remove_device",["require","exports","tslib","purify","jquery","modules/clean/ajax","modules/clean/react/modal","modules/clean/viewer","modules/core/i18n","modules/core/notify"],(function(e,t,r,o,i,s,n,a,u,l){"use strict";var _;Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importDefault(i),s=r.__importStar(s),(_=(function(){function e(t,r,o,i,s){e.user_id=t,e.user_name=r,e.team_id=o,e.team_name=i,e.init_listener(s)}return e.initClass=function(){this.user_id=null,this.user_name=null,this.team_id=null,this.team_name=null},e.init_listener=function(t){return(function(){for(var r=[],o=function(t){var o=t.id,s=t.model;i.default("#dm_remove_device-"+o).data("device_id",o),i.default("#dm_remove_device-"+o).data("device_model",s),i.default("#dm_remove_device-"+o).data("device_is_delete_on_unlink_supported",t.is_delete_on_unlink_supported),r.push(i.default("#dm_remove_device-"+o).on("click",(function(){var t=i.default("#"+this.id);o=t.data("device_id"),s=t.data("device_model");var r=t.data("device_is_delete_on_unlink_supported");return e.remove_device(o,s,r,t)})))},s=0,n=Array.from(t.devices);s<n.length;s++)o(n[s]);return r})()},e.remove_device=function(t,r,i,s){var a=u._("Remove %(device_model)s").format({device_model:r}),l=u._("You’re about to unlink %(member_name)s’s %(device_model)s. It will immediately stop syncing all sessions with their %(team_name)s Dropbox on this device.").format({member_name:'<span class="member-name">'+e.user_name+"</span>",device_model:r,team_name:'<span class="team-name">'+e.team_name+"</span>"});return i&&(l+='<br/><br/><input type="checkbox" id="remove_device_delete_data"/>'+u._("Delete %(team_name)s files from this computer the next time it comes online.").format({team_name:e.team_name})),n.SimpleModal.show({title_text:a,body_html:o.sanitize(l),cancel_text:u._("Cancel"),confirm_text:u._("Remove"),confirm_callback:function(){return e.remove_device_submit(t,r,s)},cancel_callback:function(){}})},e.remove_device_submit=function(t,r,o){var n=!1;return i.default("#remove_device_delete_data").length>0&&i.default("#remove_device_delete_data")[0].checked&&(n=!0),s.WebRequest({url:"/account/remove_user_device",data:{team_id:e.team_id,user_id:e.user_id,device_id:JSON.stringify(t),delete_data:n,app_id:"0"},subject_user:a.Viewer.get_viewer().work_user,success:function(t){return"OK"===t?(e.remove_closest_row(o),l.Notify.success(u._("%(device_model)s removed.").format({device_model:r}))):l.Notify.error(u._("remove device failed"))}})},e.remove_closest_row=function(e){var t=i.default(e).closest(".team_admin_table_row"),r=i.default(t).closest(".team_admin_table");if(1===r.find(".team_admin_table_row").length){var o=r.prev(".team_admin_table_title");return o.length||(o=i.default(".team_apps_table_panel")),o.remove(),r.remove()}return t.remove()},e})()).initClass(),_=_,t.default=_})),define("modules/clean/teams/forensics/activity_page",["require","exports","tslib","react","modules/core/i18n","modules/clean/teams/forensics/forensics_main","modules/clean/teams/admin/maestro/admin_console_view"],(function(e,t,r,o,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),s=r.__importStar(s);var a=function(){var e=this;this.headerClickCbk=function(){},this.renderSidebar=!1,this.props={onHeaderClick:function(t){e.headerClickCbk=t}},this.header=o.default.createElement("button",{style:{cursor:"pointer",fontSize:"inherit",backgroundColor:"inherit"},onClick:function(){return e.headerClickCbk()}},i._("Activity"))},u=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props["is-pagelet"]||this.props.is_pagelet;return!this.props["is-embedded-page"]&&e?this.renderPagelet():this.renderContent()},t})(n.AdminConsoleViewHOC(s.ForensicsMain,new a));t.ActivityPage=u})),define("modules/clean/teams/forensics/filter/_/_/input_suggestions",["require","exports","tslib","classnames","react","react-dom","react-dom-factories","prop-types","jquery"],(function(e,t,r,o,i,s,n,a,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importDefault(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a),u=r.__importDefault(u);var l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._dismiss=function(e){if(!(new Date-t.start<1e3))return s.findDOMNode(t.refs.root).contains(e.target)?t.props.onSelect():"function"==typeof t.props.onDismiss&&t.props.onDismiss(),document.removeEventListener("click",t._dismiss,!0)},t._listen=function(){return document.addEventListener("click",t._dismiss,!0)},t._isShowSuggestionIndex=function(e){return t.props.firstShownSuggestionIndex<=e&&e<t.props.firstShownSuggestionIndex+t.props.maxShownSuggestions},t._renderSuggestions=function(){for(var e=[],r=0;r<t.props.suggestions.length;r++){var o=t.props.suggestions[r];t._isShowSuggestionIndex(r)&&e.push(t._renderSuggestion(o,r))}return e},t._renderSuggestion=function(e,r){var i=o.default({"suggestion-option":!0,"marked-suggestion":r===t.props.suggestionsMarkedIndex});return n.div({key:r,className:i,ref:r,onMouseEnter:function(){return t.props.onMarkSuggestion(r)}},t.props.renderSuggestion(e,t.props.value))},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){return this.start=new Date,this._listen()},t.prototype.componentWillUnmount=function(){return document.removeEventListener("click",this._dismiss,!0)},t.prototype.componentDidUpdate=function(){var e=u.default(this.refs.root),t=u.default(this.refs[this.props.suggestionsMarkedIndex]),r=(t.offset()?t.offset().top:0)-e.offset().top,o=r+t.height();return o>e.height()?e.scrollTop(e.scrollTop()+(o-e.height())):r<0?e.scrollTop(e.scrollTop()+r):void 0},t.prototype.render=function(){var e=o.default({"input-suggestions":!0,"filter-input-control":!0,"suggestions-list":!this.props.suggestionsContent});return n.div({className:e,ref:"root"},this.props.suggestionsContent||this._renderSuggestions())},t.displayName="InputSuggestions",t.propTypes={value:a.any,maxShownSuggestions:a.number,firstShownSuggestionIndex:a.number,rightSideElementOnNoValue:a.element,suggestionsContent:a.element,onMarkSuggestion:a.func,renderSuggestion:a.func,suggestions:a.array,suggestionsMarkedIndex:a.number,onDismiss:a.func,onSelect:a.func},t})(i.default.Component);t.InputSuggestions=l})),define("modules/clean/teams/forensics/filter/_/_/input_token",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/react/tooltip"],(function(e,t,r,o,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n);var a=o.default.createFactory(n.Tooltip),u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderContent=function(){var e=i.div({className:"input-token-content"},t.props.content);return t.props.tooltip?i.div({className:"input-token-tooltip-container"},a({position:n.TooltipPosition.TOP,tooltip_classname:"c-card c-card--arrow c-card--arrow-s",tooltip_contents:i.div({},t.props.tooltip)},e)):e},t._renderXButton=function(){return i.img({className:"input-token-x-button vertical-center",onClick:function(){return t.props.remove()},src:t.props.store.FC.UI.X_IMAGE_SRC})},t}return r.__extends(t,e),t.prototype.render=function(){return i.div({className:"input-token vertical-center"},this._renderContent(),this._renderXButton())},t.displayName="InputToken",t.propTypes={content:s.oneOfType([s.string,s.element]),tooltip:s.string,remove:s.func.isRequired,store:s.object},t})(o.default.Component);t.InputToken=u})),define("modules/clean/teams/forensics/filter/_/_date/_/_calendar/calendar_day_selector",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/teams/forensics/internal/reducer/_date/_/date_utils"],(function(e,t,r,o,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n);var a="selected",u="unselected",l="out-of-range",_=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._getLimitDate=function(e,r,o){return null==r&&(r=e.getDate()),null==o&&(o=e.getMonth()),n.GetLimitDate(new Date(e.getFullYear(),o,r),t.props.isTo,t.props.firstDate,t.props.lastDate)},t._getGetDateStatus=function(){var e=t.props.viewedDate.getMonth(),r=t._getLimitDate(t.props.firstDate),o=t._getLimitDate(t.props.lastDate),i=null!=t.props.selectedDate?function(e){return n.IsSameDay(e,t.props.selectedDate)}:function(){return!1};return function(t){return t.getMonth()===e&&r<=t&&t<=o?i(t)?a:u:l}},t._getDays=function(){for(var e=t._getGetDateStatus(),r=t._getLimitDate(t.props.viewedDate,-t._getLimitDate(t.props.viewedDate,1).getDay()),o=[];o.length<42;)r=t._getLimitDate(r,r.getDate()+1),o.push(t._renderDay(r,e(r)));return o},t._renderDay=function(e,r){return i.div({key:e.getTime(),className:"day "+r,onClick:r===u?function(){return t.props.setSelectedDate(e)}:void 0},e.getDate())},t}return r.__extends(t,e),t.prototype.render=function(){var e=this._getDays();return i.div({className:"days"},(function(e,t,r){for(var o=[],i=e<t,s=r?i?t+1:t-1:t,n=e;i?n<s:n>s;i?n++:n--)o.push(n);return o})(0,6,!0).map((function(t){return i.div({key:t,className:"week"},e.slice(7*t,+(7*t+6)+1||void 0))})))},t.displayName="CalendarDaySelector",t.propTypes={isTo:s.bool,firstDate:s.instanceOf(Date),lastDate:s.instanceOf(Date),viewedDate:s.instanceOf(Date),selectedDate:s.object,setViewedDate:s.func,setSelectedDate:s.func},t})(o.default.Component);t.CalendarDaySelector=_})),define("modules/clean/teams/forensics/filter/_/_date/_/_calendar/calendar_month_selector",["require","exports","tslib","react","react-dom-factories","prop-types"],(function(e,t,r,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s);var n={NAME:"LEFT",MONTH_DELTA:-1},a={NAME:"RIGHT",MONTH_DELTA:1},u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._getArrowClass=function(e,t){var r=e.NAME.toLowerCase();return"c-arrow c-arrow--"+r+" calendar-arrow "+r+"-arrow "+(null!=t?"enabled":"disabled")+"-arrow"},t._getArrowTargetDate=function(e){var r=new Date(t.props.viewedDate.getTime());if(r.setMonth(r.getMonth()+e.MONTH_DELTA),t.props.firstDate<=r&&r<=t.props.lastDate)return r},t._renderArrow=function(e){var r=t._getArrowTargetDate(e);return o.default.createElement("a",{className:t._getArrowClass(e,r),onClick:null!=r?function(){return t.props.setViewedDate(r)}:void 0,"aria-label":t.props.store.I18N.SETTINGS.DATE.CALENDAR.MONTH.ALT[e.NAME]})},t._renderMonthAndYear=function(){return i.div({className:"month-and-year"},t.props.store.I18N.SETTINGS.DATE.CALENDAR.MONTH.NAMES[t.props.viewedDate.getMonth()]+" "+t.props.viewedDate.getFullYear())},t}return r.__extends(t,e),t.prototype.render=function(){return i.div({className:"months"},this._renderArrow(n),this._renderMonthAndYear(),this._renderArrow(a))},t.displayName="CalendarMonthSelector",t.propTypes={firstDate:s.instanceOf(Date),lastDate:s.instanceOf(Date),viewedDate:s.instanceOf(Date),setViewedDate:s.func,store:s.object},t})(o.default.Component);t.CalendarMonthSelector=u})),define("modules/clean/teams/forensics/filter/_/_date/_/date_calendar",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/teams/forensics/filter/_/_date/_/_calendar/calendar_day_selector","modules/clean/teams/forensics/filter/_/_date/_/_calendar/calendar_month_selector","modules/clean/teams/forensics/internal/reducer/_date/_/date_utils"],(function(e,t,r,o,i,s,n,a,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a),u=r.__importStar(u);var l=o.default.createFactory(n.CalendarDaySelector),_=o.default.createFactory(a.CalendarMonthSelector),c=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return i.div({className:"calendar c-card c-card--arrow c-card--arrow-nw",onClick:function(e){return e.preventDefault()},onFocus:function(e){return e.preventDefault()},onMouseDown:function(e){return e.preventDefault()}},_({viewedDate:this.props.viewedDate,setViewedDate:this.props.setViewedDate,firstDate:u.GetMonthLimitDate(this.props.firstDate,!0),lastDate:u.GetMonthLimitDate(this.props.lastDate,!1),store:this.props.store}),l({isTo:this.props.isTo,viewedDate:this.props.viewedDate,selectedDate:this.props.selectedDate,firstDate:this.props.firstDate,lastDate:this.props.lastDate,setSelectedDate:this.props.setSelectedDate}))},t.displayName="DateCalendar",t.propTypes={isTo:s.bool,firstDate:s.instanceOf(Date),lastDate:s.instanceOf(Date),viewedDate:s.instanceOf(Date),selectedDate:s.object,setViewedDate:s.func,setSelectedDate:s.func,store:s.object},t})(o.default.Component);t.DateCalendar=c})),define("modules/clean/teams/forensics/filter/_/_date/_/date_input",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/teams/forensics/filter/_/_date/_/date_calendar","modules/clean/teams/forensics/filter/_/filter_input","modules/clean/teams/forensics/internal/reducer/_date/_/date_utils"],(function(e,t,r,o,i,s,n,a,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a),u=r.__importStar(u);var l=o.default.createFactory(a.FilterInput),_=o.default.createFactory(n.DateCalendar),c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._getTimeOverlay=function(){if(!t.props.isInvalidValue&&u.IsMiddleOfDay(t.props.selectedDate))return[i.div({key:"exactTime",className:"date-input-exact-time date-input-exact-time-"+t.props.width+" vertical-center"},u.CellTimeStringFromDate(t.props.selectedDate))]},t}return r.__extends(t,e),t.prototype.render=function(){return i.div({className:"date-input "+(this.props.className||"")},l({placeholder:this.props.placeholder,name:this.props.name,width:this.props.width,value:this.props.value,isInvalidValue:this.props.isInvalidValue,invalidValueError:this.props.invalidValueError,onFocus:this.props.onFocus,onSubmit:this.props.onSubmit,onChangeValue:this.props.onChangeValue,onClearInput:this.props.onClearInput,onEscape:this.props.onEscape,suffixElements:this._getTimeOverlay(),store:this.props.store}),this.props.isShowCalendar?_({ref:"calendar",isTo:this.props.isTo,viewedDate:this.props.viewedDate,selectedDate:this.props.selectedDate,firstDate:this.props.firstDate,lastDate:this.props.lastDate,setViewedDate:this.props.setViewedDate,setSelectedDate:this.props.setSelectedDate,store:this.props.store}):void 0)},t.displayName="DateInput",t.propTypes={isTo:s.bool,firstDate:s.instanceOf(Date),lastDate:s.instanceOf(Date),viewedDate:s.instanceOf(Date),selectedDate:s.object,setViewedDate:s.func,setSelectedDate:s.func,className:s.string,isShowCalendar:s.bool,value:s.any,name:s.string,placeholder:s.string,width:s.oneOf(["full","half","quarter"]),isInvalidValue:s.bool,invalidValueError:s.string,onFocus:s.func,onEscape:s.func,onSubmit:s.func,onChangeValue:s.func,onClearInput:s.func,store:s.object},t})(o.default.Component);t.DateInput=c})),define("modules/clean/teams/forensics/filter/_/_date/filter_date_range",["require","exports","tslib","react","prop-types","modules/clean/teams/forensics/filter/_/_date/_/date_input"],(function(e,t,r,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s);var n=o.default.createFactory(s.DateInput),a=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderFromDateInput=function(){return n(t.props.store.date.getFromProps(t.props.context,t.props.fromClassName))},t._renderToDateInput=function(){return n(t.props.store.date.getToProps(t.props.context,t.props.toClassName))},t}return r.__extends(t,e),t.prototype.render=function(){return this.props.renderWithDateInputs(this._renderFromDateInput(),this._renderToDateInput())},t.displayName="FilterDateRange",t.propTypes={store:i.object,context:i.object,renderWithDateInputs:i.func,fromClassName:i.string,toClassName:i.string},t})(o.default.Component);t.FilterDateRange=a})),define("modules/clean/teams/forensics/filter/_/filter_input",["require","exports","tslib","react","react-dom","react-dom-factories","prop-types","modules/clean/react/tooltip","modules/clean/teams/forensics/filter/_/_/input_suggestions"],(function(e,t,r,o,i,s,n,a,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a),u=r.__importStar(u);var l=o.default.createFactory(u.InputSuggestions),_=13,c=27,p=38,d=40,h=o.default.createFactory(a.Tooltip),f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={},t.focus=function(){return i.findDOMNode(t.refs.input).focus()},t._incrementOptionIndex=function(e){if(t._hasSuggestions()){var r=t.props.suggestionsMarkedIndex+e;if(-1<r&&r<t.props.suggestions.length)return t.props.onMarkSuggestion(r),!0}return!1},t._onKeyDown=function(e){switch(e.keyCode||e.which){case _:return t.props.onSubmit();case p:return t._incrementOptionIndex(-1),e.preventDefault();case d:return t._onDown(e),e.preventDefault()}},t._clearInput=function(e){return e.preventDefault(),t.props.onClearInput()},t._onDown=function(e){if(!t._incrementOptionIndex(1)&&!t._hasSuggestions())return t._onChange(e)},t._onKeyUp=function(e){if((e.keyCode||e.which)===c)return t._onEscape()},t._onChange=function(e){return t.props.onChangeValue(e.target.value)},t._onBlur=function(e){if(!(t._hasSuggestions()&&i.findDOMNode(t.refs.suggestions)===document.activeElement||t.refs.input===e.target))return t.props.onSubmit()},t._onEscape=function(){return"function"==typeof t.props.onEscape?t.props.onEscape():void 0},t._onFocus=function(e){return null!=t.props.onFocus?t.props.onFocus():t._onChange(e)},t._setFocusOnInputField=function(e){return t._isFocused()?e.preventDefault():m(i.findDOMNode(t.refs.input),(function(e){return e.focus()}))},t._isFocused=function(){return t.props.name===(null!=document.activeElement?document.activeElement.getAttribute("name"):void 0)},t._hasSuggestions=function(){return(null!=t.props.suggestions?t.props.suggestions.length:void 0)||t.props.suggestionsContent},t._hasXButton=function(){return null!=t.props.onClearInput&&t.props.value},t._getContianerClass=function(){return t.props.isInvalidValue?"input-invalid":t._isFocused()?"input-valid-focused":"input-valid"},t._renderInvalidValueSprite=function(){return s.div({key:"invalid",className:"invalid-value-sprite-container vertical-center"},h({position:a.TooltipPosition.TOP,tooltip_classname:"c-card c-card--arrow c-card--arrow-s",tooltip_contents:s.div({},t.props.invalidValueError)},s.img({src:t.props.store.FC.UI.INVALID_HINT_SRC,className:"invalid-value-sprite"})))},t._renderXButton=function(){return s.img({src:t.props.store.FC.UI.X_IMAGE_SRC,className:"input-x-button vertical-center",onMouseDown:t._clearInput})},t._renderSuggestions=function(){return l({ref:"suggestions",value:t.props.value,maxShownSuggestions:t.props.maxShownSuggestions,firstShownSuggestionIndex:t.props.firstShownSuggestionIndex,rightSideElementOnNoValue:t.props.rightSideElementOnNoValue,suggestionsContent:t.props.suggestionsContent,onMarkSuggestion:t.props.onMarkSuggestion,renderSuggestion:t.props.renderSuggestion,suggestions:t.props.suggestions,suggestionsMarkedIndex:t.props.suggestionsMarkedIndex,onDismiss:t.props.onEscape,onSelect:t.props.onSubmit})},t._renderInput=function(){return s.div({key:"inputShadow",className:"input-field-shadow-container vertical-center"},[s.input({key:"input",ref:"input",placeholder:t.props.placeholder,type:"text",autoComplete:"off",name:t.props.name,value:t.props.value,onKeyDown:t._onKeyDown,onKeyUp:t._onKeyUp,onBlur:t._onBlur,onFocus:t._onFocus,onClick:t._onFocus,onChange:t._onChange,onMouseDown:function(e){return e.stopPropagation()},className:"vertical-center input-field input-field-"+(t.props.isInvalidValue?"in":"")+"valid"}),s.div({key:"shadow",className:"vertical-center input-field-shadow"},t.props.value||t.props.placeholder)].concat(t.props.suffixElements||[]))},t._renderInputFieldContent=function(){return s.div({className:"input-field-elements vertical-center",onMouseDown:t._setFocusOnInputField,onClick:t._setFocusOnInputField},(t.props.prefixElements||[]).concat([t.props.isInvalidValue?t._renderInvalidValueSprite():void 0,t._renderInput()]))},t}return r.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){if((null!=e.suggestions?e.suggestions.length:void 0)||e.suggestionsContent)return this.setState({value:e.value})},t.prototype.render=function(){return s.div({className:"filter-input "+this.props.width+"-width"},s.div({className:"input-field-container filter-input-control "+this._getContianerClass()},this._renderInputFieldContent(),this._hasXButton()?this._renderXButton():this.props.rightSideElementOnNoValue),this._hasSuggestions()?this._renderSuggestions():void 0)},t.displayName="FilterInput",t.propTypes={placeholder:n.string,name:n.string,value:n.any,isInvalidValue:n.bool,invalidValueError:n.string,width:n.oneOf(["full","half","quarter"]),rightSideElementOnNoValue:n.element,prefixElements:n.arrayOf(n.element),suffixElements:n.arrayOf(n.element),onClearInput:n.func,onFocus:n.func,onChangeValue:n.func,onSubmit:n.func,onEscape:n.func,maxShownSuggestions:n.number,firstShownSuggestionIndex:n.number,suggestionsContent:n.element,onMarkSuggestion:n.func,renderSuggestion:n.func,suggestions:n.array,suggestionsMarkedIndex:n.number,store:n.object},t})(o.default.Component);function m(e,t){return null!=e?t(e):void 0}t.FilterInput=f})),define("modules/clean/teams/forensics/filter/_/filter_marker",["require","exports","tslib","react","react-dom-factories","prop-types"],(function(e,t,r,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s);var n=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._getTextSections=function(){for(var e=t.props.hint.toLowerCase().trim(),r=t.props.str.toLowerCase(),o=0,s=[],n=function(e,r,o){if(e<r){var n={key:e};return o&&(n.className=t.props.markedClassName),s.push(i.span(n,t.props.str.slice(e,r)))}};;){var a=r.indexOf(e,o);if(a<0)break;n(o,a,!1),n(a,o=a+e.length,!0)}return n(o,r.length,!1),t.props.suffix&&s.push(i.span({key:"suffix"},t.props.suffix)),s},t}return r.__extends(t,e),t.prototype.render=function(){return i.div({className:this.props.className},(null!=this.props.hint?this.props.hint.trim():void 0)&&this.props.str?this._getTextSections():""+this.props.str+(this.props.suffix||""))},t.displayName="FilterMarker",t.propTypes={str:s.string,hint:s.string,suffix:s.string,className:s.string,markedClassName:s.string},t})(o.default.Component);t.FilterMarker=n})),define("modules/clean/teams/forensics/filter/_/filter_row",["require","exports","tslib","react","react-dom-factories","prop-types"],(function(e,t,r,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s);var n=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._getClassName=function(){},t}return r.__extends(t,e),t.prototype.render=function(){return i.div({className:this.props.className+" filter-row"},i.div({className:"text"},this.props.text),i.div({className:"content"},this.props.content))},t.displayName="FilterRow",t.propTypes={className:s.string,text:s.string,content:s.object},t})(o.default.Component);t.FilterRow=n})),define("modules/clean/teams/forensics/filter/activity/_/activity_browser",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/teams/forensics/filter/activity/_/activity_category"],(function(e,t,r,o,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n);var a=o.default.createFactory(n.ActivityCategory),u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._dismiss=function(e){if(!(new Date-t.start<1e3))return document.removeEventListener("click",t._dismiss,!0),"function"==typeof t.props.onDismiss?t.props.onDismiss():void 0},t._listen=function(){return document.addEventListener("click",t._dismiss,!0)},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){return this.start=new Date,this._listen()},t.prototype.componentWillUnmount=function(){return document.removeEventListener("click",this._dismiss,!0)},t.prototype.render=function(){var e=this;return i.div({className:"activity-browser"},Array.from(this.props.store.activity.getCategories()).map((function(t,r){return a({key:r,category:t,store:e.props.store})})))},t.displayName="ActivityBrowser",t.propTypes={store:s.object,open:s.bool,onDismiss:s.func},t})(o.default.Component);t.ActivityBrowser=u})),define("modules/clean/teams/forensics/filter/activity/_/activity_category",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/react/tooltip"],(function(e,t,r,o,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n);var a=o.default.createFactory(n.Tooltip),u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._truncateActivityName=function(e){return e.length>21?e.slice(0,18).trim()+"...":e},t._renderActivity=function(e,r){return a({key:e[t.props.store.FC.NAME],tooltip_classname:"c-card c-card--arrow c-card--arrow-s",position:n.TooltipPosition.TOP,tooltip_contents:i.div({},e[t.props.store.FC.NAME])},i.div({className:"activity-browser-item "+r,onMouseDown:function(){return t.props.store.activity.searchSuggestion(e)}},e[t.props.store.FC.NAME]))},t._renderMore=function(){return i.div({key:"more",className:"activity-browser-category-activity forensics-link",onMouseDown:function(){return t.props.store.activity.showCategorySuggestions(t.props.category)}},t.props.store.I18N.SETTINGS.ACTIVITY.CATEGORY.MORE)},t._renderOptions=function(){for(var e=[t._renderActivity(t.props.category,"activity-browser-label")],r=0,o=Array.from(t.props.store.activity.getCategoryActivities(t.props.category));r<o.length;r++){var i=o[r];if(e.push(t._renderActivity(i,"activity-browser-activity forensics-link")),e.length>3)break}return e.push(t._renderMore()),e},t}return r.__extends(t,e),t.prototype.render=function(){return i.div({className:"activity-browser-category",onMouseDown:function(e){return e.preventDefault()}},this._renderOptions())},t.displayName="ActivityCategory",t.propTypes={category:s.object,store:s.object},t})(o.default.Component);t.ActivityCategory=u})),define("modules/clean/teams/forensics/filter/activity/filter_activity",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/react/sprite","modules/clean/teams/forensics/filter/_/filter_input","modules/clean/teams/forensics/filter/_/filter_marker","modules/clean/teams/forensics/filter/_/filter_row","modules/clean/teams/forensics/filter/activity/_/activity_browser"],(function(e,t,r,o,i,s,n,a,u,l,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),a=r.__importStar(a),u=r.__importStar(u),l=r.__importStar(l),_=r.__importStar(_);var c=o.default.createFactory(n.Sprite),p=o.default.createFactory(l.FilterRow),d=o.default.createFactory(a.FilterInput),h=o.default.createFactory(u.FilterMarker),f=o.default.createFactory(_.ActivityBrowser),m=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={activityBrowser:!1},t._renderSuggestion=function(e,r){return h({key:e[t.props.store.FC.NAME],str:e[t.props.store.FC.NAME],hint:r,className:"activity-option",markedClassName:"marked"})},t._toggleActivityBrowser=function(e){return e.preventDefault(),t.refs.input.focus(),t.setState({activityBrowser:!t.state.activityBrowser})},t._renderBrowseActivitiesButton=function(){if(t.props.store.activity.isShowBrowseActivitiesButton())return i.div({key:"activityBrowserButton",className:"activity-browser-button vertical-center forensics-link",onMouseDown:t._toggleActivityBrowser},t.props.store.I18N.SETTINGS.ACTIVITY.BROWSE.LABEL,t._renderDownArrow())},t._renderDownArrow=function(){return c({group:"web",name:"arrow-down-blue",className:"down-arrow",alt:""})},t._renderActivityBrowser=function(){if(t.state.activityBrowser)return f({store:t.props.store,onDismiss:function(){return t.setState({activityBrowser:!1})}})},t._renderInput=function(){return d(t.props.store.activity.getInputProps({ref:"input",placeholder:t.props.store.I18N.SETTINGS.ACTIVITY.PLACEHOLDER,invalidValueError:t.props.store.I18N.SETTINGS.ACTIVITY.ERROR.INVALID,width:"full",renderSuggestion:t._renderSuggestion,suggestionsContent:t._renderActivityBrowser(),rightSideElementOnNoValue:t._renderBrowseActivitiesButton()}))},t}return r.__extends(t,e),t.prototype.componentWillReceiveProps=function(e){if(e.store.activity.hasSuggestions())return this.setState({activityBrowser:!1})},t.prototype.render=function(){return p({className:"filter-activity",text:this.props.store.I18N.SETTINGS.ACTIVITY.LABEL,content:this._renderInput()})},t.displayName="FilterActivity",t.propTypes={store:s.object},t})(o.default.Component);t.FilterActivity=m})),define("modules/clean/teams/forensics/filter/date/filter_date",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/teams/forensics/filter/_/_date/filter_date_range","modules/clean/teams/forensics/filter/_/filter_row","modules/clean/teams/forensics/internal/reducer/_date/_/date_constants"],(function(e,t,r,o,i,s,n,a,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a),u=r.__importStar(u);var l=o.default.createFactory(a.FilterRow),_=o.default.createFactory(n.FilterDateRange),c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderWithDateInputs=function(e,t){return i.div({className:"date-range"},e,t)},t._renderTimeRange=function(){return _({context:u.CONTEXTS.SEARCH,renderWithDateInputs:t._renderWithDateInputs,toClassName:"to-input",store:t.props.store})},t}return r.__extends(t,e),t.prototype.render=function(){return l({className:"filter-date",text:this.props.store.I18N.SETTINGS.DATE.LABEL,content:this._renderTimeRange()})},t.displayName="FilterDate",t.propTypes={store:s.object},t})(o.default.Component);t.FilterDate=c})),define("modules/clean/teams/forensics/filter/file/filter_file",["require","exports","tslib","react","prop-types","modules/clean/teams/forensics/filter/_/_/input_token","modules/clean/teams/forensics/filter/_/filter_input","modules/clean/teams/forensics/filter/_/filter_row"],(function(e,t,r,o,i,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a);var u=o.default.createFactory(s.InputToken),l=o.default.createFactory(n.FilterInput),_=o.default.createFactory(a.FilterRow),c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._getPlaceholder=function(e){if(e===t.props.store.FC.SETTINGS.FILE.INPUT_TYPE.ANY)return t.props.store.I18N.SETTINGS.FILE.PLACEHOLDER.ANY},t._renderInputToken=function(e,r){if(e!==t.props.store.FC.SETTINGS.FILE.INPUT_TYPE.ANY)return[u({key:"fileToken",content:r,tooltip:t.props.store.I18N.SETTINGS.FILE.TOKEN[e].TOOLTIP,remove:function(){return t.props.store.file.removeInputType()},store:t.props.store})]},t._renderInput=function(){var e=t.props.store.file.getInputType();return l(t.props.store.file.getInputProps({prefixElements:t._renderInputToken(e,t.props.store.file.getTokenName()),placeholder:t._getPlaceholder(e),width:"full"}))},t}return r.__extends(t,e),t.prototype.render=function(){return _({className:"filter-file",text:this.props.store.I18N.SETTINGS.FILE.LABEL,content:this._renderInput()})},t.displayName="FilterFile",t.propTypes={store:i.object},t})(o.default.Component);t.FilterFile=c})),define("modules/clean/teams/forensics/filter/filter_settings",["require","exports","tslib","react","react-dom-factories","prop-types","jquery","modules/clean/teams/forensics/filter/activity/filter_activity","modules/clean/teams/forensics/filter/date/filter_date","modules/clean/teams/forensics/filter/file/filter_file","modules/clean/teams/forensics/filter/user/filter_user"],(function(e,t,r,o,i,s,n,a,u,l,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importDefault(n),a=r.__importStar(a),u=r.__importStar(u),l=r.__importStar(l),_=r.__importStar(_);var c=o.default.createFactory(a.FilterActivity),p=o.default.createFactory(u.FilterDate),d=o.default.createFactory(l.FilterFile),h=o.default.createFactory(_.FilterUser),f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clearFocus=function(){return n.default(t.refs.hidden).focus()},t}return r.__extends(t,e),t.prototype.shouldComponentUpdate=function(){return!this.props.store.header.isSticky()},t.prototype.render=function(){return i.div({className:"filter-settings"},i.input({type:"hidden",ref:"hidden"}),p({key:"date",store:this.props.store}),h({key:"user",store:this.props.store}),null==m(m(null!=this.props.store.state?this.props.store.state.server_props:void 0,(function(e){return e.feature_flags})),(function(e){return e.file_filter}))||this.props.store.state.server_props.feature_flags.file_filter?d({key:"file",store:this.props.store}):void 0,c({key:"activity",store:this.props.store}))},t.displayName="FilterSettings",t.propTypes={store:s.object},t})(o.default.Component);function m(e,t){return null!=e?t(e):void 0}t.FilterSettings=f})),define("modules/clean/teams/forensics/filter/user/_/user_suggestion",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/teams/forensics/filter/_/filter_marker"],(function(e,t,r,o,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n);var a=o.default.createFactory(n.FilterMarker),u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderImage=function(){return i.img({className:"user-image",src:t.props.user[t.props.store.FC.IMAGE_URL]||t.props.store.FC.UI.DEFAULT_USER_IMAGE_SRC})},t._renderName=function(){var e;return null!=(e=t.props.user[t.props.store.FC.DISPLAY_NAME])?a({str:e,hint:t.props.hint,className:"name",markedClassName:"marked"}):t.props.store.I18N.RESULT.COLUMNS.USER.ERROR.NO_DISPLAY_NAME},t._renderDetails=function(){var e,r,o=(r=t.props.store.user.getRole(t.props.user))?" ⋅ "+r:void 0;return(e=t.props.user[t.props.store.FC.EMAIL])||(o=""+t.props.store.I18N.RESULT.COLUMNS.USER.ERROR.NO_EMAIL+(o||"")),a({str:e,suffix:o,hint:t.props.hint,className:"details",markedClassName:"marked"})},t._renderText=function(){return i.div({className:"user-text"},t._renderName(),t._renderDetails())},t}return r.__extends(t,e),t.prototype.render=function(){return i.div({className:"user-suggestion "+(this.props.className||"")},this._renderImage(),this._renderText())},t.displayName="UserSuggestion",t.propTypes={hint:s.string,user:s.object,isShort:s.bool,className:s.string,store:s.object},t})(o.default.Component);t.UserSuggestion=u})),define("modules/clean/teams/forensics/filter/user/filter_user",["require","exports","tslib","react","prop-types","modules/clean/teams/forensics/filter/_/filter_input","modules/clean/teams/forensics/filter/_/filter_row","modules/clean/teams/forensics/filter/user/_/user_suggestion"],(function(e,t,r,o,i,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a);var u=o.default.createFactory(n.FilterRow),l=o.default.createFactory(s.FilterInput),_=o.default.createFactory(a.UserSuggestion),c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderSuggestion=function(e,r){return _({user:e,hint:r,store:t.props.store})},t._renderInput=function(){return l(t.props.store.user.getInputProps({placeholder:t.props.store.I18N.SETTINGS.USER.PLACEHOLDER,invalidValueError:t.props.store.I18N.SETTINGS.USER.ERROR.INVALID,width:"full",renderSuggestion:t._renderSuggestion}))},t}return r.__extends(t,e),t.prototype.render=function(){return u({className:"filter-user",text:this.props.store.I18N.SETTINGS.USER.LABEL,content:this._renderInput()})},t.displayName="FilterUser",t.propTypes={store:i.object},t})(o.default.Component);t.FilterUser=c})),define("modules/clean/teams/forensics/forensics_main",["require","exports","tslib","react","react-dom-factories","prop-types","jquery","modules/clean/teams/forensics/filter/filter_settings","modules/clean/teams/forensics/header/header_bar","modules/clean/teams/forensics/internal/forensics_store","modules/clean/teams/forensics/result/result"],(function(e,t,r,o,i,s,n,a,u,l,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importDefault(n),a=r.__importStar(a),u=r.__importStar(u),_=r.__importStar(_);var c=o.default.createFactory(a.FilterSettings),p=o.default.createFactory(u.HeaderBar),d=o.default.createFactory(_.Result),h=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.store=null,t._createStore=function(e){return new l.ForensicsStore(t,t.setState.bind(t),e,window,n.default(window),document,n.default(document))},t.getResult=function(){return t.refs.result},t.getHeader=function(){return t.refs.header},t.getSettings=function(){return t.refs.settings},t._renderLabel=function(){return i.div({key:"label",className:"main-search-ui-label",onClick:function(){return t.store.search.refreshSearch()}},t.store.I18N.MAIN.SEARCH.LABEL)},t}return r.__extends(t,e),t.prototype.componentWillMount=function(){var e=this;if(this.store=this._createStore(this.props["forensics-props"]),this.store.onWillMount(),this.props.onHeaderClick)return this.props.onHeaderClick((function(){return e.store.search.refreshSearch()}))},t.prototype.componentWillUnmount=function(){return this.store.onWillUnmount()},t.prototype.componentDidUpdate=function(){return this.store.onDidUpdate()},t.prototype.render=function(){var e=this,t=this.state.is_search_mode,r=t||!this.store.search.isSearching();return i.div({className:r?"team-forensics-main"+(t?"":" team-forensics-recent-activity"):void 0},(function(){if(!e.props["is-pagelet"]&&t)return e._renderLabel()})(),t?c({ref:"settings",store:this.store}):void 0,r?p({ref:"header",store:this.store,isPagelet:this.props["is-pagelet"]}):void 0,r?d({ref:"result",store:this.store}):void 0)},t.displayName="ForensicsMain",t.propTypes={"forensics-props":s.object,store:s.object,"is-pagelet":s.bool,onHeaderClick:s.func},t})(o.default.Component);t.ForensicsMain=h})),define("modules/clean/teams/forensics/header/header_bar",["require","exports","tslib","react","react-dom","react-dom-factories","prop-types","modules/clean/teams/forensics/header/summary/header_summary","modules/clean/teams/forensics/header/table/header_table"],(function(e,t,r,o,i,s,n,a,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a),u=r.__importStar(u);var l=o.default.createFactory(a.HeaderSummary),_=o.default.createFactory(u.HeaderTable),c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderHeader=function(e,r){return s.div({style:e?{left:t.props.store.header.getForensicsLeft()}:void 0,className:"header-result-bar"+(e?" sticky-header":"")+" "+(e&&!r?" hidden-sticky-header":"")},t.props.store.state.is_search_mode?l({ref:e?"sticky":"nonSticky",store:t.props.store,isSticky:e,isPagelet:t.props.isPagelet}):void 0,e!==r||t.props.store.result.isEmpty()?r?s.div({className:"sticky-header-to-table-spacer"},""):void 0:_({store:t.props.store,isPagelet:t.props.isPagelet}))},t.getStickyHeightSurplus=function(){return i.findDOMNode(t.refs.sticky).clientHeight-i.findDOMNode(t.refs.nonSticky).clientHeight},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props.store.header.isSticky();return s.div({className:"header-bar-container"},this._renderHeader(!0,e),this._renderHeader(!1,e))},t.displayName="HeaderBar",t.propTypes={store:n.object,isPagelet:n.bool},t})(o.default.Component);t.HeaderBar=c})),define("modules/clean/teams/forensics/header/summary/create_report/_/_/create_report_controls",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/react/button","modules/clean/react/tooltip","modules/clean/teams/forensics/filter/_/_date/filter_date_range","modules/clean/teams/forensics/internal/reducer/_date/_/date_constants"],(function(e,t,r,o,i,s,n,a,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a),u=r.__importStar(u),l=r.__importStar(l);var _=o.default.createFactory(n.link_button),c=o.default.createFactory(a.Tooltip),p=o.default.createFactory(u.FilterDateRange),d=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderButton=function(){var e=t.props.store.date.isCreateReportDisabled(),r=_({importance:"primary",className:"report-submit-button"+(e?" submit-disabled":""),onClick:function(){return t.props.store.header.submitCreateReport()}},t.props.store.I18N.HEADER.CREATE_REPORT_BUTTON.MODAL.LABEL.BUTTON);return e?c({position:a.TooltipPosition.TOP,tooltip_classname:"c-card c-card--arrow c-card--arrow-s",tooltip_contents:i.div({},t.props.store.I18N.HEADER.CREATE_REPORT_BUTTON.MODAL.ERROR)},r):r},t._renderWithDateInputs=function(e,r){return i.div({className:"create-report-modal-controls"},i.div({className:"report-from-label"},t.props.store.I18N.HEADER.CREATE_REPORT_BUTTON.MODAL.LABEL.FROM),e,i.div({className:"report-to-label"},t.props.store.I18N.HEADER.CREATE_REPORT_BUTTON.MODAL.LABEL.TO),r,t._renderButton())},t}return r.__extends(t,e),t.prototype.render=function(){return p({store:this.props.store,context:l.CONTEXTS.CREATE_REPORT,renderWithDateInputs:this._renderWithDateInputs,toClassName:"report-to-input",fromClassName:"report-from-input"})},t.displayName="CreateReportControls",t.propTypes={store:s.object},t})(o.default.Component);t.CreateReportControls=d})),define("modules/clean/teams/forensics/header/summary/create_report/_/create_report_modal",["require","exports","tslib","react","react-dom-factories","prop-types","jquery","modules/clean/react/modal","modules/clean/teams/forensics/header/summary/create_report/_/_/create_report_controls"],(function(e,t,r,o,i,s,n,a,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importDefault(n),a=r.__importStar(a),u=r.__importStar(u);var l=o.default.createFactory(a.Modal),_=o.default.createFactory(u.CreateReportControls),c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._getTokensText=function(e){for(var r=[],o=0,i=Array.from(e);o<i.length;o++){var s=i[o];s[t.props.store.FC.SEARCH_TOKEN.IS_IN_CREATE_REPORT]&&r.push(s[t.props.store.FC.SEARCH_TOKEN.NAME]+" "+s[t.props.store.FC.SEARCH_TOKEN.VALUE])}return r.join(" • ")},t._renderContent=function(){var e;return i.div({className:"create-report-modal-content"},i.input({type:"hidden",ref:"hidden"}),i.div({className:"create-report-modal-content-title"},t.props.store.I18N.HEADER.CREATE_REPORT_BUTTON.MODAL.CONTENT_HEADER),(e=t.props.store.header.getSearchTokens()).length?i.div({className:"create-report-modal-content-search-tokens"},t._getTokensText(e)):void 0)},t._renderDisclaimer=function(){if(t.props.store.header.getSearchTokens().length)return i.div({className:"create-report-modal-disclaimer"},t.props.store.I18N.HEADER.CREATE_REPORT_BUTTON.MODAL.DISCLAIMER)},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){return n.default(this.refs.hidden).focus()},t.prototype.render=function(){var e=this;return l({width:640,title:this.props.store.I18N.HEADER.CREATE_REPORT_BUTTON.MODAL.TITLE,className:"forensics-create-report-modal",acceptButtonText:null,dimissButtonText:null,onDismiss:function(){return e.props.store.header.hideCreateReportModal()}},this._renderContent(),_({store:this.props.store}),this._renderDisclaimer())},t.displayName="CreateReportModal",t.propTypes={store:s.object},t})(o.default.Component);t.CreateReportModal=c})),define("modules/clean/teams/forensics/header/summary/create_report/summary_create_report",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/react/button","modules/clean/react/modal","modules/clean/teams/forensics/header/summary/create_report/_/create_report_modal"],(function(e,t,r,o,i,s,n,a,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),u=r.__importStar(u);var l=o.default.createFactory(n.link_button),_=o.default.createFactory(u.CreateReportModal),c=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderButton=function(){var e=t.props.store.header.isCreateReportDisabled();return l({importance:"tertiary",className:"create-report-button "+(e?" create-report-button-disabled":void 0),onClick:function(){return t.props.store.header.showCreateReportModal()}},t.props.store.I18N.HEADER.CREATE_REPORT_BUTTON.LABEL)},t._renderModal=function(){if(t.props.store.header.isShowCreateReportModal()&&!t.props.isPagelet)return _({store:t.props.store})},t}return r.__extends(t,e),t.prototype.componentDidUpdate=function(){if(this.props.isPagelet)return this.props.store.header.isShowCreateReportModal()?a.Modal.showInstance(o.default.createElement(_,{store:this.props.store}),!1):a.Modal.close()},t.prototype.render=function(){return i.div({className:"create-report-header-section"},this._renderButton(),this._renderModal())},t.displayName="SummaryCreateReport",t.propTypes={store:s.object,isPagelet:s.bool},t})(o.default.Component);t.SummaryCreateReport=c})),define("modules/clean/teams/forensics/header/summary/header_summary",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/teams/forensics/header/summary/create_report/summary_create_report","modules/clean/teams/forensics/header/summary/non_sticky/summary_non_sticky","modules/clean/teams/forensics/header/summary/sticky/summary_sticky"],(function(e,t,r,o,i,s,n,a,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a),u=r.__importStar(u);var l=o.default.createFactory(a.SummaryNonSticky),_=o.default.createFactory(u.SummarySticky),c=o.default.createFactory(n.SummaryCreateReport),p=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){return i.div({className:"header-summary "+(this.props.store.result.isEmpty()?" no-result no-table-header":"")},this.props.isSticky?_({store:this.props.store}):l({store:this.props.store}),this.props.store.header.isSticky()||!this.props.isSticky?c({store:this.props.store,isPagelet:this.props.isPagelet}):void 0)},t.displayName="HeaderSummary",t.propTypes={isSticky:s.bool,store:s.object,isPagelet:s.bool},t})(o.default.Component);t.HeaderSummary=p})),define("modules/clean/teams/forensics/header/summary/non_sticky/_/non_sticky_settings_info",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/react/sprite"],(function(e,t,r,o,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s);var a=o.default.createFactory(n.Sprite),u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderActivityLink=function(e){return i.span({className:"forensics-link",onClick:function(){return t.props.store.activity.searchActivityByArgs(e,!1)}},t.props.store.activity.getActivityNameByArgs(e,!1))},t._renderLearnMore=function(){return i.a({className:"forensics-link",href:"/help/505",target:"_blank"},t.props.store.I18N.HEADER.ACTIVITY_SUMMARY.INFO.LEARN_MORE)},t._renderTooltip=function(){return i.div({className:"settings-info-tooltip"},i.div({className:"settings-info-tooltip-paragraph"},t.props.store.I18N.HEADER.ACTIVITY_SUMMARY.INFO.TELESCOPE_DECLAIMER),i.div({className:"settings-info-tooltip-paragraph"},t.props.store.I18N.HEADER.ACTIVITY_SUMMARY.INFO.PREFIX,t._renderActivityLink(244),t.props.store.I18N.HEADER.ACTIVITY_SUMMARY.INFO.AND,t._renderActivityLink(245),". ",t._renderLearnMore()))},t}return r.__extends(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){return i.div({className:"settings-info-tooltip-anchor"},a({alt:"",group:"web",name:"info",className:"settings-info-tooltip-anchor-sprite"}),this._renderTooltip())},t.displayName="NonStickySettingsInfo",t.propTypes={store:s.object},t})(o.default.Component);t.NonStickySettingsInfo=u})),define("modules/clean/teams/forensics/header/summary/non_sticky/summary_non_sticky",["require","exports","tslib","create-react-class","react","react-dom-factories","prop-types","modules/clean/components/loading_indicator","modules/clean/teams/forensics/header/summary/non_sticky/_/non_sticky_settings_info"],(function(e,t,r,o,i,s,n,a,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importDefault(i),s=r.__importStar(s),n=r.__importStar(n),u=r.__importStar(u);var l=i.default.createFactory(a.LoadingIndicator),_=i.default.createFactory(u.NonStickySettingsInfo),c=o.default({displayName:"SummaryNonSticky",propTypes:{store:n.object},_periodicUpdate:function(){if(this.isMounted())return setTimeout(this._periodicUpdate,6e4),this.forceUpdate()},componentDidMount:function(){return this._periodicUpdate()},render:function(){var e,t=this.props.store.header.getSummaryStatus();return s.div({className:"summary-content summary-non-sticky"},t===this.props.store.FC.SUMMARY_STATUS.LOADING?l({style:a.LoadingIndicator.LoadingIndicatorStyle.SPINNER,className:"loading-status"}):void 0,s.div({className:"settings-status"},this.props.store.I18N.HEADER.ACTIVITY_SUMMARY.STATUS[t]),t!==this.props.store.FC.SUMMARY_STATUS.LOADING&&(e=this.props.store.header.getLastUpdatedString())?s.div({className:"last-updated-status"},e):void 0,t===this.props.store.FC.SUMMARY_STATUS.MATCHING?_({store:this.props.store}):void 0)}});t.SummaryNonSticky=c})),define("modules/clean/teams/forensics/header/summary/sticky/_/sticky_search_token",["require","exports","tslib","react","react-dom-factories","prop-types"],(function(e,t,r,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s);var n=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderText=function(){return i.div({className:"sticky-search-token-text"},t.props.searchToken[t.props.store.FC.SEARCH_TOKEN.NAME]+" "+t.props.searchToken[t.props.store.FC.SEARCH_TOKEN.VALUE])},t._renderRemoveButton=function(){return i.img({className:"sticky-search-token-remove-button",onClick:function(){return t.props.searchToken[t.props.store.FC.SEARCH_TOKEN.REMOVE]()},src:t.props.store.FC.UI.X_IMAGE_SRC})},t}return r.__extends(t,e),t.prototype.render=function(){return i.div({className:"sticky-search-token"},this._renderText(),this._renderRemoveButton())},t.displayName="StickySearchToken",t.propTypes={searchToken:s.object,store:s.object},t})(o.default.Component);t.StickySearchToken=n})),define("modules/clean/teams/forensics/header/summary/sticky/_/sticky_show_filters_button",["require","exports","tslib","react","prop-types","modules/clean/react/button"],(function(e,t,r,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s);var n=o.default.createFactory(s.link_button),a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){var e=this;return n({importance:"tertiary",className:"show-filters-button",onClick:function(){return e.props.store.result.resetPosition()}},this.props.store.I18N.HEADER.ACTIVITY_SUMMARY.SHOW_FILTERS_BUTTON.LABEL)},t.displayName="StickyShowFiltersButton",t.propTypes={store:i.object},t})(o.default.Component);t.StickyShowFiltersButton=a})),define("modules/clean/teams/forensics/header/summary/sticky/summary_sticky",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/teams/forensics/header/summary/sticky/_/sticky_search_token","modules/clean/teams/forensics/header/summary/sticky/_/sticky_show_filters_button"],(function(e,t,r,o,i,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a);var u=o.default.createFactory(n.StickySearchToken),l=o.default.createFactory(a.StickyShowFiltersButton),_=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._getElements=function(){for(var e=[l({key:"button",store:t.props.store})],r=t.props.store.header.getSearchTokens(),o=0;o<r.length;o++){var i=r[o];e.push(u({key:o,searchToken:i,store:t.props.store}))}return e},t}return r.__extends(t,e),t.prototype.render=function(){return i.div({className:"summary-content summary-sticky"},this._getElements())},t.displayName="SummarySticky",t.propTypes={store:s.object},t})(o.default.Component);t.SummarySticky=_})),define("modules/clean/teams/forensics/header/table/header_table",["require","exports","tslib","react","react-dom-factories","prop-types"],(function(e,t,r,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s);var n=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderCell=function(e){var r;return i.div({key:e,className:"header-cell column-"+e,style:(r=t.props.store.result.getHeaderColumnWidth(e))?{width:r}:void 0},t.props.store.I18N.RESULT.COLUMNS[e.toUpperCase()].HEADER)},t}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.store.result.getColumnNames(),r=!this.props.store.state.is_search_mode;return i.div({className:this.props.store.result.getTableClass("table-top-row-container"),onWheel:function(t){return e.props.store.result.setHorizontalScroll(t)}},i.div({className:"table-top-row",ref:"table",style:{right:this.props.store.result.getXOffset()}},Array.from(t).map((function(t){return r&&e.props.isPagelet?i.div({className:"column-"+t+"-wrapper"},e._renderCell(t)):e._renderCell(t)}))))},t.displayName="HeaderTable",t.propTypes={store:s.object,isPagelet:s.bool},t})(o.default.Component);t.HeaderTable=n})),define("modules/clean/teams/forensics/internal/forensics_constants",["require","exports","modules/clean/static_urls"],(function(e,t,r){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0});var i={SEARCH:{NAME:"search"},SUGGEST:{NAME:"suggest",FIELD:"field"}},s={FORENSICS_AJAX:"/team/admin/forensics_ajax",CREATE_REPORT:"/team/events_report/csv"},n={FORENSICS_VERSION:1,SERVER_PROPS:"server_props",CITY:"city",EVENT_CATEGORY:"event_category",NAME:"name",EVENT_TYPE:"event_type",IP_ADDRESS:"ip_address",IS_DIR:"is_dir",HAS_NEXT:"has_next",FILE_TOKEN_KEY:"file_token",WARNING_MSG:"warning_msg",ROOT_TIME:"root_time",IS_VISIBLE:"is_visible",IS_RESELLER_SUPPORT:"is_reseller_support",IS_MTIA:"is_mtia",PAGE:"page",EVENTS:"events",USERS:"users",TS_UTC_MS:"ts_utc_ms",LIMIT:"limit",USER_ID:"user_id",DISPLAY_NAME:"display_name",EMAIL:"email",FILE_OBJ_ID:"file_obj_id",FILE_NAME:"file_name",IMAGE_URL:"image_url",IS_MEMBER:"is_member",IS_ADMIN:"is_admin",DETAILS:"details",IS_WEB:"is_web",VALUE:"value",ACTING_AS:"acting_as",ACTING_AS_TYPE:"type",ACTING_AS_USER_VAL:"user",ACTING_AS_TEAM_ADMIN_VAL:"team_admin",ACTING_AS_USER_ID_VAL:"user_id",IS_FILE:"is_file",IS_APP:"is_app",IS_FILE_ID:"is_file_id",AJAX:{IS_OK:"is_ok",ERROR_MESSAGE:"error_message",PAYLOAD:"payload",TEAM_ID:"team_id",ACTION:"action",ARGS_JSON:"args_json",HINT:"hint",SUGGEST_COUNT:"suggestion_count",SEARCH_HINTS:"search_hints",SEARCH_ARGS:"search_args",FIELD:i.SUGGEST.FIELD,REQUESTS:{CREATE_REPORT:{NAME:"createReport",URL:s.CREATE_REPORT},SEARCH:{NAME:"search",URL:s.FORENSICS_AJAX,ACTION:i.SEARCH.NAME},SUGGEST_USER:{NAME:"suggestUser",URL:s.FORENSICS_AJAX,ACTION:i.SUGGEST.NAME,DEFAULT_ARGS:(o={},o[i.SUGGEST.FIELD]="user",o),DELAY:300}}},URL:{VALUE_TYPE:{STRING:"string",INTEGER:"integer",BOOLEAN:"boolean",DECORATIVE_STRING:"decorativeString",DECORATIVE_INTEGER:"decorativeInteger",DECORATIVE_BOOLEAN:"decorativeBoolean",BOOLEAN_TYPES:["boolean","decorativeBoolean"],INTEGER_TYPES:["integer","decorativeInteger"],STRING_TYPES:["string","decorativeString"],DECORATIVE_TYPES:["decorativeBoolean","decorativeInteger","decorativeString"]}},SETTINGS:{ACTIVITY:{CATEGORY_ENUM_AND_NAME_PAIRS:"event_category_and_name_pairs",ACTIVITIES:"activities",DEPRECATED_ACTIVITIES:"deprecated_activities"},FILE:{INPUT_TYPE:{FILE:"FILE",FOLDER:"FOLDER",ANY:"ANY"}}},DATE:{SEARCH:{START_TIME:"start_time",END_TIME:"end_time"},CREATE_REPORT:{START_TIME:"from_date",END_TIME:"to_date"}},SUGGEST:{SUGGESTIONS:"suggestions",NAMESPACE:{ACTIVITY:"activity",USER:"user"}},UI:{X_IMAGE_SRC:r.static_url("/static/images/sprites/web_core_2x/xclose-vflhlXcH_.png"),INVALID_HINT_SRC:r.static_url("/static/images/scooter/icon-form-invalid-vflj3ALzP.svg"),DEFAULT_USER_IMAGE_SRC:r.static_url("/static/images/avatar/faceholder-vflmhyJKO.svg")},SUMMARY_STATUS:{LOADING:"LOADING_ACTIVITY",ALL:"ALL_ACTIVITY",MATCHING:"MATCHING_ACTIVITY"},DETAIL_OPTION:{CONTENT:"renderedContent",WITH_ON_CLICK:"withOnClick"},DETAIL_OPTIONS:"detailOptions",DRILL_DOWN_TYPE:{ACTIVITY:"ACTIVITY",MEMBER:"MEMBER",FILE:"FILE",FOLDER:"FOLDER"},CONTEXTUAL_TYPE:{DRILL_DOWN:"drillDownMenu",STACKED_DETAIL_EXPAND:"stackedDetailExpandMenu"},CONTEXTUAL_USER_OPTION:"contextualUserOption",CONTEXTUAL_DATE_OPTIONS:"contextualDateOptions",DEFAULT_MAX_SUGGESTIONS:1e3,EVENT_LIMIT:{RECENT_ACTIVITY:5,SEARCH:10},COLUMN:{DATE:"date",USER:"user",ACTIVITY:"activity",LOCATION:"location"},SEARCH_TOKEN:{NAME:"name",VALUE:"value",REMOVE:"remove",IS_IN_CREATE_REPORT:"isShowInCreateReportModal",LENGTH:"nameAndValueLength"},REDUCER_ACTION:{WITH_WILL_MOUNT:"_withWillMount",WITH_DID_MOUNT:"_withDidMount",WITH_WILL_UNMOUNT:"_withWillUnmount",WITH_POST_RENDER:"_withPostRender",WITH_CHANGE_TO_STICKY:"_withChangeToSticky",IS_VALID_WITH_URL_ARGS:"_isValidWithUrlArgs",GET_URL_KEY_TO_TYPE:"_getUrlKeyToType",ADD_SEARCH_TOKENS:"_addSearchTokens",ADD_SEARCH_ARGS:"_addSearchArgs"}};t.ForensicsConstants=n})),define("modules/clean/teams/forensics/internal/forensics_i18n",["require","exports","modules/core/i18n"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t){return function(r){return 1===r?e:t.format({time_units:r})}},i={RECENT_ACTIVITY:{ERRORS:{FAILED_TO_LOAD_EVENTS:r._("Failed to load recent activity")}},AJAX:{ERRORS:{onServerDidNotProcess:function(e){return r._("Our servers failed to process your %(action)s request.").format({action:e})},onUnexpected:function(e){return r._("Encountered unexpected error performing %(action)s.").format({action:e})},onServerError:function(e,t){return void 0===t&&(t=""),t?r._("%(error)s").format({error:t}):r._("Request failed")}},ACTIONS:{SEARCH:{NAME:r._("search")},SUGGEST_USER:{NAME:r._("suggest user")},CREATE_REPORT:{NAME:r._("create"),SUCCESS:r._("Report started. We’ll email you when it’s ready.")},UNKNOWN:{NAME:r._("unknown action")}}},MAIN:{SEARCH:{LABEL:r._("Activity")},RECENT_ACTIVITY:{LABEL:r._("Recent activity"),TOOLTIP:r._("Recent activity by this account")},ERROR:{MESSAGE:r._("Invalid URL"),REDIRECT:r._("See all activity")}},SETTINGS:{ACTIVITY:{FILTER_NAME:{ACTIVITY:r._("Activity:"),CATEGORY:r._("Activity category:")},LABEL:r._("Activity"),PLACEHOLDER:r._("Log in, create shared links..."),ERROR:{INVALID:r._("Invalid activity name")},BROWSE:{LABEL:r._("Browse activities")},CATEGORY:{MORE:r._("More...")}},DATE:{PLACEHOLDER:{FROM:r._("From",{comment:"Start Date"}),TO:r._("To",{comment:"End Date"})},FILTER_NAME:{FROM:r._("From:",{comment:"Start Date"}),TO:r._("To:",{comment:"End Date"})},LABEL:r._("Date"),DAY_PERIOD:{AM:r._("AM"),PM:r._("PM")},ERROR:{INVALID_FORMAT:r._("Invalid date format"),IN_THE_FUTURE:r._("Date is in the future"),BEGINNING_OF_TIME:r._("Date is before computers came to exist"),TO_BEFORE_FROM:r._("Date is before from date"),FROM_AFTER_TO:r._("Date is after to date")},CALENDAR:{MONTH:{NAMES:[r._("January"),r._("February"),r._("March"),r._("April"),r._("May"),r._("June"),r._("July"),r._("August"),r._("September"),r._("October"),r._("November"),r._("December")],ALT:{LEFT:r._("Previous month"),RIGHT:r._("Next month")}}},DELTAS:{FUTURE:[r._("from"),r._("future"),r._("forward")],SINGLE:{NOW:[r._("Today"),r._("Now"),r._("This moment"),r._("Right now"),r._("Just now")],DAY:[r._("Yesterday"),r._("A day before"),r._("1 day ago"),r._("One day ago"),r._("A day ago")],WEEK:[r._("1 week ago"),r._("1 week before"),r._("One week ago"),r._("A week ago"),r._("Last week")],MONTH:[r._("1 month ago"),r._("1 month before"),r._("One month ago"),r._("A month ago"),r._("Last month")],YEAR:[r._("1 year ago"),r._("1 year before"),r._("One year ago"),r._("A year ago"),r._("Last year")]},MULTIPLE:{DAY:[r._("days ago"),r._("days back"),r._("days before")],WEEK:[r._("weeks ago"),r._("weeks back"),r._("weeks before")],MONTH:[r._("months ago"),r._("months back"),r._("months before")],YEAR:[r._("years ago"),r._("years back"),r._("years before")]}}},FILE:{FILTER_NAME:r._("File or folder:"),LABEL:r._("File or folder"),PLACEHOLDER:{ANY:r._("File name"),VERSIONED:r._("Version name")},TOKEN:{FILE:{LABEL:r._("File"),TOOLTIP:r._("Searching a file’s version history")},FOLDER:{LABEL:r._("Folder"),TOOLTIP:r._("Searching a folder’s version history")}},SEARCH_TOKEN:{INPUT_TYPE:{FILE:r._("File:"),FOLDER:r._("Folder:")},FILE_NAME:{ALL_VERSIONS:r._("All versions")}}},USER:{FILTER_NAME:r._("Member:"),LABEL:r._("Member"),PLACEHOLDER:r._("Name or email"),ERROR:{INVALID:r._("Invalid member name or email")},SUGGESTION:{ROLE:{ADMIN:r._("admin"),MEMBER:r._("member")}}}},HEADER:{ACTIVITY_SUMMARY:{STATUS:{ALL_ACTIVITY:r._("All activity"),MATCHING_ACTIVITY:r._("Matching activity"),LOADING_ACTIVITY:r._("Loading activity...")},TIME_UNIT_NAME_TO_TIME_AGO:{NOW:r._("just updated"),MINUTES:o(r._("updated 1 minute ago"),r._("updated %(time_units)s minutes ago")),HOURS:o(r._("updated 1 hour ago"),r._("updated %(time_units)s hours ago")),DAYS:o(r._("updated 1 day ago"),r._("updated %(time_units)s days ago")),WEEKS:o(r._("updated 1 week ago"),r._("updated %(time_units)s weeks ago")),MONTHS:o(r._("updated 1 month ago"),r._("updated %(time_units)s months ago")),YEARS:o(r._("updated 1 year ago"),r._("updated %(time_units)s years ago"))},SHOW_FILTERS_BUTTON:{LABEL:r._("Show filters")},INFO:{TELESCOPE_DECLAIMER:r._("Results less than 24 hours old may still be populating."),PREFIX:r._("File downloads via a shared link are logged separately in "),AND:r._(" and "),LEARN_MORE:r._("Learn more")}},CREATE_REPORT_BUTTON:{LABEL:r._("Create report"),MODAL:{TITLE:r._("Create activity report"),ERROR:r._("Please select the a start date and an end date."),DISCLAIMER:r._("The report will contain all events between the selected dates, rather than filtered ones. If you’d like to share the output of a particular query with other admins on your account, please send them the URL."),LABEL:{BUTTON:r._("Create report"),FROM:r._("From",{comment:"Start Date"}),TO:r._("To",{comment:"End Date"})},CONTENT_HEADER:r._("Create a report that includes:")}}},RESULT:{ON_ERROR:r._("Error fetching activities"),NO_RESULTS:{TITLE:r._("No result found"),SUBTITLE:{TEXT:r._("Learn more about activities at "),LEARN_MORE_LINK:r._("Dropbox Help Center")}},INVALID_URL:{TITLE:r._("Invalid URL"),SEE_ALL_ACTIVITIES:r._("See all activities")},COLUMNS:{DATE:{HEADER:r._("Date"),CONTEXTUAL:{FROM:r._("Set as start date"),TO:r._("Set as end date")}},USER:{HEADER:r._("Member"),ERROR:{NO_DISPLAY_NAME:r._("Non member"),NO_EMAIL:r._("Unspecified email"),NO_USER_JUST_APP:r._("App")},AS:r._("As: "),TEAM_ADMIN:r._("Team Admin")},ACTIVITY:{HEADER:r._("Activity"),ERROR:{forUnknownType:function(e){return r._("Unknown activity (%(type)s)").format({type:e})}},DETAIL:{WEB:r._("Web")}},LOCATION:{HEADER:r._("Location"),ERROR:{UNKNOWN_LOCATION:r._("Unknown location")}}},SELECTION:{copiedToClipboard:function(e){return 1===e?r._("Copied 1 row to the clipboard"):r._("Copied %(rows)s rows to the clipboard").format({rows:e})},MODAL:{TITLE:{OSX:r._("Press COMMAND+C again to copy the selection"),WINDOWS:r._("Press CTRL+C again to copy selection")},BUTTON:r._("Close")}},CONTEXTUAL:{getDrillDownBy:function(e){return r._("Filter by %(value)s").format({value:e})},ACTIVITY:{DRILL_DOWN_TYPE:r._("Filter by activity")},MEMBER:{DRILL_DOWN_TYPE:r._("Filter by member"),MODAL_SUBTITLE:r._("Select a member to filter by")},FILE:{DRILL_DOWN_TYPE:r._("Filter by file"),MODAL_SUBTITLE:r._("Select a file to filter by")},FOLDER:{DRILL_DOWN_TYPE:r._("Filter by folder"),MODAL_SUBTITLE:r._("Select a folder to filter by")},DRILL_DOWN_MODAL_DISMISS_BUTTON:r._("Cancel")}}};t.ForensicsI18n=i})),define("modules/clean/teams/forensics/internal/forensics_store",["require","exports","tslib","external/lodash","modules/clean/teams/forensics/internal/forensics_constants","modules/clean/teams/forensics/internal/forensics_i18n","modules/clean/teams/forensics/internal/reducer/_/forensics_reducer","modules/clean/teams/forensics/internal/reducer/_ajax/reducer_ajax","modules/clean/teams/forensics/internal/reducer/_date/reducer_date","modules/clean/teams/forensics/internal/reducer/_suggest/reducer_activity","modules/clean/teams/forensics/internal/reducer/_suggest/reducer_user","modules/clean/teams/forensics/internal/reducer/reducer_contextual","modules/clean/teams/forensics/internal/reducer/reducer_details","modules/clean/teams/forensics/internal/reducer/reducer_file","modules/clean/teams/forensics/internal/reducer/reducer_header","modules/clean/teams/forensics/internal/reducer/reducer_result","modules/clean/teams/forensics/internal/reducer/reducer_search","modules/clean/teams/forensics/internal/reducer/reducer_selection","modules/clean/teams/forensics/internal/reducer/reducer_url"],(function(e,t,r,o,i,s,n,a,u,l,_,c,p,d,h,f,m,g,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a),u=r.__importStar(u),l=r.__importStar(l),_=r.__importStar(_),c=r.__importStar(c),p=r.__importStar(p),d=r.__importStar(d),h=r.__importStar(h),f=r.__importStar(f),m=r.__importStar(m),g=r.__importStar(g),S=r.__importStar(S);var y=(function(e){function t(t,r,o,y,E,v,T){var A=this,C=n.ForensicsReducer.call;return n.ForensicsReducer.call=function(){},A=e.call(this,null,null)||this,n.ForensicsReducer.call=C,(A=e.call(this,A,!1)||this)._forensicsMain=t,A.onStateChange=r,A.window=y,A.$window=E,A.document=v,A.$document=T,A.state={I18N:s.ForensicsI18n,FC:i.ForensicsConstants,server_props:o,is_search_mode:null==(null!=o?o.user_id:void 0)},A.I18N=A.state.I18N,A.FC=A.state.FC,A._methodNameToReducers={},A.activity=new l.ReducerActivity(A),A.ajax=new a.ReducerAjax(A),A.contextual=new c.ReducerContextual(A),A.date=new u.ReducerDate(A),A.details=new p.ReducerDetails(A),A.file=new d.ReducerFile(A),A.user=new _.ReducerUser(A),A.header=new h.ReducerHeader(A),A.result=new f.ReducerResult(A),A.search=new m.ReducerSearch(A),A.selection=new g.ReducerSelection(A),A.url=new S.ReducerUrl(A),A}return r.__extends(t,e),t.prototype.setState=function(e){return o.assignIn(this.state,e),this.onStateChange(this.state)},t.prototype.onWillMount=function(){return this.setState(this.state),this._invokeReducerAction(this.FC.REDUCER_ACTION.WITH_WILL_MOUNT)},t.prototype.onDidMount=function(){return this._invokeReducerAction(this.FC.REDUCER_ACTION.WITH_DID_MOUNT)},t.prototype.onWillUnmount=function(){return this._invokeReducerAction(this.FC.REDUCER_ACTION.WITH_WILL_UNMOUNT)},t.prototype.onDidUpdate=function(){return this._invokeReducerAction(this.FC.REDUCER_ACTION.WITH_POST_RENDER)},t})(n.ForensicsReducer);t.ForensicsStore=y})),define("modules/clean/teams/forensics/internal/reducer/_/forensics_reducer",["require","exports","tslib","external/lodash"],(function(e,t,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o);var i=(function(){function e(e,t){if(void 0===t&&(t=!0),this.store=e,this.FC=this.store.FC,this.I18N=this.store.I18N,this.window=this.store.window,this.$window=this.store.$window,this.document=this.store.document,this.$document=this.store.$document,t)for(var r=0,i=Array.from(o.values(this.FC.REDUCER_ACTION));r<i.length;r++){var s=i[r];null!=this[s]&&(null==this.store._methodNameToReducers[s]?this.store._methodNameToReducers[s]=[this]:this.store._methodNameToReducers[s].push(this))}}return e.prototype.isSafari=function(){var e=navigator.userAgent.toUpperCase();return-1<e.indexOf("SAFARI")&&0>e.indexOf("CHROME")},e.prototype.isOsX=function(){return-1<navigator.platform.toUpperCase().indexOf("MAC")},e.prototype._getReducers=function(e){return this.store._methodNameToReducers[e]||[]},e.prototype._invokeReducerAction=function(e,t){var r;null==t&&(r=!0),t=t||{};for(var i=0,s=Array.from(this._getReducers(e));i<s.length;i++){var n=s[i];n[e].call(n,t)}return r&&o.size(t)?this._setState(t):t},e.prototype._getForensicsMain=function(){return this.store._forensicsMain},e.prototype._setState=function(e,t){if(!t||o.size(e))return this.store.setState(e)},e.prototype._getStateKey=function(e,t,r){var o;return null!=r&&r.hasOwnProperty(e)?r[e]:null!=(o=null!=this.store.state?this.store.state[e]:void 0)?o:t},e.prototype._setStateKey=function(e,t,r){var o;if(void 0===r&&(r=!1),!r||this._getStateKey(e)!==t)return this._setState(((o={})[e]=t,o))},e.prototype._getServerProps=function(){return this.store.state.server_props},e.prototype._getUrlKeys=function(){return Object.keys(("function"==typeof this._getUrlKeyToType?this._getUrlKeyToType():void 0)||{})},e.prototype._getServerProp=function(e,t){var r;return null!=(r=this._getServerProps()[e])?r:t},e.prototype._parseIntStrict=function(e){if(null!=e){var t=parseInt(e);if(!o.isNaN(t))return t}},e.prototype._setWith=function(e,t,r){var o={};return e.call(this,o,t,r),this._setState(o)},e.prototype._getSetWith=function(e){var t=this;return function(r,o){return t._setWith(e,r,o)}},e.prototype._withKeyAndValue=function(e,t,r,o){return void 0===o&&(o=!1),o&&r===this._getStateKey(t)||(e[t]=r),e},e.prototype._withKeys=function(e,t,r){void 0===e&&(e={});for(var o=0,i=Array.from(t);o<i.length;o++){var s=i[o];e[s]=r[s]}return e},e.prototype._nsKey=function(e){return""+this._getNamespace()+e.NAME},e.prototype._nsGet=function(e,t){return this._getStateKey(this._nsKey(e),e.getDefaultValue(),t)},e.prototype._nsSet=function(e,t){return this._setStateKey(this._nsKey(e),t)},e.prototype._nsWithKeyAndValue=function(e,t,r){return this._withKeyAndValue(e,this._nsKey(t),r)},e.prototype._isShowingAModal=function(){return this.store.contextual.getDrillDownModalType()||this.store.header.isShowCreateReportModal()||this.store.selection.getClipboardText()},e})();t.ForensicsReducer=i})),define("modules/clean/teams/forensics/internal/reducer/_ajax/_/ajax_context",["require","exports","tslib","external/lodash","modules/clean/ajax","modules/clean/teams/forensics/internal/reducer/_/forensics_reducer","modules/core/notify","modules/clean/viewer"],(function(e,t,r,o,i,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importStar(i),s=r.__importStar(s);var u="error",l="sending",_="idle",c={QUEUED_AJAX_ARGS:{NAME:"queuedAjaxArgs",getDefaultValue:function(){}},QUEUED_REQUEST_ID:{NAME:"queuedRequestId",getDefaultValue:function(){return-1}},REQUEST_ID:{NAME:"requestId",getDefaultValue:function(){return 1}},STATUS:{NAME:"status",getDefaultValue:function(){return _}}},p=(function(e){function t(t,r){var o=e.call(this,r,!1)||this;return o.request=t,o}return r.__extends(t,e),t.prototype.withSend=function(e,t,r,o){var i=this._createAjaxArgs(this._getRequestIdWithIncrement(e),t,r,o);return this._withSendAjaxArgs(e,i)},t.prototype.withAbort=function(e){return this.isSending(e)?this._getRequestIdWithIncrement(e):e},t.prototype.isSending=function(e){return this._isStatus(l,e)},t.prototype.isError=function(e){return this._isStatus(u,e)},t.prototype._getNamespace=function(){return"ajaxContext:"+this.request.NAME},t.prototype._getRequestIdWithIncrement=function(e){return e[this._nsKey(c.REQUEST_ID)]=1+this._getRequestId(e)},t.prototype._withSendAjaxArgs=function(e,t){var r=this._getRequestId(e);return this.isSending(e)?(e[this._nsKey(c.QUEUED_AJAX_ARGS)]=t,e[this._nsKey(c.QUEUED_REQUEST_ID)]=r):(this._withStatus(e,l),(null!=this.request.DELAY)>0?setTimeout(this._getDelayedAjax(t,r),this.request.DELAY):this._ajaxImpl(t)),e},t.prototype._getDelayedAjax=function(e,t){var r=this;return function(){return r._getRequestId()===t?r._ajaxImpl(e):r._setState(r._getDequeuedState(!0))}},t.prototype._ajaxImpl=function(e){return new i.WebRequest(e)},t.prototype._createAjaxArgs=function(e,t,r,o){var i,s=this;i=this._isForensicsRequest()?this._getWithForensicsSuccess(r,o):r;return{url:this.request.URL,data:this._createAjaxData(t),subject_user:a.Viewer.get_viewer().work_user,success:this._getWrappedCallback(e,i,!0),error:this._getWrappedCallback(e,(function(e,t){return s._withNotifyError(e,t,o,s.I18N.AJAX.ERRORS.onServerDidNotProcess)}),!1)}},t.prototype._getWithForensicsSuccess=function(e,t){var r=this;return function(o,i){var s,n=JSON.parse(i),a=u;return n[r.FC.AJAX.IS_OK]&&null!=(s=n[r.FC.AJAX.PAYLOAD])?(a=_,s[r.FC.WARNING_MSG]&&r._withNotifyError(o,i,null,r.I18N.AJAX.ERRORS.onServerError,s[r.FC.WARNING_MSG]),"function"==typeof e&&e(o,s)):null!=n&&n.hasOwnProperty(r.FC.AJAX.IS_OK)?r._withNotifyError(o,i,t,r.I18N.AJAX.ERRORS.onServerError,n[r.FC.AJAX.ERROR_MESSAGE]):r._withNotifyError(o,i,t,r.I18N.AJAX.ERRORS.onUnexpected),r._withStatus(o,a)}},t.prototype._createAjaxData=function(e){var t,r=((t={})[this.FC.AJAX.TEAM_ID]=this._getServerProp(this.FC.AJAX.TEAM_ID),t);if(this._isForensicsRequest()){var i=this.request.DEFAULT_ARGS||{};for(var s in i){var n=i[s];e[s]=n}r[this.FC.AJAX.ACTION]=this.request.ACTION,r[this.FC.AJAX.ARGS_JSON]=JSON.stringify(e)}else o.assignIn(r,e);return r},t.prototype._getWrappedCallback=function(e,t,r){var o=this;return function(i){var s=o._getDequeuedState(r);return o._getRequestId()===e&&"function"==typeof t&&t(s,i),o._setState(s)}},t.prototype._getDequeuedState=function(e){var t=this._withStatus({},e?_:u);t[this._nsKey(c.QUEUED_AJAX_ARGS)]=void 0,t[this._nsKey(c.QUEUED_REQUEST_ID)]=void 0;var r=this._nsGet(c.QUEUED_AJAX_ARGS);return r&&this._getRequestId()===this._nsGet(c.QUEUED_REQUEST_ID)?this._withSendAjaxArgs(t,r):t},t.prototype._withNotifyError=function(e,t,r,o,i){return"function"==typeof r&&r(e,t),n.Notify.error(o(this._getActionI18n(),i)),e},t.prototype._isForensicsRequest=function(){return Boolean(this.request.ACTION)},t.prototype._getActionI18n=function(){switch(this.request){case this.FC.AJAX.REQUESTS.CREATE_REPORT:return this.I18N.AJAX.ACTIONS.CREATE_REPORT.NAME;case this.FC.AJAX.REQUESTS.SEARCH:return this.I18N.AJAX.ACTIONS.SEARCH.NAME;case this.FC.AJAX.REQUESTS.SUGGEST_USER:return this.I18N.AJAX.ACTIONS.SUGGEST_USER.NAME;default:return this.I18N.AJAX.ACTIONS.UNKNOWN.NAME}},t.prototype._withStatus=function(e,t){return this._nsWithKeyAndValue(e,c.STATUS,t)},t.prototype._isStatus=function(e,t){return e===this._nsGet(c.STATUS,t)},t.prototype._getRequestId=function(e){return this._nsGet(c.REQUEST_ID,e)},t})(s.ForensicsReducer);t.AjaxContext=p})),define("modules/clean/teams/forensics/internal/reducer/_ajax/reducer_ajax",["require","exports","tslib","modules/clean/teams/forensics/internal/reducer/_/forensics_reducer","modules/clean/teams/forensics/internal/reducer/_ajax/_/ajax_context"],(function(e,t,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importStar(i);var s=(function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype._withRequest=function(e,t,r,o,i){return this._getAjaxContext(t).withSend(e,r,o,i)},t.prototype._withAbort=function(e,t){return this._getAjaxContext(t).withAbort(e)},t.prototype._isSending=function(e,t){return this._getAjaxContext(e).isSending(t)},t.prototype._isError=function(e,t){return this._getAjaxContext(e).isError(t)},t.prototype._getAjaxContext=function(e){return new i.AjaxContext(e,this.store)},t})(o.ForensicsReducer);t.ReducerAjax=s})),define("modules/clean/teams/forensics/internal/reducer/_date/_/date_constants",["require","exports","tslib","modules/clean/teams/forensics/internal/forensics_constants","modules/clean/teams/forensics/internal/reducer/_date/_/date_utils"],(function(e,t,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importStar(i);var s={INPUT_VALUE:{NAME:"value",getDefaultValue:function(){return""}},IS_INVALID_INPUT_VALUE:{NAME:"isInvalidValue",getDefaultValue:function(){return!1}},INVALID_VALUE_ERROR:{NAME:"invalidValueError",getDefaultValue:function(){}},IS_SHOW_CALENDAR:{NAME:"isShowCalendar",getDefaultValue:function(){return!1}},FIRST_DATE:{NAME:"firstDate",getDefaultValue:function(){return new Date(-5e3,0,0,0,0,0,0)}},LAST_DATE:{NAME:"lastDate",getDefaultValue:function(){return i.GetLimitDate(new Date,!0)}},VIEWED_DATE:{NAME:"viewedDate",getDefaultValue:function(){return new Date}},SELECTED_DATE:{NAME:"selectedDate",getDefaultValue:function(){}},IS_NEEDS_ROUND_BY_DATE:{NAME:"isNeedsRoundByDate",getDefaultValue:function(){return!0}}};t.DATE_KEYS=s;t.CONTEXTS={SEARCH:{NAME:"search",WIDTH:"half"},CREATE_REPORT:{NAME:"createReport",WIDTH:"quarter"}};var n={FROM:{NAME:"FROM",OPPOSITE:"TO",OPPOSITE_LIMIT_KEY:s.FIRST_DATE,SEARCH_KEY:o.ForensicsConstants.DATE.SEARCH.START_TIME,CREATE_REPORT_KEY:o.ForensicsConstants.DATE.CREATE_REPORT.START_TIME},TO:{NAME:"TO",OPPOSITE:"FROM",OPPOSITE_LIMIT_KEY:s.LAST_DATE,SEARCH_KEY:o.ForensicsConstants.DATE.SEARCH.END_TIME,CREATE_REPORT_KEY:o.ForensicsConstants.DATE.CREATE_REPORT.END_TIME}};t.INPUTS=n})),define("modules/clean/teams/forensics/internal/reducer/_date/_/date_context",["require","exports","tslib","external/lodash","modules/clean/teams/forensics/internal/reducer/_/forensics_reducer","modules/clean/teams/forensics/internal/reducer/_date/_/date_constants","modules/clean/teams/forensics/internal/reducer/_date/_/date_utils"],(function(e,t,r,o,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n);var a=s.INPUTS,u=s.DATE_KEYS,l=s.CONTEXTS,_=(function(e){function t(t,r,o){var i=e.call(this,o,!1)||this;return i.input=t,i.context=r,i}return r.__extends(t,e),t.prototype.getDateInputProps=function(e){for(var t=this,r={className:e,store:this.store,width:this.context.WIDTH,name:this._getNamespace(),placeholder:this.I18N.SETTINGS.DATE.PLACEHOLDER[this.input.NAME],isTo:this._isTo(),setViewedDate:function(e){return t._nsSet(u.VIEWED_DATE,e)},setSelectedDate:this._setDaySelectorDate.bind(this),onChangeValue:this._setInputValue.bind(this),onSubmit:this._submit.bind(this),onClearInput:this._clear.bind(this),onEscape:this._onEscape.bind(this),onFocus:function(){return t._nsSet(u.IS_SHOW_CALENDAR,!0)}},o=0,i=Array.from(this._getDateKeys());o<i.length;o++){var s=i[o];r[s.NAME]=this._nsGet(s)}return r},t.prototype.createSearchToken=function(e){var t;if(null!=(t=this._parseIntStrict(e[this.input.SEARCH_KEY]))){var r,o=n.IsMiddleOfDay(r=new Date(t))?" "+n.CellTimeStringFromDate(r):"";return this.store.header._createSearchToken(this.I18N.SETTINGS.DATE.FILTER_NAME[this.input.NAME],""+n.StringFromDate(r)+o,this._clear.bind(this))}},t.prototype.getContextualMenuOption=function(e){var t,r=this;if(!(t=this.getSelectedDate())||e.getTime()!==t.getTime())return this.store.details._createOption(this.I18N.RESULT.COLUMNS.DATE.CONTEXTUAL[this.input.NAME],(function(t){return r.withSelectedDate(t,e,!0)}))},t.prototype.withSelectedDate=function(e,t,r){return e[this._nsKey(u.SELECTED_DATE)]=t,this._withViewedDate(e,t),null==e[this._nsKey(u.INPUT_VALUE)]&&(e[this._nsKey(u.INPUT_VALUE)]=n.StringFromDate(t)),this._withValueError(e),this._withAdjustOppositeContext(e,t),r?this._withSearch(e):e},t.prototype.withParallelContext=function(e,t){for(var r=this._getParallelContext(t),o=r._nsGet(u.IS_INVALID_INPUT_VALUE),i=0,s=Array.from(this._getDateKeys());i<s.length;i++){var n=s[i];e[this._nsKey(n)]=o?n.getDefaultValue():r._nsGet(n)}return this._withHideCalendar(e),e},t.prototype.addAjaxArg=function(e,t){var r;if(r=this.getSelectedDate(e))return this._isSearchContext()?t[this.input.SEARCH_KEY]=r.getTime():t[this.input.CREATE_REPORT_KEY]=n.CreateReportStringFromDate(r)},t.prototype.getSelectedDate=function(e){return this._nsGet(u.SELECTED_DATE,e)},t.prototype.withUrlDate=function(e,t){return null!=t?this.withSelectedDate(e,t):this._withClear(e,!1)},t.prototype.withChangeToSticky=function(e){var t,r;return null!=(r=this.store.search._getPreviousSearchArgs()[this.input.SEARCH_KEY])&&(t=new Date(r)),this._withHideCalendar(this.withUrlDate(e,t))},t.prototype._setDaySelectorDate=function(e){return this._setState(this._withHideCalendar(this.withSelectedDate({},e,!0)))},t.prototype._withHideCalendar=function(e){return this._withKeyAndValue(e,this._nsKey(u.IS_SHOW_CALENDAR),!1)},t.prototype._withInputValue=function(e,t){e[this._nsKey(u.INPUT_VALUE)]=t,t=t.trim();var r=this._getDateFromString(t);return this._isWithValidDate(e,t,r)&&this.withSelectedDate(e,r),e},t.prototype._setInputValue=function(e){var t;return this._setState(this._withInputValue(((t={})[this._nsKey(u.IS_SHOW_CALENDAR)]=!0,t),e))},t.prototype._getDateFromString=function(e){var t;if(null!=(t=n.DateFromString(e)))return n.GetLimitDate(t,this._isTo(),this._nsGet(u.FIRST_DATE),this._nsGet(u.LAST_DATE))},t.prototype._submit=function(){var e=this._withHideCalendar({});return this._nsGet(u.IS_INVALID_INPUT_VALUE)?(e[this._nsKey(u.SELECTED_DATE)]=void 0,this._withViewedDate(e)):e[this._nsKey(u.INPUT_VALUE)]=n.StringFromDate(this.getSelectedDate()),this._setState(this._withSearch(e))},t.prototype._onEscape=function(){var e,t={};return(e=this.getSelectedDate())?this.withSelectedDate(t,e):this._withClear(t,!1,!1),this._setState(t)},t.prototype._isWithValidDate=function(e,t,r){var o;return null!=r?o=this._getDateRangeError(r,e):t&&(o=this.I18N.SETTINGS.DATE.ERROR.INVALID_FORMAT),this._withValueError(e,o),!o},t.prototype._withValueError=function(e,t){return e[this._nsKey(u.IS_INVALID_INPUT_VALUE)]=Boolean(t),this._withKeyAndValue(e,this._nsKey(u.INVALID_VALUE_ERROR),t)},t.prototype._withClear=function(e,t,r){return void 0===t&&(t=!0),void 0===r&&(r=!0),this._withViewedDate(e),this._withInputValue(e,""),r&&this._withHideCalendar(e),t?this._withSearch(e):e},t.prototype._withAdjustOppositeContext=function(e,t){return this._getOppositeContext()._withLimit(e,this.input.OPPOSITE_LIMIT_KEY,t)},t.prototype._withLimit=function(e,t,r){var o;if(e[this._nsKey(t)]=r||t.getDefaultValue(),!(o=e[this._nsKey(u.INPUT_VALUE)])&&(e[this._nsKey(u.VIEWED_DATE)]=r,null==o)){var i;if(i=this._nsGet(u.INPUT_VALUE)){var s;(s=this.getSelectedDate(e))?this._isWithValidDate(e,i,this.getSelectedDate(e))?this.withSelectedDate(e,s):e[this._nsKey(u.SELECTED_DATE)]=void 0:this._withInputValue(e,i)}}return e},t.prototype._withViewedDate=function(e,t){return this._withKeyAndValue(e,this._nsKey(u.VIEWED_DATE),t||this._getOppositeContext().getSelectedDate(e))},t.prototype._withSearch=function(e){return this._isSearchContext()?this.store.search._withSearch(e):e},t.prototype._getDateRangeError=function(e,t){return e<u.FIRST_DATE.getDefaultValue()?this.I18N.SETTINGS.DATE.ERROR.BEGINNING_OF_TIME:e>u.LAST_DATE.getDefaultValue()?this.I18N.SETTINGS.DATE.ERROR.IN_THE_FUTURE:e<this._nsGet(u.FIRST_DATE,t)?this.I18N.SETTINGS.DATE.ERROR.TO_BEFORE_FROM:e>this._nsGet(u.LAST_DATE,t)?this.I18N.SETTINGS.DATE.ERROR.FROM_AFTER_TO:void 0},t.prototype._clear=function(){return this._setWith(this._withClear)},t.prototype._getOppositeContext=function(){return new t(a[this.input.OPPOSITE],this.context,this.store)},t.prototype._getParallelContext=function(e){return new t(this.input,e,this.store)},t.prototype._getDateKeys=function(){return o.values(u)},t.prototype._getNamespace=function(){return""+this.context.NAME+this.input.NAME},t.prototype._isSearchContext=function(){return this.context.NAME===l.SEARCH.NAME},t.prototype._isTo=function(){return this.input.NAME===a.TO.NAME},t})(i.ForensicsReducer);t.DateContext=_})),define("modules/clean/teams/forensics/internal/reducer/_date/_/date_utils",["require","exports","tslib","external/lodash","modules/clean/teams/forensics/internal/forensics_i18n"],(function(e,t,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o);var s=(i=r.__importStar(i)).ForensicsI18n.SETTINGS.DATE,n=i.ForensicsI18n.HEADER.ACTIVITY_SUMMARY.TIME_UNIT_NAME_TO_TIME_AGO,a=[["YEARS",307584e5],["MONTHS",24192e5],["WEEKS",6048e5],["DAYS",864e5],["HOURS",36e5],["MINUTES",6e4]],u=function(e,t,r){var o=new Date;return new Date(o.getFullYear()+e,o.getMonth()+t,o.getDate()+r)},l={NOW:function(){return new Date},DAY:function(e){return u(0,0,-e)},WEEK:function(e){return u(0,0,7*-e)},MONTH:function(e){return u(0,-e,0)},YEAR:function(e){return u(-e,0,0)}},_=function(e,t,r){if(!(e<1e3)){var o=new Date(e,t,r);return o.getFullYear()===e&&o.getMonth()===t&&o.getDate()===r?o:void 0}},c=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()};t.IsSameDay=c;t.GetLimitDate=function(e,t,r,o){var i,s,n=t?o:r;return n&&c(e,n)?n:(t?(i=1,s=-1):(i=0,s=0),new Date(e.getFullYear(),e.getMonth(),e.getDate()+i,0,0,0,s))};t.GetMonthLimitDate=function(e,t){return new Date(e.getFullYear(),e.getMonth()+(t?0:1),1,0,0,0,t?0:-1)};t.DateFromString=function(e){var t;if(o.isString(e)&&(t=e.toLowerCase().trim()))return(function(e){var t;if(t=e.match(/^(\d{2})\/(\d{2})\/(\d{4})$/))return _(parseInt(t[3]),parseInt(t[1])-1,parseInt(t[2]))})(t)||(function(e){for(var t=0;t<s.CALENDAR.MONTH.NAMES.length;t++)for(var r=s.CALENDAR.MONTH.NAMES[t],o=0,i=[r=r.toLowerCase(),r.slice(0,3)];o<i.length;o++){var n,a,u=i[o];if(0===e.indexOf(u)&&(n=e.replace(u,"").match(/^ (\d{1,2}), (\d{4})$/)))if(a=_(parseInt(n[2]),t,parseInt(n[1])))return a}})(t)||(function(e){for(var t=0,r=Array.from(s.DELTAS.FUTURE);t<r.length;t++){var i=r[t];if(-1!==e.toLowerCase().indexOf(i.toLowerCase()))return}var n=function(t,r){for(var o in s.DELTAS[t])for(var i=s.DELTAS[t][o],n=0,a=Array.from(i);n<a.length;n++){var u=a[n];if(u=u.toLowerCase().trim(),-1!==e.indexOf(u)){var _=r(u);if(null!=_)return l[o](_)}}},a=n("SINGLE",(function(t){if(e===t)return 1}));return a||n("MULTIPLE",(function(t){var r=parseFloat(e.replace(t,"").trim());if(!o.isNaN(r&&r>0))return r}))})(t)};var p=function(e,t){return void 0===t&&(t=2),("00000"+e).slice(-t)};t.StringFromDate=function(e){return null!=e?p(e.getMonth()+1)+"/"+p(e.getDate())+"/"+p(e.getFullYear(),4):""};t.TimeAgoFromDate=function(e){for(var t=Date.now()-e.getTime(),r=0,o=Array.from(a);r<o.length;r++){var i=o[r],s=i[0],u=i[1];if(t>u)return n[s](Math.floor(t/u))}return n.NOW};t.CreateReportStringFromDate=function(e){return p(e.getFullYear(),4)+"-"+p(e.getMonth()+1)+"-"+p(e.getDate())};t.CellDayStringFromDate=function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()};t.CellTimeStringFromDate=function(e){var t=e.getHours(),r=s.DAY_PERIOD[t>=12?"PM":"AM"];return p(t=(t%=12)||12)+":"+p(e.getMinutes())+" "+r};t.IsMiddleOfDay=function(e){var t;return e&&(t=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds(),["0:0:0:0","23:59:59:999"].includes(t))};t.ClipboardDateFromTsUtcMs=function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" T"+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()}})),define("modules/clean/teams/forensics/internal/reducer/_date/reducer_date",["require","exports","tslib","modules/clean/teams/forensics/internal/reducer/_/forensics_reducer","modules/clean/teams/forensics/internal/reducer/_date/_/date_constants","modules/clean/teams/forensics/internal/reducer/_date/_/date_context"],(function(e,t,r,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importStar(i),s=r.__importStar(s);var n=i.DATE_KEYS,a=i.INPUTS,u=i.CONTEXTS,l=(function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype.getFromProps=function(e,t){return this._getDateContext(a.FROM,e).getDateInputProps(t)},t.prototype.getToProps=function(e,t){return this._getDateContext(a.TO,e).getDateInputProps(t)},t.prototype.isCreateReportDisabled=function(){for(var e=0,t=Array.from(this._getDateContexts(u.CREATE_REPORT));e<t.length;e++){if(!t[e].getSelectedDate())return!0}return!1},t.prototype._withChangeToSticky=function(e){for(var t=0,r=Array.from(this._getDateContexts(u.SEARCH));t<r.length;t++){r[t].withChangeToSticky(e)}return e},t.prototype._addSearchArgs=function(e,t){return this._getAjaxArgs(e,t,u.SEARCH)},t.prototype._addSearchTokens=function(e,t){var r=this;return(function(){for(var o=[],i=0,s=Array.from(r._getDateContexts(u.SEARCH));i<s.length;i++){var n;(n=s[i].createSearchToken(t))?o.push(e.push(n)):o.push(void 0)}return o})()},t.prototype._isValidWithUrlArgs=function(e,t){for(var r=!0,o=n.FIRST_DATE.getDefaultValue(),i={},s=0,l=[a.FROM,a.TO];s<l.length;s++){var _,c,p=l[s];if(r&&null!=(_=t[p.SEARCH_KEY]))o<=(c=new Date(_))?(i[p.NAME]=c,o=c):r=!1}(!r||o>n.LAST_DATE.getDefaultValue())&&(i={});for(var d=0,h=Array.from(this._getDateContexts(u.SEARCH));d<h.length;d++){var f=h[d];f.withUrlDate(e,i[f.input.NAME])}return r},t.prototype._getUrlKeyToType=function(){var e;return(e={})[a.FROM.SEARCH_KEY]=this.FC.URL.VALUE_TYPE.INTEGER,e[a.TO.SEARCH_KEY]=this.FC.URL.VALUE_TYPE.INTEGER,e},t.prototype._getContextualMenuOptions=function(e){for(var t=[],r=0,o=Array.from(this._getDateContexts(u.SEARCH));r<o.length;r++){var i;(i=o[r].getContextualMenuOption(e))&&t.push(i)}return t},t.prototype._withCreateReportInitialValues=function(e){for(var t=0,r=Array.from(this._getDateContexts(u.CREATE_REPORT));t<r.length;t++){r[t].withParallelContext(e,u.SEARCH)}return e},t.prototype._getCreateReportArgs=function(){return this._getAjaxArgs({},{},u.CREATE_REPORT)},t.prototype._getAjaxArgs=function(e,t,r){for(var o=0,i=Array.from(this._getDateContexts(r));o<i.length;o++){i[o].addAjaxArg(e,t)}return t},t.prototype._getDateContexts=function(e){return[this._getDateContext(a.FROM,e),this._getDateContext(a.TO,e)]},t.prototype._getDateContext=function(e,t){return new s.DateContext(e,t,this.store)},t})(o.ForensicsReducer);t.ReducerDate=l})),define("modules/clean/teams/forensics/internal/reducer/_suggest/_/suggest_reducer",["require","exports","tslib","external/lodash","modules/clean/teams/forensics/internal/reducer/_/forensics_reducer","modules/clean/teams/forensics/internal/reducer/_suggest/_/suggest_utils"],(function(e,t,r,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importStar(i),s=r.__importStar(s);var n={FIRST_SHOWN_SUGGESTION_INDEX:{NAME:"FirstShownSuggestionIndex",getDefaultValue:function(){return 0}},HINT:{NAME:"Hint",getDefaultValue:function(){return""}},IS_INVALID_HINT:{NAME:"IsInvalid",getDefaultValue:function(){return!1}},LAST_SHORTEST_INVALID_HINT:{NAME:"LastShortestInvalidHint",getDefaultValue:function(){}},MARKED_INDEX:{NAME:"SuggestionMarkedIndex",getDefaultValue:function(){return-1}},SELECTED_SUGGESTION:{NAME:"SelectedSuggestion",getDefaultValue:function(){}},SUGGESTIONS:{NAME:"Suggestions",getDefaultValue:function(){return[]}}},a=(function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype.getInputProps=function(e){var t=this;return e.name=this._getNamespace(),e.onChangeValue=this._getSetWith(this._withHint),e.onSubmit=function(){return t._setWith(t._withSubmit)},e.onClearInput=this._getSetWith(this._withClear),e.onSelectSuggestion=this.searchSuggestion.bind(this),e.onEscape=this._getSetWith(this._withEscape),e.onMarkSuggestion=this._markSuggestionIndex.bind(this),e.value=this._getHint(),e.suggestions=this._getSuggestions(),e.suggestionsMarkedIndex=this._getMarkedIndex(),e.isInvalidValue=this._isInvalidHint(),e.firstShownSuggestionIndex=this._getFirstShownSuggestionIndex(),e.maxShownSuggestions=this.FC.DEFAULT_MAX_SUGGESTIONS,e.store=this.store,e},t.prototype.searchSuggestion=function(e){return this._setWith(this._withSuggestion,e)},t.prototype.getSuggestionById=function(e,t){if(null!=e)return this._getIdToSuggestion(t)[e]},t.prototype._isValidWithUrlArgs=function(e,t){var r;this._withAbortFetchFromDb(e);for(var i=0,s=Array.from(o.values(n));i<s.length;i++){var a=s[i];e[this._nsKey(a)]=void 0}return!!(r=this._getSuggestionFromObject(t,e))&&(e[this._nsKey(n.SELECTED_SUGGESTION)]=r,e[this._nsKey(n.HINT)]=this._getSuggestionDefaultHint(r),!0)},t.prototype._addSearchArgs=function(e,t){var r,o;return(r=this._getHint())&&this._isFetchingSuggestionsFromDb(e)?(t[this.FC.AJAX.SEARCH_HINTS]=t[this.FC.AJAX.SEARCH_HINTS]||{},t[this.FC.AJAX.SEARCH_HINTS][this._getAjaxRequest().DEFAULT_ARGS[this.FC.AJAX.FIELD]]=r):(o=this._getSelectedSuggestion(e))?this._withSuggestionArgs(t,o):void 0},t.prototype._addSearchTokens=function(e,t){var r;if(r=this._getSuggestionFromObject(t))return e.push(this.store.header._createSearchToken(this._getSuggestionFilterName(r),this._getSuggestionDefaultHint(r),this._getSetWith(this._withClear,!0)))},t.prototype._withChangeToSticky=function(e){return this._withAbortFetchFromDb(this._withSuggestions(e))},t.prototype._withHint=function(e,t,r){var o;return void 0===r&&(r=!1),e[this._nsKey(n.HINT)]=t,t||(e[this._nsKey(n.SELECTED_SUGGESTION)]=void 0),r||(o=this._isContainingAnInvalidHint(t))?(o&&this._isWithInvalidHint(e,t),this._withSuggestions(e)):(t!==this._getHint()||0===this._getSuggestions().length||this._getMinHintLength()===t.length&&0===t.length)&&(this._getAjaxRequest()?this._withFetchSuggestionsFromDb(e,t):this._withCreatedSuggestions(e,this._createSuggestionsOnClient(e,t),t)),e},t.prototype._withNoHint=function(e){return this._isWithInvalidHint(e),this._withHint(e,void 0,!0)},t.prototype._isContainingAnInvalidHint=function(e){var t;return e&&null!=(t=this._getLastShortestInvalidHint())&&-1!==e.indexOf(t)},t.prototype._withCreatedSuggestions=function(e,t,r){return this._isWithInvalidHint(e,r,t.length)&&-1===r.indexOf(this._getLastShortestInvalidHint())&&(e[this._nsKey(n.LAST_SHORTEST_INVALID_HINT)]=r),this._withSuggestions(e,t)},t.prototype._withSuggestions=function(e,t){return e[this._nsKey(n.SUGGESTIONS)]=t,e[this._nsKey(n.MARKED_INDEX)]=void 0,this._withKeyAndValue(e,this._nsKey(n.FIRST_SHOWN_SUGGESTION_INDEX))},t.prototype._markSuggestionIndex=function(e){var t,r;return(r=this._getFirstShownSuggestionIndex())>e?r=e:e===r+this.FC.DEFAULT_MAX_SUGGESTIONS&&r++,this._setState(((t={})[this._nsKey(n.MARKED_INDEX)]=e,t[this._nsKey(n.FIRST_SHOWN_SUGGESTION_INDEX)]=r,t))},t.prototype._withSuggestion=function(e,t,r){return void 0===r&&(r=!0),this._getAjaxRequest()&&(e[this._nsKey(n.LAST_SHORTEST_INVALID_HINT)]=void 0),(e[this._nsKey(n.SELECTED_SUGGESTION)]=t)?this._withHint(e,this._getSuggestionDefaultHint(t),!0):(this._isWithInvalidHint(e,this._getHint()),this._withSuggestions(e)),r?this.store.search._withSearch(e):e},t.prototype._createSuggestionsOnClient=function(e,t){return s.CreateSuggestions(t,this._getSortKeyToSuggestion(e),this._getMaxSuggestions(e),this._getMinHintLength(e))},t.prototype._withFetchSuggestionsFromDb=function(e,t){var r,o,i,s=this;if(t){var n=this._getAjaxRequest(),a=((r={})[this.FC.AJAX.HINT]=t,r[this.FC.AJAX.SUGGEST_COUNT]=this._getMaxSuggestions(e),r);this.store.ajax._withRequest(e,n,a,(function(e,r){return s._withDbSuggestions(e,r[s.FC.SUGGEST.SUGGESTIONS],t)}))}return(o=this._getSelectedSuggestion())&&t.trim().toLowerCase()===this._getSuggestionDefaultHint(o).trim().toLowerCase()&&(i=[o]),this._isWithInvalidHint(this._withSuggestions(e,i)),e},t.prototype._withDbSuggestions=function(e,t,r){return r===this._getHint()&&(this._withRememberSuggestions(e,t),this._withCreatedSuggestions(e,t,r)),e},t.prototype._extractSuggestion=function(e){var t,r,i,s;if(1===(s=this._getSuggestions()).length)return s[0];if(-1<(i=r=this._getMarkedIndex())&&i<s.length)return s[r];if((t=this._getHint().toLowerCase())&&(!this._getAjaxRequest()||!this.store.ajax._isSending(this._getAjaxRequest(),e))){s=[];for(var n=0,a=Array.from(o.values(this._getSortKeyToSuggestion()));n<a.length;n++)for(var u=a[n],l=0,_=Array.from(this._getSuggestionHints(u));l<_.length;l++){var c=_[l];if(t===(null!=c?c.toLowerCase():void 0)){s.push(u);break}}if(1===s.length)return s[0]}},t.prototype._withSubmit=function(e){var t;return this._isInvalidHint()||(t=this._getHint())===this._getSuggestionDefaultHint(this._getSelectedSuggestion())?this._withSuggestions(e):t&&this._isFetchingSuggestionsFromDb(e)?this.store.search._withSearch(e):this._withSuggestion(e,this._extractSuggestion(e))},t.prototype._withEscape=function(e){var t;return this._withAbortFetchFromDb(e),this._withSuggestion(e,t=this._getSelectedSuggestion()),t?this._isWithInvalidHint(e):this._withNoHint(e),e},t.prototype._withClear=function(e){return this._withAbortFetchFromDb(e),this._withNoHint(e),this.store.search._withSearch(e)},t.prototype._withAbortFetchFromDb=function(e){var t;return(t=this._getAjaxRequest())?this.store.ajax._withAbort(e,t):e},t.prototype._isWithInvalidHint=function(e,t,r){return e[this._nsKey(n.IS_INVALID_HINT)]=Boolean(t&&!r)},t.prototype._isSelectedSuggestion=function(e){var t;return e&&(t=this._getSelectedSuggestion())&&this._getSuggestionId(t)===this._getSuggestionId(e)},t.prototype._isSelectedSuggestionId=function(e,t){return this._isSelectedSuggestion(this.getSuggestionById(e,t))},t.prototype._getSuggestionDefaultHint=function(e){if(null!=e)for(var t=0,r=Array.from(this._getSuggestionNameKeys());t<r.length;t++){var o=r[t];if(e[o])return e[o]}},t.prototype._getIdToSuggestion=function(e){return this._getStateKey(this._getIdToSuggestionKey(),{},e)},t.prototype._getSortKeyToSuggestion=function(e){return this._getStateKey(this._getSortKeyToSuggestionKey(),{},e)},t.prototype._getSuggestionHints=function(e){return[this._getSuggestionDefaultHint(e)]},t.prototype._getMaxSuggestions=function(e){return this.FC.DEFAULT_MAX_SUGGESTIONS},t.prototype._getMinHintLength=function(e){return 1},t.prototype._getSuggestions=function(){return this._nsGet(n.SUGGESTIONS)},t.prototype._getHint=function(){return this._nsGet(n.HINT)},t.prototype._getMarkedIndex=function(){return this._nsGet(n.MARKED_INDEX)},t.prototype._getFirstShownSuggestionIndex=function(){return this._nsGet(n.FIRST_SHOWN_SUGGESTION_INDEX)},t.prototype._isInvalidHint=function(){return this._nsGet(n.IS_INVALID_HINT)},t.prototype._isFetchingSuggestionsFromDb=function(e){var t;return(t=this._getAjaxRequest())&&this.store.ajax._isSending(t,e)},t.prototype._getLastShortestInvalidHint=function(){return this._nsGet(n.LAST_SHORTEST_INVALID_HINT)},t.prototype._getSelectedSuggestion=function(e){return this._nsGet(n.SELECTED_SUGGESTION,e)},t.prototype.hasSuggestions=function(){return this._getSuggestions().length>0},t})(i.ForensicsReducer);t.SuggestReducer=a})),define("modules/clean/teams/forensics/internal/reducer/_suggest/_/suggest_utils",["require","exports","tslib","external/lodash"],(function(e,t,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o);t.CreateSuggestions=function(e,t,r,i){var s;if(!t||!o.isString(e)||null!=r&&r<0||e.length<i)return[];var n=[];if(e=e.toLowerCase()){var a=void 0,u={};for(s in t)-1!==(a=s.indexOf(e))&&(null!=u[a]?u[a].push(s):u[a]=[s]);for(var l=0,_=Array.from(Array.from(Object.keys(u)).map((function(e){return parseInt(e)})).sort());l<_.length;l++){a=_[l];for(var c=0,p=Array.from(u[a].sort());c<p.length;c++){if(s=p[c],r===n.length)return n;n.push(t[s])}}}else for(var d=0,h=Array.from(Object.keys(t).sort());d<h.length&&(s=h[d],n.length!==r);d++)n.push(t[s]);return n}})),define("modules/clean/teams/forensics/internal/reducer/_suggest/reducer_activity",["require","exports","tslib","external/lodash","modules/clean/teams/forensics/internal/reducer/_suggest/_/suggest_reducer"],(function(e,t,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importStar(i);var s=(function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype.showCategorySuggestions=function(e){return this._setState(this._withHint(this._withShowActivityBrowser(this._withKeys({},[this.FC.EVENT_CATEGORY],e)),""))},t.prototype.getCategories=function(){return this._getStateKey("categoryArray")},t.prototype.getActivityByEvent=function(e){return this._getActivityByArgs(e[this.FC.EVENT_TYPE],e[this.FC.IS_DIR])},t.prototype.searchActivityByEvent=function(e){return this.searchSuggestion(this.getActivityByEvent(e))},t.prototype.searchActivityByArgs=function(e,t,r){return this.searchSuggestion(this._getActivityByArgs(e,t,r))},t.prototype.getActivityNameByArgs=function(e,t,r){var o,i,s=this;return o=this._getActivityByArgs(e,t,r),i=function(e){return e[s.FC.NAME]},(null!=o?i(o):void 0)||""},t.prototype.toggleActivityBrowser=function(){return this._setWith(this._withNoCategoryFilter,!this.isShowBrowseActivities())},t.prototype.getCategoryActivities=function(e){return o.values(e.sortKeyToActivity)},t.prototype.isShowBrowseActivitiesButton=function(){return!this._getHint()},t.prototype.isShowBrowseActivities=function(){return this._getStateKey("isShowActivityBrowser",!1)},t.prototype._withWillMount=function(e){var t,r,i=this;e.categoryArray=[],e.sortKeyToActivity={},e.idToActivity={};for(var s=function(t){return e.idToActivity[i._getSuggestionId(t)]=t},n=function(e){return e[i.FC.NAME].toLowerCase()},a=0,u=Array.from(this._getServerProp(this.FC.SETTINGS.ACTIVITY.CATEGORY_ENUM_AND_NAME_PAIRS,[]));a<u.length;a++){var l=u[a];e.categoryArray.push(s(((t={}).sortKeyToActivity={},t[this.FC.EVENT_CATEGORY]=l[0],t)))}for(var _=this._getServerProp(this.FC.SETTINGS.ACTIVITY.DEPRECATED_ACTIVITIES,[]),c=0,p=Array.from(this._getServerProp(this.FC.SETTINGS.ACTIVITY.ACTIVITIES));c<p.length;c++){var d=p[c];if(s(d),d[this.FC.IS_VISIBLE]&&!Array.from(_).includes(d[this.FC.EVENT_TYPE])){r=n(d),e.sortKeyToActivity[r]=d;var h=this._getCategoryId(d[this.FC.EVENT_CATEGORY]);e.idToActivity[h].sortKeyToActivity[r]=d}}for(var f=0,m=Array.from(this._getServerProp(this.FC.SETTINGS.ACTIVITY.CATEGORY_ENUM_AND_NAME_PAIRS,[]));f<m.length;f++){l=m[f];var g=e.idToActivity[this._getCategoryId(l[0])];g[this.FC.NAME]=l[1]+" ("+o.size(g.sortKeyToActivity)+")",r=n(g),e.sortKeyToActivity[r]=g,g.sortKeyToActivity[r]=g}return e},t.prototype._getSuggestionId=function(e){return this._getActivityId(e[this.FC.EVENT_TYPE],e[this.FC.IS_DIR],e[this.FC.EVENT_CATEGORY])},t.prototype._getUrlKeyToType=function(){var e;return(e={})[this.FC.EVENT_TYPE]=this.FC.URL.VALUE_TYPE.INTEGER,e[this.FC.EVENT_CATEGORY]=this.FC.URL.VALUE_TYPE.INTEGER,e[this.FC.IS_DIR]=this.FC.URL.VALUE_TYPE.BOOLEAN,e},t.prototype._withSuggestionArgs=function(e,t){var r=this._isCategory(t)?[this.FC.EVENT_CATEGORY]:[this.FC.EVENT_TYPE,this.FC.IS_DIR];return this._withKeys(e,r,t)},t.prototype._getSuggestionFromObject=function(e,t){return null!=t&&this._withNoCategoryFilter(t),this._getActivityByArgs(e[this.FC.EVENT_TYPE],e[this.FC.IS_DIR],e[this.FC.EVENT_CATEGORY],t)},t.prototype._getSuggestionFilterName=function(e){return this.I18N.SETTINGS.ACTIVITY.FILTER_NAME[this._isCategory(e)?"CATEGORY":"ACTIVITY"]},t.prototype._getNamespace=function(){return this.FC.SUGGEST.NAMESPACE.ACTIVITY},t.prototype._getAjaxRequest=function(){},t.prototype._getIdToSuggestionKey=function(){return"idToActivity"},t.prototype._getSuggestionNameKeys=function(){return[this.FC.NAME]},t.prototype._createSuggestions=function(t,r){var o,i;if((o=e.prototype._createSuggestionsOnClient.call(this,t,r)).length&&(i=this._getCategory(t))){for(var s=[i],n=0,a=Array.from(o);n<a.length;n++){var u=a[n];this._isCategory(u)||s.push(u)}return s}return o},t.prototype._getSortKeyToSuggestion=function(e){return this._getStateKey("sortKeyToActivity",{},this._getCategory(e))},t.prototype._withHint=function(t,r,o){return void 0===o&&(o=!1),this._withShowActivityBrowser(e.prototype._withHint.call(this,t,r,o),!1)},t.prototype._withSuggestion=function(t,r){return this._withNoCategoryFilter(e.prototype._withSuggestion.call(this,t,r))},t.prototype._withClear=function(t){return this._withNoCategoryFilter(e.prototype._withClear.call(this,t))},t.prototype._withSubmit=function(t){return this._withNoCategoryFilter(e.prototype._withSubmit.call(this,t))},t.prototype._getMinHintLength=function(t){return this._getCategory(t)?0:e.prototype._getMinHintLength.call(this,t)},t.prototype._getMaxSuggestions=function(t){if(!this._getCategory(t))return e.prototype._getMaxSuggestions.call(this,t)},t.prototype._isSearchableActivity=function(e){var t;return null!=e&&(t=e[this.FC.EVENT_TYPE],!Array.from(this._getServerProp(this.FC.SETTINGS.ACTIVITY.DEPRECATED_ACTIVITIES,[])).includes(t))&&!this._isSelectedSuggestion(e)},t.prototype._getCategory=function(e){return this.getSuggestionById(this._getCategoryId(this._getStateKey(this.FC.EVENT_CATEGORY,void 0,e)),e)},t.prototype._withNoCategoryFilter=function(e,t){return void 0===t&&(t=!1),e[this.FC.EVENT_CATEGORY]=void 0,this._withShowActivityBrowser(e,t)},t.prototype._withShowActivityBrowser=function(e,t){return this._withKeyAndValue(e,"isShowActivityBrowser",t)},t.prototype._getActivityByArgs=function(e,t,r,o){var i=this.getSuggestionById(this._getActivityId(e,t,r),o);return i||null==t||(i=this.getSuggestionById(this._getActivityId(e,void 0,r),o)),i},t.prototype._getCategoryId=function(e){return this._getActivityId(void 0,void 0,e)},t.prototype._getActivityId=function(e,t,r){return e+":"+t+":"+(null==e?r:void 0)},t.prototype._isCategory=function(e){return null!=e&&e.hasOwnProperty("sortKeyToActivity")},t})(i.SuggestReducer);t.ReducerActivity=s})),define("modules/clean/teams/forensics/internal/reducer/_suggest/reducer_user",["require","exports","tslib","external/lodash","modules/clean/teams/forensics/internal/reducer/_suggest/_/suggest_reducer"],(function(e,t,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importStar(i);var s=(function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype.getRole=function(e){return e[this.FC.IS_ADMIN]?this.I18N.SETTINGS.USER.SUGGESTION.ROLE.ADMIN:e[this.FC.IS_MEMBER]?this.I18N.SETTINGS.USER.SUGGESTION.ROLE.MEMBER:void 0},t.prototype.isMemberByUserId=function(e){var t=this;return n(this.getSuggestionById(e),(function(e){return e[t.FC.IS_MEMBER]}))},t.prototype._withRememberSuggestions=function(e,t,r){for(var i,s=this,a=this._getIdToSuggestion(e),u=this._getSortKeyToSuggestion(),l=function(t,r,i,s){if(null==t[i])return(e[r]=e[r]||o.clone(t))[i]=s},_=0,c=Array.from(t);_<c.length;_++){var p=c[_];l(a,"userIdToUser",p[this.FC.USER_ID],p),p[this.FC.IS_MEMBER]&&l(u,"sortKeyToUser",(p[this.FC.DISPLAY_NAME]+":"+p[this.FC.EMAIL]).toLowerCase(),p)}if(null!=(i=(null!=r?r[this.FC.USER_ID]:void 0)||n(this._getSelectedSuggestion(),(function(e){return e[s.FC.USER_ID]})))){if(null==(p=this.getSuggestionById(i,e))||!p[this.FC.IS_MEMBER])return this._withNoHint(e);if(r)return this._withSuggestionArgs(r,p)}},t.prototype._getSuggestionFromObject=function(e,t){var r,o;if(null!=(o=e[this.FC.USER_ID])){var i,s=void 0;if(i=this.getSuggestionById(o,t))return i;if(null!=(s=e[this.FC.DISPLAY_NAME]))return(r={})[this.FC.IS_MEMBER]=!0,r[this.FC.DISPLAY_NAME]=s,r[this.FC.USER_ID]=o,r}},t.prototype._getNamespace=function(){return this.FC.SUGGEST.NAMESPACE.USER},t.prototype._getUrlKeyToType=function(){var e;return(e={})[this.FC.USER_ID]=this.FC.URL.VALUE_TYPE.INTEGER,e[this.FC.DISPLAY_NAME]=this.FC.URL.VALUE_TYPE.DECORATIVE_STRING,e},t.prototype._getAjaxRequest=function(){return this.FC.AJAX.REQUESTS.SUGGEST_USER},t.prototype._getSuggestionId=function(e){return e[this.FC.USER_ID]},t.prototype._getSuggestionNameKeys=function(){return[this.FC.DISPLAY_NAME,this.FC.EMAIL]},t.prototype._getIdToSuggestionKey=function(){return"userIdToUser"},t.prototype._getSortKeyToSuggestionKey=function(){return"sortKeyToUser"},t.prototype._getSuggestionFilterName=function(){return this.I18N.SETTINGS.USER.FILTER_NAME},t.prototype._withSuggestionArgs=function(e,t){return e[this.FC.USER_ID]=t[this.FC.USER_ID],e[this.FC.DISPLAY_NAME]=t[this.FC.DISPLAY_NAME]||t[this.FC.EMAIL]},t.prototype._addSearchArgs=function(t,r){if(e.prototype._addSearchArgs.call(this,t,r),!this.store.state.is_search_mode&&null==r[this.FC.USER_ID])return this._withSuggestionArgs(r,this._getServerProps())},t.prototype._getSuggestionHints=function(e){return[e[this.FC.DISPLAY_NAME],e[this.FC.EMAIL]]},t.prototype._canSearchByUser=function(e){return(null!=e?e[this.FC.USER_ID]:void 0)&&(!this.store.state.is_search_mode||!this._isSelectedSuggestion(e))},t})(i.SuggestReducer);function n(e,t){return null!=e?t(e):void 0}t.ReducerUser=s})),define("modules/clean/teams/forensics/internal/reducer/reducer_contextual",["require","exports","tslib","external/lodash","modules/clean/teams/forensics/internal/reducer/_/forensics_reducer"],(function(e,t,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importStar(i);var s=(function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype.hideIfOffScreen=function(e){var t=e.getBoundingClientRect();if(t.right<this.store.header.getForensicsLeft()||t.left>this.store.header.getForensicsRight())return this._setState(this._withHideContextual({}))},t.prototype.showContextual=function(e,t){if(!this.store.search.isSearching()){var r=this._withKeyAndValue({},"previousContextualKey",this.getContextualKey());return e!==this.getContextualKey()&&(t.stopPropagation(),r.contextualKey=e),this._setState(r)}},t.prototype.getContextualKey=function(){return this._getStateKey("contextualKey")},t.prototype.getDrillDownModalType=function(){return this._getStateKey("drillDownModalType")},t.prototype.getDrillDownModalValues=function(){return this._getStateKey("drillDownModalValues")},t.prototype.hideDrillDownModal=function(){return this._setState(this._withShowDrillDownModal({}))},t.prototype.filterByFileOrFolder=function(e){return this._setState(this.store.file._withFileOrFolder({},e))},t.prototype.drillDownByValue=function(e){var t=this._withShowDrillDownModal({});switch(this.getDrillDownModalType()){case this.FC.DRILL_DOWN_TYPE.MEMBER:this.store.user._withSuggestion(t,e);break;case this.FC.DRILL_DOWN_TYPE.FILE:case this.FC.DRILL_DOWN_TYPE.FOLDER:this.store.file._withFileOrFolder(t,e)}return this._setState(t)},t.prototype.clickOption=function(e){if(!this.store.search.isSearching()){var t=void 0;return"function"==typeof e[this.FC.DETAIL_OPTION.WITH_ON_CLICK]&&e[this.FC.DETAIL_OPTION.WITH_ON_CLICK](t={}),this._setState(this._withHideContextual(t))}},t.prototype.getRowKey=function(e){return"r"+e+":"},t.prototype._shouldRowUpdate=function(e){var t=this.getRowKey(e);return-1<this._getStateKey("contextualKey","").indexOf(t)||-1<this._getPreviousContextualKey().indexOf(t)},t.prototype._hideContextual=function(){var e;if(o.size(e=this._withHideContextual({})))return this._setState(e)},t.prototype._withWillMount=function(){return this.$window.on("click",this._hideContextual.bind(this)),this.$window.on("scroll",this._hideContextual.bind(this))},t.prototype._withScroll=function(e){return this._withKeyAndValue(e,"previousContextualKey",void 0,!0)},t.prototype._withHideContextual=function(e){var t;return(t=this.getContextualKey())&&this._withKeyAndValue(e,"previousContextualKey",t,!0),this._withKeyAndValue(e,"contextualKey",void 0,!0)},t.prototype._withShowDrillDownModal=function(e,t,r){return e.drillDownModalType=t,this._withKeyAndValue(e,"drillDownModalValues",r)},t.prototype._shouldTableUpdate=function(){return this.getContextualKey()||this._getPreviousContextualKey()},t.prototype._getPreviousContextualKey=function(){return this._getStateKey("previousContextualKey","")},t})(i.ForensicsReducer);t.ReducerContextual=s})),define("modules/clean/teams/forensics/internal/reducer/reducer_details",["require","exports","tslib","modules/clean/teams/forensics/internal/reducer/_/forensics_reducer"],(function(e,t,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype.getStackedDetailOptions=function(e,t,r){for(var o=this,i=[],s=0;s<e.length;s++){var n,a,u,l,_,c=e[s];if(null!=(u=c[this.FC.USER_ID])&&(a=this.store.user.getSuggestionById(u)))(_=a[this.FC.IS_MEMBER]&&(this.store.state.is_search_mode||u!==this._getServerProp(this.FC.USER_ID)))&&(l=function(){return o.store.url.redirectToMemberPage(u)}),n=t(a,_);else n=r(c,s);i.push(this._createOption(n,l))}return i},t.prototype._createOption=function(e,t){var r;return(r={})[this.FC.DETAIL_OPTION.CONTENT]=e,r[this.FC.DETAIL_OPTION.WITH_ON_CLICK]=t,r},t.prototype._processEvent=function(e,t){var r,o=this;e[this.FC.CONTEXTUAL_DATE_OPTIONS]=this.store.date._getContextualMenuOptions(new Date(e[this.FC.TS_UTC_MS])),this._addCellUserOption(e,t);var i={},s=function(e,t){return(null!=i[e]?i[e].push(t):void 0)||(i[e]=[t])},n=[],a=e[this.FC.DETAILS]||{};for(var u in a){for(var l=a[u],_=[],c=0,p=Array.from(l);c<p.length;c++){var d,h=p[c];if(d=this.store.user.getSuggestionById(h[this.FC.USER_ID],t))this.store.user._canSearchByUser(d)&&s(this.FC.DRILL_DOWN_TYPE.MEMBER,d),h[this.FC.VALUE]=d[this.FC.DISPLAY_NAME]||d[this.FC.EMAIL]||String(d[this.FC.USER_ID]);else if(h[this.FC.EMAIL])h[this.FC.VALUE]=h[this.FC.EMAIL];else if(h[this.FC.IS_FILE]){h[this.FC.FILE_NAME]=h[this.FC.VALUE],null!=h[this.FC.FILE_OBJ_ID]&&(h[this.FC.IS_FILE_ID]=!h[this.FC.IS_DIR]),this.store.state.server_props.feature_flags.file_filter&&!this.store.file._isSelectedFile(h)&&s(this.FC.DRILL_DOWN_TYPE.FILE,h)}else h[this.FC.IS_WEB]?h[this.FC.VALUE]=this.I18N.RESULT.COLUMNS.ACTIVITY.DETAIL.WEB:null==h[this.FC.VALUE]&&((r={})[this.FC.VALUE]=String(JSON.stringify(h)),h=r);_.push(h)}_.length&&n.push([u,_])}return e[this.FC.DETAILS]=n.sort((function(e,t){var r=e[1][0][o.FC.IS_FILE_ID],i=t[1][0][o.FC.IS_FILE_ID];if(r!==i){if(null!=r)return!1;if(null!=i)return!0}return e[0]>t[0]})),this._addDetailOptions(e,i)},t.prototype._addDetailOptions=function(e,t){var r,o,i,s=this,n=[];if(this.store.activity._isSearchableActivity(r=this.store.activity.getActivityByEvent(e))){var a=this.store.activity.getActivityByEvent(e).name.toLowerCase(),u=this.I18N.RESULT.CONTEXTUAL.getDrillDownBy(a);n.push(this._createOption(u,(function(e){return s.store.activity._withSuggestion(e,r)})))}if((i=this._createUserOption(t[this.FC.DRILL_DOWN_TYPE.MEMBER]||[]))&&n.push(i),o=t[this.FC.DRILL_DOWN_TYPE.FILE]){for(var l=this.I18N.RESULT.CONTEXTUAL.FOLDER.DRILL_DOWN_TYPE,_=this.FC.DRILL_DOWN_TYPE.FOLDER,c=0,p=Array.from(o);c<p.length;c++){p[c][this.FC.IS_DIR]||(_=this.FC.DRILL_DOWN_TYPE.FILE,l=this.I18N.RESULT.CONTEXTUAL.FILE.DRILL_DOWN_TYPE)}n.push(this._createOption(l,(function(e){return 1===o.length?s.store.file._withFileOrFolder(e,o[0]):s.store.contextual._withShowDrillDownModal(e,_,o)})))}if(n.length)return e[this.FC.DETAIL_OPTIONS]=n},t.prototype._addCellUserOption=function(e,t){for(var r=[],o=(null!=e[this.FC.ACTING_AS]?e[this.FC.ACTING_AS][this.FC.ACTING_AS_TYPE]:void 0)===this.FC.ACTING_AS_USER_VAL?e[this.FC.ACTING_AS][this.FC.ACTING_AS_USER_ID_VAL]:null,i=0,s=[e[this.FC.USER_ID],o];i<s.length;i++){var n,a=s[i];(n=this.store.user.getSuggestionById(a,t))&&this.store.user._canSearchByUser(n)&&r.push(n)}return e[this.FC.CONTEXTUAL_USER_OPTION]=this._createUserOption(r)},t.prototype._createUserOption=function(e){var t=this;switch(e.length){case 0:return;case 1:return this._createOption(this.I18N.RESULT.CONTEXTUAL.getDrillDownBy(e[0][this.FC.DISPLAY_NAME]),(function(r){return t.store.user._withSuggestion(r,e[0])}));default:return this._createOption(this.I18N.RESULT.CONTEXTUAL.MEMBER.DRILL_DOWN_TYPE,(function(r){return t.store.contextual._withShowDrillDownModal(r,t.FC.DRILL_DOWN_TYPE.MEMBER,e)}))}},t})((o=r.__importStar(o)).ForensicsReducer);t.ReducerDetails=i})),define("modules/clean/teams/forensics/internal/reducer/reducer_file",["require","exports","tslib","modules/clean/teams/forensics/internal/reducer/_/forensics_reducer"],(function(e,t,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype.getInputProps=function(e){var t=this;return e.name="file-name-and-obj-id",e.value=this._getStateKey(this.FC.FILE_NAME,""),e.onChangeValue=this._onChangeFilterValue.bind(this),e.onClearInput=this._onClearInput.bind(this),e.onSubmit=function(){return t._search({})},e.onEscape=this._onEscape.bind(this),e.store=this.store,e},t.prototype.getInputType=function(){switch(this._getStateKey(this.FC.IS_FILE_ID)){case!0:return this.FC.SETTINGS.FILE.INPUT_TYPE.FILE;case!1:return this.FC.SETTINGS.FILE.INPUT_TYPE.FOLDER;default:return this.FC.SETTINGS.FILE.INPUT_TYPE.ANY}},t.prototype.getTokenName=function(){var e=this.getInputType();if(e===this.FC.SETTINGS.FILE.INPUT_TYPE.ANY)return null;var t=this._getStateKey(this.FC.FILE_TOKEN_KEY);return t||this.store.I18N.SETTINGS.FILE.TOKEN[e].LABEL},t.prototype.removeInputType=function(){var e;return this._search(((e={})[this.FC.FILE_OBJ_ID]=void 0,e[this.FC.IS_FILE_ID]=void 0,e))},t.prototype._getUrlKeyToType=function(){var e;return(e={})[this.FC.FILE_NAME]=this.FC.URL.VALUE_TYPE.STRING,e[this.FC.FILE_OBJ_ID]=this.FC.URL.VALUE_TYPE.STRING,e[this.FC.IS_FILE_ID]=this.FC.URL.VALUE_TYPE.DECORATIVE_BOOLEAN,e},t.prototype._addSearchArgs=function(e,t){var r=this;return(function(){for(var o=[],i=0,s=Array.from(r._getUrlKeys());i<s.length;i++){var n,a,u=s[i];n=a=r._getStateKey(u,void 0,e),["",void 0].includes(n)?o.push(void 0):o.push(t[u]=a)}return o})()},t.prototype._addSearchTokens=function(e,t){var r=this,o=t[this.FC.FILE_NAME],i=t[this.FC.IS_FILE_ID];if(o||i){var s=(function(){switch(i){case!0:return r.I18N.SETTINGS.FILE.SEARCH_TOKEN.INPUT_TYPE.FILE;case!1:return r.I18N.SETTINGS.FILE.SEARCH_TOKEN.INPUT_TYPE.FOLDER;default:return r.I18N.SETTINGS.FILE.FILTER_NAME}})();null==i||o||(o=this.I18N.SETTINGS.FILE.SEARCH_TOKEN.FILE_NAME.ALL_VERSIONS);var n=this.store.header._createSearchToken(s,o,this._onClearInput.bind(this,!0));return e.push(n)}},t.prototype._isValidWithUrlArgs=function(e,t){var r=null!=t&&t.hasOwnProperty(this.FC.FILE_OBJ_ID)===t.hasOwnProperty(this.FC.IS_FILE_ID);return this._withKeys(e,this._getUrlKeys(),r?t:{}),r},t.prototype._isSelectedFile=function(e){return e[this.FC.FILE_NAME]===this._getStateKey(this.FC.FILE_NAME)&&e[this.FC.FILE_OBJ_ID]===this._getStateKey(this.FC.FILE_OBJ_ID)},t.prototype._withFileOrFolder=function(e,t){return this.store.search._withSearch(this._withKeys(e,this._getUrlKeys(),t))},t.prototype._onEscape=function(){return this._onChangeFilterValue(this.store.search._getPreviousSearchArgs()[this.FC.FILE_NAME])},t.prototype._onClearInput=function(){return this._setState(this._withFileOrFolder({},{}))},t.prototype._onChangeFilterValue=function(e){return this._setStateKey(this.FC.FILE_NAME,e)},t.prototype._search=function(e){return e=this.store.search._withSearch(e),this._setState(e)},t})((o=r.__importStar(o)).ForensicsReducer);t.ReducerFile=i})),define("modules/clean/teams/forensics/internal/reducer/reducer_header",["require","exports","tslib","react-dom","jquery","modules/clean/teams/forensics/internal/reducer/_/forensics_reducer","modules/clean/teams/forensics/internal/reducer/_date/_/date_utils","modules/core/notify"],(function(e,t,r,o,i,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importDefault(i),s=r.__importStar(s),n=r.__importStar(n);var u=(function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype.getForensicsLeft=function(){return this._getStateKey("forensicsLeft")},t.prototype.getForensicsRight=function(){return this._getStateKey("forensicsRight")},t.prototype.getLastUpdatedString=function(){var e=this.store.search.getLastUpdatedDate();return null!=e?"("+n.TimeAgoFromDate(e)+")":""},t.prototype.getSearchTokens=function(){return this._getStateKey("searchTokens",[])},t.prototype.isSticky=function(){return this._getStateKey("isSticky",!1)},t.prototype.submitCreateReport=function(){var e=this;if(!this.store.date.isCreateReportDisabled()){return this._setState(this._withHideCreateReportModal(this.store.ajax._withRequest({},this.FC.AJAX.REQUESTS.CREATE_REPORT,this.store.date._getCreateReportArgs(),(function(t){return a.Notify.success(e.I18N.AJAX.ACTIONS.CREATE_REPORT.SUCCESS),t}))))}},t.prototype.showCreateReportModal=function(){var e;if(!this.isCreateReportDisabled())return this._setState(this.store.date._withCreateReportInitialValues(((e={}).isShowCreateReportModal=!0,e)))},t.prototype.hideCreateReportModal=function(){return this._setWith(this._withHideCreateReportModal)},t.prototype.isShowCreateReportModal=function(){return this._getStateKey("isShowCreateReportModal",!1)},t.prototype.isCreateReportDisabled=function(){return this.store.search.isSearching()||this.store.result.isEmpty()||this.store.state.server_props.feature_flags[this.FC.IS_RESELLER_SUPPORT]},t.prototype.getSummaryStatus=function(){return this.store.search.isSearching()?this.FC.SUMMARY_STATUS.LOADING:this.store.header.getSearchTokens().length?this.FC.SUMMARY_STATUS.MATCHING:this.FC.SUMMARY_STATUS.ALL},t.prototype._withDidMount=function(){return this.store.state.is_search_mode?this.$window.scroll(this._onScroll.bind(this)):i.default(".forensics-recent-activity-loader").remove(),this.$window.resize(this._getSetWith(this._withForensicsLeftAndRight))},t.prototype._withSearchTokens=function(e,t){for(var r=this,o=[],i=0,s=Array.from(this._getReducers(this.FC.REDUCER_ACTION.ADD_SEARCH_TOKENS));i<s.length;i++){s[i]._addSearchTokens(o,t)}return this._withKeyAndValue(e,"searchTokens",o.sort((function(e,t){return e[r.FC.SEARCH_TOKEN.NAME]!==r.I18N.SETTINGS.DATE.FILTER_NAME.FROM&&(e[r.FC.SEARCH_TOKEN.LENGTH]===t[r.FC.SEARCH_TOKEN.LENGTH]?e[r.FC.SEARCH_TOKEN.NAME]>t[r.FC.SEARCH_TOKEN.NAME]:e[r.FC.SEARCH_TOKEN.LENGTH]>t[r.FC.SEARCH_TOKEN.LENGTH])})))},t.prototype._createSearchToken=function(e,t,r,o){var i;return(i={})[this.FC.SEARCH_TOKEN.NAME]=e,i[this.FC.SEARCH_TOKEN.VALUE]=String(t),i[this.FC.SEARCH_TOKEN.REMOVE]=r,i[this.FC.SEARCH_TOKEN.IS_IN_CREATE_REPORT]=o,i[this.FC.SEARCH_TOKEN.LENGTH]=e.length+String(t).length,i},t.prototype._withForensicsLeftAndRight=function(e){var t=o.findDOMNode(this._getForensicsMain()).getBoundingClientRect();return this._withKeyAndValue(e,"forensicsLeft",t.left,!0),this._withKeyAndValue(e,"forensicsRight",t.right,!0)},t.prototype._onScroll=function(){var e,t=this.store.result._withFetchNext({}),r=this._getForensicsMain().getHeader();return(e=o.findDOMNode(r)&&(this.$window.scrollTop()>o.findDOMNode(r).offsetTop-r.getStickyHeightSurplus()||this.store.contextual.getContextualKey()))&&this._withForensicsLeftAndRight(t),e!==this.isSticky()&&(t.isSticky=e)&&(this._invokeReducerAction(this.FC.REDUCER_ACTION.WITH_CHANGE_TO_STICKY,t),this._getForensicsMain().getSettings().clearFocus()),this._setState(t,!0)},t.prototype._withHideCreateReportModal=function(e){return this._withKeyAndValue(e,"isShowCreateReportModal",!1)},t})(s.ForensicsReducer);t.ReducerHeader=u})),define("modules/clean/teams/forensics/internal/reducer/reducer_result",["require","exports","tslib","react-dom","external/lodash","modules/clean/teams/forensics/internal/reducer/_/forensics_reducer"],(function(e,t,r,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importStar(i),s=r.__importStar(s);var n=(function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype.resetPosition=function(){return this._setStateKey("offsetX",0),this.window.scrollTo(0,0)},t.prototype.getTableClass=function(e){return""+e+this._getStateKey("tableBordersClassName","")+" "+(this.store.search.isSearching()?" loading-results":"")},t.prototype.getColumnNames=function(){return this.store.state.is_search_mode?[this.FC.COLUMN.DATE,this.FC.COLUMN.USER,this.FC.COLUMN.ACTIVITY,this.FC.COLUMN.LOCATION]:[this.FC.COLUMN.DATE,this.FC.COLUMN.ACTIVITY,this.FC.COLUMN.LOCATION]},t.prototype.setHorizontalScroll=function(e){if(e.deltaX)return e.preventDefault(),e.stopPropagation(),this.window.scrollTo(this.window.pageXOffset+e.deltaX,this.window.pageYOffset+e.deltaY),this._setState(this._withHorizontalScroll({},e.deltaX))},t.prototype.getHeaderColumnWidth=function(e){return this._getStateKey("columnNameToColumnWidth",{})[e]},t.prototype.getXOffset=function(){return this._getStateKey("offsetX",0)},t.prototype.getEvents=function(){return this._getStateKey("fetchedEvents",[])},t.prototype.isEmpty=function(){return 0===this.getEvents().length},t.prototype.shouldRowUpdate=function(e){return Boolean(this.store.contextual._shouldRowUpdate(e)||this.store.selection._shouldRowUpdate(e))},t.prototype.shouldTableUpdate=function(){return Boolean(this.store.search.isSearching()||this._isNeedsPostRenderCalculations()||this.store.contextual._shouldTableUpdate()||this.store.selection._shouldTableUpdate())},t.prototype._withPostRender=function(e){if(this._isNeedsPostRenderCalculations()){var t=void 0;e.isNeedsPostRenderCalculations=!1,e.lastRowY=(t=this._getForensicsMain().getResult().getLastRow()).getTopOffset();var r=e.columnNameToColumnWidth=t.getColumnToWidth();e.resultTableWidth=i.values(r).reduce((function(e,t){return e+t}))||void 0,this._withHorizontalScroll(this._withFetchNext(e))}return e},t.prototype._withEvents=function(e,t,r){for(var o=0,i=Array.from(t);o<i.length;o++){var s=i[o];this.store.details._processEvent(s,e)}return t.length&&(e.isNeedsPostRenderCalculations=!0),r?(e.columnNameToColumnWidth=void 0,e.fetchedEvents=t):e.fetchedEvents=this.getEvents().concat(t),e},t.prototype._withFetchNext=function(e){if(this.store.state.is_search_mode){var t=this._getStateKey("lastRowY",void 0,e);null!=t&&t<this.$window.scrollTop()+this.$window.height()&&this.store.search._withFetchNextPage(e)}return e},t.prototype._withHorizontalScroll=function(e,t){var r=this.getXOffset()+(t||0),i=o.findDOMNode(this._getForensicsMain()).clientWidth,s=this._getStateKey("resultTableWidth",i,e);e.offsetX=r=Math.max(0,Math.min(r,s-i));var n=[];switch(r>0&&n.push("left-overflow"),s>r+i&&n.push("right-overflow"),n.length){case 1:n.push("one-side-overflows");break;case 2:n.push("two-sides-overflow");break;default:n.push("no-overflow")}return this._withKeyAndValue(e,"tableBordersClassName"," "+n.join(" ")),this.store.contextual._withScroll(e)},t.prototype._isNeedsPostRenderCalculations=function(){return this._getStateKey("isNeedsPostRenderCalculations",!1)},t})(s.ForensicsReducer);t.ReducerResult=n})),define("modules/clean/teams/forensics/internal/reducer/reducer_search",["require","exports","tslib","external/lodash","modules/clean/teams/forensics/internal/reducer/_/forensics_reducer"],(function(e,t,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importStar(i);var s=(function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype.getLastUpdatedDate=function(){return this._getStateKey("lastUpdatedDate")},t.prototype.refreshSearch=function(){var e;return this._setState(this._withSearch(((e={})[this.FC.ROOT_TIME]=Date.now(),e)))},t.prototype.isSearchError=function(){return this.store.ajax._isError(this.FC.AJAX.REQUESTS.SEARCH)},t.prototype.isSearching=function(){return this.store.ajax._isSending(this.FC.AJAX.REQUESTS.SEARCH)},t.prototype._getUrlKeyToType=function(){var e;return(e={})[this.FC.ROOT_TIME]=this.FC.URL.VALUE_TYPE.INTEGER,e},t.prototype._withChangeToSticky=function(e){return o.assignIn(e,this._getPreviousSearchArgs())},t.prototype._addSearchArgs=function(e,t){if(t[this.FC.LIMIT]=this.store.state.is_search_mode?this.FC.EVENT_LIMIT.SEARCH:this.FC.EVENT_LIMIT.RECENT_ACTIVITY,t[this.FC.PAGE]=e[this.FC.PAGE]||1,null==t[this.FC.ROOT_TIME])return t[this.FC.ROOT_TIME]=1===t[this.FC.PAGE]?e[this.FC.ROOT_TIME]:this._getStateKey(this.FC.ROOT_TIME)},t.prototype._withWillMount=function(e){return this.store.state.is_search_mode?e:this._withSearch(e)},t.prototype._withSearch=function(e,t){var r,o=this;if(r=this._getSearchArgs(e,t)){if(!this.store.state.is_search_mode&&!this.store.result.isEmpty())return this.store.url._redirectBySearchArgs(r),e;var i=this._filterDecorationUrlArgs(r,e);this.store.ajax._withRequest(e,this.FC.AJAX.REQUESTS.SEARCH,i,(function(e,i){return o._withSearchResult(e,i,r,t)})),1===r[this.FC.PAGE]&&this._withClear(e)}return e},t.prototype._withFetchNextPage=function(e){return!this.isSearching()&&this._getStateKey(this.FC.HAS_NEXT,!0)?this._withSearch(this._withKeyAndValue(e,this.FC.PAGE,this._getPreviousSearchArgs()[this.FC.PAGE]+1)):e},t.prototype._withClear=function(e){return this._withKeys(e,["lastUpdatedDate","previousSearchArgs",this.FC.ROOT_TIME],{}),this.store.result._withEvents(e,[],!0)},t.prototype._getPreviousSearchArgs=function(){return this._getStateKey("previousSearchArgs",{})},t.prototype._filterDecorationUrlArgs=function(e,t){var r=this.store.url._getAllUrlKeyToType(t),o={};for(var i in e){var s=e[i];Array.from(this.FC.URL.VALUE_TYPE.DECORATIVE_TYPES).includes(r[i])||(o[i]=s)}return o},t.prototype._getSearchArgs=function(e,t){var r=t||{};if(t)this._addSearchArgs(e,r);else for(var i=0,s=Array.from(this._getReducers(this.FC.REDUCER_ACTION.ADD_SEARCH_ARGS));i<s.length;i++){s[i]._addSearchArgs(e,r)}var n={};for(var a in r){var u=r[a];null!=u&&(n[a]=u)}if(!this.store.state.is_search_mode)return n;for(var l=this._getPreviousSearchArgs(),_=0,c=Array.from(Object.keys(o.assignIn(o.clone(l),n)));_<c.length;_++){var p=n[a=c[_]],d=l[a];if(a!==this.FC.PAGE){if((a!==this.FC.ROOT_TIME||null!=p)&&p!==d)return n}else if(p>d)return n}},t.prototype._withSearchResult=function(e,t,r,i){var s;e[this.FC.HAS_NEXT]=t[this.FC.HAS_NEXT],e[this.FC.FILE_TOKEN_KEY]=t[this.FC.FILE_TOKEN_KEY],o.assignIn(r,t[this.FC.AJAX.SEARCH_ARGS]),delete r[this.FC.AJAX.SEARCH_HINTS];var n=t[this.FC.EVENTS];return this.store.user._withRememberSuggestions(e,t[this.FC.USERS],r),(s=1===r[this.FC.PAGE])&&(e.lastUpdatedDate=new Date,r[this.FC.ROOT_TIME]=e[this.FC.ROOT_TIME]=n.length&&n[0][this.FC.TS_UTC_MS]||Date.now(),this.store.header._withSearchTokens(e,r),this.store.selection._withResetSelection(e)),e.previousSearchArgs=r,this.store.result._withEvents(e,n,s),this.store.state.is_search_mode&&this.store.url._withUrlBySearchArgs(e,r,i),e},t})(i.ForensicsReducer);t.ReducerSearch=s})),define("modules/clean/teams/forensics/internal/reducer/reducer_selection",["require","exports","tslib","react-dom","modules/clean/teams/forensics/internal/reducer/_/forensics_reducer","modules/clean/teams/forensics/internal/reducer/_date/_/date_utils","modules/core/notify"],(function(e,t,r,o,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importStar(i),s=r.__importStar(s);var a=(function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype.onMouseDownRow=function(e,t){if(this.isSafari()||1===t.buttons){t.preventDefault();var r={};return(r.isSelectingRows=!this.isSelectedRow(e))?(r.selectionAnchorRow=r.selectionStretchRow=e,this._withRowSpan(r,e)):this._withResetSelection(r),r.previousSelectionRowSpan=this._getCurrentRowSpan(),r.isNeedsSelectionReRender=!0,this._setState(r)}},t.prototype.onMouseEnterRow=function(e,t){var r=this._withKeyAndValue({},"isOnResultTable",!0,!0);return this._isSelectingRows(t)&&(this._withPreviousRowSpan(r),this._withKeyAndValue(r,"selectionStretchRow",e,!0),null!=r.selectionStretchRow&&this._withRowSpan(r,this._getStateKey("selectionAnchorRow"))),this._setState(r,!0)},t.prototype.onMouseOverRow=function(e){if(this._isSelectingRows(e)){var t=void 0;if(0<(t=e.clientY+50-this.$window.height())||0>(t=e.clientY-o.findDOMNode(this._getForensicsMain().getHeader()).clientHeight-40))return this.window.scrollTo(this.$window.scrollLeft(),this.$window.scrollTop()+t)}},t.prototype.isSelectedRow=function(e,t){var r;return void 0===t&&(t="currentSelectionRowSpan"),(r=this._getStateKey(t))&&r.minRowIndex<=e&&e<=r.maxRowIndex},t.prototype.onLeaveResultTable=function(){return this._setStateKey("isOnResultTable",!1)},t.prototype.getClipboardText=function(){return this._getStateKey("clipboardText")},t.prototype.hideClipboardModal=function(){return this._setStateKey("clipboardText")},t.prototype._withWillMount=function(){var e=this;this.$document.keydown(this._onKeyDown.bind(this));var t=this.$window.attr("mouseup");return this.$window.mouseup((function(r){return e._setState(e._withKeyAndValue({},"isSelectingRows",void 0,!0),!0),"function"==typeof t?t(r):void 0}))},t.prototype._withPostRender=function(e){return this._withKeyAndValue(e,"isNeedsSelectionReRender",void 0,!0)},t.prototype._withResetSelection=function(e){return this._withKeys(e,["selectionAnchorRow","selectionStretchRow","previousSelectionRowSpan","currentSelectionRowSpan","isSelectingRows"],{})},t.prototype._shouldTableUpdate=function(){return this._getStateKey("isNeedsSelectionReRender")},t.prototype._shouldRowUpdate=function(e){return this.isSelectedRow(e)||this.isSelectedRow(e,"previousSelectionRowSpan")},t.prototype._withPreviousRowSpan=function(e){return this._withKeyAndValue(e,"previousSelectionRowSpan",this._getCurrentRowSpan(),!0)},t.prototype._onKeyDown=function(e){var t;if(67===e.keyCode&&(e.metaKey&&this.isOsX()||e.ctrlKey&&!this.isOsX())&&this._getStateKey("isOnResultTable")&&null!=(t=this._getCurrentRowSpan()))return this._copyToClipboard(t)},t.prototype._copyToClipboard=function(e){for(var t=[],r=0,o=Array.from(this.store.result.getEvents().slice(e.minRowIndex,+e.maxRowIndex+1||void 0));r<o.length;r++){var i=o[r];t.push(this._getCsvRowFromEvent(i))}var s=t.join("\n");if(null!=this.window.clipboardData)null!=this.window.clipboardData&&this.window.clipboardData.setData("text/plain",s);else{if(!this.document.queryCommandSupported("copy"))return void(this._isShowingAModal()||this._setStateKey("clipboardText",s));var a=document.createElement("textarea");a.classList.add+="forensic-temp-clipboard-node",a.value=s,this.document.body.appendChild(a),a.select(),this.document.execCommand("copy"),this.document.body.removeChild(a)}return n.Notify.success(this.I18N.RESULT.SELECTION.copiedToClipboard(t.length))},t.prototype._getCsvRowFromEvent=function(e){for(var t,r,o,i,n=this,a=(r=this.store.user.getSuggestionById(e[this.FC.USER_ID]))?r[this.FC.DISPLAY_NAME]+" ("+r[this.FC.EMAIL]+")":"",u={},l=0,_=Array.from(e[this.FC.DETAILS]);l<_.length;l++){var c=_[l],p=c[0],d=c[1];u[p]=1===d.length?d[0][this.FC.VALUE]:Array.from(d).map((function(e){return e[n.FC.VALUE]}))}return(t=e[this.FC.IP_ADDRESS]||"")&&e[this.FC.CITY]&&(t=t+" ("+e[this.FC.CITY]+")"),[s.ClipboardDateFromTsUtcMs(e[this.FC.TS_UTC_MS]),a,(o=this.store.activity.getActivityByEvent(e),i=function(e){return e[n.FC.NAME]},(null!=o?i(o):void 0)||""),t,'"'+JSON.stringify(u).replace(/"/g,'""')+'"'].join(",")},t.prototype._withRowSpan=function(e,t){var r;return e.isNeedsSelectionReRender=!0,this._withKeyAndValue(e,"currentSelectionRowSpan",((r={}).minRowIndex=Math.min(t,e.selectionStretchRow),r.maxRowIndex=Math.max(t,e.selectionStretchRow),r))},t.prototype._isSelectingRows=function(e){return(this.isSafari()&&this._getStateKey("isSelectingRows")||1===e.buttons)&&this._getCurrentRowSpan()},t.prototype._getCurrentRowSpan=function(){return this._getStateKey("currentSelectionRowSpan")},t})(i.ForensicsReducer);t.ReducerSelection=a})),define("modules/clean/teams/forensics/internal/reducer/reducer_url",["require","exports","tslib","external/lodash","modules/clean/teams/forensics/internal/reducer/_/forensics_reducer","modules/core/browser","modules/core/uri"],(function(e,t,r,o,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importStar(o),i=r.__importStar(i),s=r.__importStar(s);var a=(function(e){function t(t){return e.call(this,t)||this}return r.__extends(t,e),t.prototype.redirectToMemberPage=function(e){return this._redirect("/team/admin/members/member?id="+e)},t.prototype.redirectToForensicsHome=function(){return this._history_push_state({},"","/team/admin/activity",this.window),this._setStateKey("isValidUrl",!0)},t.prototype.isValidUrl=function(){return this._getStateKey("isValidUrl",!1)},t.prototype._withWillMount=function(e){e.allUrlKeyToType={};for(var t=0,r=Array.from(this._getReducers(this.FC.REDUCER_ACTION.GET_URL_KEY_TO_TYPE));t<r.length;t++){var i=r[t];o.assignIn(e.allUrlKeyToType,i._getUrlKeyToType())}if(this.store.state.is_search_mode){this._periodicPollUrl(e);var s=setInterval(this._periodicPollUrl.bind(this),400);e.periodicPollUrlTimerId=s}return e},t.prototype._withWillUnmount=function(e){var t=this._getStateKey("periodicPollUrlTimerId");return null!=t&&clearInterval(t),e},t.prototype._redirectBySearchArgs=function(e){var t=this._getUrlQueryFromArgs(e),r=new n.URI({path:"/team/admin/activity"}).setQuery(t).toString();return this._redirect(r)},t.prototype._withUrlBySearchArgs=function(e,t,r){var i=e.previousUrlQuery=this._getUrlQueryFromArgs(t);if(!o.isEqual(i,this._get_search())){var s=new n.URI({path:"/team/admin/activity"}).setQuery(i).toString();return r?this._history_replace_state({},"",s,this.window):this._history_push_state({},"",s,this.window)}},t.prototype._getAllUrlKeyToType=function(e){return this._getStateKey("allUrlKeyToType",[],e)},t.prototype._redirect=function(e){return s.redirect(e,this.window)},t.prototype._periodicPollUrl=function(e){if(!o.isEqual(this._get_search(),this._getStateKey("previousUrlQuery"))){var t;(t=null==e)&&(e={});for(var r={},i=this._getAllUrlKeyToType(e),n=!0,a=s.get_uri(this.window).getQuery(),u=0,l=Array.from(Object.keys(a));u<l.length;u++){var _=l[u];if(i[_]){var c=a[_],p=this._parseUrlArg(_,c,i);null!=c&&null!=p?r[_]=p:n=!1}}for(var d=0,h=Array.from(this._getReducers(this.FC.REDUCER_ACTION.IS_VALID_WITH_URL_ARGS));d<h.length;d++){var f=h[d];if(!n)break;if(!f._isValidWithUrlArgs(e,r))for(var m=0,g=Array.from(f._getUrlKeys());m<g.length;m++)if(_=g[m],null!=r&&r.hasOwnProperty(_)){n=!1;break}}if(e.previousUrlQuery=this._get_search(),(e.isValidUrl=n)?this.store.search._withSearch(e,r):this.store.search._withClear(e),t)return this._setState(e)}},t.prototype._parseUrlArg=function(e,t,r){var o;t=decodeURIComponent(t);var i=r[e];if(Array.from(this.FC.URL.VALUE_TYPE.STRING_TYPES).includes(i))return t;if(Array.from(this.FC.URL.VALUE_TYPE.BOOLEAN_TYPES).includes(i))switch(t){case(!0).toString():return!0;case(!1).toString():return!1}else if(Array.from(this.FC.URL.VALUE_TYPE.INTEGER_TYPES).includes(i)&&null!=(o=this._parseIntStrict(t))&&t===String(o))return o},t.prototype._getUrlQueryFromArgs=function(e){var t=this._getAllUrlKeyToType(),r={};for(var o in e){var i=e[o];null!=t&&t.hasOwnProperty(o)&&(r[o]=i)}return r},t.prototype._get_search=function(){return s.get_uri(this.window).getQuery()},t.prototype._history_push_state=function(e,t,r,o){return void 0===o&&(o=window),o.history.pushState(e,t,r)},t.prototype._history_replace_state=function(e,t,r,o){return void 0===o&&(o=window),o.history.replaceState(e,t,r)},t})(i.ForensicsReducer);t.ReducerUrl=a})),define("modules/clean/teams/forensics/result/_/result_clipboard_modal",["require","exports","tslib","react","react-dom","react-dom-factories","prop-types","modules/clean/react/modal"],(function(e,t,r,o,i,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a);var u=o.default.createFactory(a.Modal),l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._onChange=function(e){return e.preventDefault(),t.componentDidMount()},t._renderContent=function(){return s.textarea({ref:"textarea",className:"result-clipboard-textarea",value:t.props.store.selection.getClipboardText(),onMouseDown:t._onChange,onChange:t._onChange,onBlur:t._onChange,onFocus:t._onChange})},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){return i.findDOMNode(this.refs.textarea).select()},t.prototype.render=function(){var e=this;return u({title:this.props.store.isOsX()?this.props.store.I18N.RESULT.SELECTION.MODAL.TITLE.OSX:this.props.store.I18N.RESULT.SELECTION.MODAL.TITLE.WINDOWS,onDismiss:function(){return e.props.store.selection.hideClipboardModal()},dismissButtonText:this.props.store.I18N.RESULT.SELECTION.MODAL.BUTTON,acceptButtonText:null},this._renderContent())},t.displayName="ResultClipboardModal",t.propTypes={store:n.object},t})(o.default.Component);t.ResultClipboardModal=l})),define("modules/clean/teams/forensics/result/_/result_drill_down_modal",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/react/modal","modules/clean/teams/forensics/filter/user/_/user_suggestion"],(function(e,t,r,o,i,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a);var u=o.default.createFactory(a.UserSuggestion),l=o.default.createFactory(n.Modal),_=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._getOnClickOptionValue=function(e){return function(){return t.props.store.contextual.drillDownByValue(e)}},t._renderOption=function(e,r,o){switch(e){case t.props.store.FC.DRILL_DOWN_TYPE.MEMBER:return u({store:t.props.store,user:r,hint:""});default:return i.div({className:"drill-down-modal-generic-option "+(o?"drill-down-modal-bottom-border":"")},r[t.props.store.FC.VALUE])}},t._renderOptions=function(e){var r;return i.div({className:"drill-down-modal-options"},i.table({border:0,cellSpacing:0,cellPadding:0},i.thead({},Array.from(r=t.props.store.contextual.getDrillDownModalValues()).map((function(o,s){return i.tr({key:s},i.td({className:"drill-down-modal-option",onClick:t._getOnClickOptionValue(o)},t._renderOption(e,o,s!==r.length-1)))})))))},t._renderContent=function(e){return i.div({className:"drill-down-modal-content"},i.div({className:"drill-down-modal-subtitle"},t.props.store.I18N.RESULT.CONTEXTUAL[e].MODAL_SUBTITLE),t._renderOptions(e))},t}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.store.contextual.getDrillDownModalType();return l({width:679,title:this.props.store.I18N.RESULT.CONTEXTUAL[t].DRILL_DOWN_TYPE,onDismiss:function(){return e.props.store.contextual.hideDrillDownModal()},dismissButtonText:this.props.store.I18N.RESULT.CONTEXTUAL.DRILL_DOWN_MODAL_DISMISS_BUTTON,acceptButtonText:null},this._renderContent(t))},t.displayName="ResultDrillDownModal",t.propTypes={store:s.object},t})(o.default.Component);t.ResultDrillDownModal=_})),define("modules/clean/teams/forensics/result/_/result_footer",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/components/loading_indicator"],(function(e,t,r,o,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s);var a=o.default.createFactory(n.LoadingIndicator),u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderTitle=function(e){return i.div({key:"title",className:"no-result-title"},e?t.props.store.search.isSearchError()?t.props.store.I18N.RESULT.ON_ERROR:t.props.store.I18N.RESULT.NO_RESULTS.TITLE:t.props.store.I18N.RESULT.INVALID_URL.TITLE)},t._renderSubtitle=function(e){return i.div({key:"subtitle",className:"no-result-subtitle"},i.span({},t.props.store.I18N.RESULT.NO_RESULTS.SUBTITLE.TEXT),i.a({className:"learn-more-link",href:"https://www.dropbox.com/help",target:"_blank"},t.props.store.I18N.RESULT.NO_RESULTS.SUBTITLE.LEARN_MORE_LINK),e?void 0:i.a({className:"see-all-activity",onClick:function(){return t.props.store.url.redirectToForensicsHome()}},t.props.store.I18N.RESULT.INVALID_URL.SEE_ALL_ACTIVITIES))},t}return r.__extends(t,e),t.prototype.render=function(){var e=this,t=this.props.store.result.isEmpty();return i.div({className:"result-footer"+(t?" no-result":"")},(function(){if(e.props.store.search.isSearching())return a({style:n.LoadingIndicator.LoadingIndicatorStyle.DOTS});if(t){var r;return[e._renderTitle(r=e.props.store.url.isValidUrl()),e._renderSubtitle(r)]}})())},t.displayName="ResultFooter",t.propTypes={store:s.object},t})(o.default.Component);t.ResultFooter=u})),define("modules/clean/teams/forensics/result/result",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/teams/forensics/result/_/result_clipboard_modal","modules/clean/teams/forensics/result/_/result_drill_down_modal","modules/clean/teams/forensics/result/_/result_footer","modules/clean/teams/forensics/result/table/result_table"],(function(e,t,r,o,i,s,n,a,u,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a),u=r.__importStar(u),l=r.__importStar(l);var _=o.default.createFactory(n.ResultClipboardModal),c=o.default.createFactory(a.ResultDrillDownModal),p=o.default.createFactory(u.ResultFooter),d=o.default.createFactory(l.ResultTable),h=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getLastRow=function(){return t.refs.table.getLastRow()},t._renderTableContainer=function(){if(!t.props.store.result.isEmpty())return i.div({onWheel:function(e){return t.props.store.result.setHorizontalScroll(e)},className:t.props.store.result.getTableClass("result-table-container")},i.div({className:"result-table-wrapper",style:{marginLeft:-t.props.store.result.getXOffset()}},d({ref:"table",store:t.props.store})))},t._renderModal=function(){return t.props.store.contextual.getDrillDownModalType()?c({store:t.props.store}):t.props.store.selection.getClipboardText()?_({store:t.props.store}):void 0},t}return r.__extends(t,e),t.prototype.componentDidMount=function(){return this.props.store.onDidMount()},t.prototype.render=function(){return i.div({className:"result-body-container"},this._renderModal(),this._renderTableContainer(),p({store:this.props.store}))},t.displayName="Result",t.propTypes={store:s.object},t})(o.default.Component);t.Result=h})),define("modules/clean/teams/forensics/result/table/result_table",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/teams/forensics/result/table/row/table_row","modules/clean/web_timing_logger"],(function(e,t,r,o,i,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a);var u=o.default.createFactory(n.TableRow),l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderRows=function(){var e,r=(e=t.props.store.result.getEvents()).length-1;return Array.from(e).map((function(e,o){return u({key:o,ref:o===r?"lastRow":void 0,rowIndex:o,event:e,store:t.props.store})}))},t.getLastRow=function(){return t.refs.lastRow},t}return r.__extends(t,e),t.prototype.shouldComponentUpdate=function(){return this.props.store.result.shouldTableUpdate()},t.prototype.componentDidMount=function(){return a.mark_time_to_view(),a.mark_time_to_interactive()},t.prototype.render=function(){var e=this;return i.table({onMouseLeave:function(){return e.props.store.selection.onLeaveResultTable()},className:"result-table"+(this.props.store.state.is_search_mode?"":"-recent-activity"),cellPadding:0,cellSpacing:0,border:0},i.thead({},this._renderRows()))},t.displayName="ResultTable",t.propTypes={store:s.object},t})(o.default.Component);t.ResultTable=l})),define("modules/clean/teams/forensics/result/table/row/cell/_/cell_contextual",["require","exports","tslib","react","react-dom","react-dom-factories","prop-types","modules/clean/react/sprite"],(function(e,t,r,o,i,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n);var u=o.default.createFactory(a.Sprite),l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._getContextualClass=function(e){return e?"cell-contextual drill-down-menu c-card c-card--arrow c-card--arrow-nw":"cell-contextual stacked-detail-expand-menu"},t._getOnClickOption=function(e){return function(){return t.props.store.contextual.clickOption(e)}},t._renderContextualMenu=function(e){var r=(e?"drill-down":"stacked-detail-expand")+"-menu-option";return s.div({ref:"contextual",className:t._getContextualClass(e)},Array.from(t.props.options).map((function(e,o){return s.div({key:o,className:r,onClick:t._getOnClickOption(e)},e[t.props.store.FC.DETAIL_OPTION.CONTENT])})))},t._renderAnchorButton=function(e){return s.div({ref:"anchorButton",className:"drill-down-anchor-button drill-down-anchor-button-"+(e?"":"in")+"active"},u({group:"web",name:"download-dropdown-arrow-white",alt:"",className:"drill-down-anchor-button-sprite"}))},t._hideIfOffScreen=function(){return t.props.store.contextual.hideIfOffScreen(i.findDOMNode(t.refs.anchorButton||t.refs.anchor))},t}return r.__extends(t,e),t.prototype.componentDidUpdate=function(){this.props.store.contextual.getContextualKey()===this.props.contextualKey&&this._hideIfOffScreen()},t.prototype.render=function(){var e=this,t=this.props.store.contextual.getContextualKey()===this.props.contextualKey,r=this.props.type===this.props.store.FC.CONTEXTUAL_TYPE.DRILL_DOWN;return s.div({ref:"anchor",className:"contextual-anchor",onClick:function(t){return e.props.store.contextual.showContextual(e.props.contextualKey,t)},onMouseDown:function(e){return e.stopPropagation()}},r?this._renderAnchorButton(t):void 0,t?this._renderContextualMenu(r):void 0)},t.displayName="CellContextual",t.propTypes={contextualKey:n.string,options:n.array,store:n.object,type:n.string},t})(o.default.Component);t.CellContextual=l})),define("modules/clean/teams/forensics/result/table/row/cell/activity/cell_activity",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/teams/forensics/result/table/row/cell/_/cell_contextual","modules/clean/teams/forensics/result/table/row/cell/activity/detail/activity_detail"],(function(e,t,r,o,i,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a);var u=o.default.createFactory(a.ActivityDetail),l=o.default.createFactory(n.CellContextual),_=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderName=function(e){return i.div({className:"activity-name"},c(t.props.store.activity.getActivityByEvent(t.props.event),(function(e){return e[t.props.store.FC.NAME]}))||t.props.store.I18N.RESULT.COLUMNS.ACTIVITY.ERROR.forUnknownType(t.props.event[t.props.store.FC.EVENT_TYPE]))},t._renderDetails=function(){return i.div({className:"activity-details"},(function(){for(var e=[],r=0;r<t.props.event[t.props.store.FC.DETAILS].length;r++){var o=t.props.event[t.props.store.FC.DETAILS][r],i=o[0],s=o[1];e.push(u({key:r,ref:i,contextualKey:t.props.contextualKey+":"+i,isMiddleDetail:0!==r,detailName:i,detailValueObjects:s,store:t.props.store}))}return e})())},t._renderContextual=function(){var e;if(e=t.props.event[t.props.store.FC.DETAIL_OPTIONS])return l({contextualKey:t.props.contextualKey,options:e,store:t.props.store,type:t.props.store.FC.CONTEXTUAL_TYPE.DRILL_DOWN})},t}return r.__extends(t,e),t.prototype.render=function(){return i.div({className:this.props.className},this._renderContextual(),i.div({},this._renderName(),this._renderDetails()))},t.displayName="CellActivity",t.propTypes={event:s.object,contextualKey:s.string,className:s.string,store:s.object},t})(o.default.Component);function c(e,t){return null!=e?t(e):void 0}t.CellActivity=_})),define("modules/clean/teams/forensics/result/table/row/cell/activity/detail/activity_detail",["require","exports","tslib","react","react-dom-factories","prop-types","external/lodash","modules/clean/react/sprite","modules/clean/react/tooltip","modules/clean/teams/forensics/filter/user/_/user_suggestion","modules/clean/teams/forensics/result/table/row/cell/_/cell_contextual"],(function(e,t,r,o,i,s,n,a,u,l,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),u=r.__importStar(u),l=r.__importStar(l),_=r.__importStar(_);var c=o.default.createFactory(a.Sprite),p=o.default.createFactory(u.Tooltip),d=o.default.createFactory(l.UserSuggestion),h=o.default.createFactory(_.CellContextual),f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._expandStackedDetails=function(e){return t.props.store.contextual.showContextual(t.props.contextualKey,e)},t._renderNameAndValueString=function(e){return(t.props.isMiddleDetail?"• ":"")+t.props.detailName+": "+e},t._renderName=function(e){return i.div({key:"name",className:"detail-text-name"},t._renderNameAndValueString(e))},t._renderValue=function(e,r){return i.div({key:"value",onClick:null!=r?function(){return t.props.store.url.redirectToMemberPage(r)}:void 0,className:"detail-text-value"+(null!=r?" detail-text-clickable":"")},e)},t._renderDetailValueObject=function(e,r){var o=e[t.props.store.FC.VALUE];return o&&o.length>r?p({position:u.TooltipPosition.TOP,tooltip_classname:"c-card c-card--arrow c-card--arrow-s",tooltip_contents:i.div({},o)},e[t.props.store.FC.IS_FILE]?o.slice(0,3)+"..."+o.slice(o.length-(r-3)):o.slice(0,+(r-7)+1||void 0)+"..."+o.slice(-3)):o},t._renderExpandButton=function(){return[c({key:"button",group:"web",name:"arrow-down-gray",alt:"",className:"detail-stacked-button"}),c({key:"button_selectable",group:"web",name:"arrow-down-blue",alt:"",className:"detail-stacked-button"})]},t._getClassName=function(e){return"activity-detail "+(e?" stacked-activity-detail":"")+" "+(t.props.isMiddleDetail?" middle-activity-detail":"")},t._renderUserOption=function(e,r){return d({key:e[t.props.store.FC.USER_ID],user:e,hint:"",isShort:!0,store:t.props.store,className:"activity-detail-option activity-detail-"+(r?"member":"user")})},t._getOnClickOptionValue=function(e){return function(){if(null!=(null!=e?e.is_file:void 0)||null!=(null!=e?e.is_dir:void 0))return t.props.store.contextual.filterByFileOrFolder(e)}},t._renderValueOption=function(e,r){return i.div({key:r,className:"activity-detail-option activity-detail-value",onClick:t._getOnClickOptionValue(e)},t._renderDetailValueObject(e,64))},t._renderContextual=function(){return t.props.store.contextual.getContextualKey()===t.props.contextualKey?[h({key:"contextual",contextualKey:t.props.contextualKey,type:t.props.store.FC.CONTEXTUAL_TYPE.STACKED_DETAIL_EXPAND,store:t.props.store,options:t.props.store.details.getStackedDetailOptions(t.props.detailValueObjects,t._renderUserOption,t._renderValueOption)})]:[]},t._renderStacked=function(){return t._renderContextual().concat([t._renderName(t.props.detailValueObjects.length),t._renderExpandButton()])},t._renderSingleDetail=function(){var e=t.props.detailValueObjects[0],r=t._renderDetailValueObject(e,48),o=e[t.props.store.FC.USER_ID];return o&&t.props.store.user.isMemberByUserId(o)||!n.isString(r)?[t._renderName(""),t._renderValue(r,o)]:t._renderNameAndValueString(r)},t}return r.__extends(t,e),t.prototype.render=function(){var e=this.props.detailValueObjects.length>1;return i.div({className:this._getClassName(e),onClick:e?this._expandStackedDetails:void 0,onMouseDown:e?function(e){return e.stopPropagation()}:void 0},e?this._renderStacked():this._renderSingleDetail())},t.displayName="ActivityDetail",t.propTypes={detailName:s.string,detailValueObjects:s.array,contextualKey:s.string,isMiddleDetail:s.bool,store:s.object},t})(o.default.Component);t.ActivityDetail=f})),define("modules/clean/teams/forensics/result/table/row/cell/date/_/date_details",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/teams/forensics/internal/reducer/_date/_/date_utils"],(function(e,t,r,o,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n);var a=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){var e;return i.div({},i.div({className:"day"},n.CellDayStringFromDate(e=new Date(this.props.event[this.props.store.FC.TS_UTC_MS]))),i.div({className:"hour-and-minutes"},n.CellTimeStringFromDate(e)))},t.displayName="DateDetails",t.propTypes={event:s.object,store:s.object},t})(o.default.Component);t.DateDetails=a})),define("modules/clean/teams/forensics/result/table/row/cell/date/cell_date",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/teams/forensics/result/table/row/cell/_/cell_contextual","modules/clean/teams/forensics/result/table/row/cell/date/_/date_details"],(function(e,t,r,o,i,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a);var u=o.default.createFactory(n.CellContextual),l=o.default.createFactory(a.DateDetails),_=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderContextual=function(){var e;if((e=t.props.event[t.props.store.FC.CONTEXTUAL_DATE_OPTIONS]).length)return u({contextualKey:t.props.contextualKey,options:e,store:t.props.store,type:t.props.store.FC.CONTEXTUAL_TYPE.DRILL_DOWN})},t}return r.__extends(t,e),t.prototype.render=function(){return i.div({className:this.props.className},this._renderContextual(),l({event:this.props.event,store:this.props.store}))},t.displayName="CellDate",t.propTypes={event:s.object,contextualKey:s.string,className:s.string,store:s.object},t})(o.default.Component);t.CellDate=_})),define("modules/clean/teams/forensics/result/table/row/cell/location/cell_location",["require","exports","tslib","react","react-dom-factories","prop-types"],(function(e,t,r,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s);var n=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderCity=function(){return i.div({className:"city"},t.props.event[t.props.store.FC.CITY]||t.props.store.I18N.RESULT.COLUMNS.LOCATION.ERROR.UNKNOWN_LOCATION)},t._renderIp=function(){return i.div({className:"ip"},t.props.event[t.props.store.FC.IP_ADDRESS])},t}return r.__extends(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){return i.div({className:this.props.className},this._renderCity(),this._renderIp())},t.displayName="CellLocation",t.propTypes={event:s.object,contextualKey:s.string,className:s.string,store:s.object},t})(o.default.Component);t.CellLocation=n})),define("modules/clean/teams/forensics/result/table/row/cell/user/_/user_details",["require","exports","tslib","react","react-dom-factories","prop-types"],(function(e,t,r,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s);var n=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._getOnClickUser=function(e){return function(){if(null!=e?e[t.props.store.FC.IS_MEMBER]:void 0)return t.props.store.url.redirectToMemberPage(e[t.props.store.FC.USER_ID])}},t._renderActingAs=function(e){return i.div({className:"acting-as-user-name"},i.span({},t.props.store.I18N.RESULT.COLUMNS.USER.AS),(function(){if(e[t.props.store.FC.ACTING_AS_TYPE]===t.props.store.FC.ACTING_AS_USER_VAL){var r=t.props.store.user.getSuggestionById(e[t.props.store.FC.ACTING_AS_USER_ID_VAL]);return i.span({className:t._isMember(r)?"acting-as-member-name":void 0,onClick:t._getOnClickUser(r)},t._getUserDisplayName(r))}if(e[t.props.store.FC.ACTING_AS_TYPE]===t.props.store.FC.ACTING_AS_TEAM_ADMIN_VAL)return i.span({},t.props.store.I18N.RESULT.COLUMNS.USER.TEAM_ADMIN)})())},t._getUserDisplayName=function(e){return(null!=e?e[t.props.store.FC.DISPLAY_NAME]:void 0)||(t.props.event.is_app?t.props.store.I18N.RESULT.COLUMNS.USER.ERROR.NO_USER_JUST_APP:t.props.store.I18N.RESULT.COLUMNS.USER.ERROR.NO_DISPLAY_NAME)},t._isMember=function(e){return null!=e?e[t.props.store.FC.IS_MEMBER]:void 0},t._getUserFromEventKey=function(e){return t.props.store.user.getSuggestionById(t.props.event[e])},t._renderEmail=function(e){return i.div({className:"email"},(null!=e?e[t.props.store.FC.EMAIL]:void 0)||t.props.store.I18N.RESULT.COLUMNS.USER.ERROR.NO_EMAIL)},t}return r.__extends(t,e),t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){var e=this,t=this._getUserFromEventKey(this.props.store.FC.USER_ID),r=this.props.event[this.props.store.FC.ACTING_AS];return i.div({},i.div({className:"user-name "+(this._isMember(t)?" team-member-name":""),onClick:this._getOnClickUser(t)},this._getUserDisplayName(t)),null!=r?e._renderActingAs(r):null===e.props.event.is_app||!1===e.props.event.is_app?e._renderEmail(t):void 0)},t.displayName="UserDetails",t.propTypes={event:s.object,store:s.object},t})(o.default.Component);t.UserDetails=n})),define("modules/clean/teams/forensics/result/table/row/cell/user/cell_user",["require","exports","tslib","react","react-dom-factories","prop-types","modules/clean/teams/forensics/result/table/row/cell/_/cell_contextual","modules/clean/teams/forensics/result/table/row/cell/user/_/user_details"],(function(e,t,r,o,i,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importStar(a);var u=o.default.createFactory(n.CellContextual),l=o.default.createFactory(a.UserDetails),_=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._renderContextual=function(){var e;if(e=t.props.event[t.props.store.FC.CONTEXTUAL_USER_OPTION])return u({contextualKey:t.props.contextualKey,options:[e],store:t.props.store,type:t.props.store.FC.CONTEXTUAL_TYPE.DRILL_DOWN})},t}return r.__extends(t,e),t.prototype.render=function(){return i.div({className:this.props.className},this._renderContextual(),l({event:this.props.event,store:this.props.store}))},t.displayName="CellUser",t.propTypes={event:s.object,contextualKey:s.string,className:s.string,store:s.object},t})(o.default.Component);t.CellUser=_})),define("modules/clean/teams/forensics/result/table/row/table_row",["require","exports","tslib","react","react-dom","react-dom-factories","prop-types","jquery","modules/clean/teams/forensics/internal/forensics_constants","modules/clean/teams/forensics/result/table/row/cell/activity/cell_activity","modules/clean/teams/forensics/result/table/row/cell/date/cell_date","modules/clean/teams/forensics/result/table/row/cell/location/cell_location","modules/clean/teams/forensics/result/table/row/cell/user/cell_user"],(function(e,t,r,o,i,s,n,a,u,l,_,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importStar(s),n=r.__importStar(n),a=r.__importDefault(a),u=r.__importStar(u),l=r.__importStar(l),_=r.__importStar(_),c=r.__importStar(c),p=r.__importStar(p);var d=u.ForensicsConstants.COLUMN,h={};h[d.DATE]=o.default.createFactory(_.CellDate),h[d.USER]=o.default.createFactory(p.CellUser),h[d.ACTIVITY]=o.default.createFactory(l.CellActivity),h[d.LOCATION]=o.default.createFactory(c.CellLocation);var f=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getTopOffset=function(){return a.default(i.findDOMNode(t)).offset().top},t.getColumnToWidth=function(){for(var e={},r=0,o=Array.from(t.props.store.result.getColumnNames());r<o.length;r++){var s=o[r];e[s]=i.findDOMNode(t.refs[s]).clientWidth}return e},t}return r.__extends(t,e),t.prototype.shouldComponentUpdate=function(){return this.props.store.result.shouldRowUpdate(this.props.rowIndex)},t.prototype.render=function(){var e=this,t=this.props.store.contextual.getRowKey(this.props.rowIndex);return this.isSelected=this.props.store.selection.isSelectedRow(this.props.rowIndex),s.tr({className:this.props.store.selection.isSelectedRow(this.props.rowIndex)?"selected-row":void 0,onMouseDown:function(t){return e.props.store.selection.onMouseDownRow(e.props.rowIndex,t)},onMouseEnter:function(t){return e.props.store.selection.onMouseEnterRow(e.props.rowIndex,t)},onMouseOver:function(t){return e.props.store.selection.onMouseOverRow(t)}},Array.from(this.props.store.result.getColumnNames()).map((function(r){return s.td({key:r,ref:r},h[r]({event:e.props.event,store:e.props.store,contextualKey:""+t+r,className:"cell cell-"+r+" column-"+r}))})))},t.displayName="TableRow",t.propTypes={event:n.object,rowIndex:n.number,store:n.object},t})(o.default.Component);t.TableRow=f})),define("modules/clean/teams/member_unlock_action",["require","exports","tslib","modules/clean/teams/admin/api/admin_console_api_client","modules/core/browser","modules/core/notify","modules/core/i18n"],(function(e,t,r,o,i,s,n){"use strict";function a(e,t){(new o.AdminConsoleApiClient).unlockUser(e).then((function(){i.redirect(t)})).catch((function(){s.Notify.error(n._("There was a problem completing this request."))}))}Object.defineProperty(t,"__esModule",{value:!0}),i=r.__importStar(i),t.memberUnlockAction=a,t.bindBannerUnlockUser=function(e,t,r){var o=document.getElementById(e);o&&o.addEventListener("click",(function(e){return a(t,r)}))}})),define("modules/dirty/groups/group_list",["require","exports","tslib","jquery","legacy_js/dropbox","modules/clean/contacts/types","modules/clean/groups/api","modules/clean/groups/util","modules/clean/sortable","modules/clean/table_filter","modules/clean/viewer","modules/core/html","modules/core/i18n","modules/dirty/groups/groups_list","scriptaculous"],(function(e,t,r,o,i,s,n,a,u,l,_,c,p,d,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),s=r.__importDefault(s),n=r.__importStar(n),a=r.__importStar(a),u=r.__importDefault(u),l=r.__importDefault(l),d=r.__importDefault(d);var f=(function(){function e(t){var r=this,n=t.base,a=t.group,l=t.viewer_is_admin,c=t.ui,d=t.context;this.handle_token_change=this.handle_token_change.bind(this),this.show_add_to_group_modal=this.show_add_to_group_modal.bind(this),this.add_users_to_group=this.add_users_to_group.bind(this),this.show_edit_group_modal=this.show_edit_group_modal.bind(this),this.change_group_name=this.change_group_name.bind(this),this.handle_rename_errors=this.handle_rename_errors.bind(this),this.finalize_group_name=this.finalize_group_name.bind(this),this.show_delete_group_modal=this.show_delete_group_modal.bind(this),this.remove_group=this.remove_group.bind(this),this.finalize_delete_group=this.finalize_delete_group.bind(this),this.show_leave_group_modal=this.show_leave_group_modal.bind(this),this.leave_group=this.leave_group.bind(this),this.finalize_leave_group=this.finalize_leave_group.bind(this),this.switch_to=this.switch_to.bind(this),this.show_created_group=this.show_created_group.bind(this),this.refresh=this.refresh.bind(this),this.show_group=this.show_group.bind(this),this.hide_new_member_field=this.hide_new_member_field.bind(this),this.show_group_actions=this.show_group_actions.bind(this),this.show_user_actions=this.show_user_actions.bind(this),this.add_to_group_handler=this.add_to_group_handler.bind(this),this.click_new_member_field=this.click_new_member_field.bind(this),this.toggle_new_member_field=this.toggle_new_member_field.bind(this),this.doc_click=this.doc_click.bind(this),this.remove_user=this.remove_user.bind(this),this.show_remove_user_modal=this.show_remove_user_modal.bind(this),this.finalize_remove_user=this.finalize_remove_user.bind(this),this.show_make_owner_modal=this.show_make_owner_modal.bind(this),this.make_owner=this.make_owner.bind(this),this.show_make_member_modal=this.show_make_member_modal.bind(this),this.make_member=this.make_member.bind(this),this.set_viewer_admin_or_owner=this.set_viewer_admin_or_owner.bind(this),this.render_users_for_group=this.render_users_for_group.bind(this),this.set_up_search_filter=this.set_up_search_filter.bind(this),this.refresh_search_filter=this.refresh_search_filter.bind(this),this.ui=c,this.$base=o.default(n),this.group=a||{},this.viewer_is_admin=l||!1,this.viewer_is_admin_or_owner=l,this.context=d||e.CURRENT_GROUP,this.$base.find(".add-new-member-link").click(this.toggle_new_member_field),this.$base.find(".add-new-member-field .text-input-input, .add-new-member-field .add_member_icon").click(this.click_new_member_field),this.$base_group_user_list=this.$base.find(".group-user-list"),this.$base_group_user_list_container=this.$base.find(".group-user-list-container"),this.$base_group_user_list.on("click",".user-actions-link",this.show_user_actions),this.$base_group_user_list.on("click",".remove-user-action",this.remove_user),this.$base_group_user_list.on("click",".make-owner-action",this.show_make_owner_modal),this.$base_group_user_list.on("click",".make-member-action",this.show_make_member_modal),o.default(document).click(this.doc_click),this.$base.find("#group-actions-dropdown").click(this.show_group_actions),this.$base.find("#add-to-group-button").click(this.show_add_to_group_modal),this.$base.find("#add-users-to-group-button").click(this.add_users_to_group),this.$base.find("#group-change-link").click(this.show_edit_group_modal),this.$base.find("#delete-group-button, #delete-group-link").click(this.show_delete_group_modal),this.$base.find("#leave-group-button, #leave-group-link").click({leave_group:!0},this.remove_user),o.default(".cancel-modal-button").click((function(){return i.Modal.hide()})),this.context===e.CURRENT_GROUP&&(this.auto_completer=new h.Autocompleter.TeamTokenizer(_.Viewer.get_viewer().work_user,"add-user-new-collab-input","add-user-new-whobulk","add-user-hidden-input",{hide_import_contacts:!0,suggestions_disabled:!0,wrap_name:!0,tokens:[",",";"],team_only:!0,contact_filter:function(e){return e.excludeNonTeam().excludeNewStyleGroups().excludeByEmail(r.email)}}),this.auto_completer.element.observe("token:remove",this.handle_token_change),this.auto_completer.element.observe("token:add",this.handle_token_change),this.auto_completer.createTokenInfo=function(e,t,r){var o=!0,n=!1,a=t;return r!==s.default.EMAIL||i.Util.validate_email(t)?Array.from(this.members).includes(t)?(o=!1,a=p._("Already in the group")):t===this.user.email||t===this.user.id?a=p._("You"):r===s.default.EMAIL&&this.suspended_contacts[t]?(a=p._("This member is suspended"),n=!0):r===s.default.EMAIL&&this.pending_contacts[t]?a=p._("This is an invited member"):r!==s.default.EMAIL||this.team_contacts[t]||(o=!1,n=!0,a=p._("Not a team member")):(o=!1,a=p._("Invalid email")),!e&&t&&(e=t.toString()),{display:e,value:t,type:r,valid:o,external:n,bubble_title:a}}),this.$base.on("db:destroy",this.destroy),null!=this.group.id&&this.refresh(),new u.default(this.$base_group_user_list_container),this.$base.find(".sort-header").on("click",(function(){return this.stopPropagation})),this.set_up_search_filter()}return e.initClass=function(){this.CURRENT_GROUP="currentgroup",this.NEW_GROUP="newgroup"},e.prototype.handle_token_change=function(e){var t=this.auto_completer.token_manager.tokens.filter((function(e){return e.info.valid}));return t.length!==this.auto_completer.token_manager.tokens.length?o.default("#add-to-group-error").text(p._("One or more names or email addresses you entered are invalid.")):(t.length,o.default("#add-to-group-error").text(""))},e.prototype.show_add_to_group_modal=function(e){var t=p._("Add members to '%(group_name)s'",{project:"groups"}).format({group_name:this.group.name});return i.Modal.show(t,o.default("#add-to-group-modal")[0]),this.auto_completer.clearTokens(),this.auto_completer.update.hide(),o.default("#add-to-group-error").text(""),o.default("#add-user-new-collab-input").focus()},e.prototype.add_users_to_group=function(e){if(o.default("#add-user-new-collab-input").val().length>0&&this.auto_completer.tokenize_emails_input(!0),0===this.auto_completer.token_manager.tokens.length)return o.default("#add-to-group-error").text(p._("Please enter at least one valid name or email address")),o.default("#add-user-new-collab-input").focus();var t=this.auto_completer.token_manager.tokens.filter((function(e){return e.info.valid}));if(t.length!==this.auto_completer.token_manager.tokens.length)return o.default("#add-to-group-error").text(p._("One or more names or email addresses you entered are invalid. Please correct the highlighted inputs below."));o.default("#add-to-group-error").text("");var r=t.map((function(e){return{email:e.info.value,is_owner:!1}}));return this.add_to_group_handler(r)},e.prototype.show_edit_group_modal=function(e){e.preventDefault();var t=p._("Edit '%(group_name)s'",{project:"groups"}).format({group_name:this.group.name});return o.default("#edit-group-modal .edit-group-name-input .text-input-input").prop("disabled",!1),o.default("#edit-group-modal .edit-group-name-input").val(this.group.name),i.Modal.show(t,o.default("#edit-group-modal")[0]),o.default("#modal-content .edit-group-name-input").focus(),o.default("#modal-content .save-group-name-button").off("click").on("click",this.change_group_name)},e.prototype.change_group_name=function(e){var t=o.default(".edit-group-name-input").val(),r=!0;if(this.ui&&(this.ui.clear_error_message("edit-group-name-field"),t.trim().length<=0?(this.ui.set_error_message("edit-group-name-field",p._("Your group must have a name.",{project:"groups"})),o.default("#modal-content .edit-group-name-input").focus(),r=!1):t.trim().length>140&&(this.ui.set_error_message("edit-group-name-field",p._("The group name should be under 140 characters",{project:"groups"})),o.default("#modal-content .edit-group-name-input").focus(),r=!1)),r)return n.rename_group({group_id:this.group.id,new_name:t},this.finalize_group_name,this.handle_rename_errors)},e.prototype.handle_rename_errors=function(e){return this.ui&&this.ui.set_error_message("edit-group-name-field",e),o.default("#modal-content .edit-group-name-input").focus()},e.prototype.finalize_group_name=function(){return this.group.name=o.default("#modal-content .edit-group-name-input").val(),this.ui&&(this.ui.update_group_header("single-group-header",this.group.name,this.group.localized_created_ts),this.ui.groups_list.refresh()),i.Modal.hide()},e.prototype.show_delete_group_modal=function(e){var t=p._("Delete '%(group_name)s'",{project:"groups"}).format({group_name:this.group.name});return o.default("#delete-group-modal .group_name").text(this.group.name),o.default("#delete-group-confirm-button").prop("disabled",!1),i.Modal.show(t,o.default("#delete-group-modal")[0]),o.default("#modal-content .delete-group-confirm-button").click(this.remove_group)},e.prototype.remove_group=function(e){return o.default(".delete-group-confirm-button").prop("disabled",!0),n.remove_group({group_id:this.group.id},this.finalize_delete_group)},e.prototype.finalize_delete_group=function(){if(o.default(".delete-group-confirm-button").prop("disabled",!1),i.Modal.hide(),this.ui)return this.ui.groups_list.refresh(),this.ui.main_groups_view()},e.prototype.show_leave_group_modal=function(e){var t=p._("Leave '%(group_name)s'",{project:"groups"}).format({group_name:this.group.name});return o.default("#leave-group-modal .group_name").text(this.group.name),o.default(".leave-group-confirm-button").prop("disabled",!1),i.Modal.show(t,o.default("#leave-group-modal")[0]),o.default("#modal-content .leave-group-confirm-button").click(this.leave_group)},e.prototype.leave_group=function(e){return o.default(".leave-group-confirm-button").prop("disabled",!0),n.remove_user_from_group({group_id:this.group.id,user_id:this.viewer_id},this.finalize_leave_group)},e.prototype.finalize_leave_group=function(){return i.Modal.hide(),this.ui?(this.ui.groups_list.refresh(),this.ui.main_groups_view()):this.refresh()},e.prototype.switch_to=function(e){return this.group=e,this.refresh()},e.prototype.show_created_group=function(e){return this.group={},this.group.name=e.name,this.group.id=e.id,this.group.created_ts=(new Date).getTime(),this.render_users_for_group(e.users)},e.prototype.refresh=function(){return o.default("#group-user-search").val(""),n.get_users_for_group({group_id:this.group.id},this.render_users_for_group)},e.prototype.show_group=function(e){return this.group=e,this.render_users_for_group(e.users)},e.prototype.hide_new_member_field=function(){return this.$base.find(".add-new-member").show(),this.$base.find(".add-new-member-field").hide()},e.prototype.show_group_actions=function(e){this.doc_click(),o.default(".group_actions_bubble").show(),e.stopPropagation()},e.prototype.show_user_actions=function(e){this.doc_click(),this.hide_new_member_field();var t=o.default(e.currentTarget),r=t.data("user-name"),i=t.data("user-email"),s=t.data("user-id"),n=t.data("group-id"),a=0!==t.closest(".group-user-item").find(".group-owner-reminder").length,u=c.HTML.tmpl("group_user_actions_tmpl"),l=o.default(e.currentTarget).parent(),_=l.find(".group_user_actions_bubble");if(_.length>0)_.remove();else{o.default(".group_users").find(".group_user_actions_bubble").length>0&&o.default(".group_users").find(".group_user_actions_bubble").remove();var d=u({user_id:s,group_id:n,group_name:this.group.name,user_name:r||i,user_email:i,is_owner:a,can_be_owner:this.group.can_be_owner[i],_:p._});l.append(d.toHTML())}e.stopPropagation()},e.prototype.add_to_group_handler=function(e){var t=this;return n.add_users_to_group({members:JSON.stringify(e),group_id:this.group.id},(function(){if(t.ui)return t.ui.groups_list.refresh(),t.ui.single_group_ctl.refresh(),i.Modal.hide()}))},e.prototype.click_new_member_field=function(e){return e.stopPropagation()},e.prototype.toggle_new_member_field=function(e){return this.doc_click(),this.$base.find(".add-new-member").hide(),this.$base.find(".add-new-member-field").show().find("input").focus().val(""),e.stopPropagation()},e.prototype.doc_click=function(e){return this.hide_new_member_field(),this.$base.find(".group_user_actions_bubble").remove(),this.$base.find(".group_actions_bubble").hide()},e.prototype.remove_user=function(e){var t,r;return o.default(e.currentTarget).data("user-id")===_.Viewer.get_viewer().work_user.id||(t=null!=e?e.data:void 0,r=function(e){return e.leave_group},null!=t?r(t):void 0)?this.show_leave_group_modal(e):this.show_remove_user_modal(e)},e.prototype.show_remove_user_modal=function(e){var t=o.default(e.currentTarget),r=t.data("user-name"),s=t.data("user-id"),n=t.data("group-id"),a=t.data("group-name"),u=p._("Remove %(user_name)s from '%(group_name)s'",{project:"groups"}).format({user_name:r,group_name:a});return o.default("#remove-from-group-modal .group_name").text(a),o.default("#remove-from-group-modal .user_name").text(r),i.Modal.show(u,o.default("#remove-from-group-modal")[0]),o.default("#modal-content .remove-from-group-confirm-button").off("click").click({user_id:s,group_id:n},this.finalize_remove_user)},e.prototype.finalize_remove_user=function(e){var t=this;return n.remove_user_from_group({group_id:e.data.group_id,user_id:e.data.user_id},(function(){if(t.ui)return t.ui.groups_list.refresh(),t.ui.single_group_ctl.refresh()})),i.Modal.hide()},e.prototype.show_make_owner_modal=function(e){var t=o.default(e.currentTarget),r=t.data("user-id"),s=t.data("user-name"),n=t.data("user-email"),a=p._("Are you sure you want to make %(user_name)s an owner?",{project:"groups"}).format({user_name:s});return o.default("#make-owner-modal .user_name").text(s),i.Modal.show(a,o.default("#make-owner-modal")[0],{user_id:r,user_email:n,user_name:s||n}),o.default("#modal-content .make-owner-button").one("click",this.make_owner)},e.prototype.make_owner=function(e){var t=this,r=i.Modal.vars.user_id;return n.change_group_member_type({group_id:this.group.id,user_id:r,is_owner:!0},(function(){if(t.ui)return t.ui.groups_list.refresh(),t.ui.single_group_ctl.refresh()})),i.Modal.hide()},e.prototype.show_make_member_modal=function(e){var t=o.default(e.currentTarget),r=t.data("user-id"),s=t.data("user-name"),n=t.data("user-email"),a=p._("Are you sure you want to remove owner permissions from %(user_name)s?",{project:"groups"}).format({user_name:s});return o.default("#make-member-modal .user_name").text(s),i.Modal.show(a,o.default("#make-member-modal")[0],{user_id:r,user_email:n,user_name:s}),o.default("#modal-content .make-member-button").one("click",this.make_member)},e.prototype.make_member=function(e){var t=this,r=i.Modal.vars.user_id;return n.change_group_member_type({group_id:this.group.id,user_id:r,is_owner:!1},(function(){if(t.ui)return t.ui.groups_list.refresh(),t.ui.single_group_ctl.refresh()})),i.Modal.hide()},e.prototype.set_viewer_admin_or_owner=function(e){var t=this;return(function(){for(var r=[],o=0,i=Array.from(e);o<i.length;o++){var s=i[o];if(s.email===_.Viewer.get_viewer().work_email){t.viewer_is_admin_or_owner=t.viewer_is_admin||s.is_owner,t.viewer_id=s.user_id;break}r.push(void 0)}return r})()},e.prototype.render_users_for_group=function(e){var t=e.length,r=this.$base.find(".user_num");if(r.length>0){r.empty();var i=p.ungettext("%(user_count)s member","%(user_count)s members",t);r.append(i.format({user_count:t}))}0===t?(o.default(".no-group-members").show(),o.default("#user-search-empty").hide()):o.default(".no-group-members").hide(),this.set_viewer_admin_or_owner(e),this.viewer_is_admin_or_owner?(o.default("#group-admin-controls").show(),o.default("#leave-group-link").data("user-id",this.viewer_id),o.default("#leave-group-button").hide(),o.default("#group-change-link").show()):(o.default("#group-admin-controls").hide(),o.default("#leave-group-button").data("user-id",this.viewer_id),o.default("#leave-group-button").show(),o.default("#group-change-link").hide()),this._tmpl=c.HTML.tmpl("group_user_list_item_tmpl");var s=this.$base.find(".group-user-list");s.empty(),this.group.owners=[],this.group.can_be_owner={},e=a.sortBy(e,(function(e){return e.name.toLowerCase()})),this.auto_completer.members=[];for(var n=0,u=Array.from(e);n<u.length;n++){var l=u[n];this.auto_completer.members.push(l.email);var _=this._tmpl({user:l,get_initials:d.default.get_initials,get_display_name:d.default.get_display_name,get_color:d.default.string_to_color,brand_new:!1,admin_or_owner:this.viewer_is_admin_or_owner,_:p._});l.is_owner?(this.group.owners.push(l),s.children(".owner-row").length>0?s.children(".owner-row").last().after(_.toHTML()):s.prepend(_.toHTML())):(l.can_be_owner&&(this.group.can_be_owner[l.email]=!0),s.append(_.toHTML()))}return this.ui&&this.ui.update_group_header("single-group-header",this.group.name,this.group.localized_created_ts),0!==t&&this.refresh_search_filter(),this.$base.trigger("db:groups_ready")},e.prototype.set_up_search_filter=function(){this.filter=new l.default("group-user-search","group-user-list","group-user-item",!1,"user-search-empty")},e.prototype.refresh_search_filter=function(){return this.filter.refresh()},e})();t.GroupUserListController=f,f.initClass();var m=(function(){function e(e){this.to_html=this.to_html.bind(this),this.upload_data=this.upload_data.bind(this),this.name=e.name,this.email=e.email,this.is_owner=e.is_owner}return e.prototype.to_html=function(){var e={user:{name:this.name,email:this.email,is_owner:this.is_owner,user_id:null,group_id:null},brand_new:!0,admin_or_owner:!0,_:p._};return c.HTML.tmpl("group_user_list_item_tmpl")(e).toHTML()},e.prototype.upload_data=function(){return{email:this.email,is_owner:this.is_owner}},e})(),g=(function(e){function t(t){var r=t.base,o=t.viewer_is_admin,s=t.ui,n=e.call(this,{base:r,viewer_is_admin:o,ui:s,context:f.NEW_GROUP})||this;return n.submit=n.submit.bind(n),n.users_to_add=[],n.viewer_is_admin_or_owner=!0,n.$base.on("click","#finish-creating-group-button",n.submit),n.$base.on("click","#cancel-creating-group-button",(function(){return n.ui.set_group_id_hash(),i.Modal.onHide=null,i.Modal.hide()})),n}return r.__extends(t,e),t.prototype.refresh=function(){var e=this;this.users_to_add=[],this.$base.find("input").val("");var t=new m({name:_.Viewer.get_viewer().display_name,email:_.Viewer.get_viewer().work_email,is_owner:!0});this.users_to_add.push(t),this.ui.clear_error_message("group-name-input");var r=p._("Create a new group",{project:"groups"});return i.Modal.onHide=function(){return e.ui.set_group_id_hash(),i.Modal.onHide=null,i.Modal.hide()},i.Modal.show(r,this.$base[0])},t.prototype.submit=function(){var e=this,t=this.$base.find("#group-name-input").val();if(this.ui&&t.trim().length<=0)return this.ui.set_error_message("group-name-input",p._("Your group must have a name.",{project:"groups"}));if(this.ui&&t.trim().length>140)return this.ui.set_error_message("group-name-input",p._("The group name should be under 140 characters",{project:"groups"}));var r=this.$base.find("#finish-creating-group-button"),o=this.$base.find(".progress-spinner");r.prop("disabled",!0),o.show();var s=JSON.stringify(Array.from(this.users_to_add).map((function(e){return e.upload_data()})));return n.create_group_with_users({name:t,members:s,is_admin_managed:!1},(function(t){return i.Modal.onHide=null,i.Modal.hide(),e.$base.trigger("db:group_created",t)})).always((function(){return r.prop("disabled",!1),o.hide()}))},t.prototype.set_up_search_filter=function(){},t.prototype.refresh_search_filter=function(){},t})(f);t.NewGroupUserListController=g})),define("modules/dirty/groups/groups_list",["require","exports","tslib","jquery","legacy_js/dropbox","modules/clean/avatar/style","modules/clean/groups/api","modules/clean/groups/util","modules/clean/sortable","modules/clean/viewer","modules/core/html","modules/core/i18n","modules/core/notify","modules/clean/teams/modals/remove_user_from_group_modal","prototype"],(function(e,t,r,o,i,s,n,a,u,l,_,c,p,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),n=r.__importStar(n),a=r.__importStar(a),u=r.__importDefault(u);var h=(function(){function e(e){var t=e.base,r=e.user_id,s=e.user_name,n=e.populate_groups_list,a=e.group_name_links,u=e.team_name;this.refresh=this.refresh.bind(this),this.show_remove_user_modal=this.show_remove_user_modal.bind(this),this.finalize_remove_user=this.finalize_remove_user.bind(this),this.$base=o.default(t),this.user_id=r,this.user_name=s,this.populate_groups_list=n,this.groups={},this.group_name_links=null==a||a,this.team_name=u,this.$base_groups_list=this.$base.find(".groups-list"),this.$base_groups_list.on("click",".join-request-link",this.group_join_request_handler),void 0===this.user_id&&(this.user_id=l.Viewer.get_viewer().work_user.id),this.editable=this.$base.find(".settings-column").length,this.show_membership=this.$base.find(".membership-column").length,this.show_join_requests=this.$base.find(".join-requests-column").length,this.$base.on("click",".group-settings-col",this.show_remove_user_modal),o.default(".cancel-modal-button").click((function(){return i.Modal.hide()}))}return e.initClass=function(){this.join_owners=function(e){return Array.from(e).map((function(e){return e.name})).join("")}},e.prototype.refresh=function(){var t=this;return this.populate_groups_list({user_id:this.user_id},(function(r){if(0===r.length&&o.default("#empty-groups-view").show().length)t.$base.hide();else{var i=_.HTML.tmpl("group_list_item_tmpl"),s=t.$base.find(".groups-list"),n=s[0].className.indexOf("only_company_managed_groups")>-1;s.empty(),r=a.sortBy(r,(function(e){return e.name.toLowerCase()}));for(var l=0,p=Array.from(r);l<p.length;l++){var d=p[l];if(!n||d.is_admin_managed){t.groups[d.id]=d;var h=i({get_inits:e.get_initials,get_color:e.string_to_color,snip_owners:e.snip_owners,join_owners:e.join_owners,editable:t.editable,show_membership:t.show_membership,show_join_requests:t.show_join_requests,group:d,group_name_links:t.group_name_links,team_name:t.team_name,_:c._});s.append(h.toHTML())}}new u.default(o.default("#groups_main"))}return t.$base.trigger("db:all_groups_loaded")}))},e.prototype.show_remove_user_modal=function(e){var t=o.default(e.target),r=this.user_name,i=this.user_id,s=t.data("group-id"),n=t.data("group-name");return d.showRemoveUserFromGroupModal({groupId:s,groupName:n,userId:i,userDisplayName:r,removeSelf:!0,onPrimaryAction:function(){t.parents(".group-item").remove()}})},e.prototype.finalize_remove_user=function(e){var t=e.data.row;return n.remove_user_from_group({group_id:e.data.group_id,user_id:e.data.user_id},(function(){return t.parents(".group-item").remove()})),i.Modal.hide()},e.prototype.group_join_request_handler=function(e){return n.make_group_join_request({group_id:o.default(e.currentTarget).data("group-id"),success:function(){return p.Notify.success(c._("Request sent."))}})},e.get_display_name=function(e){return""===e?"-":e},e.get_initials=function(e,t){if(""===e&&null!=t)return t.charAt(0).toLowerCase();var r=e.split(" ").map((function(e){return e.charAt(0).toUpperCase()}));return r.length>2&&(r=r.splice(0,2)),r.join("")},e.string_to_color=function(e){return s.colorValueForAvatarName(e)},e.snip_owners=function(e,t,r){var o=Array.from(e).map((function(e){return e.name}));return 0===o.length?t?r:"-":1===o.length?o[0]:c.ungettext("%(name)s + 1 other","%(name)s + %(num)s others",o.length-1,{project:"groups"}).format({name:o[0],num:o.length-1})},e})();h.initClass(),__CIRCULAR_DEPENDENCY__.GroupsListController=h,t.default=h})),define("modules/dirty/groups/ui",["require","exports","tslib","jquery","modules/clean/groups/api","modules/clean/legacy_pyxl_controllers/role_picker","modules/clean/multiaccount_login","modules/clean/viewer","modules/core/browser","modules/core/controller_helpers","modules/core/i18n","modules/core/notify","modules/dirty/groups/group_list","modules/dirty/groups/groups_list"],(function(e,t,r,o,i,s,n,a,u,l,_,c,p,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),n=r.__importDefault(n),u=r.__importStar(u),l=r.__importStar(l),p=r.__importStar(p),d=r.__importDefault(d);var h=p.GroupUserListController,f=p.NewGroupUserListController,m={},g=function(e){return"sharing-tab-groups"===o.default(e).data("id")&&a.Viewer.get_viewer().is_role_signed_in("work")?l.get_controller(o.default("#role-selector")).limit_to_role(s.RolePickerState.WORK,_._("Groups are only available in your Dropbox for Business account")):S(l.get_controller(o.default("#role-selector")),(function(e){return e.limit_to_role(null)}))};function S(e,t){return null!=e?t(e):void 0}m.ready=function(e){return m._config=e,m._groups_loaded=!1,m._pending_view=void 0,o.default(".create-group-button").click(m.switch_to_new_group_view),o.default(".groups-views").on("click",".main-groups-view-link",m.main_groups_view),o.default(".groups-list").on("click",".group-link",m.single_group_view),o.default(document).click(m.doc_click),o.default(document).on("db:group_created",(function(e,t){return m.set_group_id_hash(t.id),m.update_group_header("single-group-breadcrumb",t.name,t.localized_created_ts),m.single_group_ctl.show_created_group(t)})),o.default(document).on("tabs:tab_shown",(function(t,r){var o=m.group_id_from_hash();return m.groups_shown()&&m.maybe_login_then_init(e,o),g(r)})),l.get_controller(o.default("#sharing-tabs"))?m.maybe_login_then_init(e):(o.default(window).bind("hashchange",(function(){var t=m.group_id_from_hash();return m.maybe_login_then_init(e,t)})),void o.default(window).trigger("hashchange"))},m.maybe_login_then_init=function(e,t){return a.Viewer.get_viewer().is_role_signed_in("work")?m.groups_shown()&&null!=m.groups_list?m.show_group_or_list(t):m.init_groups_list(e,m.groups_shown()):m.groups_shown()?n.default.show_modal({role:"work",on_success:function(){return m.init_groups_list(e,!0)}}):void 0},m.init_groups_list=function(e,t){if(m.single_group_ctl=new h({base:"#single-group-view",viewer_is_admin:e.user_is_team_admin,ui:m}),m.new_group_ctl=new f({base:"#new-group-modal",viewer_is_admin:e.user_is_team_admin,ui:m}),m.groups_list=new d.default({base:"#main-groups-view",populate_groups_list:i.get_groups_for_user,team_name:e.team_name}),o.default(document).on("db:groups_ready",(function(e){return m.switch_view(e.target.id)})),m._groups_loaded||o.default(document).one("db:all_groups_loaded",(function(e){if(m._groups_loaded=!0,null!=m._pending_view)return m._pending_view(),m._pending_view=void 0})),o.default(".groups-views").show(),t){var r=m.group_id_from_hash();return m.show_group_or_list(r),g(o.default(".c-tabs__tab.c-tabs__tab--selected"))}return m.groups_list.refresh()},m.show_group_or_list=function(e){return null!=e?"newgroup"===e?m.new_group_modal():m.show_single_group(e):(m.groups_list.refresh(),m.main_groups_view())},m.is_viewer_in_group=function(e){if(void 0===e.users)return!1;var t=Array.from(e.users).map((function(e){return e.user_id}));return 0!==Array.from(a.Viewer.get_viewer().get_user_ids(!1)).filter((function(e){return Array.from(t).includes(e)})).length},m._show_single_group=function(e){return null==e?(c.Notify.warning(_._("You’re not a member of this group, or it doesn’t exist.",{project:"groups"})),void m.main_groups_view()):(m.set_group_id_hash(e.id),!1===m.is_viewer_in_group(e)&&o.default("#leave-group-link").length>0?o.default("#leave-group-link").hide():o.default("#leave-group-link").show(),m._config.group_links_redirect_to_team_group_page?void 0:(m.update_group_header("single-group-header",e.name,e.localized_created_ts),m.display_spinner(),null==e.users?m.single_group_ctl.switch_to(e):m.single_group_ctl.show_group(e)))},m.show_single_group=function(e){var t=m.groups_list.groups[e];return null==t?i.get_group_info({group_id:e},m._show_single_group):m._show_single_group(t)},m.single_group_view=function(e){var t=o.default(e.currentTarget).data("group-id");return m.show_single_group(t)},m.set_error_message=function(e,t){m.clear_error_message(e);var r=o.default("<span/>",{class:"error-message"});return o.default("#"+e+" .text-input-error-wrapper").prepend(r.text(t))},m.clear_error_message=function(e){return o.default("#"+e+" .error-message").remove()},m.update_group_header=function(e,t,r){var i=o.default("#"+e),s=i.find(".group-name"),n=i.find(".group-creation-date"),a=i.find(".group-icon"),u=d.default.string_to_color(t);r||(r=_._("Just now")),s.text(t),n.text(_._("Created:")+" "+r),a.text(d.default.get_initials(t)),a.css({"border-color":u,color:u})},m.switch_to_new_group_view=function(){return m.set_group_id_hash("newgroup")},m.new_group_modal=function(){return m.new_group_ctl.refresh()},m.main_groups_view=function(e){return m.set_group_id_hash(),m._groups_loaded?0===Object.keys(m.groups_list.groups).length?(m.hide_spinner(),o.default(".groups-view").hide(),o.default("#empty-groups-view").show().length):m.switch_view("main-groups-view"):(m.display_spinner(),m._pending_view=m.main_groups_view)},m.display_spinner=function(){return o.default(".groups-view").hide(),o.default(".groups-spinner").show()},m.hide_spinner=function(){return o.default(".groups-spinner").hide()},m.switch_view=function(e){return m.hide_spinner(),o.default(".groups-view").hide(),o.default("#"+e).show()},m.groups_shown=function(){return!(o.default("#sharing-tabs").length>0)||"groups"===S(null!=window.location.hash?window.location.hash.split("#")[1]:void 0,(function(e){return e.split("/")[0]}))},m.group_id_from_hash=function(){var e,t=null!=window.location.hash?window.location.hash.split("#").pop():void 0;if(o.default("#sharing-tabs").length>0||0===t.search("groups/")){var r=null!=t?t.split("/"):void 0;e=null!=r?r[1]:void 0}else e=t;return null!=e&&""!==e&&"groups"!==e?e:void 0},m.set_group_id_hash=function(e){return m._config.group_links_redirect_to_admin_console_group_page&&e?u.redirect("/team/admin/groups#/"+e):m._config.group_links_redirect_to_team_group_page&&e?window.location="/groups/"+encodeURIComponent(e):m._config.group_links_redirect_to_team_group_page?void 0:window.location.hash="groups"+(e?"/"+e:"")},t.default=m})),define("modules/clean/groups/util",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortBy=function(e,t){return e.sort((function(e,r){return(e=t(e))>(r=t(r))?1:e<r?-1:0}))}})),define("modules/clean/table_filter",["require","exports","tslib","jquery","modules/clean/deprecated/sick_input"],(function(e,t,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o);var s=(function(){function e(e,t,r,s,n){this.refresh=this.refresh.bind(this),this.expand=this.expand.bind(this),this._keylisten=this._keylisten.bind(this),this._searching=this._searching.bind(this),this._exit=this._exit.bind(this),this._filter_rows=this._filter_rows.bind(this),this.row_class=r,this.show_partial_results=s,this.NUM_SHOWN_DEFAULT=200,this.NUM_EXPAND=100,this.no_results_container=o.default("#"+n),this.prev_needle=null,this.matched=o.default([]),this.num_shown=0,this.$search_container=o.default("#"+e+"-container"),o.default("#"+e+"-container .search-close").click(this._exit),this.$search=o.default("#"+e),this.$search_table=o.default("#"+t),i.SickInput.add_interval_handler(o.default(e+"-field"),this._filter_rows),this.$search.keyup(this._keylisten)}return e.prototype.refresh=function(){return this.prev_needle=null,this._filter_rows()},e.prototype.expand=function(){var e=this.num_shown;return this.num_shown=this.num_shown+this.NUM_EXPAND,this.matched.slice(e,this.num_shown).show()},e.prototype._keylisten=function(e){if(this.num_shown=this.NUM_EXPAND,27===e.keyCode)return this._searching()?this._exit():this.$search.blur()},e.prototype._searching=function(){return this.$search_container.hasClass("searching")},e.prototype._exit=function(){return this.$search.val("")},e.prototype._filter_rows=function(){var e=this.$search.val().toLowerCase();if(e!==this.prev_needle){if(this.prev_needle=e,e?(this.$search_container.addClass("searching"),this.matched=this.$search_table.find("."+this.row_class+'[data-search*="'+e+'"]')):(this.$search_container.removeClass("searching"),this.matched=this.$search_table.find("."+this.row_class)),this.$search_table.find("."+this.row_class).hide(),this.show_partial_results?(this.num_shown=this.NUM_SHOWN_DEFAULT,this.matched.slice(0,this.num_shown).show()):this.matched.show(),this.no_results_container&&0===this.matched.length)return this.no_results_container.show();if(this.no_results_container)return this.no_results_container.hide()}},e})();t.default=s})),define("modules/dirty/teams/admin_member_groups",["require","exports","tslib","jquery","modules/clean/groups/api","modules/dirty/groups/groups_list","modules/dirty/groups/ui"],(function(e,t,r,o,i,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),i=r.__importStar(i),s=r.__importDefault(s),n=r.__importDefault(n);var a=function(e,t,r,a){this.base=e,this.user_id=t,this.user_name=r,this.team_name=a,this.base=o.default(this.base),this.groups_list=new s.default({base:this.base,user_id:this.user_id,user_name:this.user_name,populate_groups_list:i.get_groups_for_user,group_name_links:!0,team_name:this.team_name}),this.groups_list.refresh(),n.default.groups_list=this.groups_list,n.default._config={group_links_redirect_to_admin_console_group_page:!0},o.default(".groups-list").on("click",".group-link",n.default.single_group_view)};t.default=a})),define("modules/dirty/teams/change_team_member_email_modal",["require","exports","tslib","jquery","legacy_js/dropbox","modules/clean/dbmodal","modules/core/i18n","modules/core/notify"],(function(e,t,r,o,i,s,n,a){"use strict";var u;Object.defineProperty(t,"__esModule",{value:!0}),o=r.__importDefault(o),u=(function(e){function t(t,r,o){var i=e.call(this,{element_id:"change-team-member-email"})||this;return i.on_show=i.on_show.bind(i),i.on_confirm_button_click=i.on_confirm_button_click.bind(i),i._listen=i._listen.bind(i),i._clear_fields=i._clear_fields.bind(i),i.member_name=t,i.link_selector=r,i.email_selector=o,i._listen(),i}return r.__extends(t,e),t.prototype.on_show=function(){return this._clear_fields()},t.prototype.on_confirm_button_click=function(e){var t=this;e.preventDefault();var r=this.$form.find(".confirm-button")[0],s=this.$form.find("input[name=email]").val();return i.Forms.ajax_submit(this.$form[0],!1,(function(e,r,i){var u=n._("Changed %(name)s's email address to %(email)s").format({email:s,name:t.member_name});return a.Notify.success(u),t.email_selector&&o.default(t.email_selector).text(s),t.hide()}),null,r)},t.prototype._listen=function(){var e=this;return o.default(this.link_selector).on("click",(function(t){return t.preventDefault(),e.show()}))},t.prototype._clear_fields=function(){return this.$form=this.$modal_window.find(".change-team-member-email-form"),this.$form.find("input[type=email], input[type=text]").val(""),this.$form.find(".error-removable").remove()},t})(s.DBModal),t.default=u}));
//# sourceMappingURL=pkg-legacy-aw.min.js-vflP7TOZJ.map