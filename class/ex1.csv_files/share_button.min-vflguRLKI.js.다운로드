define(["require","exports","tslib","react","classnames","react-redux","modules/clean/react/extensions/split_share_button","modules/clean/react/extensions/utils","modules/clean/react/extensions/data/types","modules/clean/react/file_viewer/share_helpers","modules/clean/integrations/zoom_share_dialog/async_modal","modules/clean/sharing/constants","modules/clean/react/file_viewer/logging","modules/clean/react/extensions/data/selectors","modules/clean/react/file_viewer/constants","modules/core/i18n","modules/clean/react/file_viewer_sidebar/buttons/icon","spectrum/button","modules/clean/cloud_docs/constants","modules/clean/filepath"],(function(e,t,n,r,a,o,i,l,s,c,u,h,d,p,f,_,m,S,v,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importDefault(r),a=n.__importDefault(a),c=n.__importStar(c),t.handleShareClick=function(e,t){c.share(e,t,null,h.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE),d.logUserAction(f.UserAction.Share,f.UserActionContext.TitleBarMain)},t.handlePresentInZoom=function(e,t){u.asyncShowModal(t.id,e.file_id,"file-viewer-modal-overlay")};var y=(function(o){function c(){var r=null!==o&&o.apply(this,arguments)||this;return r.handleSplitShareButtonShareClick=function(){t.handleShareClick(r.props.file,r.props.user)},r.handleShareButtonClick=function(){return n.__awaiter(r,void 0,void 0,(function(){var r,a,o;return n.__generator(this,(function(i){switch(i.label){case 0:return t.handleShareClick(this.props.file,this.props.user),[4,new Promise((function(t,n){e(["modules/clean/react/app_actions/telemetry_client"],t,n)})).then(n.__importStar)];case 1:return r=i.sent(),a=r.createTelemetryClient,o=r.getPiiSafeExtension,a({component:"share-btn"}).session({surface:"previews",ext:o(this.props.file.ext)}).event("click_share",{trigger_type:s.TriggerType.PrimaryButton}),[2]}}))}))},r}return n.__extends(c,o),c.prototype.render=function(){var e=this.props,n=e.file,o=e.user,s=e.featureFlags,c=e.sharingServiceInfo,u=e.isCollapsed;if(l.shouldShowSplitShare(s,c,n))return r.default.createElement(i.SplitShareButton,{user:o,file:n,onShowShare:this.handleSplitShareButtonShareClick,context:{surface:"previews"},variant:"primary",showEduTooltip:!0,onPresentInZoom:function(){return t.handlePresentInZoom(n,o)},isCollapsed:u});var h=_._("Share");return r.default.createElement(S.Button,{variant:"primary",className:a.default("share-button","control__button",{"control__button--collapsed":u,"wopi-available":v.isMicrosoftFileByExtension(g.file_extension(g.filename(this.props.file.fq_path)))&&!u}),onClick:this.handleShareButtonClick},u?r.default.createElement(m.ButtonIcon,{isPrimary:!0,name:"share","aria-label":h}):h)},c})(r.default.PureComponent);t.UnconnectedShareButton=y,t.ShareButton=o.connect((function(e){return{featureFlags:p.getFeatureFlags(e),sharingServiceInfo:p.sharingServiceInfo(e)}}))(y)}));
//# sourceMappingURL=share_button.min.js-vflahF9M2.map