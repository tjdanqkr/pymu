define(["require","exports","tslib","react","modules/clean/ajax","classnames","jquery","modules/core/i18n","spectrum/button","modules/clean/react/css","modules/clean/react/prompt/prompt_location","modules/clean/react/prompt/image","modules/clean/react/prompt/button","modules/clean/top_notification_bar","modules/clean/static_urls","modules/clean/react/sprite","modules/clean/upsell/upsell_controller"],(function(t,n,e,i,o,a,s,r,l,c,p,u,m,f,d,_,g){"use strict";var h;Object.defineProperty(n,"__esModule",{value:!0}),i=e.__importDefault(i),o=e.__importStar(o),a=e.__importDefault(a),s=e.__importDefault(s),g=e.__importDefault(g),(function(t){t[t.HelpPinCode=3]="HelpPinCode"})(h||(h={}));var b=(function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.handleOnConfirm=function(){n.onConfirm()},n.handleOnDismiss=function(){n.onDismiss(),n.setState({isDismissed:!0})},n.getBarType=function(){var t=n.props.campaign.content;return t?t.style:"info"},n.getNotificationContent=function(){var t=n.props.campaign.content,e=void 0,o=t.confirmInNewTab?"_blank":"_self",a=t.buttonUrl?t.buttonUrl:"#";return t.buttonText&&(e=i.default.createElement("a",{className:"top-notification-link-button freshbutton-blue",href:a,target:o,onClick:n.state_manager.onConfirm},t.buttonText)),i.default.createElement(i.default.Fragment,null,i.default.createElement("span",{className:"top-notification-bar__text",dangerouslySetInnerHTML:m.sanitizeOptionalHTML(t.text),ref:n.enhanceInlineTextButtons}),e,n.getDismissButton())},n.enhanceInlineTextButtons=function(t){if(t){var i=s.default(t).find("a:not(.dismiss-button)"),o=s.default(t).find(".dismiss-button");n.props.campaign.content.confirmInNewTab&&i.attr("target","_blank"),new g.default(i,o,e.__assign(e.__assign(e.__assign({},n.props),n.props.campaign),n.props.campaign.content)),g.default.register_custom_controller({on_confirm:n.handleOnConfirm,on_dismiss:n.handleOnDismiss})}},n.getDismissButton=function(){var t=null;if(n.props.campaign.content.notDismissable)return null;t="black"!==n.getBarType()?i.default.createElement(_.Sprite,{group:"web",name:"banner_x",alt:r._("Close")}):i.default.createElement(u.Image,{src:d.static_url("/static/images/top-notification-x-white-vflCh9Pt1.svg"),alt:r._("Close")});return i.default.createElement(l.Button,{variant:"styleless",className:"top-notification-bar-dismiss dismiss-button",onClick:function(t){n.props.campaign.content.modalType===h.HelpPinCode&&o.SilentBackgroundRequest({url:"/team/invalidate_pin"}),n.onDismiss(),n.state_manager.onDismiss(t)}},t)},n}return e.__extends(n,t),n.prototype.componentDidMount=function(){this.state_manager.onShow(),this.onShow()},n.prototype.componentWillUnmount=function(){g.default.unregister_custom_controller({on_confirm:this.handleOnConfirm,on_dismiss:this.handleOnDismiss})},n.prototype.onShow=function(){s.default("#notify-wrapper").addClass("with-top-notification"),s.default(".maestro body").addClass("has-top-notification")},n.prototype.onConfirm=function(){this.setState({isConfirmed:!0})},n.prototype.onDismiss=function(){f.removeClassIfElmExists(".maestro .has-top-notification","has-top-notification"),f.removeClassIfElmExists(".maestro #notify-wrapper.with-top-notification","with-top-notification")},n.prototype.getNotification=function(){var t=a.default({"top-notification-bar":!0,"top-notification-bar-with-button":!!this.props.campaign.content.buttonText});return i.default.createElement("div",{id:"prompt-top-notification-bar",className:t},this.getNotificationContent())},n.prototype.render=function(){if(!this.props.campaign.content)return null;if(this.state.isConfirmed||this.state.isDismissed)return null;var t=this.getBarType(),n="";return n="warning"===t?"lightyellow":"info"===t?"lightblue":"black"===t?"black":"lightred",i.default.createElement("div",{id:"top-notification-bar-container",className:"top-notification-bar-container "+n,tabIndex:0},this.getNotification())},n.displayName="TopNotificationWithoutCSS",n})(p.PromptLocationWithDefaultState);n.TopNotificationRendererWithoutCSS=b,n.TopNotification=c.requireCssWithComponent(b,["/static/css/upsell/prompt_pagelet-vflPzbv-y.css"]),n.WrappedTopNotification=function(t){return i.default.createElement("div",{className:"top-notification-bar-silo"},i.default.createElement(n.TopNotification,e.__assign({},t)))}}));
//# sourceMappingURL=top_notification.min.js-vflnxTfo5.map