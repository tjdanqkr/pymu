define("modules/clean/cloud_docs/home_create_file_experiments_post_tti",["require","exports","tslib","react","modules/clean/cloud_docs/constants","modules/clean/cloud_docs/new_file_menu","modules/clean/react/browse/constants","modules/clean/react/home/modals/async_home_modals","modules/clean/react/home/store","modules/clean/stormcrow/experiment"],(function(e,t,n,o,r,i,s,a,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),t.getCloudDocsExperiments=function(){return{expGddCreate:!1,expPaperCreate:!1,expBinderCreate:!1,expShowDropboxFormsCreate:!1,expShouldUseShortcutToCreateGDSS:!1}};var u=function(e,t){return function(o){return n.__awaiter(void 0,void 0,void 0,(function(){return n.__generator(this,(function(n){return a.asyncShowNewFolderModal({user:e,initialPath:o,origin:s.CREATE_FOLDER_ACTION_ORIGIN_TYPE.HOME_CREATE_FILE_MODAL,redirectOnClose:t}),[2]}))}))}};t.getNewFileMenu=function(e,t){return void 0===t&&(t=[]),n.__awaiter(this,void 0,void 0,(function(){var s,a,d,_,m,p,g;return n.__generator(this,(function(n){return s=e.cloudDocsExperiments.expGddCreate,a=e.cloudDocsExperiments.expPaperCreate,d=e.cloudDocsExperiments.expBinderCreate,_=e.cloudDocsExperiments.expShowDropboxFormsCreate,m=e.cloudDocsExperiments.expShouldUseShortcutToCreateGDSS,p=l.Experiment(c.getHomeStore().getPreTTIProps().expConsolidateCreateVariant).variantIn("V1","V2"),g=function(){return o.default.createElement(i.NewFileMenu,{key:"new-file-menu",user:c.getUser(),disabled:!1,showGdd:s,showPaper:a,showBinder:d,showDropboxForms:_,useShortcutToCreateGDSS:m,source:r.NewFileMenuFromType.HOME,handleClickNewFolder:u,consolidateCreate:p,newFolderActions:t})},[2,new Promise((function(e,t){e(g)}))]}))}))}})),define("modules/clean/fileops",["require","exports","tslib","jquery","modules/clean/ajax","modules/core/i18n","modules/core/notify","modules/core/uri"],(function(e,t,n,o,r,i,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),t.do_nonbrowse_delete=function(e,t){var n=o.default.Deferred(),a=i.ungettext("Deleted %(file_count)s item.","Deleted %(file_count)s items.",t.length).format({file_count:t.length});return s.Notify.success(a),r.WebRequest({url:"/cmd/delete",data:{files:t},subject_user:e,success:function(e){n.resolve(e)},error:function(e){s.Notify.error(i._("Failed to perform the delete. Please try again later.")),n.reject(e)}}),n.promise()},t.build_revisions_uri=function(e,t,o){var r;return void 0===o&&(o={}),o=n.__assign(((r={})._subject_uid=String(t),r),o),new a.URI({path:"/history"+e,query:o})}})),define("modules/clean/react/home/content_suggestions/actions",["require","exports","modules/clean/flux/dispatcher","modules/clean/react/home/content_suggestions/constants"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SuggestedActions={dispatchLoaded:function(e){n.Dispatcher.dispatch({type:o.SuggestedResourceActionTypes.LOAD_SUCCESS,items:e})}}})),define("modules/clean/react/home/content_suggestions/actions_post_tti",["require","exports","tslib","modules/clean/flux/dispatcher","modules/clean/react/home/content_suggestions/constants","modules/clean/react/home/content_suggestions/api_post_tti","modules/clean/react/starred/id_type_pair","modules/clean/react/home/content_suggestions/api","modules/clean/react/home/content_suggestions/api_post_tti","modules/clean/react/home/content_suggestions/actions","modules/clean/react/home/resource/api_post_tti","modules/clean/react/home/resource_id_types","modules/clean/react/home/store","modules/clean/react/home/constants"],(function(e,t,n,o,r,i,s,a,c,l,u,d,_,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=n.__importStar(i),t.dismissSuggestedItem=function(e,t,s){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,i.dismissSuggestedItem(e,t,s)];case 1:return n.sent(),o.Dispatcher.dispatch({type:r.SuggestedResourceActionTypes.DISMISS_ITEM_SUCCESS,dismissed:t}),[3,3];case 2:return n.sent(),o.Dispatcher.dispatch({type:r.SuggestedResourceActionTypes.DISMISS_ITEM_FAILURE,dismissed:t}),[3,3];case 3:return[2]}}))}))},t.loadItems=function(e,t,i){return n.__awaiter(this,void 0,void 0,(function(){var s,u,d;return n.__generator(this,(function(n){switch(n.label){case 0:s=[],n.label=1;case 1:return n.trys.push([1,3,,4]),[4,c.getSuggested(e,t,i)];case 2:return u=n.sent(),(d=a.handlePayload(u))&&l.SuggestedActions.dispatchLoaded(d.items),[2,d];case 3:return n.sent(),o.Dispatcher.dispatch({type:r.SuggestedResourceActionTypes.LOAD_FAILURE}),[2,s];case 4:return[2]}}))}))},t.fetchSuggestedFileMetadata=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,r,i;return n.__generator(this,(function(n){switch(n.label){case 0:return t=e.map((function(e){return{id:e.resourceId,type:d.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID}})),[4,u.getFileMetadata(_.getUser(),t)];case 1:return r=n.sent(),i={},r.forEach((function(e){return i[s.idTypePairToString(e)]=e.file_metadata})),o.Dispatcher.dispatch({type:m.HomeResourceStoreActionTypes.RECEIVED_RESOURCE_ID_TO_FILE,resourceIdToFile:i}),[2]}}))}))}})),define("modules/clean/react/home/content_suggestions/api",["require","exports","tslib","external/lodash","modules/core/exception","modules/clean/react/home/constants"],(function(e,t,n,o,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),t.handlePayload=function(e){return{items:e?o.compact(e.suggested_items.map((function(e){return(t=e)[".tag"]===i.SuggestItemTypes.FILE?{resourceId:(n=t).resource_id,encodedFileObjId:n.resource_id,key:n.resource_id,fqPath:n.fq_path,filename:n.filename,reason:n.reason,displayType:n.display_type[".tag"].toUpperCase(),isStarred:n.is_starred,breadcrumb:n.breadcrumb,url:n.url,suggestId:n.prediction_id,predictionId:n.prediction_id,isDismissed:!1,thumbnailUrl:n.thumbnail_url,isDir:n.is_dir,type:i.SuggestItemTypes.FILE}:t[".tag"]===i.SuggestItemTypes.PAPER_DOCUMENT?{resourceId:(n=t).resource_id,key:n.resource_id,reason:n.reason,displayType:n.display_type[".tag"].toUpperCase(),isStarred:n.is_starred,breadcrumb:n.breadcrumb,url:n.url,suggestId:n.prediction_id,predictionId:n.prediction_id,isDismissed:!1,thumbnailUrl:n.thumbnail_url,type:i.SuggestItemTypes.PAPER_DOCUMENT}:(r.reportStack("Unknown suggested item type",{severity:r.SEVERITY.NONCRITICAL,exc_extra:t}),null);var t,n}))):null,variant:e.variant}}})),define("modules/clean/react/home/content_suggestions/api_post_tti",["require","exports","tslib","external/lodash","modules/clean/api_v2/user_client"],(function(e,t,n,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),t.ACCEPTED_SUGGEST_ITEM_TYPES=[{".tag":"file"},{".tag":"paper_document"},{".tag":"other"}],t.getClient=o.once((function(){return new r.UserApiV2Client})),t.dismissSuggestedItem=function(e,n,o){var r=n.id,i=n.type;return t.getClient().ns("suggest").rpc("dismiss_suggested_item",{resource_id:r,id_type:i,feature_name:o},{subjectUserId:e.id})},t.getSuggested=function(e,o,r){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(n){return[2,t.getClient().ns("suggest").rpc("get_suggested_v2",{variant:o,num_items:r,accepted_types:t.ACCEPTED_SUGGEST_ITEM_TYPES,client_type:{".tag":"web_home"}},{subjectUserId:e.id})]}))}))}})),define("modules/clean/react/home/content_suggestions/constants",["require","exports","modules/core/i18n","modules/clean/filetypes"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(function(e){e.LOAD_SUCCESS="HOME_SUGGESTED_LOAD_SUCCESS",e.LOAD_FAILURE="HOME_SUGGESTED_LOAD_FAILURE",e.DISMISS_ITEM_SUCCESS="HOME_SUGGESTED_DISMISS_ITEM_SUCCESS",e.DISMISS_ITEM_FAILURE="HOME_SUGGESTED_DISMISS_ITEM_FAILURE"})(t.SuggestedResourceActionTypes||(t.SuggestedResourceActionTypes={})),(function(e){e.UNKNOWN="UNKNOWN",e.RECENCY="RECENCY",e.FRECENCY="FRECENCY",e.WEEKLY_PERIODICITY="WEEKLY_PERIODICITY",e.EVENT_COUNT="EVENT_COUNT",e.EDIT_COUNT="EDIT_COUNT",e.VIEW_COUNT="VIEW_COUNT",e.PREDICTION="PREDICTION",e.PREDICTION_VIEW="PREDICTION_VIEW",e.PREDICTION_EDIT="PREDICTION_EDIT",e.PREDICTION_SHARE="PREDICTION_SHARE",e.WEEKLY_FRECENCY="WEEKLY_FRECENCY",e.DIR_WEEKLY_FRECENCY="DIR_WEEKLY_FRECENCY",e.RECENT_SHARE="RECENT_SHARE"})(t.SUGGEST_REASONS||(t.SUGGEST_REASONS={})),t.LoggingTypes={OPEN_SUGGESTED_ITEM:"open_suggested_item",OPEN_PARENT_FOLDER:"open_parent_folder",RENDERED_SUGGESTED_ITEM:"rendered_suggested_item",CLICK_ADD_TO_STARRED:"click_add_to_starred",CLICK_DISMISS_SUGGESTED_ITEM:"click_dismiss_suggested_item",CANCEL_DISMISS_SUGGESTED_ITEM:"cancel_dismiss_suggested_item",DISMISS_SUGGESTED_ITEM:"dismiss_suggested_item",LIKE_SUGGESTED_ITEM:"like_suggested_item",SUGGESTED_SECTION_SHOWN:"suggested_section_shown",THUMBNAIL_LOADED:"thumbnail_loaded",THUMBNAIL_ERROR:"thumbnail_error",HIDE_SECTION:"hide_section",UNHIDE_SECTION:"unhide_section",CLICK_INFO_ICON:"click_info_icon"},t.DismissReasonToText={old:n._("I don’t need this file right now."),privacy:n._("It’s inappropriate."),nonsense:n._("This suggestion doesn’t make sense."),disliked:n._("I don’t like suggestions."),other:n._("Other"),no_selection:n._("Please select a reason.")},t.DismissReasonList=["old","privacy","nonsense","disliked","other"],t.DisplayTypeToFileType={DOC:o.FileTypes.FILE,MSDOC:o.FileTypes.FILE,PDF:o.FileTypes.FILE,SPREADSHEET:o.FileTypes.FILE,FILE:o.FileTypes.FILE,FOLDER:o.FileTypes.FOLDER,SHARED_FOLDER:o.FileTypes.SHARED_FOLDER,TEAM_FOLDER:o.FileTypes.TEAM_SHARED_FOLDER,CDM_TEAM_MEMBER_FOLDER:o.FileTypes.TEAM_MEMBER_FOLDER,TEAM_MEMBER_FOLDER:o.FileTypes.TEAM_MEMBER_FOLDER,SHARED_FOLDER_READ_ONLY:o.FileTypes.SHARED_FOLDER,TEAM_READ_ONLY:o.FileTypes.TEAM_SHARED_FOLDER,RESTRICTED_FOLDER:o.FileTypes.FOLDER,CAMERA_UPLOADS:o.FileTypes.FOLDER},t.FileTypeToIcon=function(e){switch(e){case o.FileTypes.TEAM_MEMBER_FOLDER:return"folder_team_member";default:return""}}})),define("modules/clean/react/home/content_suggestions/home_suggest",["require","exports","tslib","classnames","react","modules/clean/js_client_stopwatch","modules/clean/photos/thumb_loading/buffered_thumb_store","modules/clean/react/home/actions_post_tti","modules/clean/react/home/constants","modules/clean/react/home/content_suggestions/actions_post_tti","modules/clean/react/home/content_suggestions/grid_layout","modules/clean/react/home/content_suggestions/home_suggest_empty_state","modules/clean/react/home/content_suggestions/home_suggest_frame","modules/clean/react/home/content_suggestions/loading","modules/clean/react/home/content_suggestions/suggested_file_card","modules/clean/react/home/content_suggestions/suggested_file_card_v2","modules/clean/react/home/content_suggestions/suggested_resource_store","modules/clean/react/home/content_suggestions/util/logging/home_suggest_logger","modules/clean/react/home/store"],(function(e,t,n,o,r,i,s,a,c,l,u,d,_,m,p,g,h,f,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importDefault(r),t.initPrefetch=function(){};var S=(function(e){function t(t){var o=e.call(this,t)||this;return o.numItemsLastLogged=0,o.onStoreUpdate=function(){return o.setState(o.getStateFromStore())},o.onChangeSuggestVisibility=function(){var e=!o.props.isHiddenByUser;a.setSectionVisibilityPostTTI(E.getUserId(),{".tag":"suggest"},!e),f.homeSuggestLogger.logShowHideSection(c.HomeSections.SUGGEST,e)},o.removeSuggestionFromUi=function(e){return function(){e.isDismissed&&o.setState({dismissedSuggestionKeys:n.__spreadArrays(o.state.dismissedSuggestionKeys,[e.key])})}},o.store=h.getSuggestedResourceStore(t.homeAvailabilityLogger),o.featureVariant=o.store.getFeatureVariant(),o.removeStoreListener=o.store.addListener(o.onStoreUpdate),o.thumbStore=new s.BufferedThumbStore,o.state=n.__assign(n.__assign({},o.getStateFromStore()),{dismissedSuggestionKeys:[]}),o.loggedItems={},i.JSStopwatch.create_stopwatch_if_not_exist("infinite_tile_grid_logging"),o}return n.__extends(t,e),t.prototype.getStateFromStore=function(){var e=this.store.getItems();return{loadingState:this.store.getLoadingState(),suggested:e}},t.prototype.componentWillMount=function(){var e=E.getHomeStore().getUser();this.store.getLoadingState()===c.LoadingStates.FAILURE&&l.loadItems(e,this.featureVariant,10)},t.prototype.componentWillUnmount=function(){this.removeStoreListener&&this.removeStoreListener()},t.prototype.renderSuggestContainer=function(e,t,i){var s=this;if(e)return null;var a=this.state.suggested.filter((function(e){return!s.state.dismissedSuggestionKeys.includes(e.key)})).slice(0,t),l=a.filter((function(e){return!e.isDismissed})).length;if(this.state.loadingState!==c.LoadingStates.SUCCESS&&0===l)return r.default.createElement(m.SuggestedLoadingInner,n.__assign({},this.props));if(0===t||0===l)return r.default.createElement(d.SuggestEmptyState,null);if(this.numItemsLastLogged!==t){var u=[];a.forEach((function(e){s.loggedItems[e.resourceId]||(u.push(e),s.loggedItems[e.resourceId]=!0)})),f.homeSuggestLogger.logRenderedSuggestedItems(u),f.homeSuggestLogger.logSuggestedShown(a.length,this.featureVariant,t),this.numItemsLastLogged=t}var _=o.default({"home-access-section__content":!0,"home__suggest-items":!0,"home__suggest-v2":this.props.useNewTile});return r.default.createElement("div",{className:o.default(_)},this.renderSuggestedItems(a,i))},t.prototype.renderSuggestedItems=function(e,t){var n=this;return e.map((function(e,i){return e.type===c.SuggestItemTypes.FILE?r.default.createElement("div",{className:o.default({"home__suggest-items-hidden":e.isDismissed}),onAnimationEnd:n.removeSuggestionFromUi(e)},n.props.useNewTile?r.default.createElement(g.SuggestedFileCardV2,{suggested:e,feature:c.SUGGEST_GRID_FEATURE,position:i,key:e.key,tileWidth:t,thumbStore:n.thumbStore}):r.default.createElement(p.SuggestedFileCard,{suggested:e,feature:c.SUGGEST_GRID_FEATURE,position:i,key:e.key,tileWidth:t,thumbStore:n.thumbStore})):null}))},t.prototype.render=function(){if(!this.props.canRenderItems)return null;var e=this.props,t=e.containerWidth,n=e.isHiddenByUser,o=e.useNewTile,i=u.getLayout(t,o),s=i.itemsToShow,a=i.tileWidth;return r.default.createElement(_.SuggestFrame,{isHiddenByUser:n},r.default.createElement(_.SuggestHeader,{isHiddenByUser:n,buttonAction:this.onChangeSuggestVisibility}),this.renderSuggestContainer(n,s,a))},t.displayName="HomeSuggest",t})(r.default.PureComponent);t.HomeSuggest=S,t.RootComponent=function(e){return r.default.createElement(S,n.__assign({},e))}})),define("modules/clean/react/home/content_suggestions/home_suggest_empty_state",["require","exports","tslib","react","modules/core/i18n","modules/clean/react/home/content_suggestions/home_suggest_frame"],(function(e,t,n,o,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),t.SuggestEmptyState=function(){return o.default.createElement("div",{className:"home-access__empty-text suggested--empty"},r._("As you use Dropbox, suggested items will automatically show up here.")+" ",o.default.createElement("a",{href:"/help/desktop-web/homepage#suggest",target:"_blank",rel:"noopener noreferrer"},r._("Learn more")))},t.SuggestEmptyStateWithHeader=function(e){var n=e.isHiddenByUser,r=n?null:o.default.createElement(t.SuggestEmptyState,null);return o.default.createElement(i.SuggestFrame,{isHiddenByUser:n},o.default.createElement(i.SuggestHeader,{isHiddenByUser:n}),r)}})),define("modules/clean/react/home/content_suggestions/logger_api",["require","exports","tslib","external/lodash","modules/core/exception","modules/clean/web_timing_logger","modules/clean/react/home/api"],(function(e,t,n,o,r,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),s=n.__importStar(s);var a={},c={},l=function(e,t,n){s.makeRequest({url:n,type:"POST",data:{role:t,activities_json:JSON.stringify(o.map(e,"json")),send_ts:Date.now(),page_start_ts:window.performance&&window.performance.timing?window.performance.timing.navigationStart||window.performance.timing.fetchStart:void 0}},{isBackground:!0,delayRequest:!0}).then((function(){return e.forEach((function(e){return e.resolve()}))}),(function(){return e.forEach((function(e){return e.reject()}))}))},u=o.throttle((function(){o.size(a)>1&&r.reportStack("Multiple role activities",{severity:r.SEVERITY.NONCRITICAL,exc_extra:a}),Object.keys(a).forEach((function(e){var t=a[e];l(t,e,"/home_feed/log_activities")})),a={},Object.keys(c).forEach((function(e){var t=c[e];l(t,e,"/home_feed/log_suggested_activities")})),c={}}),1e3,{leading:!0,trailing:!0});t.logHomeActivity=function(e){var t=e.role,s=e.eventName,l=e.extra,d=e.suggestId,_=e.table;return new Promise((function(e,m){return n.__awaiter(void 0,void 0,void 0,(function(){var p,g,h,f;return n.__generator(this,(function(E){switch(E.label){case 0:switch(_||(_="home_activity"),p={json:{event_name:s,event_time:Date.now(),extra:o.mapValues(l||{},(function(e){return String(e)}))},resolve:e,reject:m},_){case"home_activity":a[t]=a[t]||[],a[t].push(p);break;case"home_suggest":a[t]=a[t]||[],g=p.json,h=n.__rest(p,["json"]),f=n.__assign({json:n.__assign({},g)},h),a[t].push(f),p.json.suggest_id=d,c[t]=c[t]||[],c[t].push(p);break;default:return r.reportStack("Unknown logging table specified",{severity:r.SEVERITY.NONCRITICAL,exc_extra:{table:_,role:t,eventName:s,extra:l,suggestId:d}}),[2]}return[4,i.waitForTTI()];case 1:return E.sent(),u(),[2]}}))}))}))}})),define("modules/clean/react/home/content_suggestions/models/suggested_item",["require","exports","modules/clean/filetypes","modules/clean/react/home/content_suggestions/constants","modules/clean/react/starred/constants"],(function(e,t,n,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.suggestedItemToIdTypePair=function(e){return null===e.encodedFileObjId||void 0===e.encodedFileObjId?{id:e.fqPath,type:r.IdTypes.FQ_PATH}:{id:e.encodedFileObjId,type:r.IdTypes.ENCODED_FILE_OBJ_ID}},t.suggestedItemToFileIconFields=function(e){var t,r=(t=e.displayType,o.DisplayTypeToFileType[t]||n.FileTypes.FILE);return{type:r,icon:o.FileTypeToIcon(r),fq_path:e.fqPath,thumbnail_url_tmpl:e.thumbnailUrl,isDeleted:!1}}})),define("modules/clean/react/home/content_suggestions/suggested_file_card",["require","exports","tslib","react","modules/clean/em_string","modules/clean/react/title_bubble","modules/clean/react/home/util/navigation","modules/clean/react/icon/folder_icon","modules/clean/react/home/util/logging/availability_logger_common","modules/clean/react/home/constants","modules/clean/react/home/constants","modules/clean/react/home/content_suggestions/util/logging/home_suggest_logger","modules/clean/react/home/content_suggestions/models/suggested_item","modules/clean/react/maestro/components/tile_element","modules/clean/react/home/store","modules/clean/viewer","modules/clean/browse_uri_interface","modules/clean/react/home/util/feedback_button","modules/clean/react/home/resource/actions_post_tti","modules/core/exception"],(function(e,t,n,o,r,i,s,a,c,l,u,d,_,m,p,g,h,f,E,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var y=(function(e){function t(t){var n=e.call(this,t)||this;return n.renderFilename=function(){var e=n.props.suggested,t=e.filename,s=e.url,a=r.Emstring.em_snippet(t,14,.5),c=o.default.createElement("a",{className:"tile-label__text",href:s},a);return t!==a&&(c=o.default.createElement(i.TitleBubble,{content:t,position:i.TitleBubble.POSITIONS.TOP,className:"tile-label__title-bubble",key:"tooltip"},c)),c},n.renderSubheader=function(){var e=p.getUser(),t=n.props,u=t.suggested,_=t.position,m=u.breadcrumb.length?u.breadcrumb[0]:null,f=m?m.name:g.Viewer.get_root_name(e),E=m?m.url:h.browse_uri_for_fq_path(e,"").toString(),S=u.fqPath.split("/");S.pop();var y=r.Emstring.em_snippet(f,10,.5),v=o.default.createElement("a",{className:"tile-label__parent-folder",href:E,onClick:function(e){e.stopPropagation(),e.preventDefault();E&&s.logAndNavigate(E,(function(){return d.homeSuggestLogger.logOpenParentFolder(u,c.withHomePrefix(l.HomeSections.SUGGEST),"parent-folder",_)}))}},y);return(S.length>2||f!==y)&&(v=o.default.createElement(i.TitleBubble,{content:S.join("/"),position:i.TitleBubble.POSITIONS.BOTTOM,className:"tile-label__parent-folder",key:"tooltip"},v)),o.default.createElement("div",{className:"tile-label__detail-subheader"},o.default.createElement(a.SimpleFolderIcon,null),v)},n.onTileAction=function(e){e.preventDefault(),e.stopPropagation();var t="row",o=e.target;"svg"===o.tagName?t="icon":o.classList.contains("tile-label__text")&&(t="title");var r=function(){return d.homeSuggestLogger.logOpenSuggestedItem(n.props.suggested,c.withHomePrefix(l.HomeSections.SUGGEST),t,n.props.position)};if(s.isMetaKeyPressed(e)||!l.PreviewableDisplayTypes.includes(n.props.suggested.displayType)){var i=n.props.suggested.displayType===l.EXTERNAL_RESOURCE_TYPE?s.NavigationMethod.UNSAFE_NEW_TAB:s.NavigationMethod.NEW_TAB;s.logAndNavigate(n.props.suggested.url,r,i)}else E.openInFileViewer("ENCODED_FILE_OBJ_ID:"+n.props.suggested.encodedFileObjId,r)},n.onThumbnailLoad=n.onThumbnailLoad.bind(n),n.onThumbnailError=n.onThumbnailError.bind(n),n}return n.__extends(t,e),t.prototype.onThumbnailLoad=function(e,t,n){d.homeSuggestLogger.logThumbnailStatus(this.props.suggested,c.withHomePrefix(l.HomeSections.SUGGEST),e,!1,{has_thumbnail:t,thumbnail_loaded:n})},t.prototype.onThumbnailError=function(e){d.homeSuggestLogger.logThumbnailStatus(this.props.suggested,c.withHomePrefix(l.HomeSections.SUGGEST),e,!0)},t.prototype.render=function(){if(this.props.suggested.type!==l.SuggestItemTypes.FILE)return S.reportStack("Unknown suggested item type",{severity:S.SEVERITY.NONCRITICAL,exc_extra:{resourceId:this.props.suggested.resourceId,type:this.props.suggested.type}}),null;var e=this.props.suggested,t=_.suggestedItemToFileIconFields(e),n=o.default.createElement(f.FeedbackButton,{suggested:this.props.suggested,feature:this.props.feature,position:this.props.position}),r=o.default.createElement("span",{className:"tile-label__container"},this.renderFilename(),this.renderSubheader());return o.default.createElement("div",{className:"home-tile__container"},o.default.createElement(m.TileElement,{file:t,key:e.key,onClick:this.onTileAction,width:this.props.tileWidth,leftOffset:0,tileIndex:this.props.position,labelHeight:u.SUGGEST_GRID_LABEL_HEIGHT,actionNode:n,thumbnailUrl:e.thumbnailUrl,labelNode:r,altText:e.filename,isDraggable:!1,isSelectable:!1,isViewOnly:!1,thumbStore:this.props.thumbStore,href:e.url,onThumbnailError:this.onThumbnailError,onThumbnailLoad:this.onThumbnailLoad,height:100}))},t.displayName="SuggestedFileCard",t})((o=n.__importDefault(o)).default.PureComponent);t.SuggestedFileCard=y})),define("modules/clean/react/home/content_suggestions/suggested_file_card_v2",["require","exports","tslib","react","dig-components/buttons","dig-components/icons","dig-components/icons/src","modules/clean/browse_uri_interface","modules/clean/em_string","modules/clean/filetypes","modules/clean/react/css","modules/clean/react/files_view/file_thumbnail","modules/clean/react/home/constants","modules/clean/react/home/content_suggestions/actions_post_tti","modules/clean/react/home/content_suggestions/models/suggested_item","modules/clean/react/home/content_suggestions/util/logging/home_suggest_logger","modules/clean/react/home/resource/actions_post_tti","modules/clean/react/home/store","modules/clean/react/home/util/logging/availability_logger_common","modules/clean/react/home/util/navigation","modules/clean/react/icon/folder_icon","modules/clean/react/snackbar","modules/clean/react/title_bubble","modules/clean/viewer","modules/core/i18n"],(function(e,t,n,o,r,i,s,a,c,l,u,d,_,m,p,g,h,f,E,S,y,v,I,T,b){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o);var O={type:l.FileTypes.FOLDER,icon:"folder"},w=(function(e){function t(t){var n=e.call(this,t)||this;return n.cardRef=o.default.createRef(),n.onDismissItemClick=function(e){e.stopPropagation(),e.preventDefault();var t=n.props,o=t.feature,r=t.position,i=t.suggested;g.homeSuggestLogger.logClickDismissSuggestedItem(i,E.withHomePrefix(_.HomeSections.SUGGEST),"dismiss-suggested-item",r);var s=p.suggestedItemToIdTypePair(i);m.dismissSuggestedItem(n.user,s,o).then((function(){g.homeSuggestLogger.logDismissSuggestedItem(i,E.withHomePrefix(_.HomeSections.SUGGEST),"dismiss-suggested-item",r,"no_feedback_modal")})).catch((function(){var e,t=i.filename;e=t?b._("There was a problem dismissing %(item_name)s").format({item_name:t}):b._("There was a problem dismissing your selection"),v.Snackbar.fail(e,"content-suggestions")}))},n.onParentFolderClick=function(e){e.stopPropagation(),e.preventDefault();var t=f.getUser(),o=n.props,r=o.suggested,i=o.position,s=r.breadcrumb.length?r.breadcrumb[0]:null,c=s?s.url:a.browse_uri_for_fq_path(t,"").toString();if(c){var l=S.isMetaKeyPressed(e)?S.NavigationMethod.NEW_TAB:S.NavigationMethod.REDIRECT;S.logAndNavigate(c,(function(e,t,n){return function(){return g.homeSuggestLogger.logOpenParentFolder(t,E.withHomePrefix(_.HomeSections.SUGGEST),e,n)}})("parent-folder",r,i),l)}},n.onFilenameClick=function(e){e.preventDefault(),e.stopPropagation(),n.handleNavigation(e,"title")},n.onFileThumbnailClick=function(e){e.preventDefault(),e.stopPropagation(),n.handleNavigation(e,"icon")},n.onFileThumbnailKeyPress=function(e){e.target===n.cardRef.current&&"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),n.handleNavigation(e,"icon"))},n.handleNavigation=function(e,t){var o=n.props,r=o.suggested,i=(function(e,t,n){return function(){return g.homeSuggestLogger.logOpenSuggestedItem(t,E.withHomePrefix(_.HomeSections.SUGGEST),e,n)}})(t,r,o.position);if(S.isMetaKeyPressed(e)){var s=r.displayType===_.EXTERNAL_RESOURCE_TYPE?S.NavigationMethod.UNSAFE_NEW_TAB:S.NavigationMethod.NEW_TAB;S.logAndNavigate(r.url,i,s)}else _.PreviewableDisplayTypes.includes(r.displayType)?h.openInFileViewer("ENCODED_FILE_OBJ_ID:"+r.encodedFileObjId,i):S.logAndNavigate(r.url,i,S.NavigationMethod.REDIRECT)},n.user=f.getUser(),n}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.suggested,n=e.thumbStore,r=e.tileWidth,i=p.suggestedItemToFileIconFields(t),s=t.breadcrumb.length?t.breadcrumb[0]:null,c=s?s.name:T.Viewer.get_root_name(this.user),l=s?s.url:a.browse_uri_for_fq_path(this.user,"").toString(),u=t.fqPath.split("/");return u.pop(),o.default.createElement("div",{className:"home__suggest-v2_card",tabIndex:0,"aria-label":t.filename,role:"group",onClick:this.onFileThumbnailClick,onKeyPress:this.onFileThumbnailKeyPress,ref:this.cardRef},o.default.createElement("a",{className:"home__suggest-v2_image",href:t.url,tabIndex:-1,onClick:this.onFileThumbnailClick,style:{width:r},"aria-hidden":"true"},o.default.createElement(d.FileThumbnail,{file:i,thumbStore:n,thumbnailSize:256,iconSize:72,key:t.key})),o.default.createElement(N,{onClick:this.onDismissItemClick}),o.default.createElement("div",{className:"home__suggest-v2_details",style:{maxWidth:r}},o.default.createElement(A,{filename:t.filename,url:t.url,onClick:this.onFilenameClick}),o.default.createElement("div",{className:"home__suggest-v2_subheader"},o.default.createElement(y.FolderIcon,{file:O,className:"home__suggest-v2_subheader-icon","aria-hidden":"true"}),o.default.createElement(D,{folderName:c,folderPathArray:u,folderUrl:l,onClick:this.onParentFolderClick}))))},t.displayName="SuggestedFileCardV2",t})(o.default.PureComponent);t.InternalSuggestedFileCardV2=w,t.SuggestedFileCardV2=u.requireCssWithComponent(w,["/static/css/dig-components/index.web-vflOjr3ra.css"]);var A=function(e){var t=e.filename,n=e.onClick,r=e.url,i=c.Emstring.em_snippet(t,14,.5),s=o.default.createElement("a",{className:"home__suggest-v2_filename",href:r,onClick:n},i);return t!==i?o.default.createElement(I.TitleBubble,{content:t,position:I.TitleBubble.POSITIONS.TOP},s):s};t.SuggestedFileCardV2Filename=A;var D=function(e){var t=e.folderName,n=e.folderPathArray,r=e.folderUrl,i=e.onClick,s=c.Emstring.em_snippet(t,10,.5),a=o.default.createElement("a",{className:"home__suggest-v2_subheader-label",href:r,onClick:i},s);return n.length>2?o.default.createElement(I.TitleBubble,{content:n.join("/"),position:I.TitleBubble.POSITIONS.BOTTOM},a):t!==s?o.default.createElement(I.TitleBubble,{content:t,position:I.TitleBubble.POSITIONS.BOTTOM},a):a};t.SuggestedFileCardV2SubheaderLabel=D;var N=function(e){return o.default.createElement(r.IconButton,{variant:"transparent",className:"home__suggest-v2_dismiss",onClick:e.onClick},o.default.createElement(i.UIIcon,{src:s.CloseLine,"aria-label":b._("Dismiss suggestion")}))};t.SuggestedFileCardV2DismissButton=N})),define("modules/clean/react/home/content_suggestions/suggested_resource_store",["require","exports","tslib","modules/clean/flux/dispatcher","modules/clean/react/home/constants","modules/clean/flux/flux_store","modules/clean/react/home/content_suggestions/constants","modules/clean/react/home/content_suggestions/actions","modules/clean/react/home/content_suggestions/api","modules/clean/react/home/content_suggestions/actions_post_tti","modules/clean/react/home/store"],(function(e,t,n,o,r,i,s,a,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=(function(e){function t(t){var n=e.call(this,o.Dispatcher)||this;n.items=[],n.loadingState=r.LoadingStates.LOADING;var i=!1;return t.handlePrefetch(r.HomePrefetchTypes.GET_SUGGESTED,(function(e){var t=c.handlePayload(e),r=t.items;n.usedVariant=t.variant,r?i?a.SuggestedActions.dispatchLoaded(r):n.onItemsLoadSuccess(r):i?o.Dispatcher.dispatch({type:s.SuggestedResourceActionTypes.LOAD_FAILURE}):n.onItemsLoadFailure()})),i=!0,n}return n.__extends(t,e),t.prototype.getItems=function(){return this.items},t.prototype.getLoadingState=function(){return this.loadingState},t.prototype.getFeatureVariant=function(){if(!this.featureVariant){var e=u.getHomeStore().getActiveVariant(r.SUGGEST_GRID_FEATURE).toLowerCase();this.featureVariant=r.SUGGEST_GRID_FEATURE+":"+e}return this.featureVariant},t.prototype.getUsedVariant=function(){return this.usedVariant},t.prototype.onItemsLoadSuccess=function(e){this.items=e,this.loadingState=r.LoadingStates.SUCCESS,e&&l.fetchSuggestedFileMetadata(e)},t.prototype.onItemsLoadFailure=function(){this.loadingState=r.LoadingStates.FAILURE},t.prototype.onDismissItemSuccess=function(e){this.loadingState=r.LoadingStates.LOADING,this.items=this.items.map((function(t){return"ENCODED_FILE_OBJ_ID"===e.type&&t.encodedFileObjId===e.id||"FQ_PATH"===e.type&&t.fqPath===e.id?n.__assign(n.__assign({},t),{isDismissed:!0}):t})),this.loadingState=r.LoadingStates.SUCCESS},t.prototype.onDismissItemFailure=function(e){this.loadingState=r.LoadingStates.LOADING,this.items=this.items.map((function(t){return"ENCODED_FILE_OBJ_ID"===e.type&&t.encodedFileObjId===e.id||"FQ_PATH"===e.type&&t.fqPath===e.id?n.__assign(n.__assign({},t),{isDismissed:!1}):t})),this.loadingState=r.LoadingStates.SUCCESS},t.prototype.__onDispatch=function(e){var t=e.action;switch(t.type){case s.SuggestedResourceActionTypes.LOAD_SUCCESS:this.onItemsLoadSuccess(t.items),this.__emitChange();break;case s.SuggestedResourceActionTypes.LOAD_FAILURE:this.onItemsLoadFailure(),this.__emitChange();break;case s.SuggestedResourceActionTypes.DISMISS_ITEM_SUCCESS:this.onDismissItemSuccess(t.dismissed),this.__emitChange();break;case s.SuggestedResourceActionTypes.DISMISS_ITEM_FAILURE:this.onDismissItemFailure(t.dismissed),this.__emitChange()}},t})(i.FluxStore);t.PrivateSuggestedResourceStoreClass=d;var _=null;t.getSuggestedResourceStore=function(e){return null===_&&(_=new d(e)),_}})),define("modules/clean/react/home/content_suggestions/util/logging/home_suggest_logger",["require","exports","tslib","external/lodash","modules/clean/react/home/content_suggestions/logger_api","modules/clean/react/home/store","modules/clean/react/home/content_suggestions/constants"],(function(e,t,n,o,r,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var a=(function(){function e(){}return e.prototype.logOpenSuggestedItem=function(e,t,n,o){return r.logHomeActivity({eventName:s.LoggingTypes.OPEN_SUGGESTED_ITEM,role:i.getHomeStore().getRole(),suggestId:e.suggestId,table:"home_suggest",extra:{position:o,clickOrigin:n,source:t,isDir:e.isDir}})},e.prototype.logOpenParentFolder=function(e,t,n,o){return r.logHomeActivity({eventName:s.LoggingTypes.OPEN_PARENT_FOLDER,role:i.getHomeStore().getRole(),suggestId:e.suggestId,table:"home_suggest",extra:{position:o,clickOrigin:n,source:t,isDir:e.isDir}})},e.prototype.logClickDismissSuggestedItem=function(e,t,n,o){return r.logHomeActivity({eventName:s.LoggingTypes.CLICK_DISMISS_SUGGESTED_ITEM,role:i.getHomeStore().getRole(),suggestId:e.suggestId,table:"home_suggest",extra:{position:o,clickOrigin:n,source:t,isDir:e.isDir}})},e.prototype.logDismissSuggestedItem=function(e,t,n,o,a){r.logHomeActivity({eventName:s.LoggingTypes.DISMISS_SUGGESTED_ITEM,role:i.getHomeStore().getRole(),suggestId:e.suggestId,table:"home_suggest",extra:{position:o,clickOrigin:n,source:t,reason:a,isDir:e.isDir}})},e.prototype.logSuggestedShown=function(e,t,n){r.logHomeActivity({eventName:s.LoggingTypes.SUGGESTED_SECTION_SHOWN,role:i.getHomeStore().getRole(),table:"home_suggest",extra:{num_items:e,variant:t,items_shown:n}})},e.prototype.logShowHideSection=function(e,t){r.logHomeActivity({eventName:t?s.LoggingTypes.HIDE_SECTION:s.LoggingTypes.UNHIDE_SECTION,role:i.getHomeStore().getRole(),table:"home_suggest",extra:{section_name:e}})},e.prototype.logRenderedSuggestedItems=function(e){var t,n=i.getHomeStore().getRole();t=o.map(e,(function(e,t){return r.logHomeActivity({eventName:s.LoggingTypes.RENDERED_SUGGESTED_ITEM,role:n,suggestId:e.suggestId,table:"home_suggest",extra:{index:t,isDir:e.isDir}})})),Promise.all(t)},e.prototype.logThumbnailStatus=function(e,t,o,a,c){var l=a?s.LoggingTypes.THUMBNAIL_ERROR:s.LoggingTypes.THUMBNAIL_LOADED;r.logHomeActivity({eventName:l,role:i.getHomeStore().getRole(),suggestId:e.suggestId,table:"home_suggest",extra:n.__assign({index:o},c)})},e})();t.HomeSuggestLogger=a,t.withHomePrefix=function(e){return"home_"+e},t.homeSuggestLogger=new a})),define("modules/clean/react/home/onboarding/actions_post_tti",["require","exports","tslib","modules/clean/flux/dispatcher","modules/clean/react/home/onboarding/api_post_tti","modules/clean/react/home/onboarding/constants_post_tti","modules/clean/react/home/onboarding/store_post_tti","modules/clean/react/home/onboarding/tooltips_post_tti","modules/clean/user_education/user_education_interface","modules/clean/react/home/util/constants_post_tti"],(function(e,t,n,o,r,i,s,a,c,l){"use strict";function u(e){o.Dispatcher.dispatch({type:i.HomeOnboardingActionTypes.UPDATE_SHOW_UNREAD_ONBOARDING,showUnreadOnboarding:e})}Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importStar(r),t.markHomeOnboardingComplete=function(){o.Dispatcher.dispatch({type:i.HomeOnboardingActionTypes.SET_ONBOARDING_COMPLETE})},t.showUnreadOnboardingTooltipIfNecessary=function(){s.getHomeOnboardingStore().shouldShowUnreadOnboarding()&&a.showUnreadTooltipIfRendered()&&(r.hideUnreadOnboarding(),u(!1))},t.updateShowUnreadOnboarding=u,t.handleHomeUserEducationStateSteps=function(e){var t=function(e){var t=window;"scrollBehavior"in document.documentElement.style?t.scroll({top:e,left:0,behavior:"smooth"}):t.scroll(0,e)};if(e.state===c.UEStateType.ShowStep){var n=e.step;if(n)if(n.name===l.HOME_V1_USER_EDUCATION_STEP_NAMES.RECENTLY_VIEWED){var o=document.querySelector(".maestro-header"),r=document.querySelector(".home-recents-section"),i=void 0;o&&r&&(i=o.getBoundingClientRect(),t(r.getBoundingClientRect().top-(i.height+i.top)))}else n.name===l.HOME_V1_USER_EDUCATION_STEP_NAMES.FILES&&t(0)}}})),define("modules/clean/react/home/onboarding/api_post_tti",["require","exports","modules/clean/react/home/store","modules/clean/react/home/api"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hideUnreadOnboarding=function(){return o.makeRequest({url:"/home_feed/hide_unread_onboarding",type:"POST",data:{role:n.getHomeStore().getRole()}})}})),define("modules/clean/react/home/onboarding/constants_post_tti",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HomeOnboardingActionTypes={SET_ONBOARDING_COMPLETE:"HOME_ONBOARDING_SET_ONBOARDING_COMPLETE",UPDATE_SHOW_UNREAD_ONBOARDING:"HOME_ONBOARDING_UPDATE_SHOW_UNREAD_ONBOARDING",PROMPT_MODAL_SHOWN:"HOME_ONBOARDING_PROMPT_MODAL_SHOWN"}})),define("modules/clean/react/home/onboarding/store_post_tti",["require","exports","tslib","external/lodash","modules/clean/flux/dispatcher","modules/clean/react/home/onboarding/constants_post_tti","modules/clean/flux/flux_store","modules/clean/upsell/prompt_event_emitter"],(function(e,t,n,o,r,i,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=(function(e){function t(){var t=e.call(this,r.Dispatcher)||this;return t.isOnboardingComplete=!1,t.showUnreadOnboarding=!1,t.didPromptModalShow=!1,a.promptBufferedEventEmitter.on(a.Events.ON_PROMPT_INITIALIZED,(function(e){(function(e){var t=e;return o.isFunction(t.didHomeModalLoad)&&t.didHomeModalLoad()})(e)&&r.Dispatcher.dispatch({type:i.HomeOnboardingActionTypes.PROMPT_MODAL_SHOWN})})),t}return n.__extends(t,e),t.prototype.getIsOnboardingComplete=function(){return this.isOnboardingComplete},t.prototype.shouldShowUnreadOnboarding=function(){return!this.didPromptModalShow&&this.showUnreadOnboarding&&this.getIsOnboardingComplete()},t.prototype.shouldDismissUnreadOnboardingModal=function(){return this.didPromptModalShow},t.prototype.onUpdateShowUnreadOnboarding=function(e){this.showUnreadOnboarding=e},t.prototype.onPromptModalShown=function(){this.didPromptModalShow=!0},t.prototype.__onDispatch=function(e){var t=e.action;switch(t.type){case i.HomeOnboardingActionTypes.PROMPT_MODAL_SHOWN:this.onPromptModalShown();break;case i.HomeOnboardingActionTypes.SET_ONBOARDING_COMPLETE:this.isOnboardingComplete=!0,this.__emitChange();break;case i.HomeOnboardingActionTypes.UPDATE_SHOW_UNREAD_ONBOARDING:this.onUpdateShowUnreadOnboarding(t.showUnreadOnboarding),this.__emitChange();break;default:return}},t})(s.FluxStore);t.HomeOnboardingStoreClass=c,t.getHomeOnboardingStore=o.once((function(){return new c}))})),define("modules/clean/react/home/onboarding/tooltips_post_tti",["require","exports","modules/core/i18n","modules/clean/react/home/util/static_tooltip_post_tti","modules/clean/react/home/onboarding/store_post_tti"],(function(e,t,n,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){return null};t.showUnreadTooltipIfRendered=function(){return(function(e,t,n,s,a){var c=document.querySelector(e),l=r.getHomeOnboardingStore();if(c&&!l.shouldDismissUnreadOnboardingModal()){var u=new o.StaticTooltip,d=l.addListener((function(){l.shouldDismissUnreadOnboardingModal()&&(u.hide(),d())}));return u.show(t,n,c,s,i,d,a),!0}return!1})(".home__unread-row--first .unread-item__title-group",n._("Tip"),n._("New shared files and comments show up here."),o.StaticTooltip.POSITIONS.RIGHT,"home-tooltip__unread-onboarding--list")}})),define("modules/clean/react/home/post_tti/interface",["require","exports","modules/clean/react/home/resource/actions_post_tti","modules/clean/react/home/starred/actions_post_tti","modules/clean/react/home/util/logging/unread_logger_post_tti","modules/clean/react/home/unread/home_access_unread_post_tti","modules/clean/react/home/roots/home_access_web_post_tti","modules/clean/react/home/recents/actions/recent_activity_actions_post_tti","modules/clean/react/home/recents/actions/recent_activity_actions_utils_post_tti","modules/clean/react/home/post_tti/unity_post_tti","modules/clean/react/home/recents/components/recent_activity_container_post_tti","modules/clean/react/home/recents/recent_activity_starred_post_tti","modules/clean/react/home/recents/store_utils_post_tti","modules/clean/react/home/unread/card_post_tti","modules/clean/react/home/unread/store_post_tti","modules/clean/react/home/recents/components/attachment_list_view_post_tti","modules/clean/sharing/async_share_modal_util","modules/clean/react/home/api_post_tti","modules/clean/react/home/post_tti/props_post_tti","modules/clean/react/home/util/feedback_button","modules/clean/react/home/roots/home_access_main_post_tti","modules/clean/react/home/onboarding/actions_post_tti","modules/clean/react/home/util/logging/availability_logger_post_tti","modules/clean/react/home/recents/recent_activity_client_post_tti","modules/clean/react/home/recents/recent_activity_logger_utils_post_tti","modules/clean/react/home/starred/actions_post_tti","modules/clean/cloud_docs/home_create_file_experiments_post_tti","modules/clean/react/extensions/client","modules/clean/react/home/recents/recent_activity_file_action_post_tti","modules/clean/react/home/starred/starred_item_file_action_post_tti","modules/clean/react/home/content_suggestions/home_suggest","modules/clean/react/retrieval_success_banner/retrieval_success_home_banner","modules/clean/react/retrieval_success_banner/search_success_banner"],(function(e,t,n,o,r,i,s,a,c,l,u,d,_,m,p,g,h,f,E,S,y,v,I,T,b,O,w,A,D,N,R,C,P){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openInFileViewer=n.openInFileViewer,t.createAutoShareLink=n.createAutoShareLink,t.getStarredStatusMetadata=o.getStarredStatusMetadata,t.logOpenUnreadNotificationItem=r.logOpenUnreadNotificationItem,t.logMarkNotificationAsRead=r.logMarkNotificationAsRead,t.logRenderedNotifications=r.logRenderedNotifications,t.triggerUnreadOnboarding=i.triggerUnreadOnboarding,t.homeAccessWebComponentDidMount=s.homeAccessWebComponentDidMount,t.openFile=a.openFile,t.downloadFiles=a.downloadFiles,t.openVersions=a.openVersions,t.shareFile=a.shareFile,t.previewFileSyncRecentItem=a.previewFileSyncRecentItem,t.deleteRecentItem=a.deleteRecentItem,t.deleteAttachments=c.deleteAttachments,t.getUnityFeatures=l.getUnityFeatures,t.recentActivityContainerComponentDidMount=u.recentActivityContainerComponentDidMount,t.setStarredStatusOfPaperRecentItems=d.setStarredStatusOfPaperRecentItems,t.fetchStarredStatus=d.fetchStarredStatus,t.ensureAttachments=_.ensureAttachments,t.loadPaperRecentItems=_.loadPaperRecentItems,t.loadRecentItems=_.loadRecentItems,t.acknowledgeNotification=m.acknowledgeNotification,t.listenToAndGetNotificationStore=p.listenToAndGetNotificationStore,t.AttachmentListView=g.AttachmentListView,t.asyncShowShareModal=h.asyncShowShareModal,t.createPaperDoc=f.createPaperDoc,t.setSectionVisibility=f.setSectionVisibility,t.getPostTTIProps=E.getPostTTIProps,t.FeedbackButton=S.FeedbackButton,t.initHomeOnboarding=y.initHomeOnboarding,t.showUnreadOnboardingTooltipIfNecessary=v.showUnreadOnboardingTooltipIfNecessary,t.logHomeAvailability=I.logHomeAvailability,t.archivePaperResources=T.archivePaperResources,t.postLogEvent=T.postLogEvent,t.logOpenPathUrl=b.logOpenPathUrl,t.openUrl=b.openUrl,t.logRequestFailed=b.logRequestFailed,t.logRecentsLoaded=b.logRecentsLoaded,t.logViewInFolder=b.logViewInFolder,t.loadAllStarredItems=O.loadAllStarredItems,t.getNewFileMenu=w.getNewFileMenu,t.getExtensionsClient=A.getExtensionsClient,t.RecentActivityFileActionPost=D.RecentActivityFileActionPost,t.StarredItemFileActionPost=N.StarredItemFileActionPost,t.HomeSuggest=R.HomeSuggest,t.initPrefetch=R.initPrefetch,t.RetrievalSuccessHomeBanner=C.RetrievalSuccessHomeBanner,t.SearchSuccessBanner=P.SearchSuccessBanner})),define("modules/clean/react/home/post_tti/props_post_tti",["require","exports","modules/clean/cloud_docs/home_create_file_experiments_post_tti","modules/clean/react/home/util/prefetch_handler","modules/clean/react/home/experiments/recommended_members/default_props","modules/core/exception","modules/clean/react/home/util/constants_post_tti","external/lodash","modules/clean/react/home/experiments/surface_existing_teams/default_props","modules/clean/react/home/experiments/team_success/default_props"],(function(e,t,n,o,r,i,s,a,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPostTTIProps=a.once((function(){return new Promise((function(e){var t=o.getPrefetchHandler("__REGISTER_POST_TTI_PREFETCH_HANDLER"),a=function(){return e({onboardingData:s.DEFAULT_ONBOARDING_POST_TTI_PROPS,renderSnapEngage:!1,maybeRenderTeamAdminModals:!1,homeGrowthExperiments:r.getHomeGrowthExperiments(),uploaderPostTTIExperiments:{},cloudDocsExperiments:n.getCloudDocsExperiments(),montanaModalProps:null,preferredEditors:{},showLegacyCreatePaperButton:!1,surfaceExistingTeamsProps:c.getHomeSurfaceExistingTeamsProps(),teammateSuggestionsProps:l.getHomeTeammateSuggestionsProps()})};t?o.handlePrefetch(t,(function(t){try{e(JSON.parse(t))}catch(e){i.reportStack("Failed to parse post TTI props",{severity:i.SEVERITY.CRITICAL,exc_extra:{error:e}}),a()}}),(function(e){i.reportStack("Post TTI prefetch failed",{severity:i.SEVERITY.CRITICAL,exc_extra:{error:e}}),a()})):a()}))}))})),define("modules/clean/react/home/post_tti/unity_post_tti",["require","exports","tslib"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUnityFeatures=function(){return n.__awaiter(this,void 0,void 0,(function(){var t;return n.__generator(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,new Promise((function(t,n){e(["modules/clean/unity/features"],t,n)})).then(n.__importStar)];case 1:return[2,(t=o.sent().UnityFeatures).isUnitySupported()?t:null];case 2:return o.sent(),[2,null];case 3:return[2]}}))}))}})),define("modules/clean/react/home/recents/actions/recent_activity_actions_post_tti",["require","exports","tslib","external/lodash","modules/clean/downloads","modules/clean/react/home/recents/recent_activity_logger_utils_post_tti","modules/clean/react/home/recents/store_utils_post_tti","modules/clean/react/home/recents/actions/recent_activity_actions_utils_post_tti","modules/clean/react/home/util/navigation","modules/clean/react/home/store","modules/core/exception","modules/core/exception","modules/core/notify","modules/clean/fileops","modules/clean/react/home/post_tti/unity_post_tti","modules/clean/react/home/resource/actions_post_tti","modules/clean/browse_uri_interface","modules/clean/react/home/recents/models/utils","modules/clean/sharing/async_share_modal_util","modules/clean/sharing/constants","modules/clean/react/modal","modules/core/i18n","modules/clean/react/home/recents/stores/attachment_store","modules/clean/react/home/constants","modules/clean/react/home/recents/recent_activity_constants","modules/clean/cloud_docs/constants","modules/clean/filepath","modules/clean/cloud_docs/preferred_editor_utils"],(function(e,t,n,o,r,i,s,a,c,l,u,d,_,m,p,g,h,f,E,S,y,v,I,T,b,O,w,A){"use strict";function D(e){return{index:e.index}}function N(e,t,n,o,r){var s=e.fqPath&&(O.isCloudDocByExtension(w.file_extension(e.fqPath))||A.hasPreferredEditorSupport(e.fqPath));if(e.isDir||o&&!s){var a=(function(e,t){return e.fqPath?String(h.preview_uri_for_fq_path(t,e.fqPath)):e.previewInfo&&e.previewInfo.href||null})(e,l.getHomeStore().getUser());return!!a&&(i.openTab(a,b.ActionType.VIEW_FILE,t,n),!0)}var c=r?b.ActionType.COMMENT:b.ActionType.VIEW_FILE;return g.openInFileViewer(e.id,(function(){return i.logRecentActivityAction(c,t,n)}),r),!0}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),r=n.__importStar(r),u=n.__importStar(u),t.shareFile=function(e,t,o){return n.__awaiter(this,void 0,Promise,(function(){var r,c,u,d,_,m,p;return n.__generator(this,(function(n){switch(n.label){case 0:return r=l.getUser(),[4,s.ensureAttachments([e],b.EnsureAttachmentsPurpose.SHARE_FILE)];case 1:return c=n.sent(),u=c[0],d=u.fqPath||"",_=u.previewInfo,m=_?_.target_ns:null,p=!1,o?(g.createAutoShareLink(r,d),p=!0,[3,4]):[3,2];case 2:return[4,E.asyncShowShareModal(r,{fqPath:d,isFolder:u.previewInfo.is_dir,origin:S.SHARE_ACTION_ORIGIN_TYPE.RECENTS,targetNsId:m})];case 3:p=n.sent(),n.label=4;case 4:return t&&p&&(i.logShareFile(r.id,d,t.totalCount,t.cellView),a.homeLogEvent(t,b.ActionType.SHARE,c,a.getFqPaths(c).indexOf(d))),[2,p]}}))}))},t.openFile=function(e,t){return n.__awaiter(this,void 0,void 0,(function(){var r,c,d,m,g,h,f;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,p.getUnityFeatures()];case 1:return r=n.sent(),u.assert(!!r,"Unity is not supported by this browser"),[4,s.ensureAttachments([e],b.EnsureAttachmentsPurpose.OPEN_FILE)];case 2:return c=n.sent(),d=c[0],m=d.nsId,g=d.nsPath,h=c[0].fqPath||"",f=l.getUserId(),r.open_file(m,g,f,o.noop,(function(e){_.Notify.error("We were unable to open this file"),u.reportException({err:Error(e),tags:["recents"],severity:u.SEVERITY.NONCRITICAL})})),t&&(i.logUnityOpenFile(f,h,t.totalCount,t.cellView),a.homeLogEvent(t,b.ActionType.OPEN,c)),[2]}}))}))},t.deleteRecentItem=function(e,t,r,i){return n.__awaiter(this,void 0,void 0,(function(){var i,s,c,l,u,_,m,p;return n.__generator(this,(function(n){return i=e.federatedRecentItem,s=e.displayType,i?d.reportStack("Deleting is not supported for federated recent items",{severity:d.SEVERITY.NONCRITICAL,exc_extra:{recentItem:e}}):(c=f.extractAttachmentIds(t),l=function(){return a.deleteAttachments(c,r)},u=void 0,_=void 0,1===c.length?(m=I.getAttachmentStore().getById(c[0]))&&m.isLoaded?(_=m.isDir?v._("Delete folder?"):v._("Delete file?"),p=s===T.DisplayTypes.SHARED_FOLDER?v._("Are you sure you want to remove the shared folder <b>%(file_name)s</b> from your Dropbox? This shared folder will stay shared with other members and you can re-add it later."):v._("Do you want to delete <b>%(file_name)s</b>?"),u=p.format({file_name:o.escape(m.displayName||"")})):(_=v._("Delete file?"),u=v._("Do you want to delete this file?")):(_=v._("Delete files?"),u=v._("Do you want to delete <b>%(num)s files</b>?").format({num:o.escape(String(c.length))})),y.SimpleModal.show({title_text:_,body_html:u,confirm_text:v._("Delete"),confirm_callback:l,cancel_text:v._("Cancel"),autoclose:!0})),[2]}))}))},t.downloadFiles=function(e,t){return n.__awaiter(this,void 0,void 0,(function(){var o,c;return n.__generator(this,(function(n){switch(n.label){case 0:return o=l.getUserId(),[4,s.ensureAttachments(e,b.EnsureAttachmentsPurpose.DOWNLOAD_FILES)];case 1:return c=n.sent(),t&&(i.logDownloadFile(o,a.getFqPaths(c),t.totalCount,t.cellView),a.homeLogEvent(t,b.ActionType.DOWNLOAD,c)),c.forEach((function(e){if(e.isDir&&e.fqPath&&null!=e.previewInfo&&null!=e.previewInfo.block_hash)r.get_zip({fq_paths:[e.fqPath],subject_uid:o,block_hash:e.previewInfo.block_hash,parent_path:e.fqPath});else{var t=null!=e.previewInfo&&"href"in e.previewInfo?e.previewInfo.href:void 0;t&&r.get({url:t})}})),[2]}}))}))},t.openVersions=function(e,t,o){return n.__awaiter(this,void 0,void 0,(function(){var r,u,d,_,p,g;return n.__generator(this,(function(n){switch(n.label){case 0:return r=l.getUserId(),[4,s.ensureAttachmentsWithRetryStatus([t],b.EnsureAttachmentsPurpose.OPEN_VERSIONS)];case 1:return u=n.sent(),d=u.attachments,_=u.isRetry,p=d[0].fqPath||"",g=m.build_revisions_uri(p,r),c.logAndNavigate(g.toString(),o?function(){return i.logOpenVersions(r,p,o.totalCount,o.cellView),a.homeLogEvent(o,b.ActionType.VERSIONS,d)}:void 0,_?c.NavigationMethod.REDIRECT:e),[2]}}))}))},t.previewFileSyncRecentItem=function(e,t,o,r){return n.__awaiter(this,void 0,void 0,(function(){var a,c,l,u;return n.__generator(this,(function(n){switch(n.label){case 0:return[4,s.ensureAttachmentsWithRetryStatus([e.attachmentIds[0]],b.EnsureAttachmentsPurpose.PREVIEW_RECENT_ITEM)];case 1:if(a=n.sent(),c=a.attachments,l=a.isRetry,1===c.length){if(u=c[0],e.scl)return i.openTab(e.scl,b.ActionType.VIEW_FILE,e.attachmentIds,r),[2];if(N(u,e.attachmentIds,r,t&&!l,o.isCommentAction))return[2]}return d.reportStack("Preview failed",{severity:d.SEVERITY.NONCRITICAL,exc_extra:{recentItem:e,attachments:c,previewOptions:D(o)}}),[2]}}))}))},t.previewAttachment=function(e,t,n,o){N(t.find((function(t){return t.id===e})),f.extractAttachmentIds(t),o,c.isMetaKeyPressed(n))}})),define("modules/clean/react/home/recents/actions/recent_activity_actions_utils_post_tti",["require","exports","tslib","external/lodash","modules/clean/react/home/recents/recent_activity_constants","modules/clean/react/home/recents/recent_activity_dispatcher","modules/clean/react/home/recents/recent_activity_logger_utils_post_tti","modules/clean/react/home/store","modules/clean/react/home/recents/store_utils_post_tti","modules/clean/fileops","modules/clean/react/home/recents/utils/events"],(function(e,t,n,o,r,i,s,a,c,l,u){"use strict";function d(e){return o.compact(o.map(e,"fqPath"))}function _(e,t,n,o){return u.logEvent(t,e.cellView,n,e.totalCount,o)}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),t.getFqPaths=d,t.homeLogEvent=_,t.deleteAttachments=function(e,t){return n.__awaiter(this,void 0,void 0,(function(){var u,m,p,g,h,f,E,S;return n.__generator(this,(function(n){switch(n.label){case 0:return u=a.getUserId(),[4,c.ensureAttachments(e,r.EnsureAttachmentsPurpose.PROMPT_AND_DELETE_ATTACHMENTS)];case 1:return m=n.sent(),p=d(m),t&&(g=t.totalCount,h=t.cellView,s.logDeleteFiles(u,p,g,h),_(t,r.ActionType.DELETE,m,void 0)),f=o.uniqueId("DELETE_FILES"),i.recentActivityDispatcher.dispatch({type:r.DELETE_FILES_PENDING,attachmentIds:e,transactionId:f}),E=function(){return i.recentActivityDispatcher.dispatch({type:r.DELETE_FILES_COMMIT,transactionId:f})},S=function(){return i.recentActivityDispatcher.dispatch({type:r.DELETE_FILES_ROLLBACK,transactionId:f})},l.do_nonbrowse_delete(u,p).then(E,S),[2]}}))}))}})),define("modules/clean/react/home/recents/components/attachment_file_icon_view_post_tti",["require","exports","tslib","classnames","react","external/lodash","modules/clean/em_string","modules/clean/react/home/util/resource_icon","modules/core/i18n"],(function(e,t,n,o,r,i,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importDefault(r),i=n.__importStar(i);var l=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onClick=function(e){e.preventDefault(),t.props.handleClick(t.props.id,e)},t.onContextMenu=function(e){e.preventDefault(),t.props.handleContextMenu(t.props.id)},t}return n.__extends(t,e),t.prototype.renderFilename=function(){var e=this.props.file.displayName.split("."),t="."+e.pop(),n=s.Emstring.em_snippet(e.join("."),10);return r.default.createElement("span",{className:"attachment-item__filename"},n,r.default.createElement("wbr",null),r.default.createElement("span",{className:"nowrap"},t))},t.prototype.renderIcon=function(){return r.default.createElement(a.HomeResourceIcon,{className:"attachment-item__icon",displayType:this.props.file.displayType,fileName:this.props.file.displayName})},t.prototype.render=function(){var e=this.props,t=e.overlayText,n=e.file;return r.default.createElement("div",{className:o.default({"attachment-item":!0,"attachment-item--file-thumb":!0,"attachment-item--show-more":!!t})},r.default.createElement("a",{href:"#","aria-label":t?c._("Show more"):void 0,title:t||n.displayName,className:"attachment-item__anchor",onClick:this.onClick,onContextMenu:this.onContextMenu},this.renderIcon(),this.renderFilename(),t?r.default.createElement("span",{className:"attachment-item__overlay"},t):void 0))},t.defaultProps={handleClick:i.noop,handleContextMenu:i.noop},t})(r.default.Component);t.AttachmentFileIconView=l})),define("modules/clean/react/home/recents/components/attachment_grid_post_tti",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(function(){function e(e,t){this._gridWidth=e,this._gutterWidth=t}return e.create=function(t,n){return new e(t,n)},e.prototype.generate=function(e,t){void 0===t&&(t=1/0);for(var n=[],o=0;n.length<t&&o<e.length;){var r=this.buildRow(e.slice(o));o+=r.length,n.push(r)}return n},e.prototype.buildRow=function(e){for(var t=[],n=this._gridWidth+this._gutterWidth,o=0,r=e;o<r.length;o++){var i=r[o];if(!((n=n-i.width-this._gutterWidth)>=0||0===t.length))break;t.push(i)}return t},e})();t.AttachmentGrid=n})),define("modules/clean/react/home/recents/components/attachment_image_view_post_tti",["require","exports","tslib","classnames","react"],(function(e,t,n,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o);var i=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={isLoading:!0},t.onClick=function(e){e.preventDefault(),t.props.handleClick(t.props.id,e)},t.onContextMenu=function(e){e.preventDefault(),t.props.handleContextMenu(t.props.id)},t.onLoad=function(){t.setState({isLoading:!1})},t.onError=function(){t.props.handleLoadError(t.props.id),t.setState({isLoading:!1})},t}return n.__extends(t,e),t.prototype.render=function(){var e,t=this.props,n=t.overlayText,i=t.image;return n&&(e=r.default.createElement("span",{className:"attachment-item__overlay"},n)),r.default.createElement("div",{className:o.default({"attachment-item":!0,"attachment-item--show-more":!!n,"attachment-item--is-loading":this.state.isLoading})},r.default.createElement("a",{href:"#",onClick:this.onClick,onContextMenu:this.onContextMenu,title:i.displayName,className:"attachment-item__anchor",style:{width:i.width,height:i.height},tabIndex:0},r.default.createElement("img",{alt:i.displayName,className:"attachment-item__thumbnail",src:i.thumbnailUrl,onLoad:this.onLoad,onError:this.onError}),e))},t.defaultProps={handleClick:function(){},handleContextMenu:function(){},handleLoadError:function(){}},t})((r=n.__importDefault(r)).default.PureComponent);t.AttachmentImageView=i})),define("modules/clean/react/home/recents/components/attachment_list_layout_post_tti",["require","exports","tslib","external/lodash","modules/clean/photos/thumbnail_url_util","modules/clean/react/home/recents/components/attachment_file_icon_view_post_tti","modules/clean/react/home/recents/components/attachment_grid_post_tti","modules/clean/react/home/recents/components/attachment_image_view_post_tti","modules/core/browser_detection","modules/core/exception"],(function(e,t,n,o,r,i,s,a,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);var u=r.ThumbnailSizeMode.FIT_ONE,d=r.ThumbnailSizeMode.EXACT_NO_BACKGROUND;var _=(function(){function e(e,t,n){this.gridWidth=e,this.columnWidth=t,this.gutterWidth=n,this._grid=s.AttachmentGrid.create(this.gridWidth,this.gutterWidth)}return e.create=function(t,n,o){return new e(t,n,o)},e.prototype.generate=function(e,t,n){var o=this.cellMetadata(e,n);return this._grid.generate(o,t)},e.prototype.cellMetadata=function(e,t){var n=this,r=o.zipObject(t,t);return e.map((function(e){var t=e.isLoaded,o=e.thumbnailUrl;return r[e.id]||t&&!o?n.buildFileIconViewMetadata(e):t?n.buildImageViewMetadata(e):n.buildLoadingImageViewMetadata(e)}))},e.prototype.buildFileIconViewMetadata=function(e){return{id:e.id,scaledThumbnailUrl:null,view:i.AttachmentFileIconView,width:92,height:100,attachment:e}},e.prototype.buildLoadingImageViewMetadata=function(e){return{id:e.id,scaledThumbnailUrl:null,view:null,width:100,height:100,attachment:e}},e.prototype.buildImageViewMetadata=function(e){var t=e.thumbnailUrl,n=this.calculateThumbnailDimensions(e.thumbnailDimensions),o=n.width,i=n.height,s=n.variant;return t.startsWith("data:")||(t=(function(e,t){var n,o,i,s=c.is_high_density_display();switch(t){case"aggregated-scaled":i=s?200:100,n=s?200:100,o=u;break;case"aggregated-cropped":i=s?200:100,n=s?200:100,o=d;break;case"aggregated-wide-cropped":i=s?718:359,n=s?200:100,o=d;break;default:return l.assert(!1,"invalid ThumbnailVariant: "+t),""}return r.thumbnailUrlForSize(e,i,n,o)})(t,s)),{id:e.id,view:a.AttachmentImageView,scaledThumbnailUrl:t,width:o+6,height:i+6,attachment:e}},e.prototype.calculateThumbnailDimensions=function(e){var t,n,o;if(e){o="aggregated-scaled";var r=e.width/e.height;t=100,(n=Math.floor(r*t))>this.columnWidth-6&&(o="aggregated-wide-cropped",n=this.columnWidth-6)}return(!e||n<75)&&(o="aggregated-cropped",n=100,t=100),{width:n,height:t,variant:o}},e})();t.AttachmentListLayout=_})),define("modules/clean/react/home/recents/components/attachment_list_view_post_tti",["require","exports","tslib","react","external/lodash","modules/clean/components/loading_indicator","modules/clean/react/home/constants","modules/clean/react/home/recents/components/attachment_file_icon_view_post_tti","modules/clean/react/home/recents/components/attachment_image_view_post_tti","modules/clean/react/home/recents/components/attachment_list_layout_post_tti","modules/clean/react/home/recents/recent_activity_constants","modules/clean/react/home/recents/actions/recent_activity_actions_post_tti","modules/clean/react/home/recents/store_utils_post_tti","modules/core/exception","modules/core/i18n"],(function(e,t,n,o,r,i,s,a,c,l,u,d,_,m,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importStar(r);var g=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.setAttachmentListRef=function(e){return t.attachmentsList=e},t.state={rows:1,errored:[],containerWidth:null,expandedAttachments:{}},t.previewAttachment=function(e,n){var o=t.props.attachments,r={totalCount:o.length,cellView:t};d.previewAttachment(e,o,n,r)},t.handleImageLoadError=function(e){var o=n.__spreadArrays(t.state.errored);o.push(e),t.setState({errored:o})},t.revealNextGroup=function(){t.setState({rows:t.state.rows+u.SHOW_MORE_THUMBNAIL_ROW_INCREMENT})},t}return n.__extends(t,e),t.prototype.componentDidMount=function(){this.updateLayoutController(),this.loadRemainingAttachments()},t.prototype.componentDidUpdate=function(e){this.updateLayoutController(),this.loadRemainingAttachments()},t.prototype.getLayoutProperties=function(e){var t=window.getComputedStyle(e),n=parseInt(t.width||"0",10),o=Math.abs(parseFloat(t.marginLeft||"0"))||0;return{containerWidth:n,maxWidthToFit:Math.floor(n/2)-o,itemHorizontalMargin:o}},t.prototype.updateLayoutController=function(){var e=this.getLayoutProperties(this.attachmentsList);e&&e.containerWidth!==this.state.containerWidth&&(this.layoutController=l.AttachmentListLayout.create(e.containerWidth,e.maxWidthToFit,e.itemHorizontalMargin),this.setState({containerWidth:e.containerWidth}))},t.prototype.loadRemainingAttachments=function(){var e=this.props.attachments.filter((function(e){return!e.isLoaded})).map((function(e){return e.id}));e.length&&_.ensureAttachments(e,u.EnsureAttachmentsPurpose.LOAD_REMAINING_ATTACHMENTS)},t.prototype.isLoading=function(){return this.state.rows>1&&this.props.attachments.some((function(e){return!e.isLoaded}))},t.prototype.renderAttachmentItems=function(){var e=this,t=this.props.attachments,n=this.state,i=n.containerWidth,l=n.errored;if(!i)return[];var u=this.isLoading()?1:this.state.rows,d=this.layoutController.generate(t,u,l),_=r.flattenDeep(d),g=this.previewAttachment,h=_.length,f=t.length,E=f-h+1,S=!this.isLoading()&&h<f;return _.map((function(t,n){var r,i;S&&n===_.length-1&&(g=e.revealNextGroup,i=p._("+%(count)s").format({count:E}));var l=t.attachment,u=t.view,d=t.id,h=t.scaledThumbnailUrl,f=t.width,y=t.height,v=l.displayName,I=l.displayType;switch(u){case a.AttachmentFileIconView:r=o.default.createElement(a.AttachmentFileIconView,{key:"attachment-"+d,id:d,file:{displayName:v||"",displayType:I||s.DisplayTypes.FILE},overlayText:i,handleClick:g});break;case c.AttachmentImageView:r=o.default.createElement(c.AttachmentImageView,{key:"attachment-expanded-"+d,overlayText:i,id:d,image:{thumbnailUrl:h,displayName:v||"",width:f,height:y},handleClick:g,handleLoadError:e.handleImageLoadError});break;default:u&&m.assert(!1,u.name+" is not supported by AttachmentListView")}return o.default.createElement("li",{key:"attachment-item-"+l.id},r)}))},t.prototype.renderLoadingView=function(){return o.default.createElement("div",{className:"attachment-loading"},o.default.createElement(i.LoadingIndicator,{style:i.LoadingIndicator.LoadingIndicatorStyle.BLUE_SPINNER,className:"recents-loading-indicator"}))},t.prototype.render=function(){var e=null;return this.isLoading()&&(e=this.renderLoadingView()),o.default.createElement("div",{className:"recents-item__attachments"},o.default.createElement("ul",{ref:this.setAttachmentListRef,className:"attachment-list"},this.renderAttachmentItems()),e)},t})(o.default.Component);t.AttachmentListView=g})),define("modules/clean/react/home/recents/components/recent_activity_container_post_tti",["require","exports","tslib","external/lodash","modules/clean/sharing/share_modal_util","modules/clean/sharing/wizard/wizard_modals"],(function(e,t,n,o,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),t.generateModalSessionId=r.generateModalSessionId,t.shareExistingFolder=i.shareExistingFolder,t.recentActivityContainerComponentDidMount=function(e){return n.__awaiter(this,void 0,void 0,(function(){return n.__generator(this,(function(t){return(function(e){var t=0;window.addEventListener("scroll",o.throttle((function(){var n=(void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop)/(document.documentElement.scrollHeight-window.innerHeight);n>.8&&n>t&&e(),t=n}),150,{trailing:!1}),!1)})(o.throttle(e,2e3,{trailing:!1})),[2]}))}))}})),define("modules/clean/react/home/recents/recent_activity_client_post_tti",["require","exports","tslib","modules/constants/python","external/lodash","modules/clean/react/home/api","modules/clean/react/home/recents/recent_activity_client_utils"],(function(e,t,n,o,r,i,s){"use strict";function a(e,t,n,o){return void 0===o&&(o=!0),i.makeRequest({subject_user:e,type:"POST",url:t,data:n},{isBackground:o})}function c(e,t,o,r){return void 0===r&&(r=!0),n.__awaiter(this,void 0,void 0,(function(){var i;return n.__generator(this,(function(n){switch(n.label){case 0:return i=s.getPayload,[4,a(e,t,o,r)];case 1:return[2,i.apply(void 0,[n.sent()])]}}))}))}Object.defineProperty(t,"__esModule",{value:!0}),r=n.__importStar(r),t.fetchPayload=c,t.recentsJson=function(e,t){return a(e,"/recents/json",{num_activities:t?20:10,cursor:t})},t.retrievePaperRecents=function(e,t){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,a(e,"/home_feed/retrieve_paper_recents",{is_initial_fetch:t})];case 1:return[2,n.sent()]}}))}))},t.postLogEvent=function(e,t){i.makeRequest({url:"/recents/logger",type:"POST",subject_user:e,data:t,dataType:"text"},{isBackground:!0})},t.archivePaperResources=function(e,t){return c(e,"/home_feed/archive_paper_resources",{resources_json:JSON.stringify(t)},!1)},t.activityGenerateJson=function(e,t,i){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,c(e,"/activity/generate/json",{activity_keys:JSON.stringify(r.uniq(t)),loading_modes:JSON.stringify([o.FILE_ACTIVITY_LOADING_MODE.PREVIEW_INFO]),encrypted:i})];case 1:return[2,n.sent().activities_by_activity_key]}}))}))},t.checkFileInRootCollection=function(e,t){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,c(e,"/recents/check_files_in_root_collection",{files_json:JSON.stringify(t)})];case 1:return[2,n.sent().file_in_root_collection_info]}}))}))}})),define("modules/clean/react/home/recents/recent_activity_file_action_post_tti",["require","exports","tslib","react","modules/clean/react/home/store","modules/clean/react/home/util/file_utils","modules/clean/react/app_actions/app_actions_menu","modules/clean/react/home/resource_id_types","modules/clean/filepath"],(function(e,t,n,o,r,i,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=(function(e){function t(t){var n=e.call(this,t)||this;return n.onActionDropdownOpen=function(){n.setState({isActionDropdownOpen:!0})},n.onActionDropdownClose=function(){n.setState({isActionDropdownOpen:!1})},n.state={isActionDropdownOpen:!1},n}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.recentItem,n=e.attachments;if(!(t&&t.idType===a.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID&&n.length&&t.viewingUserId&&t.displayName))return null;var l=i.getFileFromPartial({file_id:t.resourceId,ext:"."+c.file_extension(t.displayName),ns_id:n[0].nsId||void 0,ns_path:n[0].nsPath||void 0,fq_path:n[0].fqPath||void 0});return o.default.createElement(s.UnconnectedExtensionsMenu,{className:"recents-item__file-actions recents-item__action-button",user:r.getUser(),file:l,onDropdownOpen:this.onActionDropdownOpen,onDropdownClose:this.onActionDropdownClose,telemetryContext:{surface:"home_recent"}})},t})((o=n.__importDefault(o)).default.PureComponent);t.RecentActivityFileActionPost=l})),define("modules/clean/react/home/recents/recent_activity_logger_post_tti",["require","exports","tslib","external/lodash","modules/core/exception","modules/clean/react/home/recents/recent_activity_client_post_tti"],(function(e,t,n,o,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o);t.FilterViews={EVERYTHING:"everything"};var s=["is_full_page","item_count","contains_aggregation","latency","is_paginated"],a=["failure_type","is_paginated"],c=["in_aggregation","filter_view","action_type","target_activity_type","action_scope","position","file_extension","days_ago"],l=["latency","action_type","action_scope"],u=!0;function d(e,t,o){if(void 0===o&&(o={}),u){var r=n.__assign(n.__assign({},o),{event_name:t});i.postLogEvent(e,r)}}function _(e,t,n){var i=Object.keys(n),s=o.difference(i,t);r.assert(0===s.length,e+" called with unsupported keys: "+s)}t.enableLogging=function(){u=!0},t.disableLogging=function(){u=!1},t.logPageLoaded=function(e,t){_("logPageLoaded",s,t),d(e,"client_page_loaded",t)},t.logRequestFailed=function(e,t){_("logRequestFailed",a,t),d(e,"request_failed",t)},t.logCellAction=function(e,t){_("logCellAction",c,t),d(e,"cell_action",t)},t.logTimeToFirstAction=function(e,t){_("logTimeToFirstAction",l,t),d(e,"time_to_first_action",t)}})),define("modules/clean/react/home/recents/recent_activity_logger_utils_post_tti",["require","exports","tslib","react-dom","external/lodash","modules/clean/react/home/recents/utils/events","modules/clean/react/home/recents/recent_activity_logger_post_tti","modules/clean/react/home/recents/recent_activity_constants","modules/clean/react/home/recents/stores/attachment_store","modules/clean/web_timing_logger","modules/clean/react/home/util/navigation","modules/clean/react/home/recents/recent_activity_logger_utils"],(function(e,t,n,o,r,i,s,a,c,l,u,d){"use strict";function _(e,t,i,c,u){var _=o.findDOMNode(u);if(null!==_){var m,p=r.filter(r.uniq(r.map(i,(function(e){return null!=e?e.split(".").pop().toLowerCase():void 0}))),Boolean),g=c>1;m=1===c?a.ActionScope.SINGLE:i.length===c?a.ActionScope.AGGREGATION:a.ActionScope.SUBSET;var h,f=Array.prototype.indexOf.call(_.parentNode.childNodes,_),E=Number(_.getAttribute("data-item-type")),S=Number(_.getAttribute("data-item-date")),y={in_aggregation:g,filter_view:s.FilterViews.EVERYTHING,action_type:e,action_scope:m,target_activity_type:E,position:f,file_extension:p.join(","),days_ago:(h=S,Math.floor((Date.now()-h)/864e5))};s.logCellAction(t,y),(function(e,t){if(!d.canLogFirstAction())return;var o=l.start_time();if(!o)return;d.onLogFirstAction(),s.logTimeToFirstAction(e,n.__assign(n.__assign({},t),{latency:Date.now()-o}))})(t,r.pick(y,"action_scope","action_type"))}}function m(e){return function(t,n,o,r){_(e,t,n,o,r)}}function p(e){return function(t,n,o,r){return m(e)(t,[n],o,r)}}function g(e,t,o){void 0===o&&(o={});var r=n.__assign(n.__assign({is_full_page:t.isFullPage},o),{latency:Date.now()-t.startTime});s.logPageLoaded(e,r)}function h(e,t,n){var o=c.getAttachmentStore().getByIds(t);return i.logEvent(e,n.cellView,o,n.totalCount)}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),r=n.__importStar(r),l=n.__importStar(l),t.logShareFile=p(a.ActionType.SHARE),t.logPreviewFiles=m(a.ActionType.VIEW_FILE),t.logDeleteFiles=m(a.ActionType.DELETE),t.logUnityOpenFile=p(a.ActionType.UNITY_OPEN),t.logOpenPathUrl=m(a.ActionType.OPEN_DIR),t.logOpenSharedLinkUrl=m(a.ActionType.VIEW_SHARED_LINK),t.logCommentFile=p(a.ActionType.COMMENT),t.logDownloadFile=m(a.ActionType.DOWNLOAD),t.logOpenVersions=p(a.ActionType.VERSIONS),t.logViewInFolder=m(a.ActionType.VIEW_IN_FOLDER),t.logRequestFailed=function(e,t){s.logRequestFailed(e,{failure_type:t?t.status:-1,is_paginated:!1})},t.startRequestTimer=function(){var e=d.getRecentsLoggingData();return function(t,n){return void 0===n&&(n={}),g(t,e,n)}},t.logRecentsLoaded=g,t.logRecentActivityAction=h,t.openTab=function(e,t,n,o){u.logAndNavigate(e,(function(){return h(t,n,o)}),u.NavigationMethod.NEW_TAB)},t.openUrl=function(e,t,n,o){u.logAndNavigate(e,(function(){return h(t,n,o)}),u.NavigationMethod.REDIRECT)}})),define("modules/clean/react/home/recents/recent_activity_starred_post_tti",["require","exports","modules/clean/react/starred/constants","modules/clean/react/starred/actions","modules/clean/react/home/recents/recent_activity_federated_model","modules/clean/react/home/store","modules/clean/react/home/recents/recent_activity_starred","modules/clean/flux/dispatcher"],(function(e,t,n,o,r,i,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setStarredStatusOfPaperRecentItems=function(e){e.length&&a.Dispatcher.dispatch({type:n.StarredActionTypes.SET_STATUS,starredStatuses:e.map((function(e){return new r.FederatedRecentItem(e).getStarredStatus()}))})},t.fetchStarredStatus=function(e){var t=s.getIdTypePairsByRecentActivityItems(e);t.length&&o.StarredActions.fetchStatuses(i.getRole(),t,!0)}})),define("modules/clean/react/home/recents/store_utils_post_tti",["require","exports","tslib","external/lodash","modules/core/i18n","modules/clean/react/home/recents/stores/attachment_store","modules/core/notify","modules/clean/react/home/recents/recent_activity_dispatcher","modules/clean/react/home/recents/recent_activity_client_post_tti","modules/clean/react/home/recents/recent_activity_constants","modules/clean/react/home/store","modules/core/exception","modules/clean/react/home/post_tti/unity_post_tti","modules/clean/react/home/recents/store_utils","modules/clean/react/home/recents/recent_activity_logger_utils_post_tti"],(function(e,t,n,o,r,i,s,a,c,l,u,d,_,m,p){"use strict";function g(e){return n.__awaiter(this,void 0,void 0,(function(){var t,r,s,d,m,p=this;return n.__generator(this,(function(g){switch(g.label){case 0:return a.recentActivityDispatcher.dispatch({type:l.ADD_PENDING_ACTIVITY_KEYS,activityKeys:e}),t=i.getAttachmentStore().groupIdsByEncryptedToken(e),r=u.getUserId(),s={},d=0,[4,Promise.all(o.map(t,(function(e,t){return n.__awaiter(p,void 0,void 0,(function(){var o;return n.__generator(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),o=[n.__assign({},s)],[4,c.activityGenerateJson(r,e,t)];case 1:return s=n.__assign.apply(void 0,o.concat([i.sent()])),[3,3];case 2:return i.sent(),a.recentActivityDispatcher.dispatch({type:l.REMOVE_PENDING_ACTIVITY_KEYS,activityKeys:e}),d++,[3,3];case 3:return[2]}}))}))})))];case 1:if(g.sent(),a.recentActivityDispatcher.dispatch({type:l.RECEIVE_RAW_RELATED_ACTIVITIES_BY_KEY,rawRelatedActivitiesByKey:s,userId:r}),(m=o.map(s,(function(e){return{ns_id:e.ns_id,ns_path:e.ns_path}}))).length&&(_.getUnityFeatures().then((function(e){e&&e.check_file_batch(m,r,null).then((function(e){a.recentActivityDispatcher.dispatch({type:l.RECEIVE_CAN_OPEN_INFO,canOpenInfo:e})}))})),c.checkFileInRootCollection(r,m).then((function(e){return a.recentActivityDispatcher.dispatch({type:l.RECEIVE_FILE_IN_ROOT_COLLECTION_INFO,fileInRootCollectionInfo:e})}))),d)throw new Error(d+" activityGenerateJson failures");return[2]}}))}))}function h(e,t,o){return void 0===o&&(o=l.MAX_ENSURE_ATTACHMENT_LOAD_ATTACHMENTS_ATTEMPTS),n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(n){switch(n.label){case 0:return[4,E(e,t,o)];case 1:return[2,n.sent().attachments]}}))}))}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),t.ensureAttachments=h;var f=[l.EnsureAttachmentsPurpose.LOAD_REMAINING_ATTACHMENTS,l.EnsureAttachmentsPurpose.RECENTS_JSON_CONTINUATION];function E(e,t,o,a){return void 0===o&&(o=l.MAX_ENSURE_ATTACHMENT_LOAD_ATTACHMENTS_ATTEMPTS),void 0===a&&(a=!1),n.__awaiter(this,void 0,Promise,(function(){var c,l;return n.__generator(this,(function(n){switch(n.label){case 0:return c=i.getAttachmentStore().getByIds(e),(l=c.filter((function(e){return!e.isLoaded})).map((function(e){return e.id}))).length?i.getAttachmentStore().areSomeActivityKeysPending(l)?[4,new Promise((function(n,r){var s=i.getAttachmentStore().addListener((function(){i.getAttachmentStore().areSomeActivityKeysPending(l)||(s(),E(e,t,o,!0).then(n,r))}))}))]:[3,2]:[3,10];case 1:return[2,n.sent()];case 2:if(!(o>0))return[3,8];n.label=3;case 3:return n.trys.push([3,5,,6]),[4,g(l)];case 4:return n.sent(),[3,6];case 5:return n.sent(),[3,6];case 6:return[4,E(e,t,o-1,!0)];case 7:return[2,n.sent()];case 8:throw d.reportStack("retry attempts depleted",{severity:d.SEVERITY.NONCRITICAL,exc_extra:{attachmentIds:e,purpose:t}}),f.indexOf(t)<0&&s.Notify.error(r._("There was a problem completing this request.")),new Error("retry attempts depleted");case 9:return[3,11];case 10:return[2,{attachments:c,isRetry:a}];case 11:return[2]}}))}))}function S(){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(e){return[2,{logRecentsLoaded:p.logRecentsLoaded,ensureAttachments:h,logRequestFailed:p.logRequestFailed,loadPaperRecentItems:y}]}))}))}function y(e){return n.__awaiter(this,void 0,void 0,(function(){var t,o,r;return n.__generator(this,(function(n){switch(n.label){case 0:return t=c.retrievePaperRecents(u.getUserId(),e),o=m.handleRetrievePaperRecentsPromise,r=[S],[4,t];case 1:return o.apply(void 0,r.concat([n.sent(),e])),[2]}}))}))}t.ensureAttachmentsWithRetryStatus=E,t.loadPaperRecentItems=y,t.loadRecentItems=function(e){var t=this;return m.logErrorAndRethrowAsync(S,(function(){return n.__awaiter(t,void 0,void 0,(function(){var t,o;return n.__generator(this,(function(n){switch(n.label){case 0:return t=m.handleAndLogRecentsJsonPromise,o=[S],[4,c.recentsJson(u.getUserId(),e)];case 1:return[2,t.apply(void 0,o.concat([n.sent(),!e]))]}}))}))}))}})),define("modules/clean/react/home/resource/actions_post_tti",["require","exports","tslib","modules/clean/flux/dispatcher","modules/clean/react/home/constants","modules/clean/react/home/store","modules/clean/react/home/resource/store","modules/clean/referrer_cleansing_redirect","modules/constants/python","modules/clean/react/file_viewer/controller","modules/core/browser","modules/clean/filepath","modules/clean/react/home/api","modules/clean/react/home/post_tti/props_post_tti","modules/core/uri","modules/clean/previews/data/preview_type_util","modules/clean/cloud_docs/preferred_editor_utils","modules/clean/cloud_docs/constants","modules/clean/cloud_docs/utils","modules/clean/cloud_docs/types","modules/core/browser","modules/clean/cloud_docs/event_logging","spectrum/util/uuid_generator"],(function(e,t,n,o,r,i,s,a,c,l,u,d,_,m,p,g,h,f,E,S,y,v,I){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),a=n.__importStar(a),y=n.__importStar(y),t.createAutoShareLink=function(e,t){var n=new p.URI({path:"/sm/create"+d.normalize(t)});n.updateQuery("_subject_uid",e.id.toString()),n.updateQuery("redirect","0"),_.makeRequest({url:n.toString(),type:"POST",data:null,dataType:"text"}).then((function(e){return u.redirect(e)}))},t.openInFileViewer=function(e,t,n){var u=s.getHomeResourceStore().addListener((function(){var e=s.getHomeResourceStore().getFileToPreview();if(e){var d=(function(e){if(g.isCloudDoc(e.preview))return e.preview.content.exit_url})(e),_=i.getHomeStore().getUser();if(d)if(t(),u(),f.POINTER_EXTS.includes(E.getFileExt(e).slice(1)))a.safe_open_tab_and_redirect(d),v.logUserAction({actionEvent:S.UserActionEventType.PRE_OPEN,userId:_.id,docPathOrId:e.file_id,actionSource:S.UserActionSourceType.WEB_HOME});else{var T=I.generateUUID("web_open_id"),b=p.URI.parse(d).updateQuery("web_open_id",T).toString();y.open_tab(b),v.logUserAction({actionEvent:S.UserActionEventType.PRE_OPEN,userId:_.id,docPathOrId:e.file_id,actionSource:S.UserActionSourceType.WEB_HOME,data:{webOpenId:T}})}else{var O=function(){return(function(e,t,n,i){window.requestAnimationFrame((function(){l.isShown()?l.updateFiles([e]):(l.open([e],0,t,"react-file-viewer",{canClose:!0,oref:c.OREF_CONSTANTS.HOME,fileViewTarget:c.FileViewTargetType.PRIVATE,fileViewOrigin:c.FileViewOriginType.HOME,fileViewAction:c.FileViewActionType.CLICK,onClose:function(){return o.Dispatcher.dispatch({type:r.HomeActionTypes.CLOSE_FILE_VIEWER})}}),o.Dispatcher.dispatch({type:r.HomeActionTypes.OPEN_FILE_VIEWER})),n(),i()}))})(e,_,t,u)};!n&&h.hasPreferredEditorSupport(e)?m.getPostTTIProps().then((function(n){var o=n.preferredEditors;h.openInPreferredEditor(_,e,o,O,{fileViewAction:c.FileViewActionType.CLICK,fileViewOrigin:c.FileViewOriginType.HOME}),t(),u()})):O()}}}));o.Dispatcher.dispatch({type:r.HomeResourceStoreActionTypes.REQUEST_PREVIEW,resourceId:e})}})),define("modules/clean/react/home/resource/api_post_tti",["require","exports","modules/clean/react/home/api"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFileMetadata=function(e,t){return n.makeRequest({url:"/home_feed/get_file_metadata",type:"POST",subject_user:e.id,data:{resources_json:JSON.stringify(t)}},{isBackground:!0})}})),define("modules/clean/react/home/roots/home_access_main_post_tti",["require","exports","external/lodash","modules/clean/react/home/onboarding/store_post_tti","modules/clean/user_education/user_education_client","modules/clean/react/home/onboarding/actions_post_tti","modules/clean/user_education/user_education_interface"],(function(e,t,n,o,r,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initHomeOnboarding=n.once((function(e){var t=e.showUnreadOnboarding,n=e.onboardingComplete;o.getHomeOnboardingStore(),r.UEClient.on(s.UEStateChannel,i.handleHomeUserEducationStateSteps),i.updateShowUnreadOnboarding(t),n&&i.markHomeOnboardingComplete()}))})),define("modules/clean/react/home/roots/home_access_web_post_tti",["require","exports","tslib","modules/clean/history","modules/clean/upsell/prompt_event_emitter"],(function(e,t,n,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),t.homeAccessWebComponentDidMount=function(t,i){return n.__awaiter(this,void 0,void 0,(function(){var s=this;return n.__generator(this,(function(a){return o.default.remove_query_param("role"),t&&new Promise((function(t,n){e(["modules/clean/payments/snapengage"],t,n)})).then(n.__importStar).then((function(e){return e.ajaxFetchAndLoadSnapengageParams()})),r.promptBufferedEventEmitter.on(r.Events.ON_PROMPT_INITIALIZED,(function(t){return n.__awaiter(s,void 0,void 0,(function(){return n.__generator(this,(function(o){switch(o.label){case 0:return t&&(t.didMainCampaignLoad()||t.didCampaignForUserEducationLoad())?[2]:i?[4,new Promise((function(t,n){e(["modules/clean/react/ncct/post_tti_ncct_modal"],t,n)})).then(n.__importStar)]:[3,2];case 1:(0,o.sent().postTTINCCTReminderModal)(),o.label=2;case 2:return[2]}}))}))})),[2]}))}))}})),define("modules/clean/react/home/starred/actions_post_tti",["require","exports","tslib","modules/clean/flux/dispatcher","modules/clean/react/home/resource/api_post_tti","modules/clean/react/starred/id_type_pair","modules/clean/react/home/constants","modules/clean/react/home/store","modules/clean/react/home/starred/constants","modules/clean/react/home/starred/api_post_tti","modules/clean/react/home/starred/actions"],(function(e,t,n,o,r,i,s,a,c,l,u){"use strict";function d(e){return n.__awaiter(this,void 0,void 0,(function(){var t,c,l;return n.__generator(this,(function(n){switch(n.label){case 0:return 0===(t=e.map((function(e){return e.idTypePair}))).length?[2]:[4,r.getFileMetadata(a.getUser(),t)];case 1:return c=n.sent(),l={},c.forEach((function(e){return l[i.idTypePairToString(e)]=e.file_metadata})),o.Dispatcher.dispatch({type:s.HomeResourceStoreActionTypes.RECEIVED_RESOURCE_ID_TO_FILE,resourceIdToFile:l}),[2]}}))}))}Object.defineProperty(t,"__esModule",{value:!0}),t.loadAllStarredItems=function(){return n.__awaiter(this,void 0,void 0,(function(){var e,t;return n.__generator(this,(function(n){switch(n.label){case 0:o.Dispatcher.dispatch({type:c.StarredResourceActionTypes.LOADING_ALL}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,l.retrieveStarred(c.LOAD_ALL_ITEMS_COUNT)];case 2:return e=n.sent(),[3,4];case 3:throw t=n.sent(),u.onRetrieveStarredError(c.StarredLoadingTypes.ALL,t);case 4:return u.StarredActions.handleRetrieveStarredPayload((function(){return Promise.resolve({getStarredStatusMetadata:d})}),c.StarredLoadingTypes.ALL,e),[2]}}))}))},t.getStarredStatusMetadata=d})),define("modules/clean/react/home/starred/api_post_tti",["require","exports","tslib","modules/clean/react/home/api","modules/clean/react/home/store"],(function(e,t,n,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retrieveStarred=function(e){return n.__awaiter(this,void 0,Promise,(function(){return n.__generator(this,(function(t){switch(t.label){case 0:return[4,o.makeRequest({url:"/home_feed/retrieve_starred",type:"POST",data:{role:r.getRole(),limit:e}})];case 1:return[2,t.sent()]}}))}))}})),define("modules/clean/react/home/starred/starred_item_file_action_post_tti",["require","exports","tslib","react","modules/clean/react/home/recents/models/utils","modules/clean/react/home/util/file_utils","modules/clean/react/app_actions/app_actions_menu","modules/clean/react/home/resource_id_types"],(function(e,t,n,o,r,i,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=(function(e){function t(t){var n=e.call(this,t)||this;return n.onActionDropdownOpen=function(){n.setState({isActionDropdownOpen:!0})},n.onActionDropdownClose=function(){n.setState({isActionDropdownOpen:!1})},n.state={isActionDropdownOpen:!1},n}return n.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.starredItem,n=e.user;if(t.idType!==a.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID||!n.id||!t.title)return null;var c=i.getFileFromPartial({file_id:t.resourceId,fq_path:t.details.fqPath||void 0,ext:r.getExtension(t.title)});return o.default.createElement(s.UnconnectedExtensionsMenu,{className:"starred-item__file-actions",file:c,user:this.props.user,onDropdownOpen:this.onActionDropdownOpen,onDropdownClose:this.onActionDropdownClose,telemetryContext:{surface:"home_starred"}})},t})((o=n.__importDefault(o)).default.PureComponent);t.StarredItemFileActionPost=c})),define("modules/clean/react/home/unread/card_post_tti",["require","exports","tslib","modules/clean/react/user_notifications/actions"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),t.acknowledgeNotification=function(e){o.default.acknowledge(e)}})),define("modules/clean/react/home/unread/home_access_unread_post_tti",["require","exports","modules/clean/react/home/onboarding/actions_post_tti"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.triggerUnreadOnboarding=function(){setTimeout(n.showUnreadOnboardingTooltipIfNecessary)}})),define("modules/clean/react/home/unread/store_post_tti",["require","exports","tslib","modules/clean/react/user_notifications/actions","modules/clean/react/user_notifications/store"],(function(e,t,n,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),t.listenToAndGetNotificationStore=function(){return o.default.loadOnceAndWatch(!0),r.userNotificationsStore}})),define("modules/clean/react/home/util/constants_post_tti",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HOME_V1_USER_EDUCATION_STEP_NAMES={START:"start",RECENTLY_VIEWED:"recently_viewed",FILES:"files",PAPER:"paper"},t.DEFAULT_ONBOARDING_POST_TTI_PROPS={showUnreadOnboarding:!1,onboardingComplete:!0}})),define("modules/clean/react/home/util/feedback_button",["require","exports","tslib","react","spectrum/icon_form","modules/clean/react/home/constants","modules/clean/react/home/content_suggestions/actions_post_tti","modules/clean/react/home/content_suggestions/models/suggested_item","modules/clean/react/home/content_suggestions/util/logging/home_suggest_logger","modules/clean/react/home/store","modules/core/i18n","modules/core/notify"],(function(e,t,n,o,r,i,s,a,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var _=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onDismissItemClick=function(e){e.stopPropagation(),e.preventDefault();var n=t.props,o=n.feature,r=n.position,_=n.suggested;c.homeSuggestLogger.logClickDismissSuggestedItem(_,c.withHomePrefix(i.HomeSections.SUGGEST),"dismiss-suggested-item",r);var m=_,p=l.getHomeStore().getUser(),g=a.suggestedItemToIdTypePair(m),h=m.filename;c.homeSuggestLogger.logDismissSuggestedItem(m,c.withHomePrefix(i.HomeSections.SUGGEST),"dismiss-suggested-item",r,"no_feedback_modal"),s.dismissSuggestedItem(p,g,o).catch((function(e){var t;t=h?u._("There was a problem dismissing %(item_name)s").format({item_name:h}):u._("There was a problem dismissing your selection"),d.Notify.error(t)}))},t}return n.__extends(t,e),t.prototype.render=function(){return o.default.createElement("button",{className:"tile__action-dismiss",onClick:this.onDismissItemClick,"aria-label":u._("Dismiss suggestion")},o.default.createElement(r.IconForm,{className:"tile__action-icon",name:"cancel"}))},t})((o=n.__importDefault(o)).default.PureComponent);t.FeedbackButton=_})),define("modules/clean/react/home/util/file_utils",["require","exports","tslib","modules/clean/react/browse/models"],(function(e,t,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={bytes:1024,direct_blockserver_link:"",event_type:0,ext:"",file_id:"",fq_path:"",href:"",icon:"",is_cloud_doc:!1,is_dir:!1,is_in_team_folder_tree:!1,is_symlink:!1,is_locked:!1,is_unmounted:!1,is_versionable:!0,_mount_access_perms:[],ns_id:0,ns_path:"",revision_id:"",sjid:0,sort_key:[""],target_ns:null,type:1};t.getFileFromPartial=function(e){return e&&Object.keys(e).forEach((function(t){void 0===e[t]&&delete e[t]})),new o.File(e?n.__assign(n.__assign({},r),e):r)}})),define("modules/clean/react/home/util/logging/availability_logger_post_tti",["require","exports","tslib","external/lodash","modules/clean/react/home/constants","modules/clean/react/home/api","modules/clean/react/home/store","modules/clean/react/home/util/logging/availability_logger_common"],(function(e,t,n,o,r,i,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),t.logHomeAvailability=function(e){var t=e.sectionToTTI,c=e.sectionToIsSkipped,l=e.sectionToTTData,u=e.typeToExecutionData,d={};Object.keys(r.HomeSections).forEach((function(e){var n=r.HomeSections[e];d[n]={tti:t[n],tt_data:l[n],skipped:c[n]}}));var _=s.getHomeStore(),m=_.getUser();i.makeRequest({url:"/log/home_availability",type:"POST",dataType:"text",subject_user:m.id,data:{success:o.values(u).every((function(e){return e.success||!a.isPendingPrefetch(_,e)})),metrics_json:JSON.stringify({referrer:document.referrer}),sections_json:JSON.stringify(d),prefetches_json:JSON.stringify(o.mapValues(u,(function(e,t){var o=e.success,r=e.homeTiming,i=a.HOME_PREFETCH_TYPE_TO_INFO[t].section;return n.__assign(n.__assign({},r),{conditional_loading_preference:_.getSectionLoadingPreference(i),conditional_loading_mode:_.getSectionLoadingMode(i),success:!!o})})))}},{isBackground:!0,delayRequest:!0,shouldAssertResponse:!0})}})),define("modules/clean/react/home/util/logging/unread_logger_post_tti",["require","exports","modules/clean/loggers/notification_logger"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logOpenUnreadNotificationItem=function(e){n.NotificationLogger.logAction(e,"surface",n.NotificationLocations.HOME_PAGE)},t.logMarkNotificationAsRead=function(e){n.NotificationLogger.logMarkAsRead([e],n.NotificationLocations.HOME_PAGE)},t.logRenderedNotifications=function(e){n.NotificationLogger.logRender(e,-1,n.NotificationLocations.HOME_PAGE)}})),define("modules/clean/react/home/util/static_tooltip_post_tti",["require","exports","tslib","react","react-dom","modules/clean/react/bubble_dropdown_v2","modules/clean/react/sprite","modules/core/i18n"],(function(e,t,n,o,r,i,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importStar(r);var c=(function(){function e(){var e=this;this.isTooltipTriggered=!1,this.onTooltipTriggerRendered=function(t){e.isTooltipTriggered||(e.isTooltipTriggered=!0,e.triggerButton=t,e.simulateTriggerButtonClick())},this.simulateTriggerButtonClick=function(){e.triggerButton.click()},this.show=function(t,n,c,l,u,d,_){void 0===_&&(_="");var m=o.default.createElement("button",{className:"home-tooltip__trigger-button",ref:e.onTooltipTriggerRendered,"aria-label":"close"}),p=o.default.createElement(i.BubbleDropdown,{className:"home-tooltip",position:l,targetButton:m,onShowDropdown:u||function(){},onHideDropdown:d||function(){}},o.default.createElement("h4",{className:"home-tooltip__title"},t),n,o.default.createElement("button",{className:"home-tooltip__close-button",onClick:e.simulateTriggerButtonClick,"aria-label":a._("Close tooltip")},o.default.createElement(s.Sprite,{group:"web",name:"lightbox_close",alt:a._("Close")}))),g=e.createMountingElement(_);c.appendChild(g),r.render(p,g)},this.hide=function(){e.simulateTriggerButtonClick()}}return e.prototype.createMountingElement=function(e){var t=document.createElement("DIV");return e&&(t.className=e),t.addEventListener("click",(function(e){e.preventDefault()})),t},e.POSITIONS=i.BubbleDropdown.POSITIONS,e})();t.StaticTooltip=c})),define("modules/clean/react/radio",["require","exports","tslib","classnames","react","react-dom"],(function(e,t,n,o,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importDefault(r),i=n.__importStar(i),t.RadioItemVariant={Normal:"normal",Large:"large"};var s=Object.keys(t.RadioItemVariant).map((function(e){return t.RadioItemVariant[e]})),a=(function(e){function a(){var t=null!==e&&e.apply(this,arguments)||this;return t._handleClick=function(){t._isSelected()||(i.findDOMNode(t.refs.input).focus(),"function"==typeof t.props._radioGroupData.onSelect&&t.props._radioGroupData.onSelect(t.props.value))},t._handleChange=function(){"function"==typeof t.props._radioGroupData.onSelect&&t.props._radioGroupData.onSelect(t.props.value)},t._getId=function(){return t.props._radioGroupData.name+"_"+t.props.value},t._isSelected=function(){return t.props._radioGroupData.radioGroupValue===t.props.value},t}return n.__extends(a,e),a.prototype.render=function(){var e=this.props._radioGroupData,n=["c-radio-wrapper",this.props.className],i={"c-radio":!0,"c-radio--selected":this._isSelected()};return Array.from(s).includes(e.variant)&&e.variant!==t.RadioItemVariant.Normal&&(i["c-radio--"+e.variant]=!0),r.default.createElement("div",{className:o.default(n),onClick:this._handleClick},r.default.createElement("input",{id:this._getId(),ref:"input",type:"radio",name:e.name,value:this.props.value,checked:this._isSelected(),onChange:this._handleChange}),r.default.createElement("div",{className:o.default(i)},r.default.createElement("div",{className:"c-radio__inner"})),r.default.createElement("label",{className:"c-radio-content",htmlFor:this._getId()},this.props.children))},a.displayName="RadioItem",a})(r.default.Component);t.RadioItem=a;var c=(function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._onRadioItemSelect=function(e){null!=t.props.valueLink&&t.props.valueLink.requestChange(e)},t}return n.__extends(i,e),i.prototype.render=function(){var e=this,t=this.props.name||"radio-"+Math.floor(1e9*Math.random()),n=r.default.Children.map(this.props.children,(function(n){return"RadioItem"===n.type.displayName?r.default.cloneElement(n,{_radioGroupData:{variant:e.props.variant,name:t,radioGroupValue:e.props.valueLink.value,onSelect:e._onRadioItemSelect}}):n})),i={"c-radio-group__legend":!0,"ax-visually-hidden":!this.props.displayLegend},s=["c-radio-group","align-"+this.props.align,this.props.className];return r.default.createElement("fieldset",{className:o.default(s)},r.default.createElement("legend",{className:o.default(i)},this.props.legend),n)},i.displayName="RadioGroup",i.defaultProps={className:"null",type:t.RadioItemVariant.Normal,align:"middle",displayLegend:!1},i})(r.default.Component);t.RadioGroup=c})),define("modules/clean/sharing/wizard/share_a_folder_wizard_modal",["require","exports","tslib","react","react-dom-factories","modules/clean/react/css","modules/clean/viewer","modules/core/i18n","spectrum/modal","spectrum/radio_button","spectrum/label"],(function(e,t,n,o,r,i,s,a,c,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importStar(r);var d=(a=n.__importStar(a)).i18n_default_project("sharing")._,_=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={option:"new-folder",open:!0},t.onSubmit=function(){return t.props.onSubmit(t.state.option)},t.onModalReady=function(){t.focusOnRadioButton()},t.closeModal=function(){t.setState({open:!1})},t.getTitle=function(e){switch(e){case"work":return d("Share a folder from your %(team_name)s Dropbox").format({team_name:s.Viewer.get_viewer().team_name});case"personal":return d("Share a folder from your personal Dropbox")}},t.renderSpectrumContent=function(){return o.default.createElement("form",{className:"shared-folder-wizard__contents"},t._renderHeader(),t.renderSpectrumRadio())},t._renderHeader=function(){return r.div({className:"shared-folder-wizard__header u-mar-bottom-s"},d("What would you like to do?"))},t.renderSpectrumRadio=function(){return o.default.createElement("div",{className:"shared-folder-wizard__radio-group"},t.renderRadioOptionWithLabel("new-folder",d("I’d like to create and share a new folder")),t.renderRadioOptionWithLabel("existing-folder",d("I’d like to share an existing folder")))},t.renderRadioOptionWithLabel=function(e,n){return o.default.createElement("div",{className:"shared-folder-wizard__audience-input u-mar-bottom-xs"},o.default.createElement(u.Label,{htmlFor:e,key:e+"-label"},o.default.createElement(l.RadioButton,{"aria-checked":t.state.option===e,checked:t.state.option===e,onChange:t.updateOption(e),value:e,id:e}),o.default.createElement("div",{className:e+"_title u-l-ib u-pad-left-xs"},n)))},t.updateOption=function(e){return function(){return t._handleChange(e)}},t._handleChange=function(e){return t.setState({option:e})},t._renderButtons=function(){return r.div({className:"u-mar-top-m clearfix"},r.div({className:"u-l-fr"},r.button({className:"c-btn c-btn--primary",onClick:function(e){return"function"==typeof e.nativeEvent.preventDefault&&e.nativeEvent.preventDefault(),t.props.onSubmit(t.state.option)}},d("Next"))))},t}return n.__extends(t,e),t.prototype.render=function(){return o.default.createElement(c.UtilityModal,{open:this.state.open,primaryAction:d("Next"),onPrimaryAction:this.onSubmit,displayCloseButton:!0,overlayClassName:"shared-folder-wizard__overlay",overlayClickClose:!0,onRequestClose:this.closeModal,ariaLabel:d("New Shared Folder Modal"),className:"shared-folder-wizard",title:this.getTitle(this.props.user.role),onReady:this.onModalReady},this.renderSpectrumContent())},t.prototype.focusOnRadioButton=function(){var e=document.querySelector("input#new-folder.mc-radio");e&&e.focus()},t.displayName="ShareAFolderWizardModalNoCss",t})(o.default.Component);t.ShareAFolderWizardModal=i.requireCssWithComponent(_,["/static/css/sharing/wizard_modals-vflWzR2tE.css","/static/css/modal-vflQiuIrB.css"])})),define("modules/clean/sharing/wizard/share_existing_folder_wizard_modal",["require","exports","tslib","react","react-dom-factories","modules/clean/react/css","modules/clean/react/modal","modules/clean/react/tree_view","modules/clean/viewer","modules/core/i18n","spectrum/modal","spectrum/button"],(function(e,t,n,o,r,i,s,a,c,l,u,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importStar(r);var _=(l=n.__importStar(l)).i18n_default_project("sharing")._,m=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={open:!0},t.getTitle=function(e){switch(e){case"work":return _("Choose a folder from your %(team_name)s Dropbox").format({team_name:c.Viewer.get_viewer().team_name});case"personal":return _("Choose a folder from your personal Dropbox")}},t.onModalCloseClick=function(){t.setState({open:!1})},t._renderContent=function(){return r.form({className:"existing-shared-folder-wizard__contents",onSubmit:function(){return t.props.onSubmit(t.state.folderPath,t._setError)}},t._renderError(),t._renderTreeView(),t._renderButtons())},t.renderSpectrumContent=function(){return o.default.createElement("form",{className:"existing-shared-folder-wizard__contents"},t._renderError(),t._renderTreeView())},t._renderError=function(){if(null!=t.state.folderPath&&(null!=t.state.errorMsg?t.state.errorMsg.length:void 0)>0)return r.div({className:"text-input-error-wrapper"},r.div({className:"text-input-error-text u-font-danger"},t.state.errorMsg))},t._renderTreeView=function(){return o.default.createElement(a.UserFolderTreeView,{user:t.props.user,is_paired:!1,onFolderSelected:t._setFolderPath,treeRootName:c.Viewer.get_role_title(t.props.user)||_("Dropbox")})},t._renderButtons=function(){return r.div({className:"u-mar-top-m clearfix"},r.div({className:"u-l-fr"},r.button({className:"c-btn c-btn--primary",disabled:!t._isValid(),onClick:function(e){return"function"==typeof e.nativeEvent.preventDefault&&e.nativeEvent.preventDefault(),t.props.onSubmit(t.state.folderPath,t._setError)}},_("Next"))),r.div({className:"u-l-fl"},r.button({className:"button-as-link",style:{lineHeight:"32px"},onClick:function(e){return"function"==typeof e.nativeEvent.preventDefault&&e.nativeEvent.preventDefault(),s.Modal.close(),"function"==typeof t.props.onBack?t.props.onBack():void 0}},_("Back"))))},t.renderSpectrumPrimaryButton=function(){return o.default.createElement("div",{className:"u-l-fr"},o.default.createElement(d.Button,{variant:"primary",disabled:!t._isValid(),onClick:t.onSubmit},_("Next")))},t.onSubmit=function(e){return"function"==typeof e.nativeEvent.preventDefault&&e.nativeEvent.preventDefault(),t.props.onSubmit(t.state.folderPath,t._setError)},t.onBack=function(){return s.Modal.close(),t.props.onBack&&t.props.onBack()},t._setFolderPath=function(e){return t.setState({folderPath:e,errorMsg:void 0})},t._setError=function(e){return t.setState({errorMsg:p(null!=e?e.path:void 0,(function(e){return e.message_text}))})},t._isValid=function(){return null!=t.state.folderPath&&null==t.state.errorMsg},t}return n.__extends(t,e),t.prototype.render=function(){return o.default.createElement(u.UtilityModal,{primaryAction:this.renderSpectrumPrimaryButton,link:_("Back"),onLink:this.onBack,onRequestClose:this.onModalCloseClick,overlayClassName:"existing-shared-folder-wizard__overlay",overlayClickClose:!0,ariaLabel:_("Shared Existing Folder Modal"),className:"existing-shared-folder-wizard",open:this.state.open,displayCloseButton:!0,title:this.getTitle(this.props.user.role)},this.renderSpectrumContent())},t.displayName="ShareExistingFolderWizardModalNoCss",t})(o.default.Component);function p(e,t){return null!=e?t(e):void 0}t.ShareExistingFolderWizardModal=i.requireCssWithComponent(m,["/static/css/sharing/wizard_modals-vflWzR2tE.css"])})),define("modules/clean/sharing/wizard/wizard_modals",["require","exports","tslib","react","modules/clean/css","modules/clean/account/email","modules/clean/account/email_verify_reasons","modules/clean/analytics","modules/clean/legacy_pyxl_controllers/ajax_form","modules/clean/react/modal","modules/clean/sharing/api","modules/clean/sharing/constants","modules/clean/sharing/share_modal_util","modules/clean/sharing/ui_notifications_util","modules/clean/sharing/wizard/share_a_folder_wizard_modal","modules/clean/sharing/wizard/share_existing_folder_wizard_modal","modules/clean/sharing/async_share_modal_util","modules/clean/web_user_action_events","modules/clean/web_user_action_logger"],(function(e,t,n,o,r,i,s,a,c,l,u,d,_,m,p,g,h,f,E){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importDefault(o),r=n.__importStar(r),s=n.__importStar(s),c=n.__importDefault(c);var S=function(e,t,n,o){return new u.SharingApi(e).validate_shareable_existing_sf_path(t,(function(){return h.asyncShowShareModal(e,{fqPath:t,isFolder:!0,exists:!0,origin:d.SHARE_ACTION_ORIGIN_TYPE.WIZARD,modalSessionId:null!=o?o:void 0})}),(function(e){var t=c.default.extract_errors(e.responseText);return!1===t?void 0:"string"==typeof t?m.sharingNotificationError(t):"function"==typeof n?n(t):void 0})),Promise.resolve(!0)};t.shareExistingFolder=S;function y(e){if(i.EmailVerification.get_for_user(e).verified_or_show(s.SHARE_FOLDER)){r.require_css("/static/css/scooter/scooter-scoped-vflYtdnTb.css");var t=_.generateModalSessionId();return a.SharingExperimentsLogger.log(e.id,"SIMPLIFIED_WIZARD_UI::BEGIN_SHARE_A_FOLDER_WIZARD",{modalSessionId:t}),e.is_cdm_member?h.asyncShowNewFolderShareModal(e,t,e.cdm_tmf_path):(function(e,t){l.Modal.showInstance(o.default.createElement(p.ShareAFolderWizardModal,{user:e,onSubmit:function(n){null!=t&&a.SharingExperimentsLogger.log(e.id,"SIMPLIFIED_WIZARD_UI::SUBMIT_SHARE_A_FOLDER_WIZARD",{target:n,modalSessionId:t});var r=n.slice(0,n.indexOf("-"));return E.WebUserActionLog.log(e.id,f.WebUserActionLogEvent.SELECT_FOLDER_TYPE,{folder_type:r}),"new-folder"===n?h.asyncShowNewFolderShareModal(e,t,e.cdm_tmf_path):"existing-folder"===n?(function(e,t,n){return null!=n&&a.SharingExperimentsLogger.log(e.id,"SIMPLIFIED_WIZARD_UI::BEGIN_SHARE_EXISTING_FOLDER_WIZARD",{modalSessionId:n}),l.Modal.showInstance(o.default.createElement(g.ShareExistingFolderWizardModal,{user:e,onBack:t,onSubmit:function(t,o){return null!=n&&a.SharingExperimentsLogger.log(e.id,"SIMPLIFIED_WIZARD_UI::SUBMIT_SHARE_EXISTING_FOLDER_WIZARD",{modalSessionId:n}),S(e,t,(function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return null!=n&&a.SharingExperimentsLogger.log(e.id,"SIMPLIFIED_WIZARD_UI::SUBMIT_SHARE_EXISTING_FOLDER_WIZARD_ERROR",{modalSessionId:n}),o.apply(void 0,Array.from(t||[]))}))}}))})(e,(function(){return y(e)}),t):void 0}}))})(e,t),t}}t.showShareAFolderWizardModal=y})),define("modules/clean/react/home/experiments/recommended_members/default_props",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHomeGrowthExperiments=function(){return{expSubgrowthBizTeamsRecMembersHome:"OFF",expSubgrowthBizTeamsSuggestionsOnHome:"OFF",numRemainingLicenses:0,recommendedMembers:[],phoneInputData:null}}})),define("modules/clean/react/home/experiments/surface_existing_teams/default_props",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHomeSurfaceExistingTeamsProps=function(){return{showHomeSurfaceExistingTeamsExperiment:!1,joinableTeams:[],teamPendingApproval:void 0}}})),define("modules/clean/react/home/experiments/team_success/default_props",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHomeTeammateSuggestionsProps=function(){return{suggestedMembers:[]}}}));
//# sourceMappingURL=pkg-home-post-tti.min.js-vflHG72d9.map