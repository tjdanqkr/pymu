define(["require","exports","tslib","modules/clean/api_v2/default_team_client","modules/clean/viewer","modules/core/browser","modules/clean/api_v2/types"],(function(e,r,t,n,o,i,a){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),i=t.__importStar(i);var s=o.Viewer.get_viewer().get_user_by_role("work"),c=new n.DefaultTeamApiV2Client(s).ns("federation");r.CommonErrorTags={UserNotLoggedIn:"user_not_logged_in",NoPermission:"no_permission"},r.redirectOnTags=function(e,r){return void 0===r&&(r="/"),function(t){var n=t.error&&t.error[".tag"];throw n&&e.filter((function(e){return e===n})).length>0&&i.redirect(r),t}},r.redirectNotLoggedOrNoPermission=function(){return r.redirectOnTags([r.CommonErrorTags.UserNotLoggedIn,r.CommonErrorTags.NoPermission])},r.redirectNotLoggedIn=function(){return r.redirectOnTags([r.CommonErrorTags.UserNotLoggedIn])};var d=function(e){var r;return(r={})[a.ApiV2HeaderNames.DropboxTeamAuthorization]=JSON.stringify({auth_role:String(a.TeamAuthRequestRole.FederationAdminRole),auth_action_type:String(a.TeamAuthRequestActionType.OnBehalfOfAction)}),r[a.ApiV2HeaderNames.DropboxTeamId]=e,r};r.API={getInstancesPageData:function(){return c.rpc("get_instances_page_data",void 0,{}).catch(r.redirectNotLoggedOrNoPermission())},getSingleInstancesData:function(e){return c.rpc("get_single_instance_summary",void 0,{headers:d(e)}).catch(r.redirectNotLoggedIn())},listInstances:function(e){return void 0===e&&(e=!1),c.rpc("list_instances",{include_federation:e},{}).catch(r.redirectNotLoggedOrNoPermission())}}}));
//# sourceMappingURL=federation_api.min.js-vflnYNn1Z.map